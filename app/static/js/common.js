/*!
 * jQuery JavaScript Library v3.1.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-09-22T22:30Z
 */
(function(global,factory){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}
return factory(w);};}else{factory(global);}
})(typeof window!=="undefined"?window:this,function(window,noGlobal){"use strict";var arr=[];var document=window.document;var getProto=Object.getPrototypeOf;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};function DOMEval(code,doc){doc=doc||document;var script=doc.createElement("script");script.text=code;doc.head.appendChild(script).parentNode.removeChild(script);}
var
version="3.1.1",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g,fcamelCase=function(all,letter){return letter.toUpperCase();};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function(){return slice.call(this);},get:function(num){if(num==null){return slice.call(this);}
return num<0?this[num+this.length]:this[num];},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(i===length){target=this;i--;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window;},isNumeric:function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj));},isPlainObject:function(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false;}
proto=getProto(obj);if(!proto){return true;}
Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString;},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},type:function(obj){if(obj==null){return obj+"";}
return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;},globalEval:function(code){DOMEval(code);},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}
return obj;},trim:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}
return ret;},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i);},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j];}
first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}
return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}
}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}
return concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}
jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false;}
return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1)in obj;}
var Sizzle=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}
return 0;},hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i;}}
return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+
"*([*^$|!~]?=)"+whitespace+
"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+
"*\\]",pseudos=":("+identifier+")(?:\\(("+
"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+
"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+
".*"+
")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+
"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+
"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"\uFFFD";}
return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ";}
return"\\"+ch;},unloadHandler=function(){setDocument();},disabledAncestor=addCombinator(function(elem){return elem.disabled===true&&("form"in elem||"label"in elem);},{dir:"parentNode",next:"legend"});try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}
target.length=j-1;}};}
function Sizzle(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}
if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}
context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){if((elem=context.getElementById(m))){if(elem.id===m){results.push(elem);return results;}}else{return results;}
}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}
}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}
if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector;}else if(context.nodeName.toLowerCase()!=="object"){if((nid=context.getAttribute("id"))){nid=nid.replace(rcssescape,fcssescape);}else{context.setAttribute("id",(nid=expando));}
groups=tokenize(selector);i=groups.length;while(i--){groups[i]="#"+nid+" "+toSelector(groups[i]);}
newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;}
if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id");}}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key+" "]=value);}
return cache;}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el);}catch(e){return false;}finally{if(el.parentNode){el.parentNode.removeChild(el);}
el=null;}}
function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}
function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&a.sourceIndex-b.sourceIndex;if(diff){return diff;}
if(cur){while((cur=cur.nextSibling)){if(cur===b){return-1;}}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled;}else{return elem.disabled===disabled;}}
return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&disabledAncestor(elem)===disabled;}
return elem.disabled===disabled;}else if("label"in elem){return elem.disabled===disabled;}
return false;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}
support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if(preferredDoc!==document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){if(subWindow.addEventListener){subWindow.addEventListener("unload",unloadHandler,false);}else if(subWindow.attachEvent){subWindow.attachEvent("onunload",unloadHandler);}}
support.attributes=assert(function(el){el.className="i";return!el.getAttribute("className");});support.getElementsByTagName=assert(function(el){el.appendChild(document.createComment(""));return!el.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(el){docElem.appendChild(el).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[];}};}else{Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}
elems=context.getElementsByName(id);i=0;while((elem=elems[i++])){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem];}}}
return[];}};}
Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(document.querySelectorAll))){assert(function(el){docElem.appendChild(el).innerHTML="<a id='"+expando+"'></a>"+
"<select id='"+expando+"-\r\\' msallowcapture=''>"+
"<option selected=''></option></select>";if(el.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}
if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}
if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}
if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}
if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}});assert(function(el){el.innerHTML="<a href='' disabled='disabled'></a>"+
"<select disabled='disabled'><option/></select>";var input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");if(el.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}
if(el.querySelectorAll(":enabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}
docElem.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled");}
el.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(el){support.disconnectedMatch=matches.call(el,"*");matches.call(el,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}
var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}
compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1;}
if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}
return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}
return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}
var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.escape=function(sel){return(sel+"").replace(rcssescape,fcssescape);};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++])){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}
if(diff===false){while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}
if(node===elem){break;}}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":createDisabledPseudo(false),"disabled":createDisabledPseudo(true),"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push((tokens=[]));}
matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}
return selector;}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}
return false;}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if(skip&&skip===elem.nodeName.toLowerCase()){elem=elem[dir]||elem;}else if((oldCache=uniqueCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2]);}else{uniqueCache[key]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true;}}}}}
return false;};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}
}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context===document||context||outermost;}
for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML;}
while((matcher=elementMatchers[j++])){if(matcher(elem,context||document,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,match ){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}
i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}
return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}
selector=selector.slice(tokens.shift().value.length);}
i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}
break;}}}}
(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1;});if(!assert(function(el){el.innerHTML="<a href='#'></a>";return el.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}
if(!support.attributes||!assert(function(el){el.innerHTML="<input/>";el.firstChild.setAttribute("value","");return el.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}
if(!assert(function(el){return el.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}
return Sizzle;})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;jQuery.escapeSelector=Sizzle.escape;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}
matched.push(elem);}}
return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}
return matched;};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=(/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i);var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}
if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not;});}
if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>-1)!==not;});}
if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not);}
qualifier=jQuery.filter(qualifier,elements);return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>-1)!==not&&elem.nodeType===1;});}
jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}
if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[];}
return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}
ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}
return len>1?jQuery.uniqueSort(ret):ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}
root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}
return this;}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1;}
return this;}
}else if(!context||context.jquery){return(context||root).find(selector);}else{return this.constructor(context).find(selector);}
}else if(selector.nodeType){this[0]=selector;this.length=1;return this;}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}
return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}}
return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}
if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}
return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}
return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}
if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}
if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}
if(rparentsprev.test(name)){matched.reverse();}}
return this.pushStack(matched);};});var rnothtmlwhite=(/[^\x20\t\r\n\f]+/g);function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var
firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}
if(!options.memory){memory=false;}
firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}
(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}
return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0;},empty:function(){if(list){list=[];}
return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return!list;},lock:function(){locked=queue=[];if(!memory&&!firing){list=memory="";}
return this;},locked:function(){return!!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};function Identity(v){return v;}
function Thrower(ex){throw ex;}
function adoptValue(value,resolve,reject){var method;try{if(value&&jQuery.isFunction((method=value.promise))){method.call(value).done(resolve).fail(reject);}else if(value&&jQuery.isFunction((method=value.then))){method.call(value,resolve,reject);}else{resolve.call(undefined,value);}
}catch(value){reject.call(undefined,value);}}
jQuery.extend({Deferred:function(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},"catch":function(fn){return promise.then(null,fn);},pipe:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments);}});});fns=null;}).promise();},then:function(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function(){var returned,then;if(depth<maxDepth){return;}
returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution");}
then=returned&&(typeof returned==="object"||typeof returned==="function")&&returned.then;if(jQuery.isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special));}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith));}
}else{if(handler!==Identity){that=undefined;args=[returned];}
(special||deferred.resolveWith)(that,args);}},process=special?mightThrow:function(){try{mightThrow();}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.stackTrace);}
if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e];}
deferred.rejectWith(that,args);}}};if(depth){process();}else{if(jQuery.Deferred.getStackHook){process.stackTrace=jQuery.Deferred.getStackHook();}
window.setTimeout(process);}};}
return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,jQuery.isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,jQuery.isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,jQuery.isFunction(onRejected)?onRejected:Thrower));}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[3-i][2].disable,tuples[0][2].lock);}
list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(singleValue){var
remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=slice.call(arguments),master=jQuery.Deferred(),updateFunc=function(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?slice.call(arguments):value;if(!(--remaining)){master.resolveWith(resolveContexts,resolveValues);}};};if(remaining<=1){adoptValue(singleValue,master.done(updateFunc(i)).resolve,master.reject);if(master.state()==="pending"||jQuery.isFunction(resolveValues[i]&&resolveValues[i].then)){return master.then();}}
while(i--){adoptValue(resolveValues[i],updateFunc(i),master.reject);}
return master.promise();}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,stack){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,stack);}};jQuery.readyException=function(error){window.setTimeout(function(){throw error;});};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn)
.catch(function(error){jQuery.readyException(error);});return this;};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}
if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}
var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}
}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true;}
if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}
if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}
if(chainable){return elems;}
if(bulk){return fn.call(elems);}
return len?fn(elems[0],key):emptyGet;};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType);};function Data(){this.expando=jQuery.expando+Data.uid++;}
Data.uid=1;Data.prototype={cache:function(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}
return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[jQuery.camelCase(data)]=value;}else{for(prop in data){cache[jQuery.camelCase(prop)]=data[prop];}}
return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][jQuery.camelCase(key)];},access:function(owner,key,value){if(key===undefined||((key&&typeof key==="string")&&value===undefined)){return this.get(owner,key);}
this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return;}
if(key!==undefined){if(jQuery.isArray(key)){key=key.map(jQuery.camelCase);}else{key=jQuery.camelCase(key);key=key in cache?[key]:(key.match(rnothtmlwhite)||[]);}
i=key.length;while(i--){delete cache[key[i]];}}
if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true;}
if(data==="false"){return false;}
if(data==="null"){return null;}
if(data===+data+""){return+data;}
if(rbrace.test(data)){return JSON.parse(data);}
return data;}
function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data);}catch(e){}
dataUser.set(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}
dataPriv.set(elem,"hasDataAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}
return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data;}
data=dataAttr(elem,key);if(data!==undefined){return data;}
return;}
this.each(function(){dataUser.set(this,key,value);});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHiddenWithinTree=function(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&jQuery.contains(elem.ownerDocument,elem)&&jQuery.css(elem,"display")==="none";};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}
return ret;};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit);}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations);}
if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}
return adjusted;}
var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display;}
temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block";}
defaultDisplayMap[nodeName]=display;return display;}
function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display="";}}
if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem);}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display);}}}
for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index];}}
return elements;}
jQuery.fn.extend({show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}
return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});var rcheckableType=(/^(?:checkbox|radio)$/i);var rtagName=(/<([a-z][^\/\0>\x20\t\r\n\f]+)/i);var rscriptType=(/^$|\/(?:java|ecma)script/i);var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*");}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*");}else{ret=[];}
if(tag===undefined||tag&&jQuery.nodeName(context,tag)){return jQuery.merge([context],ret);}
return ret;}
function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}
var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}
jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}
fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem);}
continue;}
contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}
if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}
return fragment;}
(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var documentElement=document.documentElement;var
rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}
function returnFalse(){return false;}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}
function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){on(elem,type,selector,data,types[type],one);}
return elem;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return elem;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}
jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(selector){jQuery.find.matchesSelector(documentElement,selector);}
if(!handler.guid){handler.guid=jQuery.guid++;}
if(!(events=elemData.events)){events=elemData.events={};}
if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}
types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}
types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(nativeEvent){var event=jQuery.event.fix(nativeEvent);var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i];}
event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},handlers:function(event,handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;}
if(matchedSelectors[sel]){matchedHandlers.push(handleObj);}}
if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers});}}}}
cur=this;if(delegateCount<handlers.length){handlerQueue.push({elem:cur,handlers:handlers.slice(delegateCount)});}
return handlerQueue;},addProp:function(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:jQuery.isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent);}}:function(){if(this.originalEvent){return this.originalEvent[name];}},set:function(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value});}});},fix:function(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent);},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false;}},_default:function(event){return jQuery.nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=(src.target&&src.target.nodeType===3)?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation();}
this.stopPropagation();}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(event){var button=event.button;if(event.which==null&&rkeyEvent.test(event.type)){return event.charCode!=null?event.charCode:event.keyCode;}
if(!event.which&&button!==undefined&&rmouseEvent.test(event.type)){if(button&1){return 1;}
if(button&2){return 3;}
if(button&4){return 2;}
return 0;}
return event.which;}},jQuery.event.addProp);jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var 
rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){if(jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return elem.getElementsByTagName("tbody")[0]||elem;}
return elem;}
function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1];}else{elem.removeAttribute("type");}
return elem;}
function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}
if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}
if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}
function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html());}
domManip(self,args,callback,ignored);});}
if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}
callback.call(collection[i],node,i);}
if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else{DOMEval(node.textContent.replace(rcleanScript,""),doc);}}}}}}
return collection;}
function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}
if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"));}
node.parentNode.removeChild(node);}}
return elem;}
jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>");},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if((data=elem[dataPriv.expando])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
elem[dataPriv.expando]=undefined;}
if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}
},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}
return this.pushStack(ret);};});var rmargin=(/^margin/);var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}
return view.getComputedStyle(elem);};(function(){function computeStyleTests(){if(!div){return;}
div.style.cssText="box-sizing:border-box;"+
"position:relative;display:block;"+
"margin:auto;border:1px;padding:1px;"+
"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container);div=null;}
var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}
div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+
"padding:0;margin-top:1px;position:absolute";container.appendChild(div);jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal;},boxSizingReliable:function(){computeStyleTests();return boxSizingReliableVal;},pixelMarginRight:function(){computeStyleTests();return pixelMarginRightVal;},reliableMarginLeft:function(){computeStyleTests();return reliableMarginLeftVal;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret!==undefined?ret+"":ret;}
function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return;}
return(this.get=hookFn).apply(this,arguments);}};}
var
rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name;}
var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}
function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i,val=0;if(extra===(isBorderBox?"border":"content")){i=4;}else{i=name==="width"?1:0;}
for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles);}
if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}
if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}
return val;}
function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=true,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(elem.getClientRects().length){val=elem.getBoundingClientRect()[name];}
if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px";}
jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}
if(value==null||value!==value){return;}
if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}
if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value;}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name,styles);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}
return val;}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);}):getWidthOrHeight(elem,name,extra);}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name);}
return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-
swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}
return map;}
return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var
fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function raf(){if(timerId){window.requestAnimationFrame(raf);jQuery.fx.tick();}}
function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return(fxNow=jQuery.now());}
function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween;}}}
function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}
orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}}
propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return;}
if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display");}
display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay;}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem]);}}
if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay;});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display;}}
style.display="inline-block";}}}
if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}
propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay});}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){showHide([elem],true);}
anim.done(function(){if(!hidden){showHide([elem]);}
dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});}
propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0;}}}}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}
var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}
stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result);}
return result;}}
jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnothtmlwhite);}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(jQuery.fx.off||document.hidden){opt.duration=0;}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration];}else{opt.duration=jQuery.fx.speeds._default;}}}
if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show()
.end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}
return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}
for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}
for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}
delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start();}else{jQuery.timers.pop();}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.requestAnimationFrame?window.requestAnimationFrame(raf):window.setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.stop=function(){if(window.cancelAnimationFrame){window.cancelAnimationFrame(timerId);}else{window.clearInterval(timerId);}
timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}
if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
elem.setAttribute(name,value+"");return value;}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}}},removeAttr:function(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}
return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle;}
return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
return(elem[name]=value);}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10);}
if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0;}
return-1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}
return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ");}
function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}
jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}
if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}
finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}
if(!arguments.length){return this.attr("class","");}
if(typeof value==="string"&&value){classes=value.match(rnothtmlwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+stripAndCollapse(curValue)+" ");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ");}}
finalValue=stripAndCollapse(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value);}
if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}
return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnothtmlwhite)||[];while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}
}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}
if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while((elem=this[i++])){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true;}}
return false;}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"");}
return ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem));}},select:{get:function(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max;}else{i=one?index:0;}
for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true;}
}
if(!optionSet){elem.selectedIndex=-1;}
return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1);}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}
if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}
data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}
if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}
for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}
if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}
i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}
return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}
dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}
var location=window.location;var nonce=jQuery.now();var rquery=(/\?/);jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null;}
try{xml=(new window.DOMParser()).parseFromString(data,"text/xml");}catch(e){xml=undefined;}
if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;};var
rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,valueOrFunction){var value=jQuery.isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+
encodeURIComponent(value==null?"":value);};if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();if(val==null){return null;}
if(jQuery.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};});}
return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});var
r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}
return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}
return target;}
function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}
if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}
prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}
break;}}}}
if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}
return{state:"success",data:response};}
jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match==null?null:match;},getAllResponseHeaders:function(){return completed?responseHeadersString:null;},setRequestHeader:function(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value;}
return this;},overrideMimeType:function(type){if(completed==null){s.mimeType=type;}
return this;},statusCode:function(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status]);}else{for(code in map){statusCode[code]=[statusCode[code],map[code]];}}}
return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}
done(0,finalText);return this;}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR;}
fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data;}
if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+(nonce++)+uncached;}
s.url=cacheURL+uncached;}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+");}
if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}
if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+
(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort();}
strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(completed){return jqXHR;}
if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{completed=false;transport.send(requestHeaders,done);}catch(e){if(completed){throw e;}
done(-1,e);}}
function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return;}
completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}
modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}
if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,"throws":true});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(this[0]){if(jQuery.isFunction(html)){html=html.call(this[0]);}
wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes);});return this;}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem);};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}
if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}
if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
for(i in headers){xhr.setRequestHeader(i,headers[i]);}
callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}
callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false;}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+
"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}
if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});support.createHTMLDocument=(function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2;})();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[];}
if(typeof context==="boolean"){keepScripts=context;context=false;}
var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base);}else{context=document;}}
parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}
parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}
return jQuery.merge([],parsed.childNodes);};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}
return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;}
jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}
curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,win,rect,doc,elem=this[0];if(!elem){return;}
if(!elem.getClientRects().length){return{top:0,left:0};}
rect=elem.getBoundingClientRect();if(rect.width||rect.height){doc=elem.ownerDocument;win=getWindow(doc);docElem=doc.documentElement;return{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft};}
return rect;},position:function(){if(!this[0]){return;}
var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset();}
parentOffset={top:parentOffset.top+jQuery.css(offsetParent[0],"borderTopWidth",true),left:parentOffset.left+jQuery.css(offsetParent[0],"borderLeftWidth",true)};}
return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}
return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method];}
if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable);};});});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);}});jQuery.parseJSON=JSON.parse;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}
var
_jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;};if(!noGlobal){window.jQuery=window.$=jQuery;}
return jQuery;});/*!
 * Materialize v0.98.0 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
if(typeof(jQuery)==='undefined'){var jQuery;if(typeof(require)==='function'){jQuery=$=require('jquery');}else{jQuery=$;}};jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});;jQuery.extend(jQuery.easing,{easeInOutMaterial:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return c/4*((t-=2)*t*t+2)+b;}});;/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
/*! Note that this has been modified by Materialize to confirm that Velocity is not already being imported. */
jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(e){function t(e){var t=e.length,a=r.type(e);return"function"===a||r.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||o.call(e,t)},r.each=function(e,r,a){var n,o=0,i=e.length,s=t(e);if(a){if(s)for(;i>o&&(n=r.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=r.apply(e[o],a),n===!1)break}else if(s)for(;i>o&&(n=r.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=r.call(e[o],o,e[o]),n===!1)break;return e},r.data=function(e,t,n){if(void 0===n){var o=e[r.expando],i=o&&a[o];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var o=e[r.expando]||(e[r.expando]=++r.uuid);return a[o]=a[o]||{},a[o][t]=n,n}},r.removeData=function(e,t){var n=e[r.expando],o=n&&a[n];o&&r.each(t,function(e,t){delete o[t]})},r.extend=function(){var e,t,a,n,o,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(n in o)e=s[n],a=o[n],s!==a&&(c&&a&&(r.isPlainObject(a)||(t=r.isArray(a)))?(t?(t=!1,i=e&&r.isArray(e)?e:[]):i=e&&r.isPlainObject(e)?e:{},s[n]=r.extend(c,i,a)):void 0!==a&&(s[n]=a));return s},r.queue=function(e,a,n){function o(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,n=e.length;r>a;)e[n++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[n++]=t[a++];return e.length=n,e}(a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var i=r.data(e,a);return n?(!i||r.isArray(n)?i=r.data(e,a,o(n)):i.push(n),i):i||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,a){t=t||"fx";var n=r.queue(a,t),o=n.shift();"inprogress"===o&&(o=n.shift()),o&&("fx"===t&&n.unshift("inprogress"),o.call(a,function(){r.dequeue(a,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),a=this.offset(),n=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,e.style&&(n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0),{top:a.top-n.top,left:a.left-n.left}}};var a={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var n={},o=n.hasOwnProperty,i=n.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)n["[object "+s[l]+"]"]=s[l].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,a){function n(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var n=e[t];n&&a.push(n)}return a}function o(e){return m.isWrapped(e)?e=[].slice.call(e):m.isNode(e)&&(e=[e]),e}function i(e){var t=f.data(e,"velocity");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,n){function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((o(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*o(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var n=0;m>n;++n){var o=u(r,e,a);if(0===o)return r;var i=l(r,e,a)-t;r-=i/o}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,n){var o,i,s=0;do i=r+(n-r)/2,o=l(i,e,a)-t,o>0?n=i:r=i;while(Math.abs(o)>h&&++s<v);return i}function d(t){for(var r=0,n=1,o=b-1;n!=o&&w[n]<=t;++n)r+=x;--n;var i=(t-w[n])/(w[n+1]-w[n]),s=r+i*x,l=u(s,e,a);return l>=y?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=n)&&p()}var m=4,y=.001,h=1e-7,v=10,b=11,x=1/(b-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if("number"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===n?t:0===t?0:1===t?1:l(d(t),r,n)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:n}]};var T="generateBezier("+[e,r,a,n]+")";return C.toString=function(){return T},C}function u(e,t){var r=e;return m.isString(e)?b.Easings[e]||(r=!1):r=m.isArray(e)&&1===e.length?s.apply(null,e):m.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):m.isArray(e)&&4===e.length?l.apply(null,e):!1,r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:v),r}function c(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=n(b.State.calls));for(var o=0;r>o;o++)if(b.State.calls[o]){var s=b.State.calls[o],l=s[0],u=s[2],d=s[3],g=!!d,y=null;d||(d=b.State.calls[o][3]=t-16);for(var h=Math.min((t-d)/u.duration,1),v=0,x=l.length;x>v;v++){var P=l[v],V=P.element;if(i(V)){var C=!1;if(u.display!==a&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];f.each(T,function(e,t){S.setPropertyValue(V,"display",t)})}S.setPropertyValue(V,"display",u.display)}u.visibility!==a&&"hidden"!==u.visibility&&S.setPropertyValue(V,"visibility",u.visibility);for(var k in P)if("element"!==k){var A,F=P[k],j=m.isString(F.easing)?b.Easings[F.easing]:F.easing;if(1===h)A=F.endValue;else{var E=F.endValue-F.startValue;if(A=F.startValue+E*j(h,u,E),!g&&A===F.currentValue)continue}if(F.currentValue=A,"tween"===k)y=A;else{if(S.Hooks.registered[k]){var H=S.Hooks.getRoot(k),N=i(V).rootPropertyValueCache[H];N&&(F.rootPropertyValue=N)}var L=S.setPropertyValue(V,k,F.currentValue+(0===parseFloat(A)?"":F.unitType),F.rootPropertyValue,F.scrollData);S.Hooks.registered[k]&&(i(V).rootPropertyValueCache[H]=S.Normalizations.registered[H]?S.Normalizations.registered[H]("extract",null,L[1]):L[1]),"transform"===L[0]&&(C=!0)}}u.mobileHA&&i(V).transformCache.translate3d===a&&(i(V).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&S.flushTransformCache(V)}}u.display!==a&&"none"!==u.display&&(b.State.calls[o][2].display=!1),u.visibility!==a&&"hidden"!==u.visibility&&(b.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],h,Math.max(0,d+u.duration-t),d,y),1===h&&p(o)}}b.State.isTicking&&w(c)}function p(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],n=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||o.loop||("none"===o.display&&S.setPropertyValue(p,"display",o.display),"hidden"===o.visibility&&S.setPropertyValue(p,"visibility",o.visibility)),o.loop!==!0&&(f.queue(p)[1]===a||!/\.velocityQueueEntryFlag/i.test(f.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var d=!1;f.each(S.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,n=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp("^\\("+r+"[^.]").test(n)&&(d=!0,delete i(p).transformCache[t])}),o.mobileHA&&(d=!0,delete i(p).transformCache.translate3d),d&&S.flushTransformCache(p),S.Values.removeClass(p,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(n,n)}catch(g){setTimeout(function(){throw g},1)}s&&o.loop!==!0&&s(n),i(p)&&o.loop===!0&&!t&&(f.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(p,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&f.dequeue(p,o.queue)}b.State.calls[e]=!1;for(var m=0,y=b.State.calls.length;y>m;m++)if(b.State.calls[m]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var f,d=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return a}(),g=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r,a=(new Date).getTime();return r=Math.max(0,16-(a-e)),e=a+r,setTimeout(function(){t(a+r)},r)}}(),m={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},y=!1;if(e.fn&&e.fn.jquery?(f=e,y=!0):f=t.Velocity.Utilities,8>=d&&!y)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var h=400,v="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:f,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:v,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){f.data(e,"velocity",{isSVG:m.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var n={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,a){var n={dx:r.v,dv:e(r)},o=t(r,.5*a,n),i=t(r,.5*a,o),s=t(r,a,i),l=1/6*(n.dx+2*(o.dx+i.dx)+s.dx),u=1/6*(n.dv+2*(o.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,n){var o,i,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,p=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,l.tension=e,l.friction=t,o=null!==n,o?(c=a(e,t),i=c/n*f):i=f;s=r(s||l,i),u.push(1+s.x),c+=16,Math.abs(s.x)>p&&Math.abs(s.v)>p;);return o?function(e){return u[e*(u.length-1)|0]}:c}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},f.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var S=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,a,n;if(d)for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");var o=a[1].match(S.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),o.push(o.shift()),S.Hooks.templates[r]=[n.join(" "),o.join(" ")])}for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");for(var e in n){var i=r+n[e],s=e;S.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=S.Hooks.registered[e];if(r){var a=r[0],n=r[1];return t=S.Hooks.cleanRootPropertyValue(a,t),t.toString().match(S.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,r){var a=S.Hooks.registered[e];if(a){var n,o,i=a[0],s=a[1];return r=S.Hooks.cleanRootPropertyValue(i,r),n=r.toString().match(S.RegEx.valueSplit),n[s]=t,o=n.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var a;return S.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(S.RegEx.valueUnwrap),a=a?a[1].replace(/,(\s+)?/g," "):r),a;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var a=parseFloat(r);if(!a&&0!==a){var n=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);a=n?n[1]:0}return a;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=d)switch(e){case"name":return"filter";case"extract":var a=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=a?a[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=d||b.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return"transform";case"extract":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":b.State.isAndroid&&i(r).transformCache[t]===a&&1>n&&(n=1),o=!/(\d)$/i.test(n);break;case"skew":o=!/(deg|\d)$/i.test(n);break;case"rotate":o=!/(deg|\d)$/i.test(n)}return o||(i(r).transformCache[t]="("+n+")"),i(r).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return t;case"extract":var o;if(S.RegEx.wrappedValueAlreadyExtracted.test(n))o=n;else{var i,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?i=s[n]!==a?s[n]:s.black:S.RegEx.isHex.test(n)?i="rgb("+S.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(i=s.black),o=(i||n).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=d?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(8>=d?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,a=t.length;a>r;r++){var n;if(n=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),m.isString(b.State.prefixElement.style[n]))return b.State.prefixMatches[e]=n,[n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(r,function(e,t,r,a){return t+t+r+r+a+a}),t=a.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,n,o){function s(e,r){function n(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=f.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!o){if("height"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return n(),c}if("width"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return n(),p}}var g;g=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),l=9===d&&"filter"===r?g.getPropertyValue(r):g[r],(""===l||null===l)&&(l=e.style[r]),n()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(r)){var m=s(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(r))&&(l=f(e).position()[r]+"px")}return l}var l;if(S.Hooks.registered[r]){var u=r,c=S.Hooks.getRoot(u);n===a&&(n=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(n=S.Normalizations.registered[c]("extract",e,n)),l=S.Hooks.extractValue(u,n)}else if(S.Normalizations.registered[r]){var p,g;p=S.Normalizations.registered[r]("name",e),"transform"!==p&&(g=s(e,S.Names.prefixCheck(p)[0]),S.Values.isCSSNullValue(g)&&S.Hooks.templates[r]&&(g=S.Hooks.templates[r][1])),l=S.Normalizations.registered[r]("extract",e,g)}if(!/^[\d-]/.test(l))if(i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(m){l=0}else l=e.getAttribute(r);else l=s(e,S.Names.prefixCheck(r)[0]);return S.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+r+": "+l),l},setPropertyValue:function(e,r,a,n,o){var s=r;if("scroll"===r)o.container?o.container["scroll"+o.direction]=a:"Left"===o.direction?t.scrollTo(a,o.alternateValue):t.scrollTo(o.alternateValue,a);else if(S.Normalizations.registered[r]&&"transform"===S.Normalizations.registered[r]("name",e))S.Normalizations.registered[r]("inject",e,a),s="transform",a=i(e).transformCache[r];else{if(S.Hooks.registered[r]){var l=r,u=S.Hooks.getRoot(r);n=n||S.getPropertyValue(e,u),a=S.Hooks.injectValue(l,a,n),r=u}if(S.Normalizations.registered[r]&&(a=S.Normalizations.registered[r]("inject",e,a),r=S.Normalizations.registered[r]("name",e)),s=S.Names.prefixCheck(r)[0],8>=d)try{e.style[s]=a}catch(c){b.debug&&console.log("Browser does not support ["+a+"] for ["+s+"]")}else i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var r="";if((d||b.State.isAndroid&&!b.State.isChrome)&&i(e).isSVG){var a={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};f.each(i(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(r+=e+"("+a[e].join(" ")+") ",delete a[e])})}else{var n,o;f.each(i(e).transformCache,function(t){return n=i(e).transformCache[t],"transformPerspective"===t?(o=n,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(r+=t+n+" "))}),o&&(r="perspective"+o+" "+r)}S.setPropertyValue(e,"transform",r)}};S.Hooks.register(),S.Normalizations.register(),b.hook=function(e,t,r){var n=a;return e=o(e),f.each(e,function(e,o){if(i(o)===a&&b.init(o),r===a)n===a&&(n=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(o),n=s}}),n};var P=function(){function e(){return s?k.promise||null:l}function n(){function e(e){function p(e,t){var r=a,n=a,i=a;return m.isArray(e)?(r=e[0],!m.isArray(e[1])&&/^[\d-]/.test(e[1])||m.isFunction(e[1])||S.RegEx.isHex.test(e[1])?i=e[1]:(m.isString(e[1])&&!S.RegEx.isHex.test(e[1])||m.isArray(e[1]))&&(n=t?e[1]:u(e[1],s.duration),e[2]!==a&&(i=e[2]))):r=e,t||(n=n||s.easing),m.isFunction(r)&&(r=r.call(o,V,w)),m.isFunction(i)&&(i=i.call(o,V,w)),[r||0,n,i]}function d(e,t){var r,a;return a=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=S.Values.getUnitType(e)),[a,r]}function h(){var e={myParent:o.parentNode||r.body,position:S.getPropertyValue(o,"position"),fontSize:S.getPropertyValue(o,"fontSize")},a=e.position===L.lastPosition&&e.myParent===L.lastParent,n=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,l={};if(n&&a)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var u=i(o).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(u),e.myParent.appendChild(u),f.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),f.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(r.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}if(s.begin&&0===V)try{s.begin.call(g,g)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===A){var P,C,T,F=/^x$/i.test(s.axis)?"Left":"Top",j=parseFloat(s.offset)||0;s.container?m.isWrapped(s.container)||m.isNode(s.container)?(s.container=s.container[0]||s.container,P=s.container["scroll"+F],T=P+f(o).position()[F.toLowerCase()]+j):s.container=null:(P=b.State.scrollAnchor[b.State["scrollProperty"+F]],C=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===F?"Top":"Left")]],T=f(o).offset()[F.toLowerCase()]+j),l={scroll:{rootPropertyValue:!1,startValue:P,currentValue:P,endValue:T,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:F,alternateValue:C}},element:o},b.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===A){if(!i(o).tweensContainer)return void f.dequeue(o,s.queue);"none"===i(o).opts.display&&(i(o).opts.display="auto"),"hidden"===i(o).opts.visibility&&(i(o).opts.visibility="visible"),i(o).opts.loop=!1,i(o).opts.begin=null,i(o).opts.complete=null,v.easing||delete s.easing,v.duration||delete s.duration,s=f.extend({},i(o).opts,s);var E=f.extend(!0,{},i(o).tweensContainer);for(var H in E)if("element"!==H){var N=E[H].startValue;E[H].startValue=E[H].currentValue=E[H].endValue,E[H].endValue=N,m.isEmptyObject(v)||(E[H].easing=s.easing),b.debug&&console.log("reverse tweensContainer ("+H+"): "+JSON.stringify(E[H]),o)}l=E}else if("start"===A){var E;i(o).tweensContainer&&i(o).isAnimating===!0&&(E=i(o).tweensContainer),f.each(y,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var r=p(t,!0),n=r[0],o=r[1],i=r[2];if(S.RegEx.isHex.test(n)){for(var s=["Red","Green","Blue"],l=S.Values.hexToRgb(n),u=i?S.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==a&&f.push(u[c]),y[e+s[c]]=f}delete y[e]}}});for(var z in y){var O=p(y[z]),q=O[0],$=O[1],M=O[2];z=S.Names.camelCase(z);var I=S.Hooks.getRoot(z),B=!1;if(i(o).isSVG||"tween"===I||S.Names.prefixCheck(I)[1]!==!1||S.Normalizations.registered[I]!==a){(s.display!==a&&null!==s.display&&"none"!==s.display||s.visibility!==a&&"hidden"!==s.visibility)&&/opacity|filter/.test(z)&&!M&&0!==q&&(M=0),s._cacheValues&&E&&E[z]?(M===a&&(M=E[z].endValue+E[z].unitType),B=i(o).rootPropertyValueCache[I]):S.Hooks.registered[z]?M===a?(B=S.getPropertyValue(o,I),M=S.getPropertyValue(o,z,B)):B=S.Hooks.templates[I][1]:M===a&&(M=S.getPropertyValue(o,z));var W,G,Y,D=!1;if(W=d(z,M),M=W[0],Y=W[1],W=d(z,q),q=W[0].replace(/^([+-\/*])=/,function(e,t){return D=t,""}),G=W[1],M=parseFloat(M)||0,q=parseFloat(q)||0,"%"===G&&(/^(fontSize|lineHeight)$/.test(z)?(q/=100,G="em"):/^scale/.test(z)?(q/=100,G=""):/(Red|Green|Blue)$/i.test(z)&&(q=q/100*255,G="")),/[\/*]/.test(D))G=Y;else if(Y!==G&&0!==M)if(0===q)G=Y;else{n=n||h();var Q=/margin|padding|left|right|width|text|word|letter/i.test(z)||/X$/.test(z)||"x"===z?"x":"y";switch(Y){case"%":M*="x"===Q?n.percentToPxWidth:n.percentToPxHeight;break;case"px":break;default:M*=n[Y+"ToPx"]}switch(G){case"%":M*=1/("x"===Q?n.percentToPxWidth:n.percentToPxHeight);break;case"px":break;default:M*=1/n[G+"ToPx"]}}switch(D){case"+":q=M+q;break;case"-":q=M-q;break;case"*":q=M*q;break;case"/":q=M/q}l[z]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:q,unitType:G,easing:$},b.debug&&console.log("tweensContainer ("+z+"): "+JSON.stringify(l[z]),o)}else b.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.")}l.element=o}l.element&&(S.Values.addClass(o,"velocity-animating"),R.push(l),""===s.queue&&(i(o).tweensContainer=l,i(o).opts=s),i(o).isAnimating=!0,V===w-1?(b.State.calls.push([R,g,s,null,k.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):V++)}var n,o=this,s=f.extend({},b.defaults,v),l={};switch(i(o)===a&&b.init(o),parseFloat(s.delay)&&s.queue!==!1&&f.queue(o,s.queue,function(e){b.velocityQueueEntryFlag=!0,i(o).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=h;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}b.mock!==!1&&(b.mock===!0?s.duration=s.delay=1:(s.duration*=parseFloat(b.mock)||1,s.delay*=parseFloat(b.mock)||1)),s.easing=u(s.easing,s.duration),s.begin&&!m.isFunction(s.begin)&&(s.begin=null),s.progress&&!m.isFunction(s.progress)&&(s.progress=null),s.complete&&!m.isFunction(s.complete)&&(s.complete=null),s.display!==a&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=b.CSS.Values.getDisplayType(o))),s.visibility!==a&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,s.queue===!1?s.delay?setTimeout(e,s.delay):e():f.queue(o,s.queue,function(t,r){return r===!0?(k.promise&&k.resolver(g),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==s.queue&&"fx"!==s.queue||"inprogress"===f.queue(o)[0]||f.dequeue(o)}var s,l,d,g,y,v,x=arguments[0]&&(arguments[0].p||f.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||m.isString(arguments[0].properties));if(m.isWrapped(this)?(s=!1,d=0,g=this,l=this):(s=!0,d=1,g=x?arguments[0].elements||arguments[0].e:arguments[0]),g=o(g)){x?(y=arguments[0].properties||arguments[0].p,v=arguments[0].options||arguments[0].o):(y=arguments[d],v=arguments[d+1]);var w=g.length,V=0;if(!/^(stop|finish)$/i.test(y)&&!f.isPlainObject(v)){var C=d+1;v={};for(var T=C;T<arguments.length;T++)m.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?m.isString(arguments[T])||m.isArray(arguments[T])?v.easing=arguments[T]:m.isFunction(arguments[T])&&(v.complete=arguments[T]):v.duration=arguments[T]}var k={promise:null,resolver:null,rejecter:null};s&&b.Promise&&(k.promise=new b.Promise(function(e,t){k.resolver=e,k.rejecter=t}));var A;switch(y){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"stop":f.each(g,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var F=[];return f.each(b.State.calls,function(e,t){t&&f.each(t[1],function(r,n){var o=v===a?"":v;return o===!0||t[2].queue===o||v===a&&t[2].queue===!1?void f.each(g,function(r,a){a===n&&((v===!0||m.isString(v))&&(f.each(f.queue(a,m.isString(v)?v:""),function(e,t){m.isFunction(t)&&t(null,!0)}),f.queue(a,m.isString(v)?v:"",[])),"stop"===y?(i(a)&&i(a).tweensContainer&&o!==!1&&f.each(i(a).tweensContainer,function(e,t){t.endValue=t.currentValue}),F.push(e)):"finish"===y&&(t[2].duration=1))}):!0})}),"stop"===y&&(f.each(F,function(e,t){p(t,!0)}),k.promise&&k.resolver(g)),e();default:if(!f.isPlainObject(y)||m.isEmptyObject(y)){if(m.isString(y)&&b.Redirects[y]){var j=f.extend({},v),E=j.duration,H=j.delay||0;return j.backwards===!0&&(g=f.extend(!0,[],g).reverse()),f.each(g,function(e,t){parseFloat(j.stagger)?j.delay=H+parseFloat(j.stagger)*e:m.isFunction(j.stagger)&&(j.delay=H+j.stagger.call(t,e,w)),j.drag&&(j.duration=parseFloat(E)||(/^(callout|transition)/.test(y)?1e3:h),j.duration=Math.max(j.duration*(j.backwards?1-e/w:(e+1)/w),.75*j.duration,200)),b.Redirects[y].call(t,t,j||{},e,w,g,k.promise?k:a)}),e()}var N="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(N)):console.log(N),e()}A="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];f.each(g,function(e,t){m.isNode(t)&&n.call(t)});var z,j=f.extend({},b.defaults,v);if(j.loop=parseInt(j.loop),z=2*j.loop-1,j.loop)for(var O=0;z>O;O++){var q={delay:j.delay,progress:j.progress};O===z-1&&(q.display=j.display,q.visibility=j.visibility,q.complete=j.complete),P(g,"reverse",q)}return e()}};b=f.extend(P,b),b.animate=P;var w=t.requestAnimationFrame||g;return b.State.isMobile||r.hidden===a||r.addEventListener("visibilitychange",function(){r.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},c()):w=t.requestAnimationFrame||g}),e.Velocity=b,e!==t&&(e.fn.velocity=P,e.fn.velocity.defaults=b.defaults),f.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u=l.begin,c=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===a&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(i,i);for(var r in p){d[r]=e.style[r];var a=b.CSS.getPropertyValue(e,r);p[r]="Down"===t?[a,0]:[0,a]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(i,i),s&&s.resolver(i)},b(e,p,l)}}),f.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u={opacity:"In"===t?1:0},c=l.complete;l.complete=n!==o-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}));;!function(a,b,c,d){"use strict";function k(a,b,c){return setTimeout(q(a,c),b)}function l(a,b,c){return Array.isArray(a)?(m(a,c[b],c),!0):!1}function m(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function n(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function o(a,b){return n(a,b,!0)}function p(a,b,c){var e,d=b.prototype;e=a.prototype=Object.create(d),e.constructor=a,e._super=d,c&&n(e,c)}function q(a,b){return function(){return a.apply(b,arguments)}}function r(a,b){return typeof a==g?a.apply(b?b[0]||d:d,b):a}function s(a,b){return a===d?b:a}function t(a,b,c){m(x(b),function(b){a.addEventListener(b,c,!1)})}function u(a,b,c){m(x(b),function(b){a.removeEventListener(b,c,!1)})}function v(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function w(a,b){return a.indexOf(b)>-1}function x(a){return a.trim().split(/\s+/g)}function y(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function z(a){return Array.prototype.slice.call(a,0)}function A(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];y(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function B(a,b){for(var c,f,g=b[0].toUpperCase()+b.slice(1),h=0;h<e.length;){if(c=e[h],f=c?c+g:b,f in a)return f;h++}return d}function D(){return C++}function E(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function ab(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){r(a.options.enable,[a])&&c.handler(b)},this.init()}function bb(a){var b,c=a.options.inputClass;return b=c?c:H?wb:I?Eb:G?Gb:rb,new b(a,cb)}function cb(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&O&&0===d-e,g=b&(Q|R)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,db(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function db(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=gb(b)),e>1&&!c.firstMultiple?c.firstMultiple=gb(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=hb(d);b.timeStamp=j(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=lb(h,i),b.distance=kb(h,i),eb(c,b),b.offsetDirection=jb(b.deltaX,b.deltaY),b.scale=g?nb(g.pointers,d):1,b.rotation=g?mb(g.pointers,d):0,fb(c,b);var k=a.element;v(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function eb(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===O||f.eventType===Q)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function fb(a,b){var f,g,h,j,c=a.lastInterval||b,e=b.timeStamp-c.timeStamp;if(b.eventType!=R&&(e>N||c.velocity===d)){var k=c.deltaX-b.deltaX,l=c.deltaY-b.deltaY,m=ib(e,k,l);g=m.x,h=m.y,f=i(m.x)>i(m.y)?m.x:m.y,j=jb(k,l),a.lastInterval=b}else f=c.velocity,g=c.velocityX,h=c.velocityY,j=c.direction;b.velocity=f,b.velocityX=g,b.velocityY=h,b.direction=j}function gb(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:h(a.pointers[c].clientX),clientY:h(a.pointers[c].clientY)},c++;return{timeStamp:j(),pointers:b,center:hb(b),deltaX:a.deltaX,deltaY:a.deltaY}}function hb(a){var b=a.length;if(1===b)return{x:h(a[0].clientX),y:h(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:h(c/b),y:h(d/b)}}function ib(a,b,c){return{x:b/a||0,y:c/a||0}}function jb(a,b){return a===b?S:i(a)>=i(b)?a>0?T:U:b>0?V:W}function kb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function lb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function mb(a,b){return lb(b[1],b[0],_)-lb(a[1],a[0],_)}function nb(a,b){return kb(b[0],b[1],_)/kb(a[0],a[1],_)}function rb(){this.evEl=pb,this.evWin=qb,this.allow=!0,this.pressed=!1,ab.apply(this,arguments)}function wb(){this.evEl=ub,this.evWin=vb,ab.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ab(){this.evTarget=yb,this.evWin=zb,this.started=!1,ab.apply(this,arguments)}function Bb(a,b){var c=z(a.touches),d=z(a.changedTouches);return b&(Q|R)&&(c=A(c.concat(d),"identifier",!0)),[c,d]}function Eb(){this.evTarget=Db,this.targetIds={},ab.apply(this,arguments)}function Fb(a,b){var c=z(a.touches),d=this.targetIds;if(b&(O|P)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=z(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return v(a.target,i)}),b===O)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Q|R)&&delete d[g[e].identifier],e++;return h.length?[A(f.concat(h),"identifier",!0),h]:void 0}function Gb(){ab.apply(this,arguments);var a=q(this.handler,this);this.touch=new Eb(this.manager,a),this.mouse=new rb(this.manager,a)}function Pb(a,b){this.manager=a,this.set(b)}function Qb(a){if(w(a,Mb))return Mb;var b=w(a,Nb),c=w(a,Ob);return b&&c?Nb+" "+Ob:b||c?b?Nb:Ob:w(a,Lb)?Lb:Kb}function Yb(a){this.id=D(),this.manager=null,this.options=o(a||{},this.defaults),this.options.enable=s(this.options.enable,!0),this.state=Rb,this.simultaneous={},this.requireFail=[]}function Zb(a){return a&Wb?"cancel":a&Ub?"end":a&Tb?"move":a&Sb?"start":""}function $b(a){return a==W?"down":a==V?"up":a==T?"left":a==U?"right":""}function _b(a,b){var c=b.manager;return c?c.get(a):a}function ac(){Yb.apply(this,arguments)}function bc(){ac.apply(this,arguments),this.pX=null,this.pY=null}function cc(){ac.apply(this,arguments)}function dc(){Yb.apply(this,arguments),this._timer=null,this._input=null}function ec(){ac.apply(this,arguments)}function fc(){ac.apply(this,arguments)}function gc(){Yb.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function hc(a,b){return b=b||{},b.recognizers=s(b.recognizers,hc.defaults.preset),new kc(a,b)}function kc(a,b){b=b||{},this.options=o(b,hc.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=bb(this),this.touchAction=new Pb(this,this.options.touchAction),lc(this,!0),m(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function lc(a,b){var c=a.element;m(a.options.cssProps,function(a,d){c.style[B(c.style,d)]=b?a:""})}function mc(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var e=["","webkit","moz","MS","ms","o"],f=b.createElement("div"),g="function",h=Math.round,i=Math.abs,j=Date.now,C=1,F=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in a,H=B(a,"PointerEvent")!==d,I=G&&F.test(navigator.userAgent),J="touch",K="pen",L="mouse",M="kinect",N=25,O=1,P=2,Q=4,R=8,S=1,T=2,U=4,V=8,W=16,X=T|U,Y=V|W,Z=X|Y,$=["x","y"],_=["clientX","clientY"];ab.prototype={handler:function(){},init:function(){this.evEl&&t(this.element,this.evEl,this.domHandler),this.evTarget&&t(this.target,this.evTarget,this.domHandler),this.evWin&&t(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(E(this.element),this.evWin,this.domHandler)}};var ob={mousedown:O,mousemove:P,mouseup:Q},pb="mousedown",qb="mousemove mouseup";p(rb,ab,{handler:function(a){var b=ob[a.type];b&O&&0===a.button&&(this.pressed=!0),b&P&&1!==a.which&&(b=Q),this.pressed&&this.allow&&(b&Q&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:L,srcEvent:a}))}});var sb={pointerdown:O,pointermove:P,pointerup:Q,pointercancel:R,pointerout:R},tb={2:J,3:K,4:L,5:M},ub="pointerdown",vb="pointermove pointerup pointercancel";a.MSPointerEvent&&(ub="MSPointerDown",vb="MSPointerMove MSPointerUp MSPointerCancel"),p(wb,ab,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=sb[d],f=tb[a.pointerType]||a.pointerType,g=f==J,h=y(b,a.pointerId,"pointerId");e&O&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Q|R)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var xb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},yb="touchstart",zb="touchstart touchmove touchend touchcancel";p(Ab,ab,{handler:function(a){var b=xb[a.type];if(b===O&&(this.started=!0),this.started){var c=Bb.call(this,a,b);b&(Q|R)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}});var Cb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},Db="touchstart touchmove touchend touchcancel";p(Eb,ab,{handler:function(a){var b=Cb[a.type],c=Fb.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}),p(Gb,ab,{handler:function(a,b,c){var d=c.pointerType==J,e=c.pointerType==L;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Q|R)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Hb=B(f.style,"touchAction"),Ib=Hb!==d,Jb="compute",Kb="auto",Lb="manipulation",Mb="none",Nb="pan-x",Ob="pan-y";Pb.prototype={set:function(a){a==Jb&&(a=this.compute()),Ib&&(this.manager.element.style[Hb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return m(this.manager.recognizers,function(b){r(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Qb(a.join(" "))},preventDefaults:function(a){if(!Ib){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return b.preventDefault(),void 0;var d=this.actions,e=w(d,Mb),f=w(d,Ob),g=w(d,Nb);return e||f&&c&X||g&&c&Y?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var Rb=1,Sb=2,Tb=4,Ub=8,Vb=Ub,Wb=16,Xb=32;Yb.prototype={defaults:{},set:function(a){return n(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(l(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_b(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return l(a,"dropRecognizeWith",this)?this:(a=_b(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(l(a,"requireFailure",this))return this;var b=this.requireFail;return a=_b(a,this),-1===y(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(l(a,"dropRequireFailure",this))return this;a=_b(a,this);var b=y(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function d(d){b.manager.emit(b.options.event+(d?Zb(c):""),a)}var b=this,c=this.state;Ub>c&&d(!0),d(),c>=Ub&&d(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):(this.state=Xb,void 0)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(Xb|Rb)))return!1;a++}return!0},recognize:function(a){var b=n({},a);return r(this.options.enable,[this,b])?(this.state&(Vb|Wb|Xb)&&(this.state=Rb),this.state=this.process(b),this.state&(Sb|Tb|Ub|Wb)&&this.tryEmit(b),void 0):(this.reset(),this.state=Xb,void 0)},process:function(){},getTouchAction:function(){},reset:function(){}},p(ac,Yb,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(Sb|Tb),e=this.attrTest(a);return d&&(c&R||!e)?b|Wb:d||e?c&Q?b|Ub:b&Sb?b|Tb:Sb:Xb}}),p(bc,ac,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var a=this.options.direction,b=[];return a&X&&b.push(Ob),a&Y&&b.push(Nb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&X?(e=0===f?S:0>f?T:U,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?S:0>g?V:W,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return ac.prototype.attrTest.call(this,a)&&(this.state&Sb||!(this.state&Sb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),p(cc,ac,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&Sb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),p(dc,Yb,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Kb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Q|R)&&!e)this.reset();else if(a.eventType&O)this.reset(),this._timer=k(function(){this.state=Vb,this.tryEmit()},b.time,this);else if(a.eventType&Q)return Vb;return Xb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===Vb&&(a&&a.eventType&Q?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),p(ec,ac,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&Sb)}}),p(fc,ac,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:X|Y,pointers:1},getTouchAction:function(){return bc.prototype.getTouchAction.call(this)},attrTest:function(a){var c,b=this.options.direction;return b&(X|Y)?c=a.velocity:b&X?c=a.velocityX:b&Y&&(c=a.velocityY),this._super.attrTest.call(this,a)&&b&a.direction&&a.distance>this.options.threshold&&i(c)>this.options.velocity&&a.eventType&Q},emit:function(a){var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),p(gc,Yb,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Lb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&O&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Q)return this.failTimeout();var f=this.pTime?a.timeStamp-this.pTime<b.interval:!0,g=!this.pCenter||kb(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,g&&f?this.count+=1:this.count=1,this._input=a;var h=this.count%b.taps;if(0===h)return this.hasRequireFailures()?(this._timer=k(function(){this.state=Vb,this.tryEmit()},b.interval,this),Sb):Vb}return Xb},failTimeout:function(){return this._timer=k(function(){this.state=Xb},this.options.interval,this),Xb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),hc.VERSION="2.0.4",hc.defaults={domEvents:!1,touchAction:Jb,enable:!0,inputTarget:null,inputClass:null,preset:[[ec,{enable:!1}],[cc,{enable:!1},["rotate"]],[fc,{direction:X}],[bc,{direction:X},["swipe"]],[gc],[gc,{event:"doubletap",taps:2},["tap"]],[dc]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ic=1,jc=2;kc.prototype={set:function(a){return n(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?jc:ic},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&Vb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===jc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(Sb|Tb|Ub)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Yb)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(l(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(l(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(y(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return m(x(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return m(x(a),function(a){b?c[a].splice(y(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&mc(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&lc(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},n(hc,{INPUT_START:O,INPUT_MOVE:P,INPUT_END:Q,INPUT_CANCEL:R,STATE_POSSIBLE:Rb,STATE_BEGAN:Sb,STATE_CHANGED:Tb,STATE_ENDED:Ub,STATE_RECOGNIZED:Vb,STATE_CANCELLED:Wb,STATE_FAILED:Xb,DIRECTION_NONE:S,DIRECTION_LEFT:T,DIRECTION_RIGHT:U,DIRECTION_UP:V,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:kc,Input:ab,TouchAction:Pb,TouchInput:Eb,MouseInput:rb,PointerEventInput:wb,TouchMouseInput:Gb,SingleTouchInput:Ab,Recognizer:Yb,AttrRecognizer:ac,Tap:gc,Pan:bc,Swipe:fc,Pinch:cc,Rotate:ec,Press:dc,on:t,off:u,each:m,merge:o,extend:n,inherit:p,bindFn:q,prefixed:B}),typeof define==g&&define.amd?define(function(){return hc}):"undefined"!=typeof module&&module.exports?module.exports=hc:a[c]=hc}(window,document,"Hammer");;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','hammerjs'],factory);}else if(typeof exports==='object'){factory(require('jquery'),require('hammerjs'));}else{factory(jQuery,Hammer);}}(function($,Hammer){function hammerify(el,options){var $el=$(el);if(!$el.data("hammer")){$el.data("hammer",new Hammer($el[0],options));}}
$.fn.hammer=function(options){return this.each(function(){hammerify(this,options);});};Hammer.Manager.prototype.emit=(function(originalEmit){return function(type,data){originalEmit.call(this,type,data);$(this.element).trigger({type:type,gesture:data});};})(Hammer.Manager.prototype.emit);}));;(function(window){if(window.Package){Materialize={};}else{window.Materialize={};}})(window);(function(window){var lastTime=0,vendors=['webkit','moz'],requestAnimationFrame=window.requestAnimationFrame,cancelAnimationFrame=window.cancelAnimationFrame,i=vendors.length;while(--i>=0&&!requestAnimationFrame){requestAnimationFrame=window[vendors[i]+'RequestAnimationFrame'];cancelAnimationFrame=window[vendors[i]+'CancelRequestAnimationFrame'];}
if(!requestAnimationFrame||!cancelAnimationFrame){requestAnimationFrame=function(callback){var now=+Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime);},nextTime-now);};cancelAnimationFrame=clearTimeout;}
window.requestAnimationFrame=requestAnimationFrame;window.cancelAnimationFrame=cancelAnimationFrame;}(window));Materialize.guid=(function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return function(){return s4()+s4()+'-'+s4()+'-'+s4()+'-'+
s4()+'-'+s4()+s4()+s4();};})();Materialize.escapeHash=function(hash){return hash.replace(/(:|\.|\[|\]|,|=)/g,"\\$1");};Materialize.elementOrParentIsFixed=function(element){var $element=$(element);var $checkElements=$element.add($element.parents());var isFixed=false;$checkElements.each(function(){if($(this).css("position")==="fixed"){isFixed=true;return false;}});return isFixed;};var getTime=(Date.now||function(){return new Date().getTime();});Materialize.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:getTime();timeout=null;result=func.apply(context,args);context=args=null;};return function(){var now=getTime();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};var Vel;if(jQuery){Vel=jQuery.Velocity;}else if($){Vel=$.Velocity;}else{Vel=Velocity;};(function($){$.fn.collapsible=function(options){var defaults={accordion:undefined,onOpen:undefined,onClose:undefined};options=$.extend(defaults,options);return this.each(function(){var $this=$(this);var $panel_headers=$(this).find('> li > .collapsible-header');var collapsible_type=$this.data("collapsible");$this.off('click.collapse','> li > .collapsible-header');$panel_headers.off('click.collapse');function accordionOpen(object){$panel_headers=$this.find('> li > .collapsible-header');if(object.hasClass('active')){object.parent().addClass('active');}
else{object.parent().removeClass('active');}
if(object.parent().hasClass('active')){object.siblings('.collapsible-body').stop(true,false).slideDown({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css('height','');}});}
else{object.siblings('.collapsible-body').stop(true,false).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css('height','');}});}
$panel_headers.not(object).removeClass('active').parent().removeClass('active');$panel_headers.not(object).parent().children('.collapsible-body').stop(true,false).each(function(){if($(this).is(':visible')){$(this).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css('height','');execCallbacks($(this).siblings('.collapsible-header'));}});}});}
function expandableOpen(object){if(object.hasClass('active')){object.parent().addClass('active');}
else{object.parent().removeClass('active');}
if(object.parent().hasClass('active')){object.siblings('.collapsible-body').stop(true,false).slideDown({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css('height','');}});}
else{object.siblings('.collapsible-body').stop(true,false).slideUp({duration:350,easing:"easeOutQuart",queue:false,complete:function(){$(this).css('height','');}});}}
function collapsibleOpen(object){if(options.accordion||collapsible_type==="accordion"||collapsible_type===undefined){accordionOpen(object);}else{expandableOpen(object);}
execCallbacks(object);}
function execCallbacks(object){if(object.hasClass('active')){if(typeof(options.onOpen)==="function"){options.onOpen.call(this,object.parent());}}else{if(typeof(options.onClose)==="function"){options.onClose.call(this,object.parent());}}}
function isChildrenOfPanelHeader(object){var panelHeader=getPanelHeader(object);return panelHeader.length>0;}
function getPanelHeader(object){return object.closest('li > .collapsible-header');}
$this.on('click.collapse','> li > .collapsible-header',function(e){var element=$(e.target);if(isChildrenOfPanelHeader(element)){element=getPanelHeader(element);}
element.toggleClass('active');collapsibleOpen(element);});if(options.accordion||collapsible_type==="accordion"||collapsible_type===undefined){collapsibleOpen($panel_headers.filter('.active').first());}else{$panel_headers.filter('.active').each(function(){collapsibleOpen($(this));});}});};$(document).ready(function(){$('.collapsible').collapsible();});}(jQuery));;(function($){$.fn.scrollTo=function(elem){$(this).scrollTop($(this).scrollTop()-$(this).offset().top+$(elem).offset().top);return this;};$.fn.dropdown=function(options){var defaults={inDuration:300,outDuration:225,constrainWidth:true,hover:false,gutter:0,belowOrigin:false,alignment:'left',stopPropagation:false};if(options==="open"){this.each(function(){$(this).trigger('open');});return false;}
if(options==="close"){this.each(function(){$(this).trigger('close');});return false;}
this.each(function(){var origin=$(this);var curr_options=$.extend({},defaults,options);var isFocused=false;var activates=$("#"+origin.attr('data-activates'));function updateOptions(){if(origin.data('induration')!==undefined)
curr_options.inDuration=origin.data('induration');if(origin.data('outduration')!==undefined)
curr_options.outDuration=origin.data('outduration');if(origin.data('constrainwidth')!==undefined)
curr_options.constrainWidth=origin.data('constrainwidth');if(origin.data('hover')!==undefined)
curr_options.hover=origin.data('hover');if(origin.data('gutter')!==undefined)
curr_options.gutter=origin.data('gutter');if(origin.data('beloworigin')!==undefined)
curr_options.belowOrigin=origin.data('beloworigin');if(origin.data('alignment')!==undefined)
curr_options.alignment=origin.data('alignment');if(origin.data('stoppropagation')!==undefined)
curr_options.stopPropagation=origin.data('stoppropagation');}
updateOptions();origin.after(activates);function placeDropdown(eventType){if(eventType==='focus'){isFocused=true;}
updateOptions();activates.addClass('active');origin.addClass('active');if(curr_options.constrainWidth===true){activates.css('width',origin.outerWidth());}else{activates.css('white-space','nowrap');}
var windowHeight=window.innerHeight;var originHeight=origin.innerHeight();var offsetLeft=origin.offset().left;var offsetTop=origin.offset().top-$(window).scrollTop();var currAlignment=curr_options.alignment;var gutterSpacing=0;var leftPosition=0;var verticalOffset=0;if(curr_options.belowOrigin===true){verticalOffset=originHeight;}
var scrollYOffset=0;var scrollXOffset=0;var wrapper=origin.parent();if(!wrapper.is('body')){if(wrapper[0].scrollHeight>wrapper[0].clientHeight){scrollYOffset=wrapper[0].scrollTop;}
if(wrapper[0].scrollWidth>wrapper[0].clientWidth){scrollXOffset=wrapper[0].scrollLeft;}}
if(offsetLeft+activates.innerWidth()>$(window).width()){currAlignment='right';}else if(offsetLeft-activates.innerWidth()+origin.innerWidth()<0){currAlignment='left';}
if(offsetTop+activates.innerHeight()>windowHeight){if(offsetTop+originHeight-activates.innerHeight()<0){var adjustedHeight=windowHeight-offsetTop-verticalOffset;activates.css('max-height',adjustedHeight);}else{if(!verticalOffset){verticalOffset+=originHeight;}
verticalOffset-=activates.innerHeight();}}
if(currAlignment==='left'){gutterSpacing=curr_options.gutter;leftPosition=origin.position().left+gutterSpacing;}
else if(currAlignment==='right'){var offsetRight=origin.position().left+origin.outerWidth()-activates.outerWidth();gutterSpacing=-curr_options.gutter;leftPosition=offsetRight+gutterSpacing;}
activates.css({position:'absolute',top:origin.position().top+verticalOffset+scrollYOffset,left:leftPosition+scrollXOffset});activates.stop(true,true).css('opacity',0).slideDown({queue:false,duration:curr_options.inDuration,easing:'easeOutCubic',complete:function(){$(this).css('height','');}}).animate({opacity:1},{queue:false,duration:curr_options.inDuration,easing:'easeOutSine'});$(document).bind('click.'+activates.attr('id')+' touchstart.'+activates.attr('id'),function(e){if(!activates.is(e.target)&&!origin.is(e.target)&&(!origin.find(e.target).length)){hideDropdown();$(document).unbind('click.'+activates.attr('id')+' touchstart.'+activates.attr('id'));}});}
function hideDropdown(){isFocused=false;activates.fadeOut(curr_options.outDuration);activates.removeClass('active');origin.removeClass('active');$(document).unbind('click.'+activates.attr('id')+' touchstart.'+activates.attr('id'));setTimeout(function(){activates.css('max-height','');},curr_options.outDuration);}
if(curr_options.hover){var open=false;origin.unbind('click.'+origin.attr('id'));origin.on('mouseenter',function(e){if(open===false){placeDropdown();open=true;}});origin.on('mouseleave',function(e){var toEl=e.toElement||e.relatedTarget;if(!$(toEl).closest('.dropdown-content').is(activates)){activates.stop(true,true);hideDropdown();open=false;}});activates.on('mouseleave',function(e){var toEl=e.toElement||e.relatedTarget;if(!$(toEl).closest('.dropdown-button').is(origin)){activates.stop(true,true);hideDropdown();open=false;}});}else{origin.unbind('click.'+origin.attr('id'));origin.bind('click.'+origin.attr('id'),function(e){if(!isFocused){if(origin[0]==e.currentTarget&&!origin.hasClass('active')&&($(e.target).closest('.dropdown-content').length===0)){e.preventDefault();if(curr_options.stopPropagation){e.stopPropagation();}
placeDropdown('click');}
else if(origin.hasClass('active')){hideDropdown();$(document).unbind('click.'+activates.attr('id')+' touchstart.'+activates.attr('id'));}}});}
origin.on('open',function(e,eventType){placeDropdown(eventType);});origin.on('close',hideDropdown);});};$(document).ready(function(){$('.dropdown-button').dropdown();});}(jQuery));;(function($){var _stack=0,_lastID=0,_generateID=function(){_lastID++;return'materialize-modal-overlay-'+_lastID;};var methods={init:function(options){var defaults={opacity:0.5,inDuration:350,outDuration:250,ready:undefined,complete:undefined,dismissible:true,startingTop:'4%',endingTop:'10%'};options=$.extend(defaults,options);return this.each(function(){var $modal=$(this);var modal_id=$(this).attr("id")||'#'+$(this).data('target');var closeModal=function(){var overlayID=$modal.data('overlay-id');var $overlay=$('#'+overlayID);$modal.removeClass('open');$('body').css({overflow:'',width:''});$modal.find('.modal-close').off('click.close');$(document).off('keyup.modal'+overlayID);$overlay.velocity({opacity:0},{duration:options.outDuration,queue:false,ease:"easeOutQuart"});var exitVelocityOptions={duration:options.outDuration,queue:false,ease:"easeOutCubic",complete:function(){$(this).css({display:"none"});if(typeof(options.complete)==="function"){options.complete.call(this,$modal);}
$overlay.remove();_stack--;}};if($modal.hasClass('bottom-sheet')){$modal.velocity({bottom:"-100%",opacity:0},exitVelocityOptions);}
else{$modal.velocity({top:options.startingTop,opacity:0,scaleX:0.7},exitVelocityOptions);}};var openModal=function($trigger){var $body=$('body');var oldWidth=$body.innerWidth();$body.css('overflow','hidden');$body.width(oldWidth);if($modal.hasClass('open')){return;}
var overlayID=_generateID();var $overlay=$('<div class="modal-overlay"></div>');lStack=(++_stack);$overlay.attr('id',overlayID).css('z-index',1000+lStack*2);$modal.data('overlay-id',overlayID).css('z-index',1000+lStack*2+1);$modal.addClass('open');$("body").append($overlay);if(options.dismissible){$overlay.click(function(){closeModal();});$(document).on('keyup.modal'+overlayID,function(e){if(e.keyCode===27){closeModal();}});}
$modal.find(".modal-close").on('click.close',function(e){closeModal();});$overlay.css({display:"block",opacity:0});$modal.css({display:"block",opacity:0});$overlay.velocity({opacity:options.opacity},{duration:options.inDuration,queue:false,ease:"easeOutCubic"});$modal.data('associated-overlay',$overlay[0]);var enterVelocityOptions={duration:options.inDuration,queue:false,ease:"easeOutCubic",complete:function(){if(typeof(options.ready)==="function"){options.ready.call(this,$modal,$trigger);}}};if($modal.hasClass('bottom-sheet')){$modal.velocity({bottom:"0",opacity:1},enterVelocityOptions);}
else{$.Velocity.hook($modal,"scaleX",0.7);$modal.css({top:options.startingTop});$modal.velocity({top:options.endingTop,opacity:1,scaleX:'1'},enterVelocityOptions);}};$(document).off('click.modalTrigger','a[href="#'+modal_id+'"], [data-target="'+modal_id+'"]');$(this).off('openModal');$(this).off('closeModal');$(document).on('click.modalTrigger','a[href="#'+modal_id+'"], [data-target="'+modal_id+'"]',function(e){options.startingTop=($(this).offset().top-$(window).scrollTop())/1.15;openModal($(this));e.preventDefault();});$(this).on('openModal',function(){var modal_id=$(this).attr("href")||'#'+$(this).data('target');openModal();});$(this).on('closeModal',function(){closeModal();});});},open:function(){$(this).trigger('openModal');},close:function(){$(this).trigger('closeModal');}};$.fn.modal=function(methodOrOptions){if(methods[methodOrOptions]){return methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof methodOrOptions==='object'||!methodOrOptions){return methods.init.apply(this,arguments);}else{$.error('Method '+methodOrOptions+' does not exist on jQuery.modal');}};})(jQuery);;(function($){$.fn.materialbox=function(){return this.each(function(){if($(this).hasClass('initialized')){return;}
$(this).addClass('initialized');var overlayActive=false;var doneAnimating=true;var inDuration=275;var outDuration=200;var origin=$(this);var placeholder=$('<div></div>').addClass('material-placeholder');var originalWidth=0;var originalHeight=0;var ancestorsChanged;var ancestor;origin.wrap(placeholder);origin.on('click',function(){var placeholder=origin.parent('.material-placeholder');var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;var originalWidth=origin.width();var originalHeight=origin.height();if(doneAnimating===false){returnToOriginal();return false;}
else if(overlayActive&&doneAnimating===true){returnToOriginal();return false;}
doneAnimating=false;origin.addClass('active');overlayActive=true;placeholder.css({width:placeholder[0].getBoundingClientRect().width,height:placeholder[0].getBoundingClientRect().height,position:'relative',top:0,left:0});ancestorsChanged=undefined;ancestor=placeholder[0].parentNode;var count=0;while(ancestor!==null&&!$(ancestor).is(document)){var curr=$(ancestor);if(curr.css('overflow')!=='visible'){curr.css('overflow','visible');if(ancestorsChanged===undefined){ancestorsChanged=curr;}
else{ancestorsChanged=ancestorsChanged.add(curr);}}
ancestor=ancestor.parentNode;}
origin.css({position:'absolute','z-index':1000,'will-change':'left, top, width, height'}).data('width',originalWidth).data('height',originalHeight);var overlay=$('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){if(doneAnimating===true)
returnToOriginal();});origin.before(overlay);var overlayOffset=overlay[0].getBoundingClientRect();overlay.css({width:windowWidth,height:windowHeight,left:-1*overlayOffset.left,top:-1*overlayOffset.top})
overlay.velocity({opacity:1},{duration:inDuration,queue:false,easing:'easeOutQuad'});if(origin.data('caption')!==""){var $photo_caption=$('<div class="materialbox-caption"></div>');$photo_caption.text(origin.data('caption'));$('body').append($photo_caption);$photo_caption.css({"display":"inline"});$photo_caption.velocity({opacity:1},{duration:inDuration,queue:false,easing:'easeOutQuad'});}
var ratio=0;var widthPercent=originalWidth/windowWidth;var heightPercent=originalHeight/windowHeight;var newWidth=0;var newHeight=0;if(widthPercent>heightPercent){ratio=originalHeight/originalWidth;newWidth=windowWidth*0.9;newHeight=windowWidth*0.9*ratio;}
else{ratio=originalWidth/originalHeight;newWidth=(windowHeight*0.9)*ratio;newHeight=windowHeight*0.9;}
if(origin.hasClass('responsive-img')){origin.velocity({'max-width':newWidth,'width':originalWidth},{duration:0,queue:false,complete:function(){origin.css({left:0,top:0}).velocity({height:newHeight,width:newWidth,left:$(document).scrollLeft()+windowWidth/2-origin.parent('.material-placeholder').offset().left-newWidth/2,top:$(document).scrollTop()+windowHeight/2-origin.parent('.material-placeholder').offset().top-newHeight/2},{duration:inDuration,queue:false,easing:'easeOutQuad',complete:function(){doneAnimating=true;}});}});}
else{origin.css('left',0).css('top',0).velocity({height:newHeight,width:newWidth,left:$(document).scrollLeft()+windowWidth/2-origin.parent('.material-placeholder').offset().left-newWidth/2,top:$(document).scrollTop()+windowHeight/2-origin.parent('.material-placeholder').offset().top-newHeight/2},{duration:inDuration,queue:false,easing:'easeOutQuad',complete:function(){doneAnimating=true;}});}});$(window).scroll(function(){if(overlayActive){returnToOriginal();}});$(document).keyup(function(e){if(e.keyCode===27&&doneAnimating===true){if(overlayActive){returnToOriginal();}}});function returnToOriginal(){doneAnimating=false;var placeholder=origin.parent('.material-placeholder');var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;var originalWidth=origin.data('width');var originalHeight=origin.data('height');origin.velocity("stop",true);$('#materialbox-overlay').velocity("stop",true);$('.materialbox-caption').velocity("stop",true);$('#materialbox-overlay').velocity({opacity:0},{duration:outDuration,queue:false,easing:'easeOutQuad',complete:function(){overlayActive=false;$(this).remove();}});origin.velocity({width:originalWidth,height:originalHeight,left:0,top:0},{duration:outDuration,queue:false,easing:'easeOutQuad'});$('.materialbox-caption').velocity({opacity:0},{duration:outDuration,queue:false,easing:'easeOutQuad',complete:function(){placeholder.css({height:'',width:'',position:'',top:'',left:''});origin.css({height:'',top:'',left:'',width:'','max-width':'',position:'','z-index':'','will-change':''});origin.removeClass('active');doneAnimating=true;$(this).remove();if(ancestorsChanged){ancestorsChanged.css('overflow','');}}});}});};$(document).ready(function(){$('.materialboxed').materialbox();});}(jQuery));;(function($){$.fn.parallax=function(){var window_width=$(window).width();return this.each(function(i){var $this=$(this);$this.addClass('parallax');function updateParallax(initial){var container_height;if(window_width<601){container_height=($this.height()>0)?$this.height():$this.children("img").height();}
else{container_height=($this.height()>0)?$this.height():500;}
var $img=$this.children("img").first();var img_height=$img.height();var parallax_dist=img_height-container_height;var bottom=$this.offset().top+container_height;var top=$this.offset().top;var scrollTop=$(window).scrollTop();var windowHeight=window.innerHeight;var windowBottom=scrollTop+windowHeight;var percentScrolled=(windowBottom-top)/(container_height+windowHeight);var parallax=Math.round((parallax_dist*percentScrolled));if(initial){$img.css('display','block');}
if((bottom>scrollTop)&&(top<(scrollTop+windowHeight))){$img.css('transform',"translate3D(-50%,"+parallax+"px, 0)");}}
$this.children("img").one("load",function(){updateParallax(true);}).each(function(){if(this.complete)$(this).trigger("load");});$(window).scroll(function(){window_width=$(window).width();updateParallax(false);});$(window).resize(function(){window_width=$(window).width();updateParallax(false);});});};}(jQuery));;(function($){var methods={init:function(options){var defaults={onShow:null,swipeable:false,responsiveThreshold:Infinity,};options=$.extend(defaults,options);return this.each(function(){var $this=$(this),window_width=$(window).width();var $active,$content,$links=$this.find('li.tab a'),$tabs_width=$this.width(),$tabs_content=$(),$tabs_wrapper,$tab_width=Math.max($tabs_width,$this[0].scrollWidth)/$links.length,$indicator,index=prev_index=0,clicked=false,clickedTimeout,transition=300;var calcRightPos=function(el){return $tabs_width-el.position().left-el.outerWidth()-$this.scrollLeft();};var calcLeftPos=function(el){return el.position().left+$this.scrollLeft();};var animateIndicator=function(prev_index){if((index-prev_index)>=0){$indicator.velocity({"right":calcRightPos($active)},{duration:transition,queue:false,easing:'easeOutQuad'});$indicator.velocity({"left":calcLeftPos($active)},{duration:transition,queue:false,easing:'easeOutQuad',delay:90});}else{$indicator.velocity({"left":calcLeftPos($active)},{duration:transition,queue:false,easing:'easeOutQuad'});$indicator.velocity({"right":calcRightPos($active)},{duration:transition,queue:false,easing:'easeOutQuad',delay:90});}};if(options.swipeable){if(window_width>options.responsiveThreshold){options.swipeable=false;}}
$active=$($links.filter('[href="'+location.hash+'"]'));if($active.length===0){$active=$(this).find('li.tab a.active').first();}
if($active.length===0){$active=$(this).find('li.tab a').first();}
$active.addClass('active');index=$links.index($active);if(index<0){index=0;}
if($active[0]!==undefined){$content=$($active[0].hash);$content.addClass('active');}
if(!$this.find('.indicator').length){$this.append('<div class="indicator"></div>');}
$indicator=$this.find('.indicator');$this.append($indicator);if($this.is(":visible")){setTimeout(function(){$indicator.css({"right":calcRightPos($active)});$indicator.css({"left":calcLeftPos($active)});},0);}
$(window).resize(function(){$tabs_width=$this.width();$tab_width=Math.max($tabs_width,$this[0].scrollWidth)/$links.length;if(index<0){index=0;}
if($tab_width!==0&&$tabs_width!==0){$indicator.css({"right":calcRightPos($active)});$indicator.css({"left":calcLeftPos($active)});}});if(options.swipeable){$links.each(function(){var $curr_content=$(Materialize.escapeHash(this.hash));$curr_content.addClass('carousel-item');$tabs_content=$tabs_content.add($curr_content);});$tabs_wrapper=$tabs_content.wrapAll('<div class="tabs-content carousel"></div>');$tabs_content.css('display','');$('.tabs-content.carousel').carousel({fullWidth:true,noWrap:true,onCycleTo:function(item){if(!clicked){var prev_index=index;index=$tabs_wrapper.index(item);$active=$links.eq(index);animateIndicator(prev_index);}},});}else{$links.not($active).each(function(){$(Materialize.escapeHash(this.hash)).hide();});}
$this.on('click','a',function(e){if($(this).parent().hasClass('disabled')){e.preventDefault();return;}
if(!!$(this).attr("target")){return;}
clicked=true;$tabs_width=$this.width();$tab_width=Math.max($tabs_width,$this[0].scrollWidth)/$links.length;$active.removeClass('active');var $oldContent=$content
$active=$(this);$content=$(Materialize.escapeHash(this.hash));$links=$this.find('li.tab a');var activeRect=$active.position();$active.addClass('active');prev_index=index;index=$links.index($(this));if(index<0){index=0;}
if(options.swipeable){if($tabs_content.length){$tabs_content.carousel('set',index);}}else{if($content!==undefined){$content.show();$content.addClass('active');if(typeof(options.onShow)==="function"){options.onShow.call(this,$content);}}
if($oldContent!==undefined&&!$oldContent.is($content)){$oldContent.hide();$oldContent.removeClass('active');}}
clickedTimeout=setTimeout(function(){clicked=false;},transition);animateIndicator(prev_index);e.preventDefault();});});},select_tab:function(id){this.find('a[href="#'+id+'"]').trigger('click');}};$.fn.tabs=function(methodOrOptions){if(methods[methodOrOptions]){return methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof methodOrOptions==='object'||!methodOrOptions){return methods.init.apply(this,arguments);}else{$.error('Method '+methodOrOptions+' does not exist on jQuery.tabs');}};$(document).ready(function(){$('ul.tabs').tabs();});}(jQuery));;(function($){$.fn.tooltip=function(options){var timeout=null,margin=5;var defaults={delay:350,tooltip:'',position:'bottom',html:false};if(options==="remove"){this.each(function(){$('#'+$(this).attr('data-tooltip-id')).remove();$(this).off('mouseenter.tooltip mouseleave.tooltip');});return false;}
options=$.extend(defaults,options);return this.each(function(){var tooltipId=Materialize.guid();var origin=$(this);if(origin.attr('data-tooltip-id')){$('#'+origin.attr('data-tooltip-id')).remove();}
origin.attr('data-tooltip-id',tooltipId);var allowHtml,tooltipDelay,tooltipPosition,tooltipText,tooltipEl,backdrop;var setAttributes=function(){allowHtml=origin.attr('data-html')?origin.attr('data-html')==='true':options.html;tooltipDelay=origin.attr('data-delay');tooltipDelay=(tooltipDelay===undefined||tooltipDelay==='')?options.delay:tooltipDelay;tooltipPosition=origin.attr('data-position');tooltipPosition=(tooltipPosition===undefined||tooltipPosition==='')?options.position:tooltipPosition;tooltipText=origin.attr('data-tooltip');tooltipText=(tooltipText===undefined||tooltipText==='')?options.tooltip:tooltipText;};setAttributes();var renderTooltipEl=function(){var tooltip=$('<div class="material-tooltip"></div>');if(allowHtml){tooltipText=$('<span></span>').html(tooltipText);}else{tooltipText=$('<span></span>').text(tooltipText);}
tooltip.append(tooltipText).appendTo($('body')).attr('id',tooltipId);backdrop=$('<div class="backdrop"></div>');backdrop.appendTo(tooltip);return tooltip;};tooltipEl=renderTooltipEl();origin.off('mouseenter.tooltip mouseleave.tooltip');var started=false,timeoutRef;origin.on({'mouseenter.tooltip':function(e){var showTooltip=function(){setAttributes();started=true;tooltipEl.velocity('stop');backdrop.velocity('stop');tooltipEl.css({visibility:'visible',left:'0px',top:'0px'});var originWidth=origin.outerWidth();var originHeight=origin.outerHeight();var tooltipHeight=tooltipEl.outerHeight();var tooltipWidth=tooltipEl.outerWidth();var tooltipVerticalMovement='0px';var tooltipHorizontalMovement='0px';var backdropOffsetWidth=backdrop[0].offsetWidth;var backdropOffsetHeight=backdrop[0].offsetHeight;var scaleXFactor=8;var scaleYFactor=8;var scaleFactor=0;var targetTop,targetLeft,newCoordinates;if(tooltipPosition==="top"){targetTop=origin.offset().top-tooltipHeight-margin;targetLeft=origin.offset().left+originWidth/2-tooltipWidth/2;newCoordinates=repositionWithinScreen(targetLeft,targetTop,tooltipWidth,tooltipHeight);tooltipVerticalMovement='-10px';backdrop.css({bottom:0,left:0,borderRadius:'14px 14px 0 0',transformOrigin:'50% 100%',marginTop:tooltipHeight,marginLeft:(tooltipWidth/2)-(backdropOffsetWidth/2)});}
else if(tooltipPosition==="left"){targetTop=origin.offset().top+originHeight/2-tooltipHeight/2;targetLeft=origin.offset().left-tooltipWidth-margin;newCoordinates=repositionWithinScreen(targetLeft,targetTop,tooltipWidth,tooltipHeight);tooltipHorizontalMovement='-10px';backdrop.css({top:'-7px',right:0,width:'14px',height:'14px',borderRadius:'14px 0 0 14px',transformOrigin:'95% 50%',marginTop:tooltipHeight/2,marginLeft:tooltipWidth});}
else if(tooltipPosition==="right"){targetTop=origin.offset().top+originHeight/2-tooltipHeight/2;targetLeft=origin.offset().left+originWidth+margin;newCoordinates=repositionWithinScreen(targetLeft,targetTop,tooltipWidth,tooltipHeight);tooltipHorizontalMovement='+10px';backdrop.css({top:'-7px',left:0,width:'14px',height:'14px',borderRadius:'0 14px 14px 0',transformOrigin:'5% 50%',marginTop:tooltipHeight/2,marginLeft:'0px'});}
else{targetTop=origin.offset().top+origin.outerHeight()+margin;targetLeft=origin.offset().left+originWidth/2-tooltipWidth/2;newCoordinates=repositionWithinScreen(targetLeft,targetTop,tooltipWidth,tooltipHeight);tooltipVerticalMovement='+10px';backdrop.css({top:0,left:0,marginLeft:(tooltipWidth/2)-(backdropOffsetWidth/2)});}
tooltipEl.css({top:newCoordinates.y,left:newCoordinates.x});scaleXFactor=Math.SQRT2*tooltipWidth/parseInt(backdropOffsetWidth);scaleYFactor=Math.SQRT2*tooltipHeight/parseInt(backdropOffsetHeight);scaleFactor=Math.max(scaleXFactor,scaleYFactor);tooltipEl.velocity({translateY:tooltipVerticalMovement,translateX:tooltipHorizontalMovement},{duration:350,queue:false}).velocity({opacity:1},{duration:300,delay:50,queue:false});backdrop.css({visibility:'visible'}).velocity({opacity:1},{duration:55,delay:0,queue:false}).velocity({scaleX:scaleFactor,scaleY:scaleFactor},{duration:300,delay:0,queue:false,easing:'easeInOutQuad'});};timeoutRef=setTimeout(showTooltip,tooltipDelay);},'mouseleave.tooltip':function(){started=false;clearTimeout(timeoutRef);setTimeout(function(){if(started!==true){tooltipEl.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:false});backdrop.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:false,complete:function(){backdrop.css({visibility:'hidden'});tooltipEl.css({visibility:'hidden'});started=false;}});}},225);}});});};var repositionWithinScreen=function(x,y,width,height){var newX=x;var newY=y;if(newX<0){newX=4;}else if(newX+width>window.innerWidth){newX-=newX+width-window.innerWidth;}
if(newY<0){newY=4;}else if(newY+height>window.innerHeight+$(window).scrollTop){newY-=newY+height-window.innerHeight;}
return{x:newX,y:newY};};$(document).ready(function(){$('.tooltipped').tooltip();});}(jQuery));;/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */
;(function(window){'use strict';var Waves=Waves||{};var $$=document.querySelectorAll.bind(document);function isWindow(obj){return obj!==null&&obj===obj.window;}
function getWindow(elem){return isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;}
function offset(elem){var docElem,win,box={top:0,left:0},doc=elem&&elem.ownerDocument;docElem=doc.documentElement;if(typeof elem.getBoundingClientRect!==typeof undefined){box=elem.getBoundingClientRect();}
win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft};}
function convertStyle(obj){var style='';for(var a in obj){if(obj.hasOwnProperty(a)){style+=(a+':'+obj[a]+';');}}
return style;}
var Effect={duration:750,show:function(e,element){if(e.button===2){return false;}
var el=element||this;var ripple=document.createElement('div');ripple.className='waves-ripple';el.appendChild(ripple);var pos=offset(el);var relativeY=(e.pageY-pos.top);var relativeX=(e.pageX-pos.left);var scale='scale('+((el.clientWidth/100)*10)+')';if('touches'in e){relativeY=(e.touches[0].pageY-pos.top);relativeX=(e.touches[0].pageX-pos.left);}
ripple.setAttribute('data-hold',Date.now());ripple.setAttribute('data-scale',scale);ripple.setAttribute('data-x',relativeX);ripple.setAttribute('data-y',relativeY);var rippleStyle={'top':relativeY+'px','left':relativeX+'px'};ripple.className=ripple.className+' waves-notransition';ripple.setAttribute('style',convertStyle(rippleStyle));ripple.className=ripple.className.replace('waves-notransition','');rippleStyle['-webkit-transform']=scale;rippleStyle['-moz-transform']=scale;rippleStyle['-ms-transform']=scale;rippleStyle['-o-transform']=scale;rippleStyle.transform=scale;rippleStyle.opacity='1';rippleStyle['-webkit-transition-duration']=Effect.duration+'ms';rippleStyle['-moz-transition-duration']=Effect.duration+'ms';rippleStyle['-o-transition-duration']=Effect.duration+'ms';rippleStyle['transition-duration']=Effect.duration+'ms';rippleStyle['-webkit-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)';rippleStyle['-moz-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)';rippleStyle['-o-transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)';rippleStyle['transition-timing-function']='cubic-bezier(0.250, 0.460, 0.450, 0.940)';ripple.setAttribute('style',convertStyle(rippleStyle));},hide:function(e){TouchHandler.touchup(e);var el=this;var width=el.clientWidth*1.4;var ripple=null;var ripples=el.getElementsByClassName('waves-ripple');if(ripples.length>0){ripple=ripples[ripples.length-1];}else{return false;}
var relativeX=ripple.getAttribute('data-x');var relativeY=ripple.getAttribute('data-y');var scale=ripple.getAttribute('data-scale');var diff=Date.now()-Number(ripple.getAttribute('data-hold'));var delay=350-diff;if(delay<0){delay=0;}
setTimeout(function(){var style={'top':relativeY+'px','left':relativeX+'px','opacity':'0','-webkit-transition-duration':Effect.duration+'ms','-moz-transition-duration':Effect.duration+'ms','-o-transition-duration':Effect.duration+'ms','transition-duration':Effect.duration+'ms','-webkit-transform':scale,'-moz-transform':scale,'-ms-transform':scale,'-o-transform':scale,'transform':scale,};ripple.setAttribute('style',convertStyle(style));setTimeout(function(){try{el.removeChild(ripple);}catch(e){return false;}},Effect.duration);},delay);},wrapInput:function(elements){for(var a=0;a<elements.length;a++){var el=elements[a];if(el.tagName.toLowerCase()==='input'){var parent=el.parentNode;if(parent.tagName.toLowerCase()==='i'&&parent.className.indexOf('waves-effect')!==-1){continue;}
var wrapper=document.createElement('i');wrapper.className=el.className+' waves-input-wrapper';var elementStyle=el.getAttribute('style');if(!elementStyle){elementStyle='';}
wrapper.setAttribute('style',elementStyle);el.className='waves-button-input';el.removeAttribute('style');parent.replaceChild(wrapper,el);wrapper.appendChild(el);}}}};var TouchHandler={touches:0,allowEvent:function(e){var allow=true;if(e.type==='touchstart'){TouchHandler.touches+=1;}else if(e.type==='touchend'||e.type==='touchcancel'){setTimeout(function(){if(TouchHandler.touches>0){TouchHandler.touches-=1;}},500);}else if(e.type==='mousedown'&&TouchHandler.touches>0){allow=false;}
return allow;},touchup:function(e){TouchHandler.allowEvent(e);}};function getWavesEffectElement(e){if(TouchHandler.allowEvent(e)===false){return null;}
var element=null;var target=e.target||e.srcElement;while(target.parentElement!==null){if(!(target instanceof SVGElement)&&target.className.indexOf('waves-effect')!==-1){element=target;break;}else if(target.classList.contains('waves-effect')){element=target;break;}
target=target.parentElement;}
return element;}
function showEffect(e){var element=getWavesEffectElement(e);if(element!==null){Effect.show(e,element);if('ontouchstart'in window){element.addEventListener('touchend',Effect.hide,false);element.addEventListener('touchcancel',Effect.hide,false);}
element.addEventListener('mouseup',Effect.hide,false);element.addEventListener('mouseleave',Effect.hide,false);}}
Waves.displayEffect=function(options){options=options||{};if('duration'in options){Effect.duration=options.duration;}
Effect.wrapInput($$('.waves-effect'));if('ontouchstart'in window){document.body.addEventListener('touchstart',showEffect,false);}
document.body.addEventListener('mousedown',showEffect,false);};Waves.attach=function(element){if(element.tagName.toLowerCase()==='input'){Effect.wrapInput([element]);element=element.parentElement;}
if('ontouchstart'in window){element.addEventListener('touchstart',showEffect,false);}
element.addEventListener('mousedown',showEffect,false);};window.Waves=Waves;document.addEventListener('DOMContentLoaded',function(){Waves.displayEffect();},false);})(window);;Materialize.toast=function(message,displayLength,className,completeCallback){className=className||"";var container=document.getElementById('toast-container');if(container===null){container=document.createElement('div');container.id='toast-container';document.body.appendChild(container);}
var newToast=createToast(message);if(message){container.appendChild(newToast);}
newToast.style.opacity=0;Vel(newToast,{translateY:'-35px',opacity:1},{duration:300,easing:'easeOutCubic',queue:false});var timeLeft=displayLength;var counterInterval;if(timeLeft!=null){counterInterval=setInterval(function(){if(newToast.parentNode===null)
window.clearInterval(counterInterval);if(!newToast.classList.contains('panning')){timeLeft-=20;}
if(timeLeft<=0){Vel(newToast,{"opacity":0,marginTop:'-40px'},{duration:375,easing:'easeOutExpo',queue:false,complete:function(){if(typeof(completeCallback)==="function")
completeCallback();this[0].parentNode.removeChild(this[0]);}});window.clearInterval(counterInterval);}},20);}
function createToast(html){var toast=document.createElement('div');toast.classList.add('toast');if(className){var classes=className.split(' ');for(var i=0,count=classes.length;i<count;i++){toast.classList.add(classes[i]);}}
if(typeof HTMLElement==="object"?html instanceof HTMLElement:html&&typeof html==="object"&&html!==null&&html.nodeType===1&&typeof html.nodeName==="string"){toast.appendChild(html);}
else if(html instanceof jQuery){toast.appendChild(html[0]);}
else{toast.innerHTML=html;}
var hammerHandler=new Hammer(toast,{prevent_default:false});hammerHandler.on('pan',function(e){var deltaX=e.deltaX;var activationDistance=80;if(!toast.classList.contains('panning')){toast.classList.add('panning');}
var opacityPercent=1-Math.abs(deltaX/activationDistance);if(opacityPercent<0)
opacityPercent=0;Vel(toast,{left:deltaX,opacity:opacityPercent},{duration:50,queue:false,easing:'easeOutQuad'});});hammerHandler.on('panend',function(e){var deltaX=e.deltaX;var activationDistance=80;if(Math.abs(deltaX)>activationDistance){Vel(toast,{marginTop:'-40px'},{duration:375,easing:'easeOutExpo',queue:false,complete:function(){if(typeof(completeCallback)==="function"){completeCallback();}
toast.parentNode.removeChild(toast);}});}else{toast.classList.remove('panning');Vel(toast,{left:0,opacity:1},{duration:300,easing:'easeOutExpo',queue:false});}});return toast;}};;(function($){var methods={init:function(options){var defaults={menuWidth:300,edge:'left',closeOnClick:false,draggable:true};options=$.extend(defaults,options);$(this).each(function(){var $this=$(this);var menuId=$this.attr('data-activates');var menu=$("#"+menuId);if(options.menuWidth!=300){menu.css('width',options.menuWidth);}
var $dragTarget=$('.drag-target[data-sidenav="'+menuId+'"]');if(options.draggable){if($dragTarget.length){$dragTarget.remove();}
$dragTarget=$('<div class="drag-target"></div>').attr('data-sidenav',menuId);$('body').append($dragTarget);}else{$dragTarget=$();}
if(options.edge=='left'){menu.css('transform','translateX(-100%)');$dragTarget.css({'left':0});}
else{menu.addClass('right-aligned').css('transform','translateX(100%)');$dragTarget.css({'right':0});}
if(menu.hasClass('fixed')){if(window.innerWidth>992){menu.css('transform','translateX(0)');}}
if(menu.hasClass('fixed')){$(window).resize(function(){if(window.innerWidth>992){if($('#sidenav-overlay').length!==0&&menuOut){removeMenu(true);}
else{menu.css('transform','translateX(0%)');}}
else if(menuOut===false){if(options.edge==='left'){menu.css('transform','translateX(-100%)');}else{menu.css('transform','translateX(100%)');}}});}
if(options.closeOnClick===true){menu.on("click.itemclick","a:not(.collapsible-header)",function(){removeMenu();});}
var removeMenu=function(restoreNav){panning=false;menuOut=false;$('body').css({overflow:'',width:''});$('#sidenav-overlay').velocity({opacity:0},{duration:200,queue:false,easing:'easeOutQuad',complete:function(){$(this).remove();}});if(options.edge==='left'){$dragTarget.css({width:'',right:'',left:'0'});menu.velocity({'translateX':'-100%'},{duration:200,queue:false,easing:'easeOutCubic',complete:function(){if(restoreNav===true){menu.removeAttr('style');menu.css('width',options.menuWidth);}}});}
else{$dragTarget.css({width:'',right:'0',left:''});menu.velocity({'translateX':'100%'},{duration:200,queue:false,easing:'easeOutCubic',complete:function(){if(restoreNav===true){menu.removeAttr('style');menu.css('width',options.menuWidth);}}});}};var panning=false;var menuOut=false;if(options.draggable){$dragTarget.on('click',function(){if(menuOut){removeMenu();}});$dragTarget.hammer({prevent_default:false}).bind('pan',function(e){if(e.gesture.pointerType=="touch"){var direction=e.gesture.direction;var x=e.gesture.center.x;var y=e.gesture.center.y;var velocityX=e.gesture.velocityX;var $body=$('body');var $overlay=$('#sidenav-overlay');var oldWidth=$body.innerWidth();$body.css('overflow','hidden');$body.width(oldWidth);if($overlay.length===0){$overlay=$('<div id="sidenav-overlay"></div>');$overlay.css('opacity',0).click(function(){removeMenu();});$('body').append($overlay);}
if(options.edge==='left'){if(x>options.menuWidth){x=options.menuWidth;}
else if(x<0){x=0;}}
if(options.edge==='left'){if(x<(options.menuWidth/2)){menuOut=false;}
else if(x>=(options.menuWidth/2)){menuOut=true;}
menu.css('transform','translateX('+(x-options.menuWidth)+'px)');}
else{if(x<(window.innerWidth-options.menuWidth/2)){menuOut=true;}
else if(x>=(window.innerWidth-options.menuWidth/2)){menuOut=false;}
var rightPos=(x-options.menuWidth/2);if(rightPos<0){rightPos=0;}
menu.css('transform','translateX('+rightPos+'px)');}
var overlayPerc;if(options.edge==='left'){overlayPerc=x/options.menuWidth;$overlay.velocity({opacity:overlayPerc},{duration:10,queue:false,easing:'easeOutQuad'});}
else{overlayPerc=Math.abs((x-window.innerWidth)/options.menuWidth);$overlay.velocity({opacity:overlayPerc},{duration:10,queue:false,easing:'easeOutQuad'});}}}).bind('panend',function(e){if(e.gesture.pointerType=="touch"){var $overlay=$('<div id="sidenav-overlay"></div>');var velocityX=e.gesture.velocityX;var x=e.gesture.center.x;var leftPos=x-options.menuWidth;var rightPos=x-options.menuWidth/2;if(leftPos>0){leftPos=0;}
if(rightPos<0){rightPos=0;}
panning=false;if(options.edge==='left'){if((menuOut&&velocityX<=0.3)||velocityX<-0.5){if(leftPos!==0){menu.velocity({'translateX':[0,leftPos]},{duration:300,queue:false,easing:'easeOutQuad'});}
$overlay.velocity({opacity:1},{duration:50,queue:false,easing:'easeOutQuad'});$dragTarget.css({width:'50%',right:0,left:''});menuOut=true;}
else if(!menuOut||velocityX>0.3){$('body').css({overflow:'',width:''});menu.velocity({'translateX':[-1*options.menuWidth-10,leftPos]},{duration:200,queue:false,easing:'easeOutQuad'});$overlay.velocity({opacity:0},{duration:200,queue:false,easing:'easeOutQuad',complete:function(){$(this).remove();}});$dragTarget.css({width:'10px',right:'',left:0});}}
else{if((menuOut&&velocityX>=-0.3)||velocityX>0.5){if(rightPos!==0){menu.velocity({'translateX':[0,rightPos]},{duration:300,queue:false,easing:'easeOutQuad'});}
$overlay.velocity({opacity:1},{duration:50,queue:false,easing:'easeOutQuad'});$dragTarget.css({width:'50%',right:'',left:0});menuOut=true;}
else if(!menuOut||velocityX<-0.3){$('body').css({overflow:'',width:''});menu.velocity({'translateX':[options.menuWidth+10,rightPos]},{duration:200,queue:false,easing:'easeOutQuad'});$overlay.velocity({opacity:0},{duration:200,queue:false,easing:'easeOutQuad',complete:function(){$(this).remove();}});$dragTarget.css({width:'10px',right:0,left:''});}}}});}
$this.off('click.sidenav').on('click.sidenav',function(){if(menuOut===true){menuOut=false;panning=false;removeMenu();}
else{var $body=$('body');var $overlay=$('<div id="sidenav-overlay"></div>');var oldWidth=$body.innerWidth();$body.css('overflow','hidden');$body.width(oldWidth);$('body').append($dragTarget);if(options.edge==='left'){$dragTarget.css({width:'50%',right:0,left:''});menu.velocity({'translateX':[0,-1*options.menuWidth]},{duration:300,queue:false,easing:'easeOutQuad'});}
else{$dragTarget.css({width:'50%',right:'',left:0});menu.velocity({'translateX':[0,options.menuWidth]},{duration:300,queue:false,easing:'easeOutQuad'});}
$overlay.css('opacity',0).click(function(){menuOut=false;panning=false;removeMenu();$overlay.velocity({opacity:0},{duration:300,queue:false,easing:'easeOutQuad',complete:function(){$(this).remove();}});});$('body').append($overlay);$overlay.velocity({opacity:1},{duration:300,queue:false,easing:'easeOutQuad',complete:function(){menuOut=true;panning=false;}});}
return false;});});},destroy:function(){var $overlay=$('#sidenav-overlay');var $dragTarget=$('.drag-target[data-sidenav="'+$(this).attr('data-activates')+'"]');$overlay.trigger('click');$dragTarget.remove();$(this).off('click');$overlay.remove();},show:function(){this.trigger('click');},hide:function(){$('#sidenav-overlay').trigger('click');}};$.fn.sideNav=function(methodOrOptions){if(methods[methodOrOptions]){return methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof methodOrOptions==='object'||!methodOrOptions){return methods.init.apply(this,arguments);}else{$.error('Method '+methodOrOptions+' does not exist on jQuery.sideNav');}};}(jQuery));;(function($){var jWindow=$(window);var elements=[];var elementsInView=[];var isSpying=false;var ticks=0;var unique_id=1;var offset={top:0,right:0,bottom:0,left:0,}
function findElements(top,right,bottom,left){var hits=$();$.each(elements,function(i,element){if(element.height()>0){var elTop=element.offset().top,elLeft=element.offset().left,elRight=elLeft+element.width(),elBottom=elTop+element.height();var isIntersect=!(elLeft>right||elRight<left||elTop>bottom||elBottom<top);if(isIntersect){hits.push(element);}}});return hits;}
function onScroll(scrollOffset){++ticks;var top=jWindow.scrollTop(),left=jWindow.scrollLeft(),right=left+jWindow.width(),bottom=top+jWindow.height();var intersections=findElements(top+offset.top+scrollOffset||200,right+offset.right,bottom+offset.bottom,left+offset.left);$.each(intersections,function(i,element){var lastTick=element.data('scrollSpy:ticks');if(typeof lastTick!='number'){element.triggerHandler('scrollSpy:enter');}
element.data('scrollSpy:ticks',ticks);});$.each(elementsInView,function(i,element){var lastTick=element.data('scrollSpy:ticks');if(typeof lastTick=='number'&&lastTick!==ticks){element.triggerHandler('scrollSpy:exit');element.data('scrollSpy:ticks',null);}});elementsInView=intersections;}
function onWinSize(){jWindow.trigger('scrollSpy:winSize');}
$.scrollSpy=function(selector,options){var defaults={throttle:100,scrollOffset:200};options=$.extend(defaults,options);var visible=[];selector=$(selector);selector.each(function(i,element){elements.push($(element));$(element).data("scrollSpy:id",i);$('a[href="#'+$(element).attr('id')+'"]').click(function(e){e.preventDefault();var offset=$(Materialize.escapeHash(this.hash)).offset().top+1;$('html, body').animate({scrollTop:offset-options.scrollOffset},{duration:400,queue:false,easing:'easeOutCubic'});});});offset.top=options.offsetTop||0;offset.right=options.offsetRight||0;offset.bottom=options.offsetBottom||0;offset.left=options.offsetLeft||0;var throttledScroll=Materialize.throttle(function(){onScroll(options.scrollOffset);},options.throttle||100);var readyScroll=function(){$(document).ready(throttledScroll);};if(!isSpying){jWindow.on('scroll',readyScroll);jWindow.on('resize',readyScroll);isSpying=true;}
setTimeout(readyScroll,0);selector.on('scrollSpy:enter',function(){visible=$.grep(visible,function(value){return value.height()!=0;});var $this=$(this);if(visible[0]){$('a[href="#'+visible[0].attr('id')+'"]').removeClass('active');if($this.data('scrollSpy:id')<visible[0].data('scrollSpy:id')){visible.unshift($(this));}
else{visible.push($(this));}}
else{visible.push($(this));}
$('a[href="#'+visible[0].attr('id')+'"]').addClass('active');});selector.on('scrollSpy:exit',function(){visible=$.grep(visible,function(value){return value.height()!=0;});if(visible[0]){$('a[href="#'+visible[0].attr('id')+'"]').removeClass('active');var $this=$(this);visible=$.grep(visible,function(value){return value.attr('id')!=$this.attr('id');});if(visible[0]){$('a[href="#'+visible[0].attr('id')+'"]').addClass('active');}}});return selector;};$.winSizeSpy=function(options){$.winSizeSpy=function(){return jWindow;};options=options||{throttle:100};return jWindow.on('resize',Materialize.throttle(onWinSize,options.throttle||100));};$.fn.scrollSpy=function(options){return $.scrollSpy($(this),options);};})(jQuery);;(function($){$(document).ready(function(){Materialize.updateTextFields=function(){var input_selector='input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';$(input_selector).each(function(index,element){var $this=$(this);if($(element).val().length>0||element.autofocus||$this.attr('placeholder')!==undefined){$this.siblings('label').addClass('active');}else if($(element)[0].validity){$this.siblings('label').toggleClass('active',$(element)[0].validity.badInput===true);}else{$this.siblings('label').removeClass('active');}});};var input_selector='input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';$(document).on('change',input_selector,function(){if($(this).val().length!==0||$(this).attr('placeholder')!==undefined){$(this).siblings('label').addClass('active');}
validate_field($(this));});$(document).ready(function(){Materialize.updateTextFields();});$(document).on('reset',function(e){var formReset=$(e.target);if(formReset.is('form')){formReset.find(input_selector).removeClass('valid').removeClass('invalid');formReset.find(input_selector).each(function(){if($(this).attr('value')===''){$(this).siblings('label').removeClass('active');}});formReset.find('select.initialized').each(function(){var reset_text=formReset.find('option[selected]').text();formReset.siblings('input.select-dropdown').val(reset_text);});}});$(document).on('focus',input_selector,function(){$(this).siblings('label, .prefix').addClass('active');});$(document).on('blur',input_selector,function(){var $inputElement=$(this);var selector=".prefix";if($inputElement.val().length===0&&$inputElement[0].validity.badInput!==true&&$inputElement.attr('placeholder')===undefined){selector+=", label";}
$inputElement.siblings(selector).removeClass('active');validate_field($inputElement);});window.validate_field=function(object){var hasLength=object.attr('data-length')!==undefined;var lenAttr=parseInt(object.attr('data-length'));var len=object.val().length;if(object.val().length===0&&object[0].validity.badInput===false){if(object.hasClass('validate')){object.removeClass('valid');object.removeClass('invalid');}}
else{if(object.hasClass('validate')){if((object.is(':valid')&&hasLength&&(len<=lenAttr))||(object.is(':valid')&&!hasLength)){object.removeClass('invalid');object.addClass('valid');}
else{object.removeClass('valid');object.addClass('invalid');}}}};var radio_checkbox='input[type=radio], input[type=checkbox]';$(document).on('keyup.radio',radio_checkbox,function(e){if(e.which===9){$(this).addClass('tabbed');var $this=$(this);$this.one('blur',function(e){$(this).removeClass('tabbed');});return;}});var hiddenDiv=$('.hiddendiv').first();if(!hiddenDiv.length){hiddenDiv=$('<div class="hiddendiv common"></div>');$('body').append(hiddenDiv);}
var text_area_selector='.materialize-textarea';function textareaAutoResize($textarea){var fontFamily=$textarea.css('font-family');var fontSize=$textarea.css('font-size');var lineHeight=$textarea.css('line-height');if(fontSize){hiddenDiv.css('font-size',fontSize);}
if(fontFamily){hiddenDiv.css('font-family',fontFamily);}
if(lineHeight){hiddenDiv.css('line-height',lineHeight);}
if($textarea.attr('wrap')==="off"){hiddenDiv.css('overflow-wrap',"normal").css('white-space',"pre");}
hiddenDiv.text($textarea.val()+'\n');var content=hiddenDiv.html().replace(/\n/g,'<br>');hiddenDiv.html(content);if($textarea.is(':visible')){hiddenDiv.css('width',$textarea.width());}
else{hiddenDiv.css('width',$(window).width()/2);}
$textarea.css('height',hiddenDiv.height());}
$(text_area_selector).each(function(){var $textarea=$(this);if($textarea.val().length){textareaAutoResize($textarea);}});$('body').on('keyup keydown autoresize',text_area_selector,function(){textareaAutoResize($(this));});$(document).on('change','.file-field input[type="file"]',function(){var file_field=$(this).closest('.file-field');var path_input=file_field.find('input.file-path');var files=$(this)[0].files;var file_names=[];for(var i=0;i<files.length;i++){file_names.push(files[i].name);}
path_input.val(file_names.join(", "));path_input.trigger('change');});var range_type='input[type=range]';var range_mousedown=false;var left;$(range_type).each(function(){var thumb=$('<span class="thumb"><span class="value"></span></span>');$(this).after(thumb);});var range_wrapper='.range-field';$(document).on('change',range_type,function(e){var thumb=$(this).siblings('.thumb');thumb.find('.value').html($(this).val());});$(document).on('input mousedown touchstart',range_type,function(e){var thumb=$(this).siblings('.thumb');var width=$(this).outerWidth();if(thumb.length<=0){thumb=$('<span class="thumb"><span class="value"></span></span>');$(this).after(thumb);}
thumb.find('.value').html($(this).val());range_mousedown=true;$(this).addClass('active');if(!thumb.hasClass('active')){thumb.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:'easeOutExpo'});}
if(e.type!=='input'){if(e.pageX===undefined||e.pageX===null){left=e.originalEvent.touches[0].pageX-$(this).offset().left;}
else{left=e.pageX-$(this).offset().left;}
if(left<0){left=0;}
else if(left>width){left=width;}
thumb.addClass('active').css('left',left);}
thumb.find('.value').html($(this).val());});$(document).on('mouseup touchend',range_wrapper,function(){range_mousedown=false;$(this).removeClass('active');});$(document).on('mousemove touchmove',range_wrapper,function(e){var thumb=$(this).children('.thumb');var left;if(range_mousedown){if(!thumb.hasClass('active')){thumb.velocity({height:'30px',width:'30px',top:'-20px',marginLeft:'-15px'},{duration:300,easing:'easeOutExpo'});}
if(e.pageX===undefined||e.pageX===null){left=e.originalEvent.touches[0].pageX-$(this).offset().left;}
else{left=e.pageX-$(this).offset().left;}
var width=$(this).outerWidth();if(left<0){left=0;}
else if(left>width){left=width;}
thumb.addClass('active').css('left',left);thumb.find('.value').html(thumb.siblings(range_type).val());}});$(document).on('mouseout touchleave',range_wrapper,function(){if(!range_mousedown){var thumb=$(this).children('.thumb');if(thumb.hasClass('active')){thumb.velocity({height:'0',width:'0',top:'10px',marginLeft:'-6px'},{duration:100});}
thumb.removeClass('active');}});$.fn.autocomplete=function(options){var defaults={data:{},limit:Infinity,onAutocomplete:null};options=$.extend(defaults,options);return this.each(function(){var $input=$(this);var data=options.data,count=0,activeIndex=0,oldVal,$inputDiv=$input.closest('.input-field');if(!$.isEmptyObject(data)){var $autocomplete=$('<ul class="autocomplete-content dropdown-content"></ul>');var $oldAutocomplete;if($inputDiv.length){$oldAutocomplete=$inputDiv.children('.autocomplete-content.dropdown-content').first();if(!$oldAutocomplete.length){$inputDiv.append($autocomplete);}}else{$oldAutocomplete=$input.next('.autocomplete-content.dropdown-content');if(!$oldAutocomplete.length){$input.after($autocomplete);}}
if($oldAutocomplete.length){$autocomplete=$oldAutocomplete;}
var highlight=function(string,$el){var img=$el.find('img');var matchStart=$el.text().toLowerCase().indexOf(""+string.toLowerCase()+""),matchEnd=matchStart+string.length-1,beforeMatch=$el.text().slice(0,matchStart),matchText=$el.text().slice(matchStart,matchEnd+1),afterMatch=$el.text().slice(matchEnd+1);$el.html("<span>"+beforeMatch+"<span class='highlight'>"+matchText+"</span>"+afterMatch+"</span>");if(img.length){$el.prepend(img);}};var resetCurrentElement=function(){activeIndex=0;$autocomplete.find('.active').removeClass('active');}
$input.off('keyup.autocomplete').on('keyup.autocomplete',function(e){count=0;if(e.which===13||e.which===38||e.which===40){return;}
var val=$input.val().toLowerCase();if(oldVal!==val){$autocomplete.empty();resetCurrentElement();if(val!==''){for(var key in data){if(data.hasOwnProperty(key)&&key.toLowerCase().indexOf(val)!==-1&&key.toLowerCase()!==val){if(count>=options.limit){break;}
var autocompleteOption=$('<li></li>');if(!!data[key]){autocompleteOption.append('<img src="'+data[key]+'" class="right circle"><span>'+key+'</span>');}else{autocompleteOption.append('<span>'+key+'</span>');}
$autocomplete.append(autocompleteOption);highlight(val,autocompleteOption);count++;}}}}
oldVal=val;});$input.off('keydown.autocomplete').on('keydown.autocomplete',function(e){var keyCode=e.which,liElement,numItems=$autocomplete.children('li').length,$active=$autocomplete.children('.active').first();if(keyCode===13){liElement=$autocomplete.children('li').eq(activeIndex);if(liElement.length){liElement.click();e.preventDefault();}
return;}
if(keyCode===38||keyCode===40){e.preventDefault();if(keyCode===38&&activeIndex>0){activeIndex--;}
if(keyCode===40&&activeIndex<(numItems-1)&&$active.length){activeIndex++;}
$active.removeClass('active');$autocomplete.children('li').eq(activeIndex).addClass('active');}});$autocomplete.on('click','li',function(){var text=$(this).text().trim();$input.val(text);$input.trigger('change');$autocomplete.empty();resetCurrentElement();if(typeof(options.onAutocomplete)==="function"){options.onAutocomplete.call(this,text);}});}});};});$.fn.material_select=function(callback){$(this).each(function(){var $select=$(this);if($select.hasClass('browser-default')){return;}
var multiple=$select.attr('multiple')?true:false,lastID=$select.data('select-id');if(lastID){$select.parent().find('span.caret').remove();$select.parent().find('input').remove();$select.unwrap();$('ul#select-options-'+lastID).remove();}
if(callback==='destroy'){$select.data('select-id',null).removeClass('initialized');return;}
var uniqueID=Materialize.guid();$select.data('select-id',uniqueID);var wrapper=$('<div class="select-wrapper"></div>');wrapper.addClass($select.attr('class'));var options=$('<ul id="select-options-'+uniqueID+'" class="dropdown-content select-dropdown '+(multiple?'multiple-select-dropdown':'')+'"></ul>'),selectChildren=$select.children('option, optgroup'),valuesSelected=[],optionsHover=false;var label=$select.find('option:selected').html()||$select.find('option:first').html()||"";var appendOptionWithIcon=function(select,option,type){var disabledClass=(option.is(':disabled'))?'disabled ':'';var optgroupClass=(type==='optgroup-option')?'optgroup-option ':'';var icon_url=option.data('icon');var classes=option.attr('class');if(!!icon_url){var classString='';if(!!classes)classString=' class="'+classes+'"';if(type==='multiple'){options.append($('<li class="'+disabledClass+'"><img alt="" src="'+icon_url+'"'+classString+'><span><input type="checkbox"'+disabledClass+'/><label></label>'+option.html()+'</span></li>'));}else{options.append($('<li class="'+disabledClass+optgroupClass+'"><img alt="" src="'+icon_url+'"'+classString+'><span>'+option.html()+'</span></li>'));}
return true;}
if(type==='multiple'){options.append($('<li class="'+disabledClass+'"><span><input type="checkbox"'+disabledClass+'/><label></label>'+option.html()+'</span></li>'));}else{options.append($('<li class="'+disabledClass+optgroupClass+'"><span>'+option.html()+'</span></li>'));}};if(selectChildren.length){selectChildren.each(function(){if($(this).is('option')){if(multiple){appendOptionWithIcon($select,$(this),'multiple');}else{appendOptionWithIcon($select,$(this));}}else if($(this).is('optgroup')){var selectOptions=$(this).children('option');options.append($('<li class="optgroup"><span>'+$(this).attr('label')+'</span></li>'));selectOptions.each(function(){appendOptionWithIcon($select,$(this),'optgroup-option');});}});}
options.find('li:not(.optgroup)').each(function(i){$(this).click(function(e){if(!$(this).hasClass('disabled')&&!$(this).hasClass('optgroup')){var selected=true;if(multiple){$('input[type="checkbox"]',this).prop('checked',function(i,v){return!v;});selected=toggleEntryFromArray(valuesSelected,$(this).index(),$select);$newSelect.trigger('focus');}else{options.find('li').removeClass('active');$(this).toggleClass('active');$newSelect.val($(this).text());}
activateOption(options,$(this));$select.find('option').eq(i).prop('selected',selected);$select.trigger('change');if(typeof callback!=='undefined')callback();}
e.stopPropagation();});});$select.wrap(wrapper);var dropdownIcon=$('<span class="caret">&#9660;</span>');if($select.is(':disabled'))
dropdownIcon.addClass('disabled');var sanitizedLabelHtml=label.replace(/"/g,'&quot;');var $newSelect=$('<input type="text" class="select-dropdown" readonly="true" '+(($select.is(':disabled'))?'disabled':'')+' data-activates="select-options-'+uniqueID+'" value="'+sanitizedLabelHtml+'"/>');$select.before($newSelect);$newSelect.before(dropdownIcon);$newSelect.after(options);if(!$select.is(':disabled')){$newSelect.dropdown({'hover':false,'closeOnClick':false});}
if($select.attr('tabindex')){$($newSelect[0]).attr('tabindex',$select.attr('tabindex'));}
$select.addClass('initialized');$newSelect.on({'focus':function(){if($('ul.select-dropdown').not(options[0]).is(':visible')){$('input.select-dropdown').trigger('close');}
if(!options.is(':visible')){$(this).trigger('open',['focus']);var label=$(this).val();if(multiple&&label.indexOf(',')>=0){label=label.split(',')[0];}
var selectedOption=options.find('li').filter(function(){return $(this).text().toLowerCase()===label.toLowerCase();})[0];activateOption(options,selectedOption,true);}},'click':function(e){e.stopPropagation();}});$newSelect.on('blur',function(){if(!multiple){$(this).trigger('close');}
options.find('li.selected').removeClass('selected');});options.hover(function(){optionsHover=true;},function(){optionsHover=false;});$(window).on({'click':function(){multiple&&(optionsHover||$newSelect.trigger('close'));}});if(multiple){$select.find("option:selected:not(:disabled)").each(function(){var index=$(this).index();toggleEntryFromArray(valuesSelected,index,$select);options.find("li").eq(index).find(":checkbox").prop("checked",true);});}
var activateOption=function(collection,newOption,firstActivation){if(newOption){collection.find('li.selected').removeClass('selected');var option=$(newOption);option.addClass('selected');if(!multiple||!!firstActivation){options.scrollTo(option);}}};var filterQuery=[],onKeyDown=function(e){if(e.which==9){$newSelect.trigger('close');return;}
if(e.which==40&&!options.is(':visible')){$newSelect.trigger('open');return;}
if(e.which==13&&!options.is(':visible')){return;}
e.preventDefault();var letter=String.fromCharCode(e.which).toLowerCase(),nonLetters=[9,13,27,38,40];if(letter&&(nonLetters.indexOf(e.which)===-1)){filterQuery.push(letter);var string=filterQuery.join(''),newOption=options.find('li').filter(function(){return $(this).text().toLowerCase().indexOf(string)===0;})[0];if(newOption){activateOption(options,newOption);}}
if(e.which==13){var activeOption=options.find('li.selected:not(.disabled)')[0];if(activeOption){$(activeOption).trigger('click');if(!multiple){$newSelect.trigger('close');}}}
if(e.which==40){if(options.find('li.selected').length){newOption=options.find('li.selected').next('li:not(.disabled)')[0];}else{newOption=options.find('li:not(.disabled)')[0];}
activateOption(options,newOption);}
if(e.which==27){$newSelect.trigger('close');}
if(e.which==38){newOption=options.find('li.selected').prev('li:not(.disabled)')[0];if(newOption)
activateOption(options,newOption);}
setTimeout(function(){filterQuery=[];},1000);};$newSelect.on('keydown',onKeyDown);});function toggleEntryFromArray(entriesArray,entryIndex,select){var index=entriesArray.indexOf(entryIndex),notAdded=index===-1;if(notAdded){entriesArray.push(entryIndex);}else{entriesArray.splice(index,1);}
select.siblings('ul.dropdown-content').find('li').eq(entryIndex).toggleClass('active');select.find('option').eq(entryIndex).prop('selected',notAdded);setValueToInput(entriesArray,select);return notAdded;}
function setValueToInput(entriesArray,select){var value='';for(var i=0,count=entriesArray.length;i<count;i++){var text=select.find('option').eq(entriesArray[i]).text();i===0?value+=text:value+=', '+text;}
if(value===''){value=select.find('option:disabled').eq(0).text();}
select.siblings('input.select-dropdown').val(value);}};}(jQuery));;(function($){var methods={init:function(options){var defaults={indicators:true,height:400,transition:500,interval:6000};options=$.extend(defaults,options);return this.each(function(){var $this=$(this);var $slider=$this.find('ul.slides').first();var $slides=$slider.find('> li');var $active_index=$slider.find('.active').index();var $active,$indicators,$interval;if($active_index!=-1){$active=$slides.eq($active_index);}
function captionTransition(caption,duration){if(caption.hasClass("center-align")){caption.velocity({opacity:0,translateY:-100},{duration:duration,queue:false});}
else if(caption.hasClass("right-align")){caption.velocity({opacity:0,translateX:100},{duration:duration,queue:false});}
else if(caption.hasClass("left-align")){caption.velocity({opacity:0,translateX:-100},{duration:duration,queue:false});}}
function moveToSlide(index){if(index>=$slides.length)index=0;else if(index<0)index=$slides.length-1;$active_index=$slider.find('.active').index();if($active_index!=index){$active=$slides.eq($active_index);$caption=$active.find('.caption');$active.removeClass('active');$active.velocity({opacity:0},{duration:options.transition,queue:false,easing:'easeOutQuad',complete:function(){$slides.not('.active').velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:false});}});captionTransition($caption,options.transition);if(options.indicators){$indicators.eq($active_index).removeClass('active');}
$slides.eq(index).velocity({opacity:1},{duration:options.transition,queue:false,easing:'easeOutQuad'});$slides.eq(index).find('.caption').velocity({opacity:1,translateX:0,translateY:0},{duration:options.transition,delay:options.transition,queue:false,easing:'easeOutQuad'});$slides.eq(index).addClass('active');if(options.indicators){$indicators.eq(index).addClass('active');}}}
if(!$this.hasClass('fullscreen')){if(options.indicators){$this.height(options.height+40);}
else{$this.height(options.height);}
$slider.height(options.height);}
$slides.find('.caption').each(function(){captionTransition($(this),0);});$slides.find('img').each(function(){var placeholderBase64='data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';if($(this).attr('src')!==placeholderBase64){$(this).css('background-image','url('+$(this).attr('src')+')');$(this).attr('src',placeholderBase64);}});if(options.indicators){$indicators=$('<ul class="indicators"></ul>');$slides.each(function(index){var $indicator=$('<li class="indicator-item"></li>');$indicator.click(function(){var $parent=$slider.parent();var curr_index=$parent.find($(this)).index();moveToSlide(curr_index);clearInterval($interval);$interval=setInterval(function(){$active_index=$slider.find('.active').index();if($slides.length==$active_index+1)$active_index=0;else $active_index+=1;moveToSlide($active_index);},options.transition+options.interval);});$indicators.append($indicator);});$this.append($indicators);$indicators=$this.find('ul.indicators').find('li.indicator-item');}
if($active){$active.show();}
else{$slides.first().addClass('active').velocity({opacity:1},{duration:options.transition,queue:false,easing:'easeOutQuad'});$active_index=0;$active=$slides.eq($active_index);if(options.indicators){$indicators.eq($active_index).addClass('active');}}
$active.find('img').each(function(){$active.find('.caption').velocity({opacity:1,translateX:0,translateY:0},{duration:options.transition,queue:false,easing:'easeOutQuad'});});$interval=setInterval(function(){$active_index=$slider.find('.active').index();moveToSlide($active_index+1);},options.transition+options.interval);var panning=false;var swipeLeft=false;var swipeRight=false;$this.hammer({prevent_default:false}).bind('pan',function(e){if(e.gesture.pointerType==="touch"){clearInterval($interval);var direction=e.gesture.direction;var x=e.gesture.deltaX;var velocityX=e.gesture.velocityX;var velocityY=e.gesture.velocityY;$curr_slide=$slider.find('.active');if(Math.abs(velocityX)>Math.abs(velocityY)){$curr_slide.velocity({translateX:x},{duration:50,queue:false,easing:'easeOutQuad'});}
if(direction===4&&(x>($this.innerWidth()/2)||velocityX<-0.65)){swipeRight=true;}
else if(direction===2&&(x<(-1*$this.innerWidth()/2)||velocityX>0.65)){swipeLeft=true;}
var next_slide;if(swipeLeft){next_slide=$curr_slide.next();if(next_slide.length===0){next_slide=$slides.first();}
next_slide.velocity({opacity:1},{duration:300,queue:false,easing:'easeOutQuad'});}
if(swipeRight){next_slide=$curr_slide.prev();if(next_slide.length===0){next_slide=$slides.last();}
next_slide.velocity({opacity:1},{duration:300,queue:false,easing:'easeOutQuad'});}}}).bind('panend',function(e){if(e.gesture.pointerType==="touch"){$curr_slide=$slider.find('.active');panning=false;curr_index=$slider.find('.active').index();if(!swipeRight&&!swipeLeft||$slides.length<=1){$curr_slide.velocity({translateX:0},{duration:300,queue:false,easing:'easeOutQuad'});}
else if(swipeLeft){moveToSlide(curr_index+1);$curr_slide.velocity({translateX:-1*$this.innerWidth()},{duration:300,queue:false,easing:'easeOutQuad',complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:false});}});}
else if(swipeRight){moveToSlide(curr_index-1);$curr_slide.velocity({translateX:$this.innerWidth()},{duration:300,queue:false,easing:'easeOutQuad',complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:false});}});}
swipeLeft=false;swipeRight=false;clearInterval($interval);$interval=setInterval(function(){$active_index=$slider.find('.active').index();if($slides.length==$active_index+1)$active_index=0;else $active_index+=1;moveToSlide($active_index);},options.transition+options.interval);}});$this.on('sliderPause',function(){clearInterval($interval);});$this.on('sliderStart',function(){clearInterval($interval);$interval=setInterval(function(){$active_index=$slider.find('.active').index();if($slides.length==$active_index+1)$active_index=0;else $active_index+=1;moveToSlide($active_index);},options.transition+options.interval);});$this.on('sliderNext',function(){$active_index=$slider.find('.active').index();moveToSlide($active_index+1);});$this.on('sliderPrev',function(){$active_index=$slider.find('.active').index();moveToSlide($active_index-1);});});},pause:function(){$(this).trigger('sliderPause');},start:function(){$(this).trigger('sliderStart');},next:function(){$(this).trigger('sliderNext');},prev:function(){$(this).trigger('sliderPrev');}};$.fn.slider=function(methodOrOptions){if(methods[methodOrOptions]){return methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof methodOrOptions==='object'||!methodOrOptions){return methods.init.apply(this,arguments);}else{$.error('Method '+methodOrOptions+' does not exist on jQuery.tooltip');}};}(jQuery));;(function($){$(document).ready(function(){$(document).on('click.card','.card',function(e){if($(this).find('> .card-reveal').length){if($(e.target).is($('.card-reveal .card-title'))||$(e.target).is($('.card-reveal .card-title i'))){$(this).find('.card-reveal').velocity({translateY:0},{duration:225,queue:false,easing:'easeInOutQuad',complete:function(){$(this).css({display:'none'});}});}
else if($(e.target).is($('.card .activator'))||$(e.target).is($('.card .activator i'))){$(e.target).closest('.card').css('overflow','hidden');$(this).find('.card-reveal').css({display:'block'}).velocity("stop",false).velocity({translateY:'-100%'},{duration:300,queue:false,easing:'easeInOutQuad'});}}});});}(jQuery));;(function($){var materialChipsDefaults={data:[],placeholder:'',secondaryPlaceholder:'',autocompleteData:{},autocompleteLimit:Infinity,};$(document).ready(function(){$(document).on('click','.chip .close',function(e){var $chips=$(this).closest('.chips');if($chips.attr('data-initialized')){return;}
$(this).closest('.chip').remove();});});$.fn.material_chip=function(options){var self=this;this.$el=$(this);this.$document=$(document);this.SELS={CHIPS:'.chips',CHIP:'.chip',INPUT:'input',DELETE:'.material-icons',SELECTED_CHIP:'.selected',};if('data'===options){return this.$el.data('chips');}
var curr_options=$.extend({},materialChipsDefaults,options);self.hasAutocomplete=!$.isEmptyObject(curr_options.autocompleteData);this.init=function(){var i=0;var chips;self.$el.each(function(){var $chips=$(this);var chipId=Materialize.guid();self.chipId=chipId;if(!curr_options.data||!(curr_options.data instanceof Array)){curr_options.data=[];}
$chips.data('chips',curr_options.data);$chips.attr('data-index',i);$chips.attr('data-initialized',true);if(!$chips.hasClass(self.SELS.CHIPS)){$chips.addClass('chips');}
self.chips($chips,chipId);i++;});};this.handleEvents=function(){var SELS=self.SELS;self.$document.off('click.chips-focus',SELS.CHIPS).on('click.chips-focus',SELS.CHIPS,function(e){$(e.target).find(SELS.INPUT).focus();});self.$document.off('click.chips-select',SELS.CHIP).on('click.chips-select',SELS.CHIP,function(e){var $chip=$(e.target);if($chip.length){var wasSelected=$chip.hasClass('selected');var $chips=$chip.closest(SELS.CHIPS);$(SELS.CHIP).removeClass('selected');if(!wasSelected){self.selectChip($chip.index(),$chips);}}});self.$document.off('keydown.chips').on('keydown.chips',function(e){if($(e.target).is('input, textarea')){return;}
var $chip=self.$document.find(SELS.CHIP+SELS.SELECTED_CHIP);var $chips=$chip.closest(SELS.CHIPS);var length=$chip.siblings(SELS.CHIP).length;var index;if(!$chip.length){return;}
if(e.which===8||e.which===46){e.preventDefault();index=$chip.index();self.deleteChip(index,$chips);var selectIndex=null;if((index+1)<length){selectIndex=index;}else if(index===length||(index+1)===length){selectIndex=length-1;}
if(selectIndex<0)selectIndex=null;if(null!==selectIndex){self.selectChip(selectIndex,$chips);}
if(!length)$chips.find('input').focus();}else if(e.which===37){index=$chip.index()-1;if(index<0){return;}
$(SELS.CHIP).removeClass('selected');self.selectChip(index,$chips);}else if(e.which===39){index=$chip.index()+1;$(SELS.CHIP).removeClass('selected');if(index>length){$chips.find('input').focus();return;}
self.selectChip(index,$chips);}});self.$document.off('focusin.chips',SELS.CHIPS+' '+SELS.INPUT).on('focusin.chips',SELS.CHIPS+' '+SELS.INPUT,function(e){var $currChips=$(e.target).closest(SELS.CHIPS);$currChips.addClass('focus');$currChips.siblings('label, .prefix').addClass('active');$(SELS.CHIP).removeClass('selected');});self.$document.off('focusout.chips',SELS.CHIPS+' '+SELS.INPUT).on('focusout.chips',SELS.CHIPS+' '+SELS.INPUT,function(e){var $currChips=$(e.target).closest(SELS.CHIPS);$currChips.removeClass('focus');if(!$currChips.data('chips').length){$currChips.siblings('label').removeClass('active');}
$currChips.siblings('.prefix').removeClass('active');});self.$document.off('keydown.chips-add',SELS.CHIPS+' '+SELS.INPUT).on('keydown.chips-add',SELS.CHIPS+' '+SELS.INPUT,function(e){var $target=$(e.target);var $chips=$target.closest(SELS.CHIPS);var chipsLength=$chips.children(SELS.CHIP).length;if(13===e.which){if(self.hasAutocomplete&&$chips.find('.autocomplete-content.dropdown-content').length&&$chips.find('.autocomplete-content.dropdown-content').children().length){return;}
e.preventDefault();self.addChip({tag:$target.val()},$chips);$target.val('');return;}
if((8===e.keyCode||37===e.keyCode)&&''===$target.val()&&chipsLength){e.preventDefault();self.selectChip(chipsLength-1,$chips);$target.blur();return;}});self.$document.off('click.chips-delete',SELS.CHIPS+' '+SELS.DELETE).on('click.chips-delete',SELS.CHIPS+' '+SELS.DELETE,function(e){var $target=$(e.target);var $chips=$target.closest(SELS.CHIPS);var $chip=$target.closest(SELS.CHIP);e.stopPropagation();self.deleteChip($chip.index(),$chips);$chips.find('input').focus();});};this.chips=function($chips,chipId){var html='';$chips.data('chips').forEach(function(elem){html+=self.renderChip(elem);});html+='<input id="'+chipId+'" class="input" placeholder="">';$chips.html(html);self.setPlaceholder($chips);var label=$chips.next('label');if(label.length){label.attr('for',chipId);if($chips.data('chips').length){label.addClass('active');}}
var input=$('#'+chipId);if(self.hasAutocomplete){input.autocomplete({data:curr_options.autocompleteData,limit:curr_options.autocompleteLimit,onAutocomplete:function(val){self.addChip({tag:val},$chips);input.val('');input.focus();},})}};this.renderChip=function(elem){if(!elem.tag)return;var html='<div class="chip">'+elem.tag;if(elem.image){html+=' <img src="'+elem.image+'"> ';}
html+='<i class="material-icons close">close</i>';html+='</div>';return html;};this.setPlaceholder=function($chips){if($chips.data('chips').length&&curr_options.placeholder){$chips.find('input').prop('placeholder',curr_options.placeholder);}else if(!$chips.data('chips').length&&curr_options.secondaryPlaceholder){$chips.find('input').prop('placeholder',curr_options.secondaryPlaceholder);}};this.isValid=function($chips,elem){var chips=$chips.data('chips');var exists=false;for(var i=0;i<chips.length;i++){if(chips[i].tag===elem.tag){exists=true;return;}}
return''!==elem.tag&&!exists;};this.addChip=function(elem,$chips){if(!self.isValid($chips,elem)){return;}
var chipHtml=self.renderChip(elem);var newData=[];var oldData=$chips.data('chips');for(var i=0;i<oldData.length;i++){newData.push(oldData[i]);}
newData.push(elem);$chips.data('chips',newData);$(chipHtml).insertBefore($chips.find('input'));$chips.trigger('chip.add',elem);self.setPlaceholder($chips);};this.deleteChip=function(chipIndex,$chips){var chip=$chips.data('chips')[chipIndex];$chips.find('.chip').eq(chipIndex).remove();var newData=[];var oldData=$chips.data('chips');for(var i=0;i<oldData.length;i++){if(i!==chipIndex){newData.push(oldData[i]);}}
$chips.data('chips',newData);$chips.trigger('chip.delete',chip);self.setPlaceholder($chips);};this.selectChip=function(chipIndex,$chips){var $chip=$chips.find('.chip').eq(chipIndex);if($chip&&false===$chip.hasClass('selected')){$chip.addClass('selected');$chips.trigger('chip.select',$chips.data('chips')[chipIndex]);}};this.getChipsElement=function(index,$chips){return $chips.eq(index);};this.init();this.handleEvents();};}(jQuery));;(function($){$.fn.pushpin=function(options){var defaults={top:0,bottom:Infinity,offset:0};if(options==="remove"){this.each(function(){if(id=$(this).data('pushpin-id')){$(window).off('scroll.'+id);$(this).removeData('pushpin-id').removeClass('pin-top pinned pin-bottom').removeAttr('style');}});return false;}
options=$.extend(defaults,options);$index=0;return this.each(function(){var $uniqueId=Materialize.guid(),$this=$(this),$original_offset=$(this).offset().top;function removePinClasses(object){object.removeClass('pin-top');object.removeClass('pinned');object.removeClass('pin-bottom');}
function updateElements(objects,scrolled){objects.each(function(){if(options.top<=scrolled&&options.bottom>=scrolled&&!$(this).hasClass('pinned')){removePinClasses($(this));$(this).css('top',options.offset);$(this).addClass('pinned');}
if(scrolled<options.top&&!$(this).hasClass('pin-top')){removePinClasses($(this));$(this).css('top',0);$(this).addClass('pin-top');}
if(scrolled>options.bottom&&!$(this).hasClass('pin-bottom')){removePinClasses($(this));$(this).addClass('pin-bottom');$(this).css('top',options.bottom-$original_offset);}});}
$(this).data('pushpin-id',$uniqueId);updateElements($this,$(window).scrollTop());$(window).on('scroll.'+$uniqueId,function(){var $scrolled=$(window).scrollTop()+options.offset;updateElements($this,$scrolled);});});};}(jQuery));;(function($){$(document).ready(function(){$.fn.reverse=[].reverse;$(document).on('mouseenter.fixedActionBtn','.fixed-action-btn:not(.click-to-toggle):not(.toolbar)',function(e){var $this=$(this);openFABMenu($this);});$(document).on('mouseleave.fixedActionBtn','.fixed-action-btn:not(.click-to-toggle):not(.toolbar)',function(e){var $this=$(this);closeFABMenu($this);});$(document).on('click.fabClickToggle','.fixed-action-btn.click-to-toggle > a',function(e){var $this=$(this);var $menu=$this.parent();if($menu.hasClass('active')){closeFABMenu($menu);}else{openFABMenu($menu);}});$(document).on('click.fabToolbar','.fixed-action-btn.toolbar > a',function(e){var $this=$(this);var $menu=$this.parent();FABtoToolbar($menu);});});$.fn.extend({openFAB:function(){openFABMenu($(this));},closeFAB:function(){closeFABMenu($(this));},openToolbar:function(){FABtoToolbar($(this));},closeToolbar:function(){toolbarToFAB($(this));}});var openFABMenu=function(btn){var $this=btn;if($this.hasClass('active')===false){var horizontal=$this.hasClass('horizontal');var offsetY,offsetX;if(horizontal===true){offsetX=40;}else{offsetY=40;}
$this.addClass('active');$this.find('ul .btn-floating').velocity({scaleY:".4",scaleX:".4",translateY:offsetY+'px',translateX:offsetX+'px'},{duration:0});var time=0;$this.find('ul .btn-floating').reverse().each(function(){$(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:'0'},{duration:80,delay:time});time+=40;});}};var closeFABMenu=function(btn){var $this=btn;var horizontal=$this.hasClass('horizontal');var offsetY,offsetX;if(horizontal===true){offsetX=40;}else{offsetY=40;}
$this.removeClass('active');var time=0;$this.find('ul .btn-floating').velocity("stop",true);$this.find('ul .btn-floating').velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:offsetY+'px',translateX:offsetX+'px'},{duration:80});};var FABtoToolbar=function(btn){if(btn.attr('data-open')==="true"){return;}
var offsetX,offsetY,scaleFactor;var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;var btnRect=btn[0].getBoundingClientRect();var anchor=btn.find('> a').first();var menu=btn.find('> ul').first();var backdrop=$('<div class="fab-backdrop"></div>');var fabColor=anchor.css('background-color');anchor.append(backdrop);offsetX=btnRect.left-(windowWidth/2)+(btnRect.width/2);offsetY=windowHeight-btnRect.bottom;scaleFactor=windowWidth/backdrop.width();btn.attr('data-origin-bottom',btnRect.bottom);btn.attr('data-origin-left',btnRect.left);btn.attr('data-origin-width',btnRect.width);btn.addClass('active');btn.attr('data-open',true);btn.css({'text-align':'center',width:'100%',bottom:0,left:0,transform:'translateX('+offsetX+'px)',transition:'none'});anchor.css({transform:'translateY('+-offsetY+'px)',transition:'none'});backdrop.css({'background-color':fabColor});setTimeout(function(){btn.css({transform:'',transition:'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'});anchor.css({overflow:'visible',transform:'',transition:'transform .2s'});setTimeout(function(){btn.css({overflow:'hidden','background-color':fabColor});backdrop.css({transform:'scale('+scaleFactor+')',transition:'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'});menu.find('> li > a').css({opacity:1});$(window).on('scroll.fabToolbarClose',function(){toolbarToFAB(btn);$(window).off('scroll.fabToolbarClose');$(document).off('click.fabToolbarClose');});$(document).on('click.fabToolbarClose',function(e){if(!$(e.target).closest(menu).length){toolbarToFAB(btn);$(window).off('scroll.fabToolbarClose');$(document).off('click.fabToolbarClose');}});},100);},0);};var toolbarToFAB=function(btn){if(btn.attr('data-open')!=="true"){return;}
var offsetX,offsetY,scaleFactor;var windowWidth=window.innerWidth;var windowHeight=window.innerHeight;var btnWidth=btn.attr('data-origin-width');var btnBottom=btn.attr('data-origin-bottom');var btnLeft=btn.attr('data-origin-left');var anchor=btn.find('> .btn-floating').first();var menu=btn.find('> ul').first();var backdrop=btn.find('.fab-backdrop');var fabColor=anchor.css('background-color');offsetX=btnLeft-(windowWidth/2)+(btnWidth/2);offsetY=windowHeight-btnBottom;scaleFactor=windowWidth/backdrop.width();btn.removeClass('active');btn.attr('data-open',false);btn.css({'background-color':'transparent',transition:'none'});anchor.css({transition:'none'});backdrop.css({transform:'scale(0)','background-color':fabColor});menu.find('> li > a').css({opacity:''});setTimeout(function(){backdrop.remove();btn.css({'text-align':'',width:'',bottom:'',left:'',overflow:'','background-color':'',transform:'translate3d('+-offsetX+'px,0,0)'});anchor.css({overflow:'',transform:'translate3d(0,'+offsetY+'px,0)'});setTimeout(function(){btn.css({transform:'translate3d(0,0,0)',transition:'transform .2s'});anchor.css({transform:'translate3d(0,0,0)',transition:'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'});},20);},200);};}(jQuery));;(function($){Materialize.fadeInImage=function(selectorOrEl){var element;if(typeof(selectorOrEl)==='string'){element=$(selectorOrEl);}else if(typeof(selectorOrEl)==='object'){element=selectorOrEl;}else{return;}
element.css({opacity:0});$(element).velocity({opacity:1},{duration:650,queue:false,easing:'easeOutSine'});$(element).velocity({opacity:1},{duration:1300,queue:false,easing:'swing',step:function(now,fx){fx.start=100;var grayscale_setting=now/100;var brightness_setting=150-(100-now)/1.75;if(brightness_setting<100){brightness_setting=100;}
if(now>=0){$(this).css({"-webkit-filter":"grayscale("+grayscale_setting+")"+"brightness("+brightness_setting+"%)","filter":"grayscale("+grayscale_setting+")"+"brightness("+brightness_setting+"%)"});}}});};Materialize.showStaggeredList=function(selectorOrEl){var element;if(typeof(selectorOrEl)==='string'){element=$(selectorOrEl);}else if(typeof(selectorOrEl)==='object'){element=selectorOrEl;}else{return;}
var time=0;element.find('li').velocity({translateX:"-100px"},{duration:0});element.find('li').each(function(){$(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:time,easing:[60,10]});time+=120;});};$(document).ready(function(){var swipeLeft=false;var swipeRight=false;$('.dismissable').each(function(){$(this).hammer({prevent_default:false}).bind('pan',function(e){if(e.gesture.pointerType==="touch"){var $this=$(this);var direction=e.gesture.direction;var x=e.gesture.deltaX;var velocityX=e.gesture.velocityX;$this.velocity({translateX:x},{duration:50,queue:false,easing:'easeOutQuad'});if(direction===4&&(x>($this.innerWidth()/2)||velocityX<-0.75)){swipeLeft=true;}
if(direction===2&&(x<(-1*$this.innerWidth()/2)||velocityX>0.75)){swipeRight=true;}}}).bind('panend',function(e){if(Math.abs(e.gesture.deltaX)<($(this).innerWidth()/2)){swipeRight=false;swipeLeft=false;}
if(e.gesture.pointerType==="touch"){var $this=$(this);if(swipeLeft||swipeRight){var fullWidth;if(swipeLeft){fullWidth=$this.innerWidth();}
else{fullWidth=-1*$this.innerWidth();}
$this.velocity({translateX:fullWidth,},{duration:100,queue:false,easing:'easeOutQuad',complete:function(){$this.css('border','none');$this.velocity({height:0,padding:0,},{duration:200,queue:false,easing:'easeOutQuad',complete:function(){$this.remove();}});}});}
else{$this.velocity({translateX:0,},{duration:100,queue:false,easing:'easeOutQuad'});}
swipeLeft=false;swipeRight=false;}});});});}(jQuery));;(function($){var scrollFireEventsHandled=false;Materialize.scrollFire=function(options){var onScroll=function(){var windowScroll=window.pageYOffset+window.innerHeight;for(var i=0;i<options.length;i++){var value=options[i];var selector=value.selector,offset=value.offset,callback=value.callback;var currentElement=document.querySelector(selector);if(currentElement!==null){var elementOffset=currentElement.getBoundingClientRect().top+window.pageYOffset;if(windowScroll>(elementOffset+offset)){if(value.done!==true){if(typeof(callback)==='function'){callback.call(this,currentElement);}else if(typeof(callback)==='string'){var callbackFunc=new Function(callback);callbackFunc(currentElement);}
value.done=true;}}}}};var throttledScroll=Materialize.throttle(function(){onScroll();},options.throttle||100);if(!scrollFireEventsHandled){window.addEventListener("scroll",throttledScroll);window.addEventListener("resize",throttledScroll);scrollFireEventsHandled=true;}
setTimeout(throttledScroll,0);};})(jQuery);;/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
(function(factory){if(typeof define=='function'&&define.amd)
define('picker',['jquery'],factory)
else if(typeof exports=='object')
module.exports=factory(require('jquery'))
else this.Picker=factory(jQuery)}(function($){var $window=$(window)
var $document=$(document)
var $html=$(document.documentElement)
function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){if(!ELEMENT)return PickerConstructor
var
IS_DEFAULT_THEME=false,STATE={id:ELEMENT.id||'P'+Math.abs(~~(Math.random()*new Date()))},SETTINGS=COMPONENT?$.extend(true,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){if(STATE&&STATE.start)return P
STATE.methods={}
STATE.start=true
STATE.open=false
STATE.type=ELEMENT.type
ELEMENT.autofocus=ELEMENT==getActiveElement()
ELEMENT.readOnly=!SETTINGS.editable
ELEMENT.id=ELEMENT.id||STATE.id
if(ELEMENT.type!='text'){ELEMENT.type='text'}
P.component=new COMPONENT(P,SETTINGS)
P.$root=$(PickerConstructor._.node('div',createWrappedComponent(),CLASSES.picker,'id="'+ELEMENT.id+'_root" tabindex="0"'))
prepareElementRoot()
if(SETTINGS.formatSubmit){prepareElementHidden()}
prepareElement()
if(SETTINGS.container)$(SETTINGS.container).append(P.$root)
else $ELEMENT.after(P.$root)
P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet})
IS_DEFAULT_THEME=isUsingDefaultTheme(P.$root.children()[0])
if(ELEMENT.autofocus){P.open()}
return P.trigger('start').trigger('render')},render:function(entireComponent){if(entireComponent)P.$root.html(createWrappedComponent())
else P.$root.find('.'+CLASSES.box).html(P.component.nodes(STATE.open))
return P.trigger('render')},stop:function(){if(!STATE.start)return P
P.close()
if(P._hidden){P._hidden.parentNode.removeChild(P._hidden)}
P.$root.remove()
$ELEMENT.removeClass(CLASSES.input).removeData(NAME)
setTimeout(function(){$ELEMENT.off('.'+STATE.id)},0)
ELEMENT.type=STATE.type
ELEMENT.readOnly=false
P.trigger('stop')
STATE.methods={}
STATE.start=false
return P},open:function(dontGiveFocus){if(STATE.open)return P
$ELEMENT.addClass(CLASSES.active)
aria(ELEMENT,'expanded',true)
setTimeout(function(){P.$root.addClass(CLASSES.opened)
aria(P.$root[0],'hidden',false)},0)
if(dontGiveFocus!==false){STATE.open=true
if(IS_DEFAULT_THEME){$html.css('overflow','hidden').css('padding-right','+='+getScrollbarWidth())}
P.$root.eq(0).focus()
$document.on('click.'+STATE.id+' focusin.'+STATE.id,function(event){var target=event.target
if(target!=ELEMENT&&target!=document&&event.which!=3){P.close(target===P.$root.children()[0])}}).on('keydown.'+STATE.id,function(event){var
keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target
if(keycode==27){P.close(true)}
else if(target==P.$root[0]&&(keycodeToMove||keycode==13)){event.preventDefault()
if(keycodeToMove){PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)])}
else if(!P.$root.find('.'+CLASSES.highlighted).hasClass(CLASSES.disabled)){P.set('select',P.component.item.highlight).close()}}
else if($.contains(P.$root[0],target)&&keycode==13){event.preventDefault()
target.click()}})}
return P.trigger('open')},close:function(giveFocus){if(giveFocus){P.$root.off('focus.toOpen').eq(0).focus()
setTimeout(function(){P.$root.on('focus.toOpen',handleFocusToOpenEvent)},0)}
$ELEMENT.removeClass(CLASSES.active)
aria(ELEMENT,'expanded',false)
setTimeout(function(){P.$root.removeClass(CLASSES.opened+' '+CLASSES.focused)
aria(P.$root[0],'hidden',true)},0)
if(!STATE.open)return P
STATE.open=false
if(IS_DEFAULT_THEME){$html.css('overflow','').css('padding-right','-='+getScrollbarWidth())}
$document.off('.'+STATE.id)
return P.trigger('close')},clear:function(options){return P.set('clear',null,options)},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{}
options=thingIsObject&&$.isPlainObject(value)?value:options||{}
if(thing){if(!thingIsObject){thingObject[thing]=value}
for(thingItem in thingObject){thingValue=thingObject[thingItem]
if(thingItem in P.component.item){if(thingValue===undefined)thingValue=null
P.component.set(thingItem,thingValue,options)}
if(thingItem=='select'||thingItem=='clear'){$ELEMENT.val(thingItem=='clear'?'':P.get(thingItem,SETTINGS.format)).trigger('change')}}
P.render()}
return options.muted?P:P.trigger('set',thingObject)},get:function(thing,format){thing=thing||'value'
if(STATE[thing]!=null){return STATE[thing]}
if(thing=='valueSubmit'){if(P._hidden){return P._hidden.value}
thing='value'}
if(thing=='value'){return ELEMENT.value}
if(thing in P.component.item){if(typeof format=='string'){var thingValue=P.component.get(thing)
return thingValue?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,thingValue]):''}
return P.component.get(thing)}},on:function(thing,method,internal){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{}
if(thing){if(!thingIsObject){thingObject[thing]=method}
for(thingName in thingObject){thingMethod=thingObject[thingName]
if(internal){thingName='_'+thingName}
STATE.methods[thingName]=STATE.methods[thingName]||[]
STATE.methods[thingName].push(thingMethod)}}
return P},off:function(){var i,thingName,names=arguments;for(i=0,namesCount=names.length;i<namesCount;i+=1){thingName=names[i]
if(thingName in STATE.methods){delete STATE.methods[thingName]}}
return P},trigger:function(name,data){var _trigger=function(name){var methodList=STATE.methods[name]
if(methodList){methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])})}}
_trigger('_'+name)
_trigger(name)
return P}}
function createWrappedComponent(){return PickerConstructor._.node('div',PickerConstructor._.node('div',PickerConstructor._.node('div',PickerConstructor._.node('div',P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder)}
function prepareElement(){$ELEMENT.data(NAME,P).addClass(CLASSES.input).attr('tabindex',-1).val($ELEMENT.data('value')?P.get('select',SETTINGS.format):ELEMENT.value)
if(!SETTINGS.editable){$ELEMENT.on('focus.'+STATE.id+' click.'+STATE.id,function(event){event.preventDefault()
P.$root.eq(0).focus()}).on('keydown.'+STATE.id,handleKeydownEvent)}
aria(ELEMENT,{haspopup:true,expanded:false,readonly:false,owns:ELEMENT.id+'_root'})}
function prepareElementRoot(){P.$root.on({keydown:handleKeydownEvent,focusin:function(event){P.$root.removeClass(CLASSES.focused)
event.stopPropagation()},'mousedown click':function(event){var target=event.target
if(target!=P.$root.children()[0]){event.stopPropagation()
if(event.type=='mousedown'&&!$(target).is('input, select, textarea, button, option')){event.preventDefault()
P.$root.eq(0).focus()}}}}).on({focus:function(){$ELEMENT.addClass(CLASSES.target)},blur:function(){$ELEMENT.removeClass(CLASSES.target)}}).on('focus.toOpen',handleFocusToOpenEvent).on('click','[data-pick], [data-nav], [data-clear], [data-close]',function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=getActiveElement()
activeElement=activeElement&&(activeElement.type||activeElement.href)
if(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement)){P.$root.eq(0).focus()}
if(!targetDisabled&&targetData.nav){P.set('highlight',P.component.item.highlight,{nav:targetData.nav})}
else if(!targetDisabled&&'pick'in targetData){P.set('select',targetData.pick)}
else if(targetData.clear){P.clear().close(true)}
else if(targetData.close){P.close(true)}})
aria(P.$root[0],'hidden',true)}
function prepareElementHidden(){var name
if(SETTINGS.hiddenName===true){name=ELEMENT.name
ELEMENT.name=''}
else{name=[typeof SETTINGS.hiddenPrefix=='string'?SETTINGS.hiddenPrefix:'',typeof SETTINGS.hiddenSuffix=='string'?SETTINGS.hiddenSuffix:'_submit']
name=name[0]+ELEMENT.name+name[1]}
P._hidden=$('<input '+
'type=hidden '+
'name="'+name+'"'+
($ELEMENT.data('value')||ELEMENT.value?' value="'+P.get('select',SETTINGS.formatSubmit)+'"':'')+
'>')[0]
$ELEMENT.on('change.'+STATE.id,function(){P._hidden.value=ELEMENT.value?P.get('select',SETTINGS.formatSubmit):''})
if(SETTINGS.container)$(SETTINGS.container).append(P._hidden)
else $ELEMENT.after(P._hidden)}
function handleKeydownEvent(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode)
if(keycode==27){P.close()
return false}
if(keycode==32||isKeycodeDelete||!STATE.open&&P.component.key[keycode]){event.preventDefault()
event.stopPropagation()
if(isKeycodeDelete){P.clear().close()}
else{P.open()}}}
function handleFocusToOpenEvent(event){event.stopPropagation()
if(event.type=='focus'){P.$root.addClass(CLASSES.focused)}
P.open()}
return new PickerInstance()}
PickerConstructor.klasses=function(prefix){prefix=prefix||'picker'
return{picker:prefix,opened:prefix+'--opened',focused:prefix+'--focused',input:prefix+'__input',active:prefix+'__input--active',target:prefix+'__input--target',holder:prefix+'__holder',frame:prefix+'__frame',wrap:prefix+'__wrap',box:prefix+'__box'}}
function isUsingDefaultTheme(element){var theme,prop='position'
if(element.currentStyle){theme=element.currentStyle[prop]}
else if(window.getComputedStyle){theme=getComputedStyle(element)[prop]}
return theme=='fixed'}
function getScrollbarWidth(){if($html.height()<=$window.height()){return 0}
var $outer=$('<div style="visibility:hidden;width:100px" />').appendTo('body')
var widthWithoutScroll=$outer[0].offsetWidth
$outer.css('overflow','scroll')
var $inner=$('<div style="width:100%" />').appendTo($outer)
var widthWithScroll=$inner[0].offsetWidth
$outer.remove()
return widthWithoutScroll-widthWithScroll}
PickerConstructor._={group:function(groupObject){var
loopObjectScope,nodesList='',counter=PickerConstructor._.trigger(groupObject.min,groupObject)
for(;counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i){loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter])
nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2])}
return nodesList},node:function(wrapper,item,klass,attribute){if(!item)return''
item=$.isArray(item)?item.join(''):item
klass=klass?' class="'+klass+'"':''
attribute=attribute?' '+attribute:''
return'<'+wrapper+klass+attribute+'>'+item+'</'+wrapper+'>'},lead:function(number){return(number<10?'0':'')+number},trigger:function(callback,scope,args){return typeof callback=='function'?callback.apply(scope,args||[]):callback},digits:function(string){return(/\d/).test(string[1])?2:1},isDate:function(value){return{}.toString.call(value).indexOf('Date')>-1&&this.isInteger(value.getDate())},isInteger:function(value){return{}.toString.call(value).indexOf('Number')>-1&&value%1===0},ariaAttr:ariaAttr}
PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name)
if(options=='picker'){return componentData}
if(componentData&&typeof options=='string'){return PickerConstructor._.trigger(componentData[options],componentData,[action])}
return this.each(function(){var $this=$(this)
if(!$this.data(name)){new PickerConstructor(this,name,Component,options)}})}
$.fn[name].defaults=Component.defaults}
function aria(element,attribute,value){if($.isPlainObject(attribute)){for(var key in attribute){ariaSet(element,key,attribute[key])}}
else{ariaSet(element,attribute,value)}}
function ariaSet(element,attribute,value){element.setAttribute((attribute=='role'?'':'aria-')+attribute,value)}
function ariaAttr(attribute,data){if(!$.isPlainObject(attribute)){attribute={attribute:data}}
data=''
for(var key in attribute){var attr=(key=='role'?'':'aria-')+key,attrVal=attribute[key]
data+=attrVal==null?'':attr+'="'+attribute[key]+'"'}
return data}
function getActiveElement(){try{return document.activeElement}catch(err){}}
return PickerConstructor}));;/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */
(function(factory){if(typeof define=='function'&&define.amd)
define(['picker','jquery'],factory)
else if(typeof exports=='object')
module.exports=factory(require('./picker.js'),require('jquery'))
else factory(Picker,jQuery)}(function(Picker,$){var DAYS_IN_WEEK=7,WEEKS_IN_CALENDAR=6,_=Picker._
function DatePicker(picker,settings){var calendar=this,element=picker.$node[0],elementValue=element.value,elementDataValue=picker.$node.data('value'),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return element.currentStyle?element.currentStyle.direction=='rtl':getComputedStyle(picker.$root[0]).direction=='rtl'}
calendar.settings=settings
calendar.$node=picker.$node
calendar.queue={min:'measure create',max:'measure create',now:'now create',select:'parse create validate',highlight:'parse navigate create validate',view:'parse create validate viewset',disable:'deactivate',enable:'activate'}
calendar.item={}
calendar.item.clear=null
calendar.item.disable=(settings.disable||[]).slice(0)
calendar.item.enable=-(function(collectionDisabled){return collectionDisabled[0]===true?collectionDisabled.shift():-1})(calendar.item.disable)
calendar.set('min',settings.min).set('max',settings.max).set('now')
if(valueString){calendar.set('select',valueString,{format:formatString})}
else{calendar.set('select',null).set('highlight',calendar.item.now)}
calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){var highlightedObject=calendar.item.highlight,targetDate=new Date(highlightedObject.year,highlightedObject.month,highlightedObject.date+timeChange)
calendar.set('highlight',targetDate,{interval:timeChange})
this.render()}}
picker.on('render',function(){picker.$root.find('.'+settings.klass.selectMonth).on('change',function(){var value=this.value
if(value){picker.set('highlight',[picker.get('view').year,value,picker.get('highlight').date])
picker.$root.find('.'+settings.klass.selectMonth).trigger('focus')}})
picker.$root.find('.'+settings.klass.selectYear).on('change',function(){var value=this.value
if(value){picker.set('highlight',[value,picker.get('view').month,picker.get('highlight').date])
picker.$root.find('.'+settings.klass.selectYear).trigger('focus')}})},1).on('open',function(){var includeToday=''
if(calendar.disabled(calendar.get('now'))){includeToday=':not(.'+settings.klass.buttonToday+')'}
picker.$root.find('button'+includeToday+', select').attr('disabled',false)},1).on('close',function(){picker.$root.find('button, select').attr('disabled',true)},1)}
DatePicker.prototype.set=function(type,value,options){var calendar=this,calendarItem=calendar.item
if(value===null){if(type=='clear')type='select'
calendarItem[type]=value
return calendar}
calendarItem[(type=='enable'?'disable':type=='flip'?'enable':type)]=calendar.queue[type].split(' ').map(function(method){value=calendar[method](type,value,options)
return value}).pop()
if(type=='select'){calendar.set('highlight',calendarItem.select,options)}
else if(type=='highlight'){calendar.set('view',calendarItem.highlight,options)}
else if(type.match(/^(flip|min|max|disable|enable)$/)){if(calendarItem.select&&calendar.disabled(calendarItem.select)){calendar.set('select',calendarItem.select,options)}
if(calendarItem.highlight&&calendar.disabled(calendarItem.highlight)){calendar.set('highlight',calendarItem.highlight,options)}}
return calendar}
DatePicker.prototype.get=function(type){return this.item[type]}
DatePicker.prototype.create=function(type,value,options){var isInfiniteValue,calendar=this
value=value===undefined?type:value
if(value==-Infinity||value==Infinity){isInfiniteValue=value}
else if($.isPlainObject(value)&&_.isInteger(value.pick)){value=value.obj}
else if($.isArray(value)){value=new Date(value[0],value[1],value[2])
value=_.isDate(value)?value:calendar.create().obj}
else if(_.isInteger(value)||_.isDate(value)){value=calendar.normalize(new Date(value),options)}
else {value=calendar.now(type,value,options)}
return{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}}
DatePicker.prototype.createRange=function(from,to){var calendar=this,createDate=function(date){if(date===true||$.isArray(date)||_.isDate(date)){return calendar.create(date)}
return date}
if(!_.isInteger(from)){from=createDate(from)}
if(!_.isInteger(to)){to=createDate(to)}
if(_.isInteger(from)&&$.isPlainObject(to)){from=[to.year,to.month,to.date+from];}
else if(_.isInteger(to)&&$.isPlainObject(from)){to=[from.year,from.month,from.date+to];}
return{from:createDate(from),to:createDate(to)}}
DatePicker.prototype.withinRange=function(range,dateUnit){range=this.createRange(range.from,range.to)
return dateUnit.pick>=range.from.pick&&dateUnit.pick<=range.to.pick}
DatePicker.prototype.overlapRanges=function(one,two){var calendar=this
one=calendar.createRange(one.from,one.to)
two=calendar.createRange(two.from,two.to)
return calendar.withinRange(one,two.from)||calendar.withinRange(one,two.to)||calendar.withinRange(two,one.from)||calendar.withinRange(two,one.to)}
DatePicker.prototype.now=function(type,value,options){value=new Date()
if(options&&options.rel){value.setDate(value.getDate()+options.rel)}
return this.normalize(value,options)}
DatePicker.prototype.navigate=function(type,value,options){var targetDateObject,targetYear,targetMonth,targetDate,isTargetArray=$.isArray(value),isTargetObject=$.isPlainObject(value),viewsetObject=this.item.view
if(isTargetArray||isTargetObject){if(isTargetObject){targetYear=value.year
targetMonth=value.month
targetDate=value.date}
else{targetYear=+value[0]
targetMonth=+value[1]
targetDate=+value[2]}
if(options&&options.nav&&viewsetObject&&viewsetObject.month!==targetMonth){targetYear=viewsetObject.year
targetMonth=viewsetObject.month}
targetDateObject=new Date(targetYear,targetMonth+(options&&options.nav?options.nav:0),1)
targetYear=targetDateObject.getFullYear()
targetMonth=targetDateObject.getMonth()
while(new Date(targetYear,targetMonth,targetDate).getMonth()!==targetMonth){targetDate-=1
}
value=[targetYear,targetMonth,targetDate]}
return value}
DatePicker.prototype.normalize=function(value ){value.setHours(0,0,0,0)
return value}
DatePicker.prototype.measure=function(type,value ){var calendar=this
if(!value){value=type=='min'?-Infinity:Infinity}
else if(typeof value=='string'){value=calendar.parse(type,value)}
else if(_.isInteger(value)){value=calendar.now(type,value,{rel:value})}
return value}
DatePicker.prototype.viewset=function(type,dateObject ){return this.create([dateObject.year,dateObject.month,1])}
DatePicker.prototype.validate=function(type,dateObject,options){var calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=calendar.item.enable===-1,hasEnabledBeforeTarget,hasEnabledAfterTarget,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,reachedMin,reachedMax,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick
if(dateTime<dateObject.pick)hasEnabledBeforeTarget=true
else if(dateTime>dateObject.pick)hasEnabledAfterTarget=true}
return _.isInteger(value)}).length          
if(!options||!options.nav)if((!isFlippedBase&&calendar.disabled(dateObject))||(isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget))||(!isFlippedBase&&(dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick))){if(isFlippedBase&&!hasEnabledWeekdays&&((!hasEnabledAfterTarget&&interval>0)||(!hasEnabledBeforeTarget&&interval<0))){interval*=-1}
while(calendar.disabled(dateObject)){if(Math.abs(interval)>1&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)){dateObject=originalDateObject
interval=interval>0?1:-1}
if(dateObject.pick<=minLimitObject.pick){reachedMin=true
interval=1
dateObject=calendar.create([minLimitObject.year,minLimitObject.month,minLimitObject.date+(dateObject.pick===minLimitObject.pick?0:-1)])}
else if(dateObject.pick>=maxLimitObject.pick){reachedMax=true
interval=-1
dateObject=calendar.create([maxLimitObject.year,maxLimitObject.month,maxLimitObject.date+(dateObject.pick===maxLimitObject.pick?0:1)])}
if(reachedMin&&reachedMax){break}
dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval])}}
return dateObject}
DatePicker.prototype.disabled=function(dateToVerify){var
calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){if(_.isInteger(dateToDisable)){return dateToVerify.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7}
if($.isArray(dateToDisable)||_.isDate(dateToDisable)){return dateToVerify.pick===calendar.create(dateToDisable).pick}
if($.isPlainObject(dateToDisable)){return calendar.withinRange(dateToDisable,dateToVerify)}})
isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&dateToDisable[3]=='inverted'||$.isPlainObject(dateToDisable)&&dateToDisable.inverted}).length
return calendar.item.enable===-1?!isDisabledMatch:isDisabledMatch||dateToVerify.pick<calendar.item.min.pick||dateToVerify.pick>calendar.item.max.pick}
DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={}
if(!value||typeof value!='string'){return value}
if(!(options&&options.format)){options=options||{}
options.format=calendar.settings.format}
calendar.formats.toArray(options.format).map(function(label){var
formattingLabel=calendar.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,'').length
if(formattingLabel){parsingObject[label]=value.substr(0,formatLength)}
value=value.substr(formatLength)})
return[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-1,parsingObject.dd||parsingObject.d]}
DatePicker.prototype.formats=(function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/\w+/)[0]
if(!dateObject.mm&&!dateObject.m){dateObject.m=collection.indexOf(word)+1}
return word.length}
function getFirstWordLength(string){return string.match(/\w+/)[0].length}
return{d:function(string,dateObject){return string?_.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:_.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?_.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:_.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort
return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull
return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(''+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this
return calendar.formats.toArray(formatString).map(function(label){return _.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,'')}).join('')}}})()
DatePicker.prototype.isDateExact=function(one,two){var calendar=this
if((_.isInteger(one)&&_.isInteger(two))||(typeof one=='boolean'&&typeof two=='boolean')){return one===two}
if((_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))){return calendar.create(one).pick===calendar.create(two).pick}
if($.isPlainObject(one)&&$.isPlainObject(two)){return calendar.isDateExact(one.from,two.from)&&calendar.isDateExact(one.to,two.to)}
return false}
DatePicker.prototype.isDateOverlap=function(one,two){var calendar=this,firstDay=calendar.settings.firstDay?1:0
if(_.isInteger(one)&&(_.isDate(two)||$.isArray(two))){one=one%7+firstDay
return one===calendar.create(two).day+1}
if(_.isInteger(two)&&(_.isDate(one)||$.isArray(one))){two=two%7+firstDay
return two===calendar.create(one).day+1}
if($.isPlainObject(one)&&$.isPlainObject(two)){return calendar.overlapRanges(one,two)}
return false}
DatePicker.prototype.flipEnable=function(val){var itemObject=this.item
itemObject.enable=val||(itemObject.enable==-1?1:-1)}
DatePicker.prototype.deactivate=function(type,datesToDisable){var calendar=this,disabledItems=calendar.item.disable.slice(0)
if(datesToDisable=='flip'){calendar.flipEnable()}
else if(datesToDisable===false){calendar.flipEnable(1)
disabledItems=[]}
else if(datesToDisable===true){calendar.flipEnable(-1)
disabledItems=[]}
else{datesToDisable.map(function(unitToDisable){var matchFound
for(var index=0;index<disabledItems.length;index+=1){if(calendar.isDateExact(unitToDisable,disabledItems[index])){matchFound=true
break}}
if(!matchFound){if(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||($.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)){disabledItems.push(unitToDisable)}}})}
return disabledItems}
DatePicker.prototype.activate=function(type,datesToEnable){var calendar=this,disabledItems=calendar.item.disable,disabledItemsCount=disabledItems.length
if(datesToEnable=='flip'){calendar.flipEnable()}
else if(datesToEnable===true){calendar.flipEnable(1)
disabledItems=[]}
else if(datesToEnable===false){calendar.flipEnable(-1)
disabledItems=[]}
else{datesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isExactRange
for(index=0;index<disabledItemsCount;index+=1){disabledUnit=disabledItems[index]
if(calendar.isDateExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null
isExactRange=true
break}
else if(calendar.isDateOverlap(disabledUnit,unitToEnable)){if($.isPlainObject(unitToEnable)){unitToEnable.inverted=true
matchFound=unitToEnable}
else if($.isArray(unitToEnable)){matchFound=unitToEnable
if(!matchFound[3])matchFound.push('inverted')}
else if(_.isDate(unitToEnable)){matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),'inverted']}
break}}
if(matchFound)for(index=0;index<disabledItemsCount;index+=1){if(calendar.isDateExact(disabledItems[index],unitToEnable)){disabledItems[index]=null
break}}
if(isExactRange)for(index=0;index<disabledItemsCount;index+=1){if(calendar.isDateOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null
break}}
if(matchFound){disabledItems.push(matchFound)}})}
return disabledItems.filter(function(val){return val!=null})}
DatePicker.prototype.nodes=function(isOpen){var
calendar=this,settings=calendar.settings,calendarItem=calendar.item,nowObject=calendarItem.now,selectedObject=calendarItem.select,highlightedObject=calendarItem.highlight,viewsetObject=calendarItem.view,disabledCollection=calendarItem.disable,minLimitObject=calendarItem.min,maxLimitObject=calendarItem.max,tableHead=(function(collection,fullCollection){if(settings.firstDay){collection.push(collection.shift())
fullCollection.push(fullCollection.shift())}
return _.node('thead',_.node('tr',_.group({min:0,max:DAYS_IN_WEEK-1,i:1,node:'th',item:function(counter){return[collection[counter],settings.klass.weekdays,'scope=col title="'+fullCollection[counter]+'"']}})))
})((settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysLetter).slice(0),settings.weekdaysFull.slice(0)),createMonthNav=function(next){return _.node('div',' ',settings.klass['nav'+(next?'Next':'Prev')]+((next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month)||(!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month)?' '+settings.klass.navDisabled:''),'data-nav='+(next||-1)+' '+
_.ariaAttr({role:'button',controls:calendar.$node[0].id+'_table'})+' '+
'title="'+(next?settings.labelMonthNext:settings.labelMonthPrev)+'"')},createMonthLabel=function(override){var monthsCollection=settings.showMonthsShort?settings.monthsShort:settings.monthsFull
if(override=="short_months"){monthsCollection=settings.monthsShort;}
if(settings.selectMonths&&override==undefined){return _.node('select',_.group({min:0,max:11,i:1,node:'option',item:function(loopedMonth){return[monthsCollection[loopedMonth],0,'value='+loopedMonth+
(viewsetObject.month==loopedMonth?' selected':'')+
(((viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month)||(viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month))?' disabled':'')]}}),settings.klass.selectMonth+' browser-default',(isOpen?'':'disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id+'_table'})+' '+
'title="'+settings.labelMonthSelect+'"')}
if(override=="short_months")
if(selectedObject!=null)
return _.node('div',monthsCollection[selectedObject.month]);else return _.node('div',monthsCollection[viewsetObject.month]);return _.node('div',monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(override){var focusedYear=viewsetObject.year,numberYears=settings.selectYears===true?5:~~(settings.selectYears/2)
if(numberYears){var
minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears
if(minYear>lowestYear){highestYear+=minYear-lowestYear
lowestYear=minYear}
if(maxYear<highestYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear
lowestYear-=availableYears>neededYears?neededYears:availableYears
highestYear=maxYear}
if(settings.selectYears&&override==undefined){return _.node('select',_.group({min:lowestYear,max:highestYear,i:1,node:'option',item:function(loopedYear){return[loopedYear,0,'value='+loopedYear+(focusedYear==loopedYear?' selected':'')]}}),settings.klass.selectYear+' browser-default',(isOpen?'':'disabled')+' '+_.ariaAttr({controls:calendar.$node[0].id+'_table'})+' '+
'title="'+settings.labelYearSelect+'"')}}
if(override=="raw")
return _.node('div',focusedYear)
return _.node('div',focusedYear,settings.klass.year)}
createDayLabel=function(){if(selectedObject!=null)
return _.node('div',selectedObject.date)
else return _.node('div',nowObject.date)}
createWeekdayLabel=function(){var display_day;if(selectedObject!=null)
display_day=selectedObject.day;else
display_day=nowObject.day;var weekday=settings.weekdaysFull[display_day]
return weekday}
return _.node('div',_.node('div',createWeekdayLabel(),"picker__weekday-display")+
_.node('div',createMonthLabel("short_months"),settings.klass.month_display)+
_.node('div',createDayLabel(),settings.klass.day_display)+
_.node('div',createYearLabel("raw"),settings.klass.year_display),settings.klass.date_display)+
_.node('div',_.node('div',(settings.selectYears?createMonthLabel()+createYearLabel():createMonthLabel()+createYearLabel())+
createMonthNav()+createMonthNav(1),settings.klass.header)+_.node('table',tableHead+
_.node('tbody',_.group({min:0,max:WEEKS_IN_CALENDAR-1,i:1,node:'tr',item:function(rowCounter){var shiftDateBy=settings.firstDay&&calendar.create([viewsetObject.year,viewsetObject.month,1]).day===0?-7:0
return[_.group({min:DAYS_IN_WEEK*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+DAYS_IN_WEEK-1},i:1,node:'td',item:function(targetDate){targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)])
var isSelected=selectedObject&&selectedObject.pick==targetDate.pick,isHighlighted=highlightedObject&&highlightedObject.pick==targetDate.pick,isDisabled=disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick,formattedDate=_.trigger(calendar.formats.toString,calendar,[settings.format,targetDate])
return[_.node('div',targetDate.date,(function(klasses){klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus)
if(nowObject.pick==targetDate.pick){klasses.push(settings.klass.now)}
if(isSelected){klasses.push(settings.klass.selected)}
if(isHighlighted){klasses.push(settings.klass.highlighted)}
if(isDisabled){klasses.push(settings.klass.disabled)}
return klasses.join(' ')})([settings.klass.day]),'data-pick='+targetDate.pick+' '+_.ariaAttr({role:'gridcell',label:formattedDate,selected:isSelected&&calendar.$node.val()===formattedDate?true:null,activedescendant:isHighlighted?true:null,disabled:isDisabled?true:null})),'',_.ariaAttr({role:'presentation'})]}})]}})),settings.klass.table,'id="'+calendar.$node[0].id+'_table'+'" '+_.ariaAttr({role:'grid',controls:calendar.$node[0].id,readonly:true})),settings.klass.calendar_container)
+
_.node('div',_.node('button',settings.today,"btn-flat picker__today",'type=button data-pick='+nowObject.pick+
(isOpen&&!calendar.disabled(nowObject)?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id}))+
_.node('button',settings.clear,"btn-flat picker__clear",'type=button data-clear=1'+
(isOpen?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id}))+
_.node('button',settings.close,"btn-flat picker__close",'type=button data-close=true '+
(isOpen?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id})),settings.klass.footer)}
DatePicker.defaults=(function(prefix){return{labelMonthNext:'Next month',labelMonthPrev:'Previous month',labelMonthSelect:'Select a month',labelYearSelect:'Select a year',monthsFull:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdaysFull:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],weekdaysLetter:['S','M','T','W','T','F','S'],today:'Today',clear:'Clear',close:'Close',format:'d mmmm, yyyy',klass:{table:prefix+'table',header:prefix+'header',date_display:prefix+'date-display',day_display:prefix+'day-display',month_display:prefix+'month-display',year_display:prefix+'year-display',calendar_container:prefix+'calendar-container',navPrev:prefix+'nav--prev',navNext:prefix+'nav--next',navDisabled:prefix+'nav--disabled',month:prefix+'month',year:prefix+'year',selectMonth:prefix+'select--month',selectYear:prefix+'select--year',weekdays:prefix+'weekday',day:prefix+'day',disabled:prefix+'day--disabled',selected:prefix+'day--selected',highlighted:prefix+'day--highlighted',now:prefix+'day--today',infocus:prefix+'day--infocus',outfocus:prefix+'day--outfocus',footer:prefix+'footer',buttonClear:prefix+'button--clear',buttonToday:prefix+'button--today',buttonClose:prefix+'button--close'}}})(Picker.klasses().picker+'__')
Picker.extend('pickadate',DatePicker)}));;(function($){$.fn.characterCounter=function(){return this.each(function(){var $input=$(this);var $counterElement=$input.parent().find('span[class="character-counter"]');if($counterElement.length){return;}
var itHasLengthAttribute=$input.attr('data-length')!==undefined;if(itHasLengthAttribute){$input.on('input',updateCounter);$input.on('focus',updateCounter);$input.on('blur',removeCounterElement);addCounterElement($input);}});};function updateCounter(){var maxLength=+$(this).attr('data-length'),actualLength=+$(this).val().length,isValidLength=actualLength<=maxLength;$(this).parent().find('span[class="character-counter"]').html(actualLength+'/'+maxLength);addInputStyle(isValidLength,$(this));}
function addCounterElement($input){var $counterElement=$input.parent().find('span[class="character-counter"]');if($counterElement.length){return;}
$counterElement=$('<span/>').addClass('character-counter').css('float','right').css('font-size','12px').css('height',1);$input.parent().append($counterElement);}
function removeCounterElement(){$(this).parent().find('span[class="character-counter"]').html('');}
function addInputStyle(isValidLength,$input){var inputHasInvalidClass=$input.hasClass('invalid');if(isValidLength&&inputHasInvalidClass){$input.removeClass('invalid');}
else if(!isValidLength&&!inputHasInvalidClass){$input.removeClass('valid');$input.addClass('invalid');}}
$(document).ready(function(){$('input, textarea').characterCounter();});}(jQuery));;(function($){var methods={init:function(options){var defaults={duration:200,dist:-100,shift:0,padding:0,fullWidth:false,indicators:false,noWrap:false,onCycleTo:null};options=$.extend(defaults,options);return this.each(function(){var images,item_width,item_height,offset,center,pressed,dim,count,reference,referenceY,amplitude,target,velocity,xform,frame,timestamp,ticker,dragged,vertical_dragged;var $indicators=$('<ul class="indicators"></ul>');var view=$(this);var showIndicators=view.attr('data-indicators')||options.indicators;if(view.hasClass('initialized')){$(this).trigger('carouselNext',[0.000001]);return true;}
if(options.fullWidth){options.dist=0;var firstImage=view.find('.carousel-item img').first();if(firstImage.length){imageHeight=firstImage.on('load',function(){view.css('height',$(this).height());});}else{imageHeight=view.find('.carousel-item').first().height();view.css('height',imageHeight);}
if(showIndicators){view.find('.carousel-fixed-item').addClass('with-indicators');}}
view.addClass('initialized');pressed=false;offset=target=0;images=[];item_width=view.find('.carousel-item').first().innerWidth();item_height=view.find('.carousel-item').first().innerHeight();dim=item_width*2+options.padding;view.find('.carousel-item').each(function(i){images.push($(this)[0]);if(showIndicators){var $indicator=$('<li class="indicator-item"></li>');if(i===0){$indicator.addClass('active');}
$indicator.click(function(e){e.stopPropagation();var index=$(this).index();cycleTo(index);});$indicators.append($indicator);}});if(showIndicators){view.append($indicators);}
count=images.length;function setupEvents(){if(typeof window.ontouchstart!=='undefined'){view[0].addEventListener('touchstart',tap);view[0].addEventListener('touchmove',drag);view[0].addEventListener('touchend',release);}
view[0].addEventListener('mousedown',tap);view[0].addEventListener('mousemove',drag);view[0].addEventListener('mouseup',release);view[0].addEventListener('mouseleave',release);view[0].addEventListener('click',click);}
function xpos(e){if(e.targetTouches&&(e.targetTouches.length>=1)){return e.targetTouches[0].clientX;}
return e.clientX;}
function ypos(e){if(e.targetTouches&&(e.targetTouches.length>=1)){return e.targetTouches[0].clientY;}
return e.clientY;}
function wrap(x){return(x>=count)?(x%count):(x<0)?wrap(count+(x%count)):x;}
function scroll(x){var i,half,delta,dir,tween,el,alignment,xTranslation;var lastCenter=center;offset=(typeof x==='number')?x:offset;center=Math.floor((offset+dim/2)/dim);delta=offset-center*dim;dir=(delta<0)?1:-1;tween=-dir*delta*2/dim;half=count>>1;if(!options.fullWidth){alignment='translateX('+(view[0].clientWidth-item_width)/2+'px) ';alignment+='translateY('+(view[0].clientHeight-item_height)/2+'px)';}else{alignment='translateX(0)';}
if(showIndicators){var diff=(center%count);var activeIndicator=$indicators.find('.indicator-item.active');if(activeIndicator.index()!==diff){activeIndicator.removeClass('active');$indicators.find('.indicator-item').eq(diff).addClass('active');}}
if(!options.noWrap||(center>=0&&center<count)){el=images[wrap(center)];if(!$(el).hasClass('active')){view.find('.carousel-item').removeClass('active');$(el).addClass('active');}
el.style[xform]=alignment+
' translateX('+(-delta/2)+'px)'+
' translateX('+(dir*options.shift*tween*i)+'px)'+
' translateZ('+(options.dist*tween)+'px)';el.style.zIndex=0;if(options.fullWidth){tweenedOpacity=1;}
else{tweenedOpacity=1-0.2*tween;}
el.style.opacity=tweenedOpacity;el.style.display='block';}
for(i=1;i<=half;++i){if(options.fullWidth){zTranslation=options.dist;tweenedOpacity=(i===half&&delta<0)?1-tween:1;}else{zTranslation=options.dist*(i*2+tween*dir);tweenedOpacity=1-0.2*(i*2+tween*dir);}
if(!options.noWrap||center+i<count){el=images[wrap(center+i)];el.style[xform]=alignment+
' translateX('+(options.shift+(dim*i-delta)/2)+'px)'+
' translateZ('+zTranslation+'px)';el.style.zIndex=-i;el.style.opacity=tweenedOpacity;el.style.display='block';}
if(options.fullWidth){zTranslation=options.dist;tweenedOpacity=(i===half&&delta>0)?1-tween:1;}else{zTranslation=options.dist*(i*2-tween*dir);tweenedOpacity=1-0.2*(i*2-tween*dir);}
if(!options.noWrap||center-i>=0){el=images[wrap(center-i)];el.style[xform]=alignment+
' translateX('+(-options.shift+(-dim*i-delta)/2)+'px)'+
' translateZ('+zTranslation+'px)';el.style.zIndex=-i;el.style.opacity=tweenedOpacity;el.style.display='block';}}
if(!options.noWrap||(center>=0&&center<count)){el=images[wrap(center)];el.style[xform]=alignment+
' translateX('+(-delta/2)+'px)'+
' translateX('+(dir*options.shift*tween)+'px)'+
' translateZ('+(options.dist*tween)+'px)';el.style.zIndex=0;if(options.fullWidth){tweenedOpacity=1;}
else{tweenedOpacity=1-0.2*tween;}
el.style.opacity=tweenedOpacity;el.style.display='block';}
if(lastCenter!==center&&typeof(options.onCycleTo)==="function"){var $curr_item=view.find('.carousel-item').eq(wrap(center));options.onCycleTo.call(this,$curr_item,dragged);}}
function track(){var now,elapsed,delta,v;now=Date.now();elapsed=now-timestamp;timestamp=now;delta=offset-frame;frame=offset;v=1000*delta/(1+elapsed);velocity=0.8*v+0.2*velocity;}
function autoScroll(){var elapsed,delta;if(amplitude){elapsed=Date.now()-timestamp;delta=amplitude*Math.exp(-elapsed/options.duration);if(delta>2||delta<-2){scroll(target-delta);requestAnimationFrame(autoScroll);}else{scroll(target);}}}
function click(e){if(dragged){e.preventDefault();e.stopPropagation();return false;}else if(!options.fullWidth){var clickedIndex=$(e.target).closest('.carousel-item').index();var diff=(center%count)-clickedIndex;if(diff!==0){e.preventDefault();e.stopPropagation();}
cycleTo(clickedIndex);}}
function cycleTo(n){var diff=(center%count)-n;if(!options.noWrap){if(diff<0){if(Math.abs(diff+count)<Math.abs(diff)){diff+=count;}}else if(diff>0){if(Math.abs(diff-count)<diff){diff-=count;}}}
if(diff<0){view.trigger('carouselNext',[Math.abs(diff)]);}else if(diff>0){view.trigger('carouselPrev',[diff]);}}
function tap(e){pressed=true;dragged=false;vertical_dragged=false;reference=xpos(e);referenceY=ypos(e);velocity=amplitude=0;frame=offset;timestamp=Date.now();clearInterval(ticker);ticker=setInterval(track,100);}
function drag(e){var x,delta,deltaY;if(pressed){x=xpos(e);y=ypos(e);delta=reference-x;deltaY=Math.abs(referenceY-y);if(deltaY<30&&!vertical_dragged){if(delta>2||delta<-2){dragged=true;reference=x;scroll(offset+delta);}}else if(dragged){e.preventDefault();e.stopPropagation();return false;}else{vertical_dragged=true;}}
if(dragged){e.preventDefault();e.stopPropagation();return false;}}
function release(e){if(pressed){pressed=false;}else{return;}
clearInterval(ticker);target=offset;if(velocity>10||velocity<-10){amplitude=0.9*velocity;target=offset+amplitude;}
target=Math.round(target/dim)*dim;if(options.noWrap){if(target>=dim*(count-1)){target=dim*(count-1);}else if(target<0){target=0;}}
amplitude=target-offset;timestamp=Date.now();requestAnimationFrame(autoScroll);if(dragged){e.preventDefault();e.stopPropagation();}
return false;}
xform='transform';['webkit','Moz','O','ms'].every(function(prefix){var e=prefix+'Transform';if(typeof document.body.style[e]!=='undefined'){xform=e;return false;}
return true;});$(window).on('resize.carousel',function(){if(options.fullWidth){item_width=view.find('.carousel-item').first().innerWidth();item_height=view.find('.carousel-item').first().innerHeight();dim=item_width*2+options.padding;offset=center*2*item_width;target=offset;}else{scroll();}});setupEvents();scroll(offset);$(this).on('carouselNext',function(e,n){if(n===undefined){n=1;}
target=(dim*Math.round(offset/dim))+(dim*n);if(offset!==target){amplitude=target-offset;timestamp=Date.now();requestAnimationFrame(autoScroll);}});$(this).on('carouselPrev',function(e,n){if(n===undefined){n=1;}
target=(dim*Math.round(offset/dim))-(dim*n);if(offset!==target){amplitude=target-offset;timestamp=Date.now();requestAnimationFrame(autoScroll);}});$(this).on('carouselSet',function(e,n){if(n===undefined){n=0;}
cycleTo(n);});});},next:function(n){$(this).trigger('carouselNext',[n]);},prev:function(n){$(this).trigger('carouselPrev',[n]);},set:function(n){$(this).trigger('carouselSet',[n]);}};$.fn.carousel=function(methodOrOptions){if(methods[methodOrOptions]){return methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof methodOrOptions==='object'||!methodOrOptions){return methods.init.apply(this,arguments);}else{$.error('Method '+methodOrOptions+' does not exist on jQuery.carousel');}};}(jQuery));(function($,window){}).call(this,jQuery,window);(function($){$(function(){log.setDefaultLevel('trace')
$('.button-collapse').sideNav();$('.modal').modal();$('.population-settings').modal();$('select').material_select();function update_plot(target){value=$('#select-'+target)[0].value
url="/api/v1/param/"+session_id+"/population/"+target+"/"+value
$.ajax({type:"GET",url:url});}
$('#select-year').change(function(){update_plot('year');});$('#select-location').change(function(){update_plot('location');});$('#select-year').value="2015"
$('#select-location').value="World"});})(jQuery);jQuery(document).ready(function(){bokehAppLoaded();});function bokehAppLoaded(){if($('.bk-canvas-events').is(':visible')){log.info("bokeh plot loaded")
$("#mybk-loader").hide(2)
log.info($("#bokeh-plot1"))}else{log.trace("bokeh plot loading ...")
setTimeout(bokehAppLoaded,100);}}
window.Bokeh=Bokeh=(function(){var define=undefined;return(function outer(modules,cache,entry){function newRequire(name){if(!cache[name]){if(!modules[name]){var err=new Error('Cannot find module \''+name+'\'');err.code='MODULE_NOT_FOUND';throw err;}
var m=cache[name]={exports:{}};var moduleRequire=function foo(x){var id=modules[name][1][x];return newRequire(id?id:x);}
moduleRequire.modules=newRequire.modules;modules[name][0].call(m.exports,moduleRequire,m,m.exports,outer,modules,cache,entry);}
return cache[name].exports;}
newRequire.modules=modules;var main=newRequire(entry[0]);main.require=newRequire;return main;})
({"base":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _all_models,hasProp={}.hasOwnProperty;var models=require("./models/index");var object_1=require("./core/util/object");exports.overrides={};_all_models=object_1.clone(models);exports.Models=function(name){var model,ref;model=(ref=exports.overrides[name])!=null?ref:_all_models[name];if(model==null){throw new Error("Model `"+name+"' does not exist. This could be due to a widget or a custom model not being registered before first usage.");}
return model;};exports.Models.register=function(name,model){return exports.overrides[name]=model;};exports.Models.unregister=function(name){return delete exports.overrides[name];};exports.Models.register_models=function(models,force,errorFn){var model,name,results;if(force==null){force=false;}
if(errorFn==null){errorFn=null;}
if(models==null){return;}
results=[];for(name in models){if(!hasProp.call(models,name))
continue;model=models[name];if(force||!_all_models.hasOwnProperty(name)){results.push(_all_models[name]=model);}
else{results.push(typeof errorFn==="function"?errorFn(name):void 0);}}
return results;};exports.Models.registered_names=function(){return Object.keys(_all_models);};exports.index={};},{"./core/util/object":"core/util/object","./models/index":"models/index"}],"client":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ClientConnection,ClientSession,Message,message_handlers;var es6_promise_1=require("es6-promise");var logging_1=require("./core/logging");var string_1=require("./core/util/string");var object_1=require("./core/util/object");var document_1=require("./document");exports.DEFAULT_SERVER_WEBSOCKET_URL="ws://localhost:5006/ws";exports.DEFAULT_SESSION_ID="default";Message=(function(){function Message(header1,metadata1,content1){this.header=header1;this.metadata=metadata1;this.content=content1;this.buffers=[];}
Message.assemble=function(header_json,metadata_json,content_json){var content,e,header,metadata;try{header=JSON.parse(header_json);metadata=JSON.parse(metadata_json);content=JSON.parse(content_json);return new Message(header,metadata,content);}
catch(error1){e=error1;logging_1.logger.error("Failure parsing json "+e+" "+header_json+" "+metadata_json+" "+content_json,e);throw e;}};Message.create_header=function(msgtype,options){var header;header={'msgid':string_1.uniqueId(),'msgtype':msgtype};return object_1.extend(header,options);};Message.create=function(msgtype,header_options,content){var header;if(content==null){content={};}
header=Message.create_header(msgtype,header_options);return new Message(header,{},content);};Message.prototype.send=function(socket){var content_json,e,header_json,metadata_json;try{header_json=JSON.stringify(this.header);metadata_json=JSON.stringify(this.metadata);content_json=JSON.stringify(this.content);socket.send(header_json);socket.send(metadata_json);return socket.send(content_json);}
catch(error1){e=error1;logging_1.logger.error("Error sending ",this,e);throw e;}};Message.prototype.complete=function(){if((this.header!=null)&&(this.metadata!=null)&&(this.content!=null)){if('num_buffers'in this.header){return this.buffers.length===this.header['num_buffers'];}
else{return true;}}
else{return false;}};Message.prototype.add_buffer=function(buffer){return this.buffers.push(buffer);};Message.prototype._header_field=function(field){if(field in this.header){return this.header[field];}
else{return null;}};Message.prototype.msgid=function(){return this._header_field('msgid');};Message.prototype.msgtype=function(){return this._header_field('msgtype');};Message.prototype.sessid=function(){return this._header_field('sessid');};Message.prototype.reqid=function(){return this._header_field('reqid');};Message.prototype.problem=function(){if(!('msgid'in this.header)){return"No msgid in header";}
else if(!('msgtype'in this.header)){return"No msgtype in header";}
else{return null;}};return Message;})();message_handlers={'PATCH-DOC':function(connection,message){return connection._for_session(function(session){return session._handle_patch(message);});},'OK':function(connection,message){return logging_1.logger.debug("Unhandled OK reply to "+(message.reqid()));},'ERROR':function(connection,message){return logging_1.logger.error("Unhandled ERROR reply to "+(message.reqid())+": "+message.content['text']);}};ClientConnection=(function(){ClientConnection._connection_count=0;function ClientConnection(url1,id,args_string1,_on_have_session_hook,_on_closed_permanently_hook){this.url=url1;this.id=id;this.args_string=args_string1;this._on_have_session_hook=_on_have_session_hook;this._on_closed_permanently_hook=_on_closed_permanently_hook;this._number=ClientConnection._connection_count;ClientConnection._connection_count=this._number+1;if(this.url==null){this.url=exports.DEFAULT_SERVER_WEBSOCKET_URL;}
if(this.id==null){this.id=exports.DEFAULT_SESSION_ID;}
logging_1.logger.debug("Creating websocket "+this._number+" to '"+this.url+"' session '"+this.id+"'");this.socket=null;this.closed_permanently=false;this._fragments=[];this._partial=null;this._current_handler=null;this._pending_ack=null;this._pending_replies={};this.session=null;}
ClientConnection.prototype._for_session=function(f){if(this.session!==null){return f(this.session);}};ClientConnection.prototype.connect=function(){var error,ref,versioned_url;if(this.closed_permanently){return es6_promise_1.Promise.reject(new Error("Cannot connect() a closed ClientConnection"));}
if(this.socket!=null){return es6_promise_1.Promise.reject(new Error("Already connected"));}
this._fragments=[];this._partial=null;this._pending_replies={};this._current_handler=null;try{versioned_url=this.url+"?bokeh-protocol-version=1.0&bokeh-session-id="+this.id;if(((ref=this.args_string)!=null?ref.length:void 0)>0){versioned_url+="&"+this.args_string;}
if(window.MozWebSocket!=null){this.socket=new MozWebSocket(versioned_url);}
else{this.socket=new WebSocket(versioned_url);}
return new es6_promise_1.Promise((function(_this){return function(resolve,reject){_this.socket.binarytype="arraybuffer";_this.socket.onopen=function(){return _this._on_open(resolve,reject);};_this.socket.onmessage=function(event){return _this._on_message(event);};_this.socket.onclose=function(event){return _this._on_close(event);};return _this.socket.onerror=function(){return _this._on_error(reject);};};})(this));}
catch(error1){error=error1;logging_1.logger.error("websocket creation failed to url: "+this.url);logging_1.logger.error(" - "+error);return es6_promise_1.Promise.reject(error);}};ClientConnection.prototype.close=function(){if(!this.closed_permanently){logging_1.logger.debug("Permanently closing websocket connection "+this._number);this.closed_permanently=true;if(this.socket!=null){this.socket.close(1000,"close method called on ClientConnection "+this._number);}
this._for_session(function(session){return session._connection_closed();});if(this._on_closed_permanently_hook!=null){this._on_closed_permanently_hook();return this._on_closed_permanently_hook=null;}}};ClientConnection.prototype._schedule_reconnect=function(milliseconds){var retry;retry=(function(_this){return function(){if(true||_this.closed_permanently){if(!_this.closed_permanently){logging_1.logger.info("Websocket connection "+_this._number+" disconnected, will not attempt to reconnect");}}
else{logging_1.logger.debug("Attempting to reconnect websocket "+_this._number);return _this.connect();}};})(this);return setTimeout(retry,milliseconds);};ClientConnection.prototype.send=function(message){var e;try{if(this.socket===null){throw new Error("not connected so cannot send "+message);}
return message.send(this.socket);}
catch(error1){e=error1;return logging_1.logger.error("Error sending message ",e,message);}};ClientConnection.prototype.send_event=function(event){var message;message=Message.create('EVENT',{},JSON.stringify(event));return this.send(message);};ClientConnection.prototype.send_with_reply=function(message){var promise;promise=new es6_promise_1.Promise((function(_this){return function(resolve,reject){_this._pending_replies[message.msgid()]=[resolve,reject];return _this.send(message);};})(this));return promise.then(function(message){if(message.msgtype()==='ERROR'){throw new Error("Error reply "+message.content['text']);}
else{return message;}},function(error){throw error;});};ClientConnection.prototype._pull_doc_json=function(){var message,promise;message=Message.create('PULL-DOC-REQ',{});promise=this.send_with_reply(message);return promise.then(function(reply){if(!('doc'in reply.content)){throw new Error("No 'doc' field in PULL-DOC-REPLY");}
return reply.content['doc'];},function(error){throw error;});};ClientConnection.prototype._repull_session_doc=function(){if(this.session===null){logging_1.logger.debug("Pulling session for first time");}
else{logging_1.logger.debug("Repulling session");}
return this._pull_doc_json().then((function(_this){return function(doc_json){var document,patch,patch_message;if(_this.session===null){if(_this.closed_permanently){return logging_1.logger.debug("Got new document after connection was already closed");}
else{document=document_1.Document.from_json(doc_json);patch=document_1.Document._compute_patch_since_json(doc_json,document);if(patch.events.length>0){logging_1.logger.debug("Sending "+patch.events.length+" changes from model construction back to server");patch_message=Message.create('PATCH-DOC',{},patch);_this.send(patch_message);}
_this.session=new ClientSession(_this,document,_this.id);logging_1.logger.debug("Created a new session from new pulled doc");if(_this._on_have_session_hook!=null){_this._on_have_session_hook(_this.session);return _this._on_have_session_hook=null;}}}
else{_this.session.document.replace_with_json(doc_json);return logging_1.logger.debug("Updated existing session with new pulled doc");}};})(this),function(error){throw error;})["catch"](function(error){if(console.trace!=null){console.trace(error);}
return logging_1.logger.error("Failed to repull session "+error);});};ClientConnection.prototype._on_open=function(resolve,reject){logging_1.logger.info("Websocket connection "+this._number+" is now open");this._pending_ack=[resolve,reject];return this._current_handler=(function(_this){return function(message){return _this._awaiting_ack_handler(message);};})(this);};ClientConnection.prototype._on_message=function(event){var e;try{return this._on_message_unchecked(event);}
catch(error1){e=error1;return logging_1.logger.error("Error handling message: "+e+", "+event);}};ClientConnection.prototype._on_message_unchecked=function(event){var msg,problem;if(this._current_handler==null){logging_1.logger.error("got a message but haven't set _current_handler");}
if(event.data instanceof ArrayBuffer){if((this._partial!=null)&&!this._partial.complete()){this._partial.add_buffer(event.data);}
else{this._close_bad_protocol("Got binary from websocket but we were expecting text");}}
else if(this._partial!=null){this._close_bad_protocol("Got text from websocket but we were expecting binary");}
else{this._fragments.push(event.data);if(this._fragments.length===3){this._partial=Message.assemble(this._fragments[0],this._fragments[1],this._fragments[2]);this._fragments=[];problem=this._partial.problem();if(problem!==null){this._close_bad_protocol(problem);}}}
if((this._partial!=null)&&this._partial.complete()){msg=this._partial;this._partial=null;return this._current_handler(msg);}};ClientConnection.prototype._on_close=function(event){var pop_pending,promise_funcs;logging_1.logger.info("Lost websocket "+this._number+" connection, "+event.code+" ("+event.reason+")");this.socket=null;if(this._pending_ack!=null){this._pending_ack[1](new Error("Lost websocket connection, "+event.code+" ("+event.reason+")"));this._pending_ack=null;}
pop_pending=(function(_this){return function(){var promise_funcs,ref,reqid;ref=_this._pending_replies;for(reqid in ref){promise_funcs=ref[reqid];delete _this._pending_replies[reqid];return promise_funcs;}
return null;};})(this);promise_funcs=pop_pending();while(promise_funcs!==null){promise_funcs[1]("Disconnected");promise_funcs=pop_pending();}
if(!this.closed_permanently){return this._schedule_reconnect(2000);}};ClientConnection.prototype._on_error=function(reject){logging_1.logger.debug("Websocket error on socket  "+this._number);return reject(new Error("Could not open websocket"));};ClientConnection.prototype._close_bad_protocol=function(detail){logging_1.logger.error("Closing connection: "+detail);if(this.socket!=null){return this.socket.close(1002,detail);}};ClientConnection.prototype._awaiting_ack_handler=function(message){if(message.msgtype()==="ACK"){this._current_handler=(function(_this){return function(message){return _this._steady_state_handler(message);};})(this);this._repull_session_doc();if(this._pending_ack!=null){this._pending_ack[0](this);return this._pending_ack=null;}}
else{return this._close_bad_protocol("First message was not an ACK");}};ClientConnection.prototype._steady_state_handler=function(message){var promise_funcs;if(message.reqid()in this._pending_replies){promise_funcs=this._pending_replies[message.reqid()];delete this._pending_replies[message.reqid()];return promise_funcs[0](message);}
else if(message.msgtype()in message_handlers){return message_handlers[message.msgtype()](this,message);}
else{return logging_1.logger.debug("Doing nothing with message "+(message.msgtype()));}};return ClientConnection;})();ClientSession=(function(){function ClientSession(_connection,document1,id){this._connection=_connection;this.document=document1;this.id=id;this.document_listener=(function(_this){return function(event){return _this._document_changed(event);};})(this);this.document.on_change(this.document_listener);this.event_manager=this.document.event_manager;this.event_manager.session=this;}
ClientSession.prototype.close=function(){return this._connection.close();};ClientSession.prototype.send_event=function(type){return this._connection.send_event(type);};ClientSession.prototype._connection_closed=function(){return this.document.remove_on_change(this.document_listener);};ClientSession.prototype.request_server_info=function(){var message,promise;message=Message.create('SERVER-INFO-REQ',{});promise=this._connection.send_with_reply(message);return promise.then(function(reply){return reply.content;});};ClientSession.prototype.force_roundtrip=function(){return this.request_server_info().then(function(ignored){return void 0;});};ClientSession.prototype._document_changed=function(event){var patch;if(event.setter_id===this.id){return;}
if(event instanceof document_1.ModelChangedEvent&&!(event.attr in event.model.serializable_attributes())){return;}
patch=Message.create('PATCH-DOC',{},this.document.create_json_patch([event]));return this._connection.send(patch);};ClientSession.prototype._handle_patch=function(message){return this.document.apply_json_patch(message.content,this.id);};return ClientSession;})();exports.pull_session=function(url,session_id,args_string){var connection,promise,rejecter;rejecter=null;connection=null;promise=new es6_promise_1.Promise(function(resolve,reject){connection=new ClientConnection(url,session_id,args_string,function(session){var e;try{return resolve(session);}
catch(error1){e=error1;logging_1.logger.error("Promise handler threw an error, closing session "+error);session.close();throw e;}},function(){return reject(new Error("Connection was closed before we successfully pulled a session"));});return connection.connect().then(function(whatever){},function(error){logging_1.logger.error("Failed to connect to Bokeh server "+error);throw error;});});promise.close=function(){return connection.close();};return promise;};},{"./core/logging":"core/logging","./core/util/object":"core/util/object","./core/util/string":"core/util/string","./document":"document","es6-promise":"es6-promise"}],"core/backbone":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var events_1=require("./events");var eq_1=require("./util/eq");var object_1=require("./util/object");exports.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.attributes={};this.setv(attrs,options);this.changed={};this.initialize.apply(this,arguments);};object_1.extend(exports.Model.prototype,events_1.Events,{changed:null,initialize:function(){},getv:function(attr){return this.attributes[attr];},setv:function(key,val,options){if(key==null)
return this;var attrs;if(typeof key==='object'){attrs=key;options=val;}
else{(attrs={})[key]=val;}
options||(options={});var silent=options.silent;var changes=[];var changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=object_1.clone(this.attributes);this.changed={};}
var current=this.attributes;var changed=this.changed;var prev=this._previousAttributes;for(var attr in attrs){val=attrs[attr];if(!eq_1.isEqual(current[attr],val))
changes.push(attr);if(!eq_1.isEqual(prev[attr],val)){changed[attr]=val;}
else{delete changed[attr];}
current[attr]=val;}
if(!silent){if(changes.length)
this._pending=true;for(var i=0;i<changes.length;i++){this.trigger('change:'+changes[i],this,current[changes[i]]);}}
if(changing)
return this;if(!silent){while(this._pending){this._pending=false;this.trigger('change',this);}}
this._pending=false;this._changing=false;return this;},destroy:function(){this.stopListening();this.trigger('destroy',this);},clone:function(){return new this.constructor(this.attributes);}});exports.View=function(options){options=options||{};this.model=options.model;this.id=options.id;this.el=options.el;this._ensureElement();this.initialize(options);};object_1.extend(exports.View.prototype,events_1.Events,{tagName:'div',initialize:function(options){},render:function(){return this;},remove:function(){this._removeElement();this.stopListening();return this;},_removeElement:function(){var parent=this.el.parentNode;if(parent!=null){parent.removeChild(this.el);}},setElement:function(element){this._setElement(element);return this;},_setElement:function(el){this.el=el;},_createElement:function(tagName){return document.createElement(tagName);},_ensureElement:function(){if(!this.el){this.setElement(this._createElement(this.tagName));if(this.id){this.el.setAttribute('id',this.id);}
if(this.className){this.el.setAttribute('class',this.className);}}
else{this.setElement(this.el);}}});exports.Model.getter=exports.View.getter=function(name,get){Object.defineProperty(this.prototype,name,{get:get});};exports.Model.getters=exports.View.getters=function(specs){for(var name in specs){this.getter(name,specs[name]);}};},{"./events":"core/events","./util/eq":"core/util/eq","./util/object":"core/util/object"}],"core/bokeh_events":[function(require,module,exports){"use strict";var __extends=(this&&this.__extends)||(function(){var extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};})();var __decorate=(this&&this.__decorate)||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r;};Object.defineProperty(exports,"__esModule",{value:true});var logging_1=require("./logging");var object_1=require("./util/object");var event_classes={};function register_event_class(event_name){return function(event_cls){event_cls.prototype.event_name=event_name;event_classes[event_name]=event_cls;};}
exports.register_event_class=register_event_class;function register_with_event(event_cls){var models=[];for(var _i=1;_i<arguments.length;_i++){models[_i-1]=arguments[_i];}
var applicable_models=event_cls.prototype.applicable_models.concat(models);event_cls.prototype.applicable_models=applicable_models;}
exports.register_with_event=register_with_event;var BokehEvent=(function(){function BokehEvent(options){if(options===void 0){options={};}
this._options=options;if(options.model_id){this.model_id=options.model_id;}}
BokehEvent.prototype.set_model_id=function(id){this._options.model_id=id;this.model_id=id;return this;};BokehEvent.prototype.is_applicable_to=function(obj){return this.applicable_models.some(function(model){return obj instanceof model;});};BokehEvent.event_class=function(e){if(e.type){return event_classes[e.type];}
else{logging_1.logger.warn('BokehEvent.event_class required events with a string type attribute');}};BokehEvent.prototype.toJSON=function(){return{event_name:this.event_name,event_values:object_1.clone(this._options),};};BokehEvent.prototype._customize_event=function(model){return this;};return BokehEvent;}());exports.BokehEvent=BokehEvent;BokehEvent.prototype.applicable_models=[];var ButtonClick=(function(_super){__extends(ButtonClick,_super);function ButtonClick(){return _super!==null&&_super.apply(this,arguments)||this;}
return ButtonClick;}(BokehEvent));ButtonClick=__decorate([register_event_class("button_click")],ButtonClick);exports.ButtonClick=ButtonClick;var UIEvent=(function(_super){__extends(UIEvent,_super);function UIEvent(){return _super!==null&&_super.apply(this,arguments)||this;}
return UIEvent;}(BokehEvent));exports.UIEvent=UIEvent;var LODStart=(function(_super){__extends(LODStart,_super);function LODStart(){return _super!==null&&_super.apply(this,arguments)||this;}
return LODStart;}(UIEvent));LODStart=__decorate([register_event_class("lodstart")],LODStart);exports.LODStart=LODStart;var LODEnd=(function(_super){__extends(LODEnd,_super);function LODEnd(){return _super!==null&&_super.apply(this,arguments)||this;}
return LODEnd;}(UIEvent));LODEnd=__decorate([register_event_class("lodend")],LODEnd);exports.LODEnd=LODEnd;var PointEvent=(function(_super){__extends(PointEvent,_super);function PointEvent(options){var _this=_super.call(this,options)||this;_this.sx=options.sx;_this.sy=options.sy;_this.x=null;_this.y=null;return _this;}
PointEvent.from_event=function(e,model_id){if(model_id===void 0){model_id=null;}
return new this({sx:e.bokeh['sx'],sy:e.bokeh['sy'],model_id:model_id});};PointEvent.prototype._customize_event=function(plot){var xmapper=plot.plot_canvas.frame.x_mappers['default'];var ymapper=plot.plot_canvas.frame.y_mappers['default'];this.x=xmapper.map_from_target(plot.plot_canvas.canvas.sx_to_vx(this.sx));this.y=ymapper.map_from_target(plot.plot_canvas.canvas.sy_to_vy(this.sy));this._options['x']=this.x;this._options['y']=this.y;return this;};return PointEvent;}(UIEvent));exports.PointEvent=PointEvent;var Pan=(function(_super){__extends(Pan,_super);function Pan(options){if(options===void 0){options={};}
var _this=_super.call(this,options)||this;_this.delta_x=options.delta_x;_this.delta_y=options.delta_y;return _this;}
Pan.from_event=function(e,model_id){if(model_id===void 0){model_id=null;}
return new this({sx:e.bokeh['sx'],sy:e.bokeh['sy'],delta_x:e.deltaX,delta_y:e.deltaY,direction:e.direction,model_id:model_id});};return Pan;}(PointEvent));Pan=__decorate([register_event_class("pan")],Pan);exports.Pan=Pan;var Pinch=(function(_super){__extends(Pinch,_super);function Pinch(options){if(options===void 0){options={};}
var _this=_super.call(this,options)||this;_this.scale=options.scale;return _this;}
Pinch.from_event=function(e,model_id){if(model_id===void 0){model_id=null;}
return new this({sx:e.bokeh['sx'],sy:e.bokeh['sy'],scale:e.scale,model_id:model_id,});};return Pinch;}(PointEvent));Pinch=__decorate([register_event_class("pinch")],Pinch);exports.Pinch=Pinch;var MouseWheel=(function(_super){__extends(MouseWheel,_super);function MouseWheel(options){if(options===void 0){options={};}
var _this=_super.call(this,options)||this;_this.delta=options.delta;return _this;}
MouseWheel.from_event=function(e,model_id){if(model_id===void 0){model_id=null;}
return new this({sx:e.bokeh['sx'],sy:e.bokeh['sy'],delta:e.delta,model_id:model_id,});};return MouseWheel;}(PointEvent));MouseWheel=__decorate([register_event_class("wheel")],MouseWheel);exports.MouseWheel=MouseWheel;var MouseMove=(function(_super){__extends(MouseMove,_super);function MouseMove(){return _super!==null&&_super.apply(this,arguments)||this;}
return MouseMove;}(PointEvent));MouseMove=__decorate([register_event_class("mousemove")],MouseMove);exports.MouseMove=MouseMove;var MouseEnter=(function(_super){__extends(MouseEnter,_super);function MouseEnter(){return _super!==null&&_super.apply(this,arguments)||this;}
return MouseEnter;}(PointEvent));MouseEnter=__decorate([register_event_class("mouseenter")],MouseEnter);exports.MouseEnter=MouseEnter;var MouseLeave=(function(_super){__extends(MouseLeave,_super);function MouseLeave(){return _super!==null&&_super.apply(this,arguments)||this;}
return MouseLeave;}(PointEvent));MouseLeave=__decorate([register_event_class("mouseleave")],MouseLeave);exports.MouseLeave=MouseLeave;var Tap=(function(_super){__extends(Tap,_super);function Tap(){return _super!==null&&_super.apply(this,arguments)||this;}
return Tap;}(PointEvent));Tap=__decorate([register_event_class("tap")],Tap);exports.Tap=Tap;var DoubleTap=(function(_super){__extends(DoubleTap,_super);function DoubleTap(){return _super!==null&&_super.apply(this,arguments)||this;}
return DoubleTap;}(PointEvent));DoubleTap=__decorate([register_event_class("doubletap")],DoubleTap);exports.DoubleTap=DoubleTap;var Press=(function(_super){__extends(Press,_super);function Press(){return _super!==null&&_super.apply(this,arguments)||this;}
return Press;}(PointEvent));Press=__decorate([register_event_class("press")],Press);exports.Press=Press;var PanStart=(function(_super){__extends(PanStart,_super);function PanStart(){return _super!==null&&_super.apply(this,arguments)||this;}
return PanStart;}(PointEvent));PanStart=__decorate([register_event_class("panstart")],PanStart);exports.PanStart=PanStart;var PanEnd=(function(_super){__extends(PanEnd,_super);function PanEnd(){return _super!==null&&_super.apply(this,arguments)||this;}
return PanEnd;}(PointEvent));PanEnd=__decorate([register_event_class("panend")],PanEnd);exports.PanEnd=PanEnd;var PinchStart=(function(_super){__extends(PinchStart,_super);function PinchStart(){return _super!==null&&_super.apply(this,arguments)||this;}
return PinchStart;}(PointEvent));PinchStart=__decorate([register_event_class("pinchstart")],PinchStart);exports.PinchStart=PinchStart;var PinchEnd=(function(_super){__extends(PinchEnd,_super);function PinchEnd(){return _super!==null&&_super.apply(this,arguments)||this;}
return PinchEnd;}(PointEvent));PinchEnd=__decorate([register_event_class("pinchend")],PinchEnd);exports.PinchEnd=PinchEnd;},{"./logging":"core/logging","./util/object":"core/util/object"}],"core/bokeh_view":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var Backbone=require("./backbone");var string_1=require("./util/string");exports.BokehView=(function(superClass){extend(BokehView,superClass);function BokehView(){return BokehView.__super__.constructor.apply(this,arguments);}
BokehView.prototype.initialize=function(options){if(options.id==null){return this.id=string_1.uniqueId('BokehView');}};BokehView.prototype.toString=function(){return this.model.type+"View("+this.id+")";};BokehView.prototype.bind_bokeh_events=function(){};BokehView.prototype.remove=function(){this.trigger('remove',this);return BokehView.__super__.remove.call(this);};return BokehView;})(Backbone.View);},{"./backbone":"core/backbone","./util/string":"core/util/string"}],"core/build_views":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var array_1=require("./util/array");var object_1=require("./util/object");exports.build_views=function(view_storage,view_models,options,view_types){var cls,created_views,i,i_model,j,key,len,len1,model,newmodels,ref,to_remove,view,view_options;if(view_types==null){view_types=[];}
created_views=[];newmodels=view_models.filter(function(x){return view_storage[x.id]==null;});for(i_model=i=0,len=newmodels.length;i<len;i_model=++i){model=newmodels[i_model];cls=(ref=view_types[i_model])!=null?ref:model.default_view;view_options=object_1.extend({model:model},options);view_storage[model.id]=view=new cls(view_options);created_views.push(view);}
to_remove=array_1.difference(Object.keys(view_storage),(function(){var j,len1,results;results=[];for(j=0,len1=view_models.length;j<len1;j++){view=view_models[j];results.push(view.id);}
return results;})());for(j=0,len1=to_remove.length;j<len1;j++){key=to_remove[j];view_storage[key].remove();delete view_storage[key];}
return created_views;};},{"./util/array":"core/util/array","./util/object":"core/util/object"}],"core/dom":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var types_1=require("./util/types");var _createElement=function(tag){return function(attrs){if(attrs===void 0){attrs={};}
var children=[];for(var _i=1;_i<arguments.length;_i++){children[_i-1]=arguments[_i];}
var element;if(tag==="fragment"){element=document.createDocumentFragment();}
else{element=document.createElement(tag);for(var attr in attrs){var value=attrs[attr];if(value==null||types_1.isBoolean(value)&&!value)
continue;if(attr==="class"&&types_1.isArray(value)){for(var _a=0,_b=value;_a<_b.length;_a++){var cls=_b[_a];if(cls!=null)
element.classList.add(cls);}
continue;}
if(attr==="style"&&types_1.isObject(value)){for(var prop in value){element.style[prop]=value[prop];}
continue;}
element.setAttribute(attr,value);}}
function append(child){if(child instanceof HTMLElement)
element.appendChild(child);else if(types_1.isString(child))
element.appendChild(document.createTextNode(child));else if(child!=null&&child!==false)
throw new Error("expected an HTMLElement, string, false or null, got "+JSON.stringify(child));}
for(var _c=0,children_1=children;_c<children_1.length;_c++){var child=children_1[_c];if(types_1.isArray(child)){for(var _d=0,child_1=child;_d<child_1.length;_d++){var _child=child_1[_d];append(_child);}}
else
append(child);}
return element;};};function createElement(tag,attrs){var children=[];for(var _i=2;_i<arguments.length;_i++){children[_i-2]=arguments[_i];}
return _createElement(tag).apply(void 0,[attrs].concat(children));}
exports.createElement=createElement;exports.div=_createElement("div"),exports.span=_createElement("span"),exports.link=_createElement("link"),exports.style=_createElement("style"),exports.a=_createElement("a"),exports.p=_createElement("p"),exports.pre=_createElement("pre"),exports.input=_createElement("input"),exports.label=_createElement("label"),exports.canvas=_createElement("canvas"),exports.ul=_createElement("ul"),exports.ol=_createElement("ol"),exports.li=_createElement("li");function show(element){element.style.display="";}
exports.show=show;function hide(element){element.style.display="none";}
exports.hide=hide;function empty(element){var child;while(child=element.firstChild){element.removeChild(child);}}
exports.empty=empty;function position(element){return{top:element.offsetTop,left:element.offsetLeft,};}
exports.position=position;function offset(element){var rect=element.getBoundingClientRect();return{top:rect.top+window.pageYOffset-document.documentElement.clientTop,left:rect.left+window.pageXOffset-document.documentElement.clientLeft,};}
exports.offset=offset;function replaceWith(element,replacement){var parent=element.parentNode;if(parent!=null){parent.replaceChild(replacement,element);}}
exports.replaceWith=replaceWith;},{"./util/types":"core/util/types"}],"core/enums":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AngleUnits=["deg","rad"];exports.Dimension=["width","height"];exports.Dimensions=["width","height","both"];exports.Direction=["clock","anticlock"];exports.FontStyle=["normal","italic","bold"];exports.LatLon=["lat","lon"];exports.LineCap=["butt","round","square"];exports.LineJoin=["miter","round","bevel"];exports.Location=["above","below","left","right"];exports.LegendLocation=["top_left","top_center","top_right","center_left","center","center_right","bottom_left","bottom_center","bottom_right"];exports.Orientation=["vertical","horizontal"];exports.RenderLevel=["image","underlay","glyph","annotation","overlay"];exports.RenderMode=["canvas","css"];exports.Side=["left","right"];exports.SpatialUnits=["screen","data"];exports.StartEnd=["start","end"];exports.TextAlign=["left","right","center"];exports.TextBaseline=["top","middle","bottom","alphabetic","hanging","ideographic"];exports.DistributionTypes=["uniform","normal"];exports.TransformStepModes=["after","before","center"];exports.SizingMode=["stretch_both","scale_width","scale_height","scale_both","fixed"];},{}],"core/events":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var string_1=require("./util/string");var callback_1=require("./util/callback");exports.Events={};var eventSplitter=/\s+/;var eventsApi=function(iteratee,events,name,callback,opts){var i=0,names;if(name&&typeof name==='object'){if(callback!==void 0&&'context'in opts&&opts.context===void 0)
opts.context=callback;for(names=Object.keys(name);i<names.length;i++){events=eventsApi(iteratee,events,names[i],name[names[i]],opts);}}
else if(name&&eventSplitter.test(name)){for(names=name.split(eventSplitter);i<names.length;i++){events=iteratee(events,names[i],callback,opts);}}
else{events=iteratee(events,name,callback,opts);}
return events;};exports.Events.on=function(name,callback,context){return internalOn(this,name,callback,context);};var internalOn=function(obj,name,callback,context,listening){obj._events=eventsApi(onApi,obj._events||{},name,callback,{context:context,ctx:obj,listening:listening});if(listening){var listeners=obj._listeners||(obj._listeners={});listeners[listening.id]=listening;}
return obj;};exports.Events.listenTo=function(obj,name,callback){if(!obj)
return this;var id=obj._listenId||(obj._listenId=string_1.uniqueId('l'));var listeningTo=this._listeningTo||(this._listeningTo={});var listening=listeningTo[id];if(!listening){var thisId=this._listenId||(this._listenId=string_1.uniqueId('l'));listening=listeningTo[id]={obj:obj,objId:id,id:thisId,listeningTo:listeningTo,count:0};}
internalOn(obj,name,callback,this,listening);return this;};var onApi=function(events,name,callback,options){if(callback){var handlers=events[name]||(events[name]=[]);var context=options.context,ctx=options.ctx,listening=options.listening;if(listening)
listening.count++;handlers.push({callback:callback,context:context,ctx:context||ctx,listening:listening});}
return events;};exports.Events.off=function(name,callback,context){if(!this._events)
return this;this._events=eventsApi(offApi,this._events,name,callback,{context:context,listeners:this._listeners});return this;};exports.Events.stopListening=function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)
return this;var ids=obj?[obj._listenId]:Object.keys(listeningTo);for(var i=0;i<ids.length;i++){var listening=listeningTo[ids[i]];if(!listening)
break;listening.obj.off(name,callback,this);}
return this;};var offApi=function(events,name,callback,options){if(!events)
return;var i=0,listening;var context=options.context,listeners=options.listeners;if(!name&&!callback&&!context){var ids=Object.keys(listeners);for(;i<ids.length;i++){listening=listeners[ids[i]];delete listeners[listening.id];delete listening.listeningTo[listening.objId];}
return;}
var names=name?[name]:Object.keys(events);for(;i<names.length;i++){name=names[i];var handlers=events[name];if(!handlers)
break;var remaining=[];for(var j=0;j<handlers.length;j++){var handler=handlers[j];if(callback&&callback!==handler.callback&&callback!==handler.callback._callback||context&&context!==handler.context){remaining.push(handler);}
else{listening=handler.listening;if(listening&&--listening.count===0){delete listeners[listening.id];delete listening.listeningTo[listening.objId];}}}
if(remaining.length){events[name]=remaining;}
else{delete events[name];}}
return events;};exports.Events.once=function(name,callback,context){var events=eventsApi(onceMap,{},name,callback,this.off.bind(this));if(typeof name==='string'&&context==null)
callback=void 0;return this.on(events,callback,context);};exports.Events.listenToOnce=function(obj,name,callback){var events=eventsApi(onceMap,{},name,callback,this.stopListening.bind(this,obj));return this.listenTo(obj,events);};var onceMap=function(map,name,callback,offer){if(callback){var fn=map[name]=callback_1.once(function(){offer(name,fn);callback.apply(this,arguments);});fn._callback=callback;}
return map;};exports.Events.trigger=function(name){if(!this._events)
return this;var length=Math.max(0,arguments.length-1);var args=Array(length);for(var i=0;i<length;i++)
args[i]=arguments[i+1];eventsApi(triggerApi,this._events,name,void 0,args);return this;};var triggerApi=function(objEvents,name,callback,args){if(objEvents){var events=objEvents[name];var allEvents=objEvents.all;if(events&&allEvents)
allEvents=allEvents.slice();if(events)
triggerEvents(events,args);if(allEvents)
triggerEvents(allEvents,[name].concat(args));}
return objEvents;};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)
(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)
(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)
(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)
(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)
(ev=events[i]).callback.apply(ev.ctx,args);return;}};},{"./util/callback":"core/util/callback","./util/string":"core/util/string"}],"core/has_props":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var Backbone=require("./backbone");var logging_1=require("./logging");var property_mixins=require("./property_mixins");var refs=require("./util/refs");var p=require("./properties");var string_1=require("./util/string");var array_1=require("./util/array");var object_1=require("./util/object");var types_1=require("./util/types");exports.HasProps=(function(superClass){extend1(HasProps,superClass);HasProps.prototype.props={};HasProps.prototype.mixins=[];HasProps.define=function(object){var name,prop,results;results=[];for(name in object){prop=object[name];results.push((function(_this){return function(name,prop){var default_value,internal,props,refined_prop,type;if(_this.prototype.props[name]!=null){throw new Error("attempted to redefine property '"+_this.name+"."+name+"'");}
if(_this.prototype[name]!=null){throw new Error("attempted to redefine attribute '"+_this.name+"."+name+"'");}
Object.defineProperty(_this.prototype,name,{get:function(){var value;value=this.getv(name);return value;},set:function(value){this.setv(name,value);return this;}},{configurable:false,enumerable:true});type=prop[0],default_value=prop[1],internal=prop[2];refined_prop={type:type,default_value:default_value,internal:internal!=null?internal:false};props=object_1.clone(_this.prototype.props);props[name]=refined_prop;return _this.prototype.props=props;};})(this)(name,prop));}
return results;};HasProps.internal=function(object){var _object,fn,name,prop;_object={};fn=(function(_this){return function(name,prop){var default_value,type;type=prop[0],default_value=prop[1];return _object[name]=[type,default_value,true];};})(this);for(name in object){prop=object[name];fn(name,prop);}
return this.define(_object);};HasProps.mixin=function(){var mixins,names;names=1<=arguments.length?slice.call(arguments,0):[];this.define(property_mixins.create(names));mixins=this.prototype.mixins.concat(names);return this.prototype.mixins=mixins;};HasProps.mixins=function(names){return this.mixin.apply(this,names);};HasProps.override=function(name_or_object,default_value){var name,object,results;if(types_1.isString(name_or_object)){object={};object[name]=default_value;}
else{object=name_or_object;}
results=[];for(name in object){default_value=object[name];results.push((function(_this){return function(name,default_value){var props,value;value=_this.prototype.props[name];if(value==null){throw new Error("attempted to override nonexistent '"+_this.name+"."+name+"'");}
props=object_1.clone(_this.prototype.props);props[name]=object_1.extend({},value,{default_value:default_value});return _this.prototype.props=props;};})(this)(name,default_value));}
return results;};HasProps.define({id:[p.Any]});HasProps.prototype.toString=function(){return this.type+"("+this.id+")";};function HasProps(attributes,options){var attrs,default_value,name,ref,ref1,type;this.document=null;attrs=attributes||{};if(!options){options={};}
this.attributes={};this.properties={};ref=this.props;for(name in ref){ref1=ref[name],type=ref1.type,default_value=ref1.default_value;if(type==null){throw new Error("undefined property type for "+this.type+"."+name);}
this.properties[name]=new type({obj:this,attr:name,default_value:default_value});}
this._set_after_defaults={};this.setv(attrs,options);this.changed={};this._computed={};if(attrs.id==null){this.id=string_1.uniqueId(this.type);}
if(!options.defer_initialization){this.initialize.apply(this,arguments);}}
HasProps.prototype.initialize=function(options){var name,prop,ref,results;ref=this.properties;results=[];for(name in ref){prop=ref[name];prop.update();if(prop.spec.transform){results.push(this.listenTo(prop.spec.transform,"change",function(){return this.trigger('transformchange',this);}));}
else{results.push(void 0);}}
return results;};HasProps.prototype.setv=function(key,value,options){var attrs,old,prop_name,results,val;if(types_1.isObject(key)||key===null){attrs=key;options=value;}
else{attrs={};attrs[key]=value;}
for(key in attrs){if(!hasProp.call(attrs,key))
continue;val=attrs[key];prop_name=key;if(this.props[prop_name]==null){throw new Error("property "+this.type+"."+prop_name+" wasn't declared");}
if(!((options!=null)&&options.defaults)){this._set_after_defaults[key]=true;}}
if(!object_1.isEmpty(attrs)){old={};for(key in attrs){value=attrs[key];old[key]=this.getv(key);}
HasProps.__super__.setv.call(this,attrs,options);if((options!=null?options.silent:void 0)==null){results=[];for(key in attrs){value=attrs[key];results.push(this._tell_document_about_change(key,old[key],this.getv(key),options));}
return results;}}};HasProps.prototype.add_dependencies=function(prop_name,object,fields){var fld,j,len,prop_spec,results;if(!types_1.isArray(fields)){fields=[fields];}
prop_spec=this._computed[prop_name];prop_spec.dependencies=prop_spec.dependencies.concat({obj:object,fields:fields});results=[];for(j=0,len=fields.length;j<len;j++){fld=fields[j];results.push(this.listenTo(object,"change:"+fld,prop_spec['callbacks']['changedep']));}
return results;};HasProps.prototype.define_computed_property=function(prop_name,getter,use_cache){var changedep,prop_spec,propchange;if(use_cache==null){use_cache=true;}
if(this.props[prop_name]!=null){console.log("attempted to redefine existing property "+this.type+"."+prop_name);}
if(this._computed[prop_name]!=null){throw new Error("attempted to redefine existing computed property "+this.type+"."+prop_name);}
changedep=(function(_this){return function(){return _this.trigger('changedep:'+prop_name);};})(this);propchange=(function(_this){return function(){var firechange,new_val,old_val;firechange=true;if(prop_spec['use_cache']){old_val=prop_spec.cache;prop_spec.cache=void 0;new_val=_this._get_computed(prop_name);firechange=new_val!==old_val;}
if(firechange){_this.trigger('change:'+prop_name,_this,_this._get_computed(prop_name));return _this.trigger('change',_this);}};})(this);prop_spec={'getter':getter,'dependencies':[],'use_cache':use_cache,'callbacks':{changedep:changedep,propchange:propchange}};this._computed[prop_name]=prop_spec;this.listenTo(this,"changedep:"+prop_name,prop_spec['callbacks']['propchange']);return prop_spec;};HasProps.prototype.set=function(key,value,options){logging_1.logger.warn("HasProps.set('prop_name', value) is deprecated, use HasProps.prop_name = value instead");return this.setv(key,value,options);};HasProps.prototype.get=function(prop_name){logging_1.logger.warn("HasProps.get('prop_name') is deprecated, use HasProps.prop_name instead");return this.getv(prop_name);};HasProps.prototype.getv=function(prop_name){if(this.props[prop_name]==null){throw new Error("property "+this.type+"."+prop_name+" wasn't declared");}
else{return HasProps.__super__.getv.call(this,prop_name);}};HasProps.prototype._get_computed=function(prop_name){var computed,getter,prop_spec;prop_spec=this._computed[prop_name];if(prop_spec==null){throw new Error("computed property "+this.type+"."+prop_name+" wasn't declared");}
if(prop_spec.use_cache&&prop_spec.cache){return prop_spec.cache;}
else{getter=prop_spec.getter;computed=getter.apply(this,[prop_name]);if(prop_spec.use_cache){prop_spec.cache=computed;}
return computed;}};HasProps.prototype.ref=function(){return refs.create_ref(this);};HasProps.prototype.set_subtype=function(subtype){return this._subtype=subtype;};HasProps.prototype.attribute_is_serializable=function(attr){var prop;prop=this.props[attr];if(prop==null){throw new Error(this.type+".attribute_is_serializable('"+attr+"'): "+attr+" wasn't declared");}
else{return!prop.internal;}};HasProps.prototype.serializable_attributes=function(){var attrs,name,ref,value;attrs={};ref=this.attributes;for(name in ref){value=ref[name];if(this.attribute_is_serializable(name)){attrs[name]=value;}}
return attrs;};HasProps._value_to_json=function(key,value,optional_parent_object){var i,j,len,ref_array,ref_obj,subkey,v;if(value instanceof HasProps){return value.ref();}
else if(types_1.isArray(value)){ref_array=[];for(i=j=0,len=value.length;j<len;i=++j){v=value[i];ref_array.push(HasProps._value_to_json(i,v,value));}
return ref_array;}
else if(types_1.isObject(value)){ref_obj={};for(subkey in value){if(!hasProp.call(value,subkey))
continue;ref_obj[subkey]=HasProps._value_to_json(subkey,value[subkey],value);}
return ref_obj;}
else{return value;}};HasProps.prototype.attributes_as_json=function(include_defaults,value_to_json){var attrs,key,ref,value;if(include_defaults==null){include_defaults=true;}
if(value_to_json==null){value_to_json=HasProps._value_to_json;}
attrs={};ref=this.serializable_attributes();for(key in ref){if(!hasProp.call(ref,key))
continue;value=ref[key];if(include_defaults){attrs[key]=value;}
else if(key in this._set_after_defaults){attrs[key]=value;}}
return value_to_json("attributes",attrs,this);};HasProps._json_record_references=function(doc,v,result,recurse){var elem,j,k,len,model,results,results1;if(v==null){}
else if(refs.is_ref(v)){if(!(v.id in result)){model=doc.get_model_by_id(v.id);return HasProps._value_record_references(model,result,recurse);}}
else if(types_1.isArray(v)){results=[];for(j=0,len=v.length;j<len;j++){elem=v[j];results.push(HasProps._json_record_references(doc,elem,result,recurse));}
return results;}
else if(types_1.isObject(v)){results1=[];for(k in v){if(!hasProp.call(v,k))
continue;elem=v[k];results1.push(HasProps._json_record_references(doc,elem,result,recurse));}
return results1;}};HasProps._value_record_references=function(v,result,recurse){var elem,immediate,j,k,l,len,len1,obj,results,results1,results2;if(v==null){}
else if(v instanceof HasProps){if(!(v.id in result)){result[v.id]=v;if(recurse){immediate=v._immediate_references();results=[];for(j=0,len=immediate.length;j<len;j++){obj=immediate[j];results.push(HasProps._value_record_references(obj,result,true));}
return results;}}}
else if(v.buffer instanceof ArrayBuffer){}
else if(types_1.isArray(v)){results1=[];for(l=0,len1=v.length;l<len1;l++){elem=v[l];results1.push(HasProps._value_record_references(elem,result,recurse));}
return results1;}
else if(types_1.isObject(v)){results2=[];for(k in v){if(!hasProp.call(v,k))
continue;elem=v[k];results2.push(HasProps._value_record_references(elem,result,recurse));}
return results2;}};HasProps.prototype._immediate_references=function(){var attrs,key,result,value;result={};attrs=this.serializable_attributes();for(key in attrs){value=attrs[key];HasProps._value_record_references(value,result,false);}
return object_1.values(result);};HasProps.prototype.references=function(){var references;references={};HasProps._value_record_references(this,references,true);return object_1.values(references);};HasProps.prototype.attach_document=function(doc){if(this.document!==null&&this.document!==doc){throw new Error("models must be owned by only a single document");}
this.document=doc;if(this._doc_attached!=null){return this._doc_attached();}};HasProps.prototype.detach_document=function(){return this.document=null;};HasProps.prototype._tell_document_about_change=function(attr,old,new_,options){var need_invalidate,new_id,new_ref,new_refs,old_id,old_ref,old_refs;if(!this.attribute_is_serializable(attr)){return;}
if(this.document!==null){new_refs={};HasProps._value_record_references(new_,new_refs,false);old_refs={};HasProps._value_record_references(old,old_refs,false);need_invalidate=false;for(new_id in new_refs){new_ref=new_refs[new_id];if(!(new_id in old_refs)){need_invalidate=true;break;}}
if(!need_invalidate){for(old_id in old_refs){old_ref=old_refs[old_id];if(!(old_id in new_refs)){need_invalidate=true;break;}}}
if(need_invalidate){this.document._invalidate_all_models();}
return this.document._notify_change(this,attr,old,new_,options);}};HasProps.prototype.materialize_dataspecs=function(source){var data,name,prop,ref;data={};ref=this.properties;for(name in ref){prop=ref[name];if(!prop.dataspec){continue;}
if((prop.optional||false)&&prop.spec.value===null&&(!(name in this._set_after_defaults))){continue;}
data["_"+name]=prop.array(source);if((prop.spec.field!=null)&&prop.spec.field in source._shapes){data["_"+name+"_shape"]=source._shapes[prop.spec.field];}
if(prop instanceof p.Distance){data["max_"+name]=array_1.max(data["_"+name]);}}
return data;};return HasProps;})(Backbone.Model);},{"./backbone":"core/backbone","./logging":"core/logging","./properties":"core/properties","./property_mixins":"core/property_mixins","./util/array":"core/util/array","./util/object":"core/util/object","./util/refs":"core/util/refs","./util/string":"core/util/string","./util/types":"core/util/types"}],"core/hittest":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var dist_to_segment_squared,nullreturner,sqr;var array_1=require("./util/array");exports.point_in_poly=function(x,y,px,py){var i,inside,j,ref,x1,x2,y1,y2;inside=false;x1=px[px.length-1];y1=py[py.length-1];for(i=j=0,ref=px.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){x2=px[i];y2=py[i];if((y1<y)!==(y2<y)){if(x1+(y-y1)/(y2-y1)*(x2-x1)<x){inside=!inside;}}
x1=x2;y1=y2;}
return inside;};nullreturner=function(){return null;};exports.HitTestResult=(function(){function HitTestResult(){this['0d']={glyph:null,get_view:nullreturner,indices:[]};this['1d']={indices:[]};this['2d']={indices:{}};}
Object.defineProperty(HitTestResult.prototype,'_0d',{get:function(){return this['0d'];}});Object.defineProperty(HitTestResult.prototype,'_1d',{get:function(){return this['1d'];}});Object.defineProperty(HitTestResult.prototype,'_2d',{get:function(){return this['2d'];}});HitTestResult.prototype.is_empty=function(){return this._0d.indices.length===0&&this._1d.indices.length===0;};return HitTestResult;})();exports.create_hit_test_result=function(){return new exports.HitTestResult();};exports.create_1d_hit_test_result=function(hits){var _dist,i,result;result=new exports.HitTestResult();result['1d'].indices=(function(){var j,len,ref,ref1,results;ref=array_1.sortBy(hits,function(arg){var _i,dist;_i=arg[0],dist=arg[1];return dist;});results=[];for(j=0,len=ref.length;j<len;j++){ref1=ref[j],i=ref1[0],_dist=ref1[1];results.push(i);}
return results;})();return result;};exports.validate_bbox_coords=function(arg,arg1){var ref,ref1,x0,x1,y0,y1;x0=arg[0],x1=arg[1];y0=arg1[0],y1=arg1[1];if(x0>x1){ref=[x1,x0],x0=ref[0],x1=ref[1];}
if(y0>y1){ref1=[y1,y0],y0=ref1[0],y1=ref1[1];}
return{minX:x0,minY:y0,maxX:x1,maxY:y1};};sqr=function(x){return x*x;};exports.dist_2_pts=function(vx,vy,wx,wy){return sqr(vx-wx)+sqr(vy-wy);};dist_to_segment_squared=function(p,v,w){var l2,t;l2=exports.dist_2_pts(v.x,v.y,w.x,w.y);if(l2===0){return exports.dist_2_pts(p.x,p.y,v.x,v.y);}
t=((p.x-v.x)*(w.x-v.x)+(p.y-v.y)*(w.y-v.y))/l2;if(t<0){return exports.dist_2_pts(p.x,p.y,v.x,v.y);}
if(t>1){return exports.dist_2_pts(p.x,p.y,w.x,w.y);}
return exports.dist_2_pts(p.x,p.y,v.x+t*(w.x-v.x),v.y+t*(w.y-v.y));};exports.dist_to_segment=function(p,v,w){return Math.sqrt(dist_to_segment_squared(p,v,w));};exports.check_2_segments_intersect=function(l0_x0,l0_y0,l0_x1,l0_y1,l1_x0,l1_y0,l1_x1,l1_y1){var a,b,den,num1,num2,x,y;den=((l1_y1-l1_y0)*(l0_x1-l0_x0))-((l1_x1-l1_x0)*(l0_y1-l0_y0));if(den===0){return{hit:false,x:null,y:null};}
else{a=l0_y0-l1_y0;b=l0_x0-l1_x0;num1=((l1_x1-l1_x0)*a)-((l1_y1-l1_y0)*b);num2=((l0_x1-l0_x0)*a)-((l0_y1-l0_y0)*b);a=num1/den;b=num2/den;x=l0_x0+(a*(l0_x1-l0_x0));y=l0_y0+(a*(l0_y1-l0_y0));return{hit:(a>0&&a<1)&&(b>0&&b<1),x:x,y:y};}};},{"./util/array":"core/util/array"}],"core/layout/layout_canvas":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var solver_1=require("./solver");var model_1=require("../../model");var p=require("../properties");exports.LayoutCanvas=(function(superClass){extend(LayoutCanvas,superClass);function LayoutCanvas(){return LayoutCanvas.__super__.constructor.apply(this,arguments);}
LayoutCanvas.prototype.type='LayoutCanvas';LayoutCanvas.prototype.initialize=function(attrs,options){LayoutCanvas.__super__.initialize.call(this,attrs,options);this._top=new solver_1.Variable("top "+this.id);this._left=new solver_1.Variable("left "+this.id);this._width=new solver_1.Variable("width "+this.id);this._height=new solver_1.Variable("height "+this.id);this._right=new solver_1.Variable("right "+this.id);return this._bottom=new solver_1.Variable("bottom "+this.id);};LayoutCanvas.getters({height:function(){return this._height.value();},width:function(){return this._width.value();},right:function(){return this._right.value();},left:function(){return this._left.value();},top:function(){return this._top.value();},bottom:function(){return this._bottom.value();}});LayoutCanvas.internal({layout_location:[p.Any]});LayoutCanvas.prototype.get_edit_variables=function(){var editables;editables=[];editables.push({edit_variable:this._top,strength:solver_1.Strength.strong});editables.push({edit_variable:this._left,strength:solver_1.Strength.strong});editables.push({edit_variable:this._width,strength:solver_1.Strength.strong});editables.push({edit_variable:this._height,strength:solver_1.Strength.strong});return editables;};LayoutCanvas.prototype.get_constraints=function(){return[];};return LayoutCanvas;})(model_1.Model);},{"../../model":"model","../properties":"core/properties","./solver":"core/layout/solver"}],"core/layout/side_panel":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ALPHABETIC,BOTTOM,CENTER,HANGING,LEFT,MIDDLE,RIGHT,TOP,_align_lookup,_align_lookup_negative,_align_lookup_positive,_angle_lookup,_baseline_lookup,pi2,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var solver_1=require("./solver");var layout_canvas_1=require("./layout_canvas");var p=require("core/properties");var logging_1=require("core/logging");var types_1=require("core/util/types");pi2=Math.PI/2;ALPHABETIC='alphabetic';TOP='top';BOTTOM='bottom';MIDDLE='middle';HANGING='hanging';LEFT='left';RIGHT='right';CENTER='center';_angle_lookup={above:{parallel:0,normal:-pi2,horizontal:0,vertical:-pi2},below:{parallel:0,normal:pi2,horizontal:0,vertical:pi2},left:{parallel:-pi2,normal:0,horizontal:0,vertical:-pi2},right:{parallel:pi2,normal:0,horizontal:0,vertical:pi2}};_baseline_lookup={above:{justified:TOP,parallel:ALPHABETIC,normal:MIDDLE,horizontal:ALPHABETIC,vertical:MIDDLE},below:{justified:BOTTOM,parallel:HANGING,normal:MIDDLE,horizontal:HANGING,vertical:MIDDLE},left:{justified:TOP,parallel:ALPHABETIC,normal:MIDDLE,horizontal:MIDDLE,vertical:ALPHABETIC},right:{justified:TOP,parallel:ALPHABETIC,normal:MIDDLE,horizontal:MIDDLE,vertical:ALPHABETIC}};_align_lookup={above:{justified:CENTER,parallel:CENTER,normal:LEFT,horizontal:CENTER,vertical:LEFT},below:{justified:CENTER,parallel:CENTER,normal:LEFT,horizontal:CENTER,vertical:RIGHT},left:{justified:CENTER,parallel:CENTER,normal:RIGHT,horizontal:RIGHT,vertical:CENTER},right:{justified:CENTER,parallel:CENTER,normal:LEFT,horizontal:LEFT,vertical:CENTER}};_align_lookup_negative={above:RIGHT,below:LEFT,left:RIGHT,right:LEFT};_align_lookup_positive={above:LEFT,below:RIGHT,left:RIGHT,right:LEFT};exports.update_constraints=function(view){var s,side,size,v;v=view;if(v.model.props.visible!=null){if(v.model.visible===false){return;}}
size=v._get_size();if(v._last_size==null){v._last_size=-1;}
if(size===v._last_size){return;}
s=v.model.document.solver();v._last_size=size;if(v._size_constraint!=null){s.remove_constraint(v._size_constraint,true);}
v._size_constraint=solver_1.GE(v.model.panel._size,-size);s.add_constraint(v._size_constraint);if(v._full_set==null){v._full_set=false;}
if(!v._full_set){side=v.model.panel.side;if(side==='above'||side==='below'){s.add_constraint(solver_1.EQ(v.model.panel._width,[-1,v.plot_model.canvas._width]));}
if(side==='left'||side==='right'){s.add_constraint(solver_1.EQ(v.model.panel._height,[-1,v.plot_model.canvas._height]));}
return v._full_set=true;}};exports.SidePanel=(function(superClass){extend(SidePanel,superClass);function SidePanel(){return SidePanel.__super__.constructor.apply(this,arguments);}
SidePanel.internal({side:[p.String],plot:[p.Instance]});SidePanel.prototype.initialize=function(attrs,options){SidePanel.__super__.initialize.call(this,attrs,options);switch(this.side){case"above":this._dim=0;this._normals=[0,-1];this._size=this._height;return this._anchor=this._bottom;case"below":this._dim=0;this._normals=[0,1];this._size=this._height;return this._anchor=this._top;case"left":this._dim=1;this._normals=[-1,0];this._size=this._width;return this._anchor=this._right;case"right":this._dim=1;this._normals=[1,0];this._size=this._width;return this._anchor=this._left;default:return logging_1.logger.error("unrecognized side: '"+this.side+"'");}};SidePanel.prototype.get_constraints=function(){var constraints;constraints=[];constraints.push(solver_1.GE(this._top));constraints.push(solver_1.GE(this._bottom));constraints.push(solver_1.GE(this._left));constraints.push(solver_1.GE(this._right));constraints.push(solver_1.GE(this._width));constraints.push(solver_1.GE(this._height));constraints.push(solver_1.EQ(this._left,this._width,[-1,this._right]));constraints.push(solver_1.EQ(this._bottom,this._height,[-1,this._top]));return constraints;};SidePanel.prototype.apply_label_text_heuristics=function(ctx,orient){var align,baseline,side;side=this.side;if(types_1.isString(orient)){baseline=_baseline_lookup[side][orient];align=_align_lookup[side][orient];}
else if(orient===0){baseline=_baseline_lookup[side][orient];align=_align_lookup[side][orient];}
else if(orient<0){baseline='middle';align=_align_lookup_negative[side];}
else if(orient>0){baseline='middle';align=_align_lookup_positive[side];}
ctx.textBaseline=baseline;ctx.textAlign=align;return ctx;};SidePanel.prototype.get_label_angle_heuristic=function(orient){var side;side=this.side;return _angle_lookup[side][orient];};return SidePanel;})(layout_canvas_1.LayoutCanvas);},{"./layout_canvas":"core/layout/layout_canvas","./solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/types":"core/util/types"}],"core/layout/solver":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _constrainer,_weak_constrainer,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var kiwi_1=require("kiwi");exports.Variable=kiwi_1.Variable;exports.Expression=kiwi_1.Expression;exports.Constraint=kiwi_1.Constraint;exports.Operator=kiwi_1.Operator;exports.Strength=kiwi_1.Strength;var events_1=require("../events");_constrainer=function(op){return(function(_this){return function(){var expr;expr=Object.create(kiwi_1.Expression.prototype);kiwi_1.Expression.apply(expr,arguments);return new kiwi_1.Constraint(expr,op);};})(this);};_weak_constrainer=function(op){return function(){var arg,args,i,len;args=[null];for(i=0,len=arguments.length;i<len;i++){arg=arguments[i];args.push(arg);}
return new kiwi_1.Constraint(new(Function.prototype.bind.apply(kiwi_1.Expression,args)),op,kiwi_1.Strength.weak);};};exports.EQ=_constrainer(kiwi_1.Operator.Eq);exports.LE=_constrainer(kiwi_1.Operator.Le);exports.GE=_constrainer(kiwi_1.Operator.Ge);exports.WEAK_EQ=_weak_constrainer(kiwi_1.Operator.Eq);exports.WEAK_LE=_weak_constrainer(kiwi_1.Operator.Le);exports.WEAK_GE=_weak_constrainer(kiwi_1.Operator.Ge);exports.Solver=(function(){extend(Solver.prototype,events_1.Events);function Solver(){this.solver=new kiwi_1.Solver();}
Solver.prototype.clear=function(){return this.solver=new kiwi_1.Solver();};Solver.prototype.toString=function(){return"Solver[num_constraints="+(this.num_constraints())+", num_edit_variables="+(this.num_edit_variables())+"]";};Solver.prototype.num_constraints=function(){return this.solver._cnMap._array.length;};Solver.prototype.num_edit_variables=function(){return this.solver._editMap._array.length;};Solver.prototype.update_variables=function(trigger){if(trigger==null){trigger=true;}
this.solver.updateVariables();if(trigger){return this.trigger('layout_update');}};Solver.prototype.add_constraint=function(constraint){return this.solver.addConstraint(constraint);};Solver.prototype.remove_constraint=function(constraint,silent){if(silent==null){silent=false;}
return this.solver.removeConstraint(constraint,silent);};Solver.prototype.add_edit_variable=function(variable,strength){return this.solver.addEditVariable(variable,strength);};Solver.prototype.remove_edit_variable=function(variable,silent){if(silent==null){silent=false;}
return this.solver.removeEditVariable(variable,strength,silent);};Solver.prototype.suggest_value=function(variable,value){return this.solver.suggestValue(variable,value);};return Solver;})();},{"../events":"core/events","kiwi":"kiwi"}],"core/logging":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var LogLevel,_loggers,_method_factory,noop,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var types_1=require("./util/types");noop=function(){};_method_factory=function(method_name,logger_name){if(console[method_name]!=null){return console[method_name].bind(console,logger_name);}
else if(console.log!=null){return console.log.bind(console,logger_name);}
else{return noop;}};_loggers={};LogLevel=(function(){function LogLevel(name,level){this.name=name;this.level=level;}
return LogLevel;})();exports.Logger=(function(){Logger.TRACE=new LogLevel("trace",0);Logger.DEBUG=new LogLevel("debug",1);Logger.INFO=new LogLevel("info",2);Logger.WARN=new LogLevel("warn",6);Logger.ERROR=new LogLevel("error",7);Logger.FATAL=new LogLevel("fatal",8);Logger.OFF=new LogLevel("off",9);Logger.log_levels={trace:Logger.TRACE,debug:Logger.DEBUG,info:Logger.INFO,warn:Logger.WARN,error:Logger.ERROR,fatal:Logger.FATAL,off:Logger.OFF};Object.defineProperty(Logger,'levels',{get:function(){return Object.keys(Logger.log_levels);}});Logger.get=function(name,level){var logger;if(level==null){level=Logger.INFO;}
if(types_1.isString(name)&&name.length>0){logger=_loggers[name];if(logger==null){logger=_loggers[name]=new Logger(name,level);}
return logger;}
else{throw new TypeError("Logger.get() expects a string name and an optional log-level");}};function Logger(name,level){if(level==null){level=Logger.INFO;}
this._name=name;this.set_level(level);}
Object.defineProperty(Logger.prototype,'level',{get:function(){return this.get_level();}});Logger.prototype.get_level=function(){return this._log_level;};Logger.prototype.set_level=function(log_level){var __,logger_name,method_name,ref,results;if(log_level instanceof LogLevel){this._log_level=log_level;}
else if(types_1.isString(log_level)&&(Logger.log_levels[log_level]!=null)){this._log_level=Logger.log_levels[log_level];}
else{throw new Error("Logger.set_level() expects a log-level object or a string name of a log-level");}
logger_name="["+this._name+"]";ref=Logger.log_levels;results=[];for(__ in ref){log_level=ref[__];if(log_level===Logger.OFF){break;}
else{method_name=log_level.name;if(log_level.level<this._log_level.level){results.push(this[method_name]=noop);}
else{results.push(this[method_name]=_method_factory(method_name,logger_name));}}}
return results;};return Logger;})();exports.logger=exports.Logger.get("bokeh");exports.set_log_level=function(level){if(indexOf.call(exports.Logger.levels,level)<0){console.log("[bokeh] unrecognized logging level '"+level+"' passed to Bokeh.set_log_level(), ignoring");return console.log("[bokeh] valid log levels are: "+(exports.Logger.levels.join(', ')));}
else{console.log("[bokeh] setting log level to: '"+level+"'");return exports.logger.set_level(level);}};},{"./util/types":"core/util/types"}],"core/properties":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var events_1=require("./events");var enums=require("./enums");var svg_colors=require("./util/svg_colors");var color_1=require("./util/color");var array_1=require("./util/array");var types_1=require("./util/types");exports.Property=(function(){extend(Property.prototype,events_1.Events);Property.prototype.dataspec=false;function Property(arg){this.obj=arg.obj,this.attr=arg.attr,this.default_value=arg.default_value;this._init(false);this.listenTo(this.obj,"change:"+this.attr,(function(_this){return function(){_this._init();return _this.obj.trigger("propchange");};})(this));}
Property.prototype.update=function(){return this._init();};Property.prototype.init=function(){};Property.prototype.transform=function(values){return values;};Property.prototype.validate=function(value){};Property.prototype.value=function(do_spec_transform){var ret;if(do_spec_transform==null){do_spec_transform=true;}
if(this.spec.value===void 0){throw new Error("attempted to retrieve property value for property without value specification");}
ret=this.transform([this.spec.value])[0];if((this.spec.transform!=null)&&do_spec_transform){ret=this.spec.transform.compute(ret);}
return ret;};Property.prototype.array=function(source){var data,i,length,ret,value;if(!this.dataspec){throw new Error("attempted to retrieve property array for non-dataspec property");}
data=source.data;if(this.spec.field!=null){if(this.spec.field in data){ret=this.transform(source.get_column(this.spec.field));}
else{throw new Error("attempted to retrieve property array for nonexistent field '"+this.spec.field+"'");}}
else{length=source.get_length();if(length==null){length=1;}
value=this.value(false);ret=(function(){var j,ref,results;results=[];for(i=j=0,ref=length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(value);}
return results;})();}
if(this.spec.transform!=null){ret=this.spec.transform.v_compute(ret);}
return ret;};Property.prototype._init=function(trigger){var attr,attr_value,default_value,obj;if(trigger==null){trigger=true;}
obj=this.obj;if(obj==null){throw new Error("missing property object");}
if(obj.properties==null){throw new Error("property object must be a HasProps");}
attr=this.attr;if(attr==null){throw new Error("missing property attr");}
attr_value=obj.getv(attr);if(attr_value===void 0){default_value=this.default_value;attr_value=(function(){switch(false){case default_value!==void 0:return null;case!types_1.isArray(default_value):return array_1.copy(default_value);case!types_1.isFunction(default_value):return default_value(obj);default:return default_value;}})();obj.setv(attr,attr_value,{silent:true,defaults:true});}
if(types_1.isArray(attr_value)){this.spec={value:attr_value};}
else if(types_1.isObject(attr_value)&&((attr_value.value===void 0)!==(attr_value.field===void 0))){this.spec=attr_value;}
else{this.spec={value:attr_value};}
if((this.spec.field!=null)&&!types_1.isString(this.spec.field)){throw new Error("field value for property '"+attr+"' is not a string");}
if(this.spec.value!=null){this.validate(this.spec.value);}
this.init();if(trigger){return this.trigger("change");}};return Property;})();exports.simple_prop=function(name,pred){var Prop;return Prop=(function(superClass){extend(Prop,superClass);function Prop(){return Prop.__super__.constructor.apply(this,arguments);}
Prop.prototype.toString=function(){return name+"(obj: "+this.obj.id+", spec: "+(JSON.stringify(this.spec))+")";};Prop.prototype.validate=function(value){if(!pred(value)){throw new Error(name+" property '"+this.attr+"' given invalid value: "+(JSON.stringify(value)));}};return Prop;})(exports.Property);};exports.Any=(function(superClass){extend(Any,superClass);function Any(){return Any.__super__.constructor.apply(this,arguments);}
return Any;})(exports.simple_prop("Any",function(x){return true;}));exports.Array=(function(superClass){extend(Array,superClass);function Array(){return Array.__super__.constructor.apply(this,arguments);}
return Array;})(exports.simple_prop("Array",function(x){return types_1.isArray(x)||x instanceof Float64Array;}));exports.Bool=(function(superClass){extend(Bool,superClass);function Bool(){return Bool.__super__.constructor.apply(this,arguments);}
return Bool;})(exports.simple_prop("Bool",types_1.isBoolean));exports.Boolean=exports.Bool;exports.Color=(function(superClass){extend(Color,superClass);function Color(){return Color.__super__.constructor.apply(this,arguments);}
return Color;})(exports.simple_prop("Color",function(x){return(svg_colors[x.toLowerCase()]!=null)||x.substring(0,1)==="#"||color_1.valid_rgb(x);}));exports.Instance=(function(superClass){extend(Instance,superClass);function Instance(){return Instance.__super__.constructor.apply(this,arguments);}
return Instance;})(exports.simple_prop("Instance",function(x){return x.properties!=null;}));exports.Number=(function(superClass){extend(Number,superClass);function Number(){return Number.__super__.constructor.apply(this,arguments);}
return Number;})(exports.simple_prop("Number",function(x){return types_1.isNumber(x)||types_1.isBoolean(x);}));exports.Int=exports.Number;exports.Percent=(function(superClass){extend(Percent,superClass);function Percent(){return Percent.__super__.constructor.apply(this,arguments);}
return Percent;})(exports.simple_prop("Number",function(x){return(types_1.isNumber(x)||types_1.isBoolean(x))&&((0<=x&&x<=1.0));}));exports.String=(function(superClass){extend(String,superClass);function String(){return String.__super__.constructor.apply(this,arguments);}
return String;})(exports.simple_prop("String",types_1.isString));exports.Font=(function(superClass){extend(Font,superClass);function Font(){return Font.__super__.constructor.apply(this,arguments);}
return Font;})(exports.String);exports.enum_prop=function(name,enum_values){var Enum;return Enum=(function(superClass){extend(Enum,superClass);function Enum(){return Enum.__super__.constructor.apply(this,arguments);}
Enum.prototype.toString=function(){return name+"(obj: "+this.obj.id+", spec: "+(JSON.stringify(this.spec))+")";};return Enum;})(exports.simple_prop(name,function(x){return indexOf.call(enum_values,x)>=0;}));};exports.Anchor=(function(superClass){extend(Anchor,superClass);function Anchor(){return Anchor.__super__.constructor.apply(this,arguments);}
return Anchor;})(exports.enum_prop("Anchor",enums.LegendLocation));exports.AngleUnits=(function(superClass){extend(AngleUnits,superClass);function AngleUnits(){return AngleUnits.__super__.constructor.apply(this,arguments);}
return AngleUnits;})(exports.enum_prop("AngleUnits",enums.AngleUnits));exports.Direction=(function(superClass){extend(Direction,superClass);function Direction(){return Direction.__super__.constructor.apply(this,arguments);}
Direction.prototype.transform=function(values){var i,j,ref,result;result=new Uint8Array(values.length);for(i=j=0,ref=values.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){switch(values[i]){case'clock':result[i]=false;break;case'anticlock':result[i]=true;}}
return result;};return Direction;})(exports.enum_prop("Direction",enums.Direction));exports.Dimension=(function(superClass){extend(Dimension,superClass);function Dimension(){return Dimension.__super__.constructor.apply(this,arguments);}
return Dimension;})(exports.enum_prop("Dimension",enums.Dimension));exports.Dimensions=(function(superClass){extend(Dimensions,superClass);function Dimensions(){return Dimensions.__super__.constructor.apply(this,arguments);}
return Dimensions;})(exports.enum_prop("Dimensions",enums.Dimensions));exports.FontStyle=(function(superClass){extend(FontStyle,superClass);function FontStyle(){return FontStyle.__super__.constructor.apply(this,arguments);}
return FontStyle;})(exports.enum_prop("FontStyle",enums.FontStyle));exports.LatLon=(function(superClass){extend(LatLon,superClass);function LatLon(){return LatLon.__super__.constructor.apply(this,arguments);}
return LatLon;})(exports.enum_prop("LatLon",enums.LatLon));exports.LineCap=(function(superClass){extend(LineCap,superClass);function LineCap(){return LineCap.__super__.constructor.apply(this,arguments);}
return LineCap;})(exports.enum_prop("LineCap",enums.LineCap));exports.LineJoin=(function(superClass){extend(LineJoin,superClass);function LineJoin(){return LineJoin.__super__.constructor.apply(this,arguments);}
return LineJoin;})(exports.enum_prop("LineJoin",enums.LineJoin));exports.LegendLocation=(function(superClass){extend(LegendLocation,superClass);function LegendLocation(){return LegendLocation.__super__.constructor.apply(this,arguments);}
return LegendLocation;})(exports.enum_prop("LegendLocation",enums.LegendLocation));exports.Location=(function(superClass){extend(Location,superClass);function Location(){return Location.__super__.constructor.apply(this,arguments);}
return Location;})(exports.enum_prop("Location",enums.Location));exports.Orientation=(function(superClass){extend(Orientation,superClass);function Orientation(){return Orientation.__super__.constructor.apply(this,arguments);}
return Orientation;})(exports.enum_prop("Orientation",enums.Orientation));exports.TextAlign=(function(superClass){extend(TextAlign,superClass);function TextAlign(){return TextAlign.__super__.constructor.apply(this,arguments);}
return TextAlign;})(exports.enum_prop("TextAlign",enums.TextAlign));exports.TextBaseline=(function(superClass){extend(TextBaseline,superClass);function TextBaseline(){return TextBaseline.__super__.constructor.apply(this,arguments);}
return TextBaseline;})(exports.enum_prop("TextBaseline",enums.TextBaseline));exports.RenderLevel=(function(superClass){extend(RenderLevel,superClass);function RenderLevel(){return RenderLevel.__super__.constructor.apply(this,arguments);}
return RenderLevel;})(exports.enum_prop("RenderLevel",enums.RenderLevel));exports.RenderMode=(function(superClass){extend(RenderMode,superClass);function RenderMode(){return RenderMode.__super__.constructor.apply(this,arguments);}
return RenderMode;})(exports.enum_prop("RenderMode",enums.RenderMode));exports.SizingMode=(function(superClass){extend(SizingMode,superClass);function SizingMode(){return SizingMode.__super__.constructor.apply(this,arguments);}
return SizingMode;})(exports.enum_prop("SizingMode",enums.SizingMode));exports.SpatialUnits=(function(superClass){extend(SpatialUnits,superClass);function SpatialUnits(){return SpatialUnits.__super__.constructor.apply(this,arguments);}
return SpatialUnits;})(exports.enum_prop("SpatialUnits",enums.SpatialUnits));exports.Distribution=(function(superClass){extend(Distribution,superClass);function Distribution(){return Distribution.__super__.constructor.apply(this,arguments);}
return Distribution;})(exports.enum_prop("Distribution",enums.DistributionTypes));exports.TransformStepMode=(function(superClass){extend(TransformStepMode,superClass);function TransformStepMode(){return TransformStepMode.__super__.constructor.apply(this,arguments);}
return TransformStepMode;})(exports.enum_prop("TransformStepMode",enums.TransformStepModes));exports.units_prop=function(name,valid_units,default_units){var UnitsProp;return UnitsProp=(function(superClass){extend(UnitsProp,superClass);function UnitsProp(){return UnitsProp.__super__.constructor.apply(this,arguments);}
UnitsProp.prototype.toString=function(){return name+"(obj: "+this.obj.id+", spec: "+(JSON.stringify(this.spec))+")";};UnitsProp.prototype.init=function(){var units;if(this.spec.units==null){this.spec.units=default_units;}
this.units=this.spec.units;units=this.spec.units;if(indexOf.call(valid_units,units)<0){throw new Error(name+" units must be one of "+valid_units+", given invalid value: "+units);}};return UnitsProp;})(exports.Number);};exports.Angle=(function(superClass){extend(Angle,superClass);function Angle(){return Angle.__super__.constructor.apply(this,arguments);}
Angle.prototype.transform=function(values){var x;if(this.spec.units==="deg"){values=(function(){var j,len,results;results=[];for(j=0,len=values.length;j<len;j++){x=values[j];results.push(x*Math.PI/180.0);}
return results;})();}
values=(function(){var j,len,results;results=[];for(j=0,len=values.length;j<len;j++){x=values[j];results.push(-x);}
return results;})();return Angle.__super__.transform.call(this,values);};return Angle;})(exports.units_prop("Angle",enums.AngleUnits,"rad"));exports.Distance=(function(superClass){extend(Distance,superClass);function Distance(){return Distance.__super__.constructor.apply(this,arguments);}
return Distance;})(exports.units_prop("Distance",enums.SpatialUnits,"data"));exports.AngleSpec=(function(superClass){extend(AngleSpec,superClass);function AngleSpec(){return AngleSpec.__super__.constructor.apply(this,arguments);}
AngleSpec.prototype.dataspec=true;return AngleSpec;})(exports.Angle);exports.ColorSpec=(function(superClass){extend(ColorSpec,superClass);function ColorSpec(){return ColorSpec.__super__.constructor.apply(this,arguments);}
ColorSpec.prototype.dataspec=true;return ColorSpec;})(exports.Color);exports.DirectionSpec=(function(superClass){extend(DirectionSpec,superClass);function DirectionSpec(){return DirectionSpec.__super__.constructor.apply(this,arguments);}
DirectionSpec.prototype.dataspec=true;return DirectionSpec;})(exports.Distance);exports.DistanceSpec=(function(superClass){extend(DistanceSpec,superClass);function DistanceSpec(){return DistanceSpec.__super__.constructor.apply(this,arguments);}
DistanceSpec.prototype.dataspec=true;return DistanceSpec;})(exports.Distance);exports.FontSizeSpec=(function(superClass){extend(FontSizeSpec,superClass);function FontSizeSpec(){return FontSizeSpec.__super__.constructor.apply(this,arguments);}
FontSizeSpec.prototype.dataspec=true;return FontSizeSpec;})(exports.String);exports.NumberSpec=(function(superClass){extend(NumberSpec,superClass);function NumberSpec(){return NumberSpec.__super__.constructor.apply(this,arguments);}
NumberSpec.prototype.dataspec=true;return NumberSpec;})(exports.Number);exports.StringSpec=(function(superClass){extend(StringSpec,superClass);function StringSpec(){return StringSpec.__super__.constructor.apply(this,arguments);}
StringSpec.prototype.dataspec=true;return StringSpec;})(exports.String);},{"./enums":"core/enums","./events":"core/events","./util/array":"core/util/array","./util/color":"core/util/color","./util/svg_colors":"core/util/svg_colors","./util/types":"core/util/types"}],"core/property_mixins":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fill_mixin,_gen_mixin,_line_mixin,_text_mixin;var p=require("./properties");var object_1=require("./util/object");_gen_mixin=function(mixin,prefix){var name,result,type;result={};if(prefix==null){prefix="";}
for(name in mixin){type=mixin[name];result[prefix+name]=type;}
return result;};_line_mixin={line_color:[p.ColorSpec,'black'],line_width:[p.NumberSpec,1],line_alpha:[p.NumberSpec,1.0],line_join:[p.LineJoin,'miter'],line_cap:[p.LineCap,'butt'],line_dash:[p.Array,[]],line_dash_offset:[p.Number,0]};exports.line=function(prefix){return _gen_mixin(_line_mixin,prefix);};_fill_mixin={fill_color:[p.ColorSpec,'gray'],fill_alpha:[p.NumberSpec,1.0]};exports.fill=function(prefix){return _gen_mixin(_fill_mixin,prefix);};_text_mixin={text_font:[p.Font,'helvetica'],text_font_size:[p.FontSizeSpec,'12pt'],text_font_style:[p.FontStyle,'normal'],text_color:[p.ColorSpec,'#444444'],text_alpha:[p.NumberSpec,1.0],text_align:[p.TextAlign,'left'],text_baseline:[p.TextBaseline,'bottom']};exports.text=function(prefix){return _gen_mixin(_text_mixin,prefix);};exports.create=function(configs){var config,i,kind,len,prefix,ref,result;result={};for(i=0,len=configs.length;i<len;i++){config=configs[i];ref=config.split(":"),kind=ref[0],prefix=ref[1];if(this[kind]==null){throw new Error("Unknown property mixin kind '"+kind+"'");}
result=object_1.extend(result,this[kind](prefix));}
return result;};},{"./properties":"core/properties","./util/object":"core/util/object"}],"core/selection_manager":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var has_props_1=require("./has_props");var logging_1=require("./logging");var selector_1=require("./selector");var hittest=require("./hittest");var p=require("./properties");exports.SelectionManager=(function(superClass){extend(SelectionManager,superClass);function SelectionManager(){return SelectionManager.__super__.constructor.apply(this,arguments);}
SelectionManager.prototype.type='SelectionManager';SelectionManager.internal({source:[p.Any]});SelectionManager.prototype.initialize=function(attrs,options){SelectionManager.__super__.initialize.call(this,attrs,options);this.selectors={};this.inspectors={};return this.last_inspection_was_empty={};};SelectionManager.prototype.select=function(tool,renderer_view,geometry,final,append){var indices,selector,source;if(append==null){append=false;}
source=this.source;if(source!==renderer_view.model.data_source){logging_1.logger.warn('select called with mis-matched data sources');}
indices=renderer_view.hit_test(geometry);if(indices!=null){selector=this._get_selector(renderer_view);selector.update(indices,final,append);this.source.selected=selector.indices;source.trigger('select');source.trigger('select-'+renderer_view.model.id);return!indices.is_empty();}
else{return false;}};SelectionManager.prototype.inspect=function(tool,renderer_view,geometry,data){var indices,inspector,r_id,source;source=this.source;if(source!==renderer_view.model.data_source){logging_1.logger.warn('inspect called with mis-matched data sources');}
indices=renderer_view.hit_test(geometry);if(indices!=null){r_id=renderer_view.model.id;if(indices.is_empty()){if(this.last_inspection_was_empty[r_id]==null){this.last_inspection_was_empty[r_id]=false;}
if(this.last_inspection_was_empty[r_id]){return;}
else{this.last_inspection_was_empty[r_id]=true;}}
else{this.last_inspection_was_empty[r_id]=false;}
inspector=this._get_inspector(renderer_view);inspector.update(indices,true,false,true);this.source.setv({inspected:inspector.indices},{"silent":true});source.trigger('inspect',indices,tool,renderer_view,source,data);source.trigger("inspect"+renderer_view.model.id,indices,tool,renderer_view,source,data);return!indices.is_empty();}
else{return false;}};SelectionManager.prototype.clear=function(rview){var k,ref,s,selector;if(rview!=null){selector=this._get_selector(rview);selector.clear();}
else{ref=this.selectors;for(k in ref){s=ref[k];s.clear();}}
return this.source.selected=hittest.create_hit_test_result();};SelectionManager.prototype._get_selector_from=function(rview,selectors){var id;id=rview.model.id;if(selectors[id]!=null){return selectors[id];}
else{return selectors[id]=new selector_1.Selector();}};SelectionManager.prototype._get_selector=function(rview){return this._get_selector_from(rview,this.selectors);};SelectionManager.prototype._get_inspector=function(rview){return this._get_selector_from(rview,this.inspectors);};return SelectionManager;})(has_props_1.HasProps);},{"./has_props":"core/has_props","./hittest":"core/hittest","./logging":"core/logging","./properties":"core/properties","./selector":"core/selector"}],"core/selector":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var merge,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var has_props_1=require("./has_props");var hittest=require("./hittest");var p=require("./properties");var array_1=require("./util/array");merge=function(obj1,obj2){var arr1,arr2,i,key,keys,len,result;result={};keys=array_1.concat(Object.keys(obj1),Object.keys(obj2));for(i=0,len=keys.length;i<len;i++){key=keys[i];arr1=obj1[key]||[];arr2=obj2[key]||[];result[key]=array_1.union(arr1,arr2);}
return result;};exports.Selector=(function(superClass){extend(Selector,superClass);function Selector(){return Selector.__super__.constructor.apply(this,arguments);}
Selector.prototype.type='Selector';Selector.prototype.update=function(indices,final,append,silent){if(silent==null){silent=false;}
this.setv('timestamp',new Date(),{silent:silent});this.setv('final',final,{silent:silent});if(append){indices['0d'].indices=array_1.union(this.indices['0d'].indices,indices['0d'].indices);indices['0d'].glyph=this.indices['0d'].glyph||indices['0d'].glyph;indices['1d'].indices=array_1.union(this.indices['1d'].indices,indices['1d'].indices);indices['2d'].indices=merge(this.indices['2d'].indices,indices['2d'].indices);}
return this.setv('indices',indices,{silent:silent});};Selector.prototype.clear=function(){this.timestamp=new Date();this.final=true;return this.indices=hittest.create_hit_test_result();};Selector.internal({indices:[p.Any,function(){return hittest.create_hit_test_result();}],final:[p.Boolean],timestamp:[p.Any]});return Selector;})(has_props_1.HasProps);},{"./has_props":"core/has_props","./hittest":"core/hittest","./properties":"core/properties","./util/array":"core/util/array"}],"core/ui_events":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var Hammer=require("hammerjs");var events_1=require("./events");var logging_1=require("./logging");var dom_1=require("./dom");var wheel_1=require("./util/wheel");var object_1=require("./util/object");var bokeh_events_1=require("./bokeh_events");var array_1=require("./util/array");exports.UIEvents=(function(){extend1(UIEvents.prototype,events_1.Events);function UIEvents(plot_view,toolbar,hit_area,plot){this.plot_view=plot_view;this.toolbar=toolbar;this.hit_area=hit_area;this.plot=plot;this._configure_hammerjs();}
UIEvents.prototype._configure_hammerjs=function(){this.hammer=new Hammer(this.hit_area);this.hammer.get('doubletap').recognizeWith('tap');this.hammer.get('tap').requireFailure('doubletap');this.hammer.get('doubletap').dropRequireFailure('tap');this.hammer.on('doubletap',(function(_this){return function(e){return _this._doubletap(e);};})(this));this.hammer.on('tap',(function(_this){return function(e){return _this._tap(e);};})(this));this.hammer.on('press',(function(_this){return function(e){return _this._press(e);};})(this));this.hammer.get('pan').set({direction:Hammer.DIRECTION_ALL});this.hammer.on('panstart',(function(_this){return function(e){return _this._pan_start(e);};})(this));this.hammer.on('pan',(function(_this){return function(e){return _this._pan(e);};})(this));this.hammer.on('panend',(function(_this){return function(e){return _this._pan_end(e);};})(this));this.hammer.get('pinch').set({enable:true});this.hammer.on('pinchstart',(function(_this){return function(e){return _this._pinch_start(e);};})(this));this.hammer.on('pinch',(function(_this){return function(e){return _this._pinch(e);};})(this));this.hammer.on('pinchend',(function(_this){return function(e){return _this._pinch_end(e);};})(this));this.hammer.get('rotate').set({enable:true});this.hammer.on('rotatestart',(function(_this){return function(e){return _this._rotate_start(e);};})(this));this.hammer.on('rotate',(function(_this){return function(e){return _this._rotate(e);};})(this));this.hammer.on('rotateend',(function(_this){return function(e){return _this._rotate_end(e);};})(this));this.hit_area.addEventListener("mousemove",(function(_this){return function(e){return _this._mouse_move(e);};})(this));this.hit_area.addEventListener("mouseenter",(function(_this){return function(e){return _this._mouse_enter(e);};})(this));this.hit_area.addEventListener("mouseleave",(function(_this){return function(e){return _this._mouse_exit(e);};})(this));this.hit_area.addEventListener("wheel",(function(_this){return function(e){return _this._mouse_wheel(e);};})(this));document.addEventListener("keydown",(function(_this){return function(e){return _this._key_down(e);};})(this));return document.addEventListener("keyup",(function(_this){return function(e){return _this._key_up(e);};})(this));};UIEvents.prototype.register_tool=function(tool_view){var et,id,type;et=tool_view.model.event_type;id=tool_view.model.id;type=tool_view.model.type;if(et==null){logging_1.logger.debug("Button tool: "+type);return;}
if(et==='pan'||et==='pinch'||et==='rotate'){logging_1.logger.debug("Registering tool: "+type+" for event '"+et+"'");if(tool_view["_"+et+"_start"]!=null){tool_view.listenTo(this,et+":start:"+id,tool_view["_"+et+"_start"]);}
if(tool_view["_"+et]!=null){tool_view.listenTo(this,et+":"+id,tool_view["_"+et]);}
if(tool_view["_"+et+"_end"]!=null){tool_view.listenTo(this,et+":end:"+id,tool_view["_"+et+"_end"]);}}
else if(et==="move"){logging_1.logger.debug("Registering tool: "+type+" for event '"+et+"'");if(tool_view._move_enter!=null){tool_view.listenTo(this,"move:enter",tool_view._move_enter);}
tool_view.listenTo(this,"move",tool_view["_move"]);if(tool_view._move_exit!=null){tool_view.listenTo(this,"move:exit",tool_view._move_exit);}}
else{logging_1.logger.debug("Registering tool: "+type+" for event '"+et+"'");tool_view.listenTo(this,et+":"+id,tool_view["_"+et]);}
if(tool_view._keydown!=null){logging_1.logger.debug("Registering tool: "+type+" for event 'keydown'");tool_view.listenTo(this,"keydown",tool_view._keydown);}
if(tool_view._keyup!=null){logging_1.logger.debug("Registering tool: "+type+" for event 'keyup'");tool_view.listenTo(this,"keyup",tool_view._keyup);}
if(tool_view._doubletap!=null){logging_1.logger.debug("Registering tool: "+type+" for event 'doubletap'");tool_view.listenTo(this,"doubletap",tool_view._doubletap);}
if('ontouchstart'in window||navigator.maxTouchPoints>0){if(et==='pinch'){logging_1.logger.debug("Registering scroll on touch screen");return tool_view.listenTo(this,"scroll:"+id,tool_view["_scroll"]);}}};UIEvents.prototype._hit_test_renderers=function(sx,sy){var i,ref,ref1,view;ref=this.plot_view.get_renderer_views();for(i=ref.length-1;i>=0;i+=-1){view=ref[i];if(((ref1=view.model.level)==='annotation'||ref1==='overlay')&&(view.bbox!=null)){if(view.bbox().contains(sx,sy)){return view;}}}
return null;};UIEvents.prototype._hit_test_frame=function(sx,sy){var canvas,vx,vy;canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(sx);vy=canvas.sy_to_vy(sy);return this.plot_view.frame.contains(vx,vy);};UIEvents.prototype._trigger=function(event_type,e){var active_gesture,base,base_type,cursor,has_active_inspectors,view;base_type=event_type.split(":")[0];view=this._hit_test_renderers(e.bokeh.sx,e.bokeh.sy);switch(base_type){case"move":has_active_inspectors=array_1.any(this.toolbar.inspectors,function(t){return t.active;});cursor="default";if(view!=null){if(view.model.cursor!=null){cursor=view.model.cursor();}
if(has_active_inspectors){event_type="move:exit";}}
else if(this._hit_test_frame(e.bokeh.sx,e.bokeh.sy)){if(has_active_inspectors){cursor="crosshair";}}
this.plot_view.set_cursor(cursor);return this.trigger(event_type,e);case"tap":if(view!=null){if(typeof view.on_hit==="function"){view.on_hit(e.bokeh.sx,e.bokeh.sy);}}
active_gesture=this.toolbar.gestures[base_type].active;if(active_gesture!=null){return this.trigger(event_type+":"+active_gesture.id,e);}
break;case"scroll":base='ontouchstart'in window||navigator.maxTouchPoints>0?"pinch":"scroll";active_gesture=this.toolbar.gestures[base].active;if(active_gesture!=null){e.preventDefault();e.stopPropagation();return this.trigger(event_type+":"+active_gesture.id,e);}
break;default:active_gesture=this.toolbar.gestures[base_type].active;if(active_gesture!=null){return this.trigger(event_type+":"+active_gesture.id,e);}}};UIEvents.prototype._bokify_hammer=function(e,extras){var event_cls,left,ref,top,x,y;if(extras==null){extras={};}
if(e.pointerType==='mouse'){x=e.srcEvent.pageX;y=e.srcEvent.pageY;}
else{x=e.pointers[0].pageX;y=e.pointers[0].pageY;}
ref=dom_1.offset(e.target),left=ref.left,top=ref.top;e.bokeh={sx:x-left,sy:y-top};e.bokeh=object_1.extend(e.bokeh,extras);event_cls=bokeh_events_1.BokehEvent.event_class(e);if(event_cls!=null){return this.plot.trigger_event(event_cls.from_event(e));}
else{return logging_1.logger.debug('Unhandled event of type '+e.type);}};UIEvents.prototype._bokify_point_event=function(e,extras){var event_cls,left,ref,top;if(extras==null){extras={};}
ref=dom_1.offset(e.currentTarget),left=ref.left,top=ref.top;e.bokeh={sx:e.pageX-left,sy:e.pageY-top};e.bokeh=object_1.extend(e.bokeh,extras);event_cls=bokeh_events_1.BokehEvent.event_class(e);if(event_cls!=null){return this.plot.trigger_event(event_cls.from_event(e));}
else{return logging_1.logger.debug('Unhandled event of type '+e.type);}};UIEvents.prototype._tap=function(e){this._bokify_hammer(e);return this._trigger('tap',e);};UIEvents.prototype._doubletap=function(e){this._bokify_hammer(e);return this.trigger('doubletap',e);};UIEvents.prototype._press=function(e){this._bokify_hammer(e);return this._trigger('press',e);};UIEvents.prototype._pan_start=function(e){this._bokify_hammer(e);e.bokeh.sx-=e.deltaX;e.bokeh.sy-=e.deltaY;return this._trigger('pan:start',e);};UIEvents.prototype._pan=function(e){this._bokify_hammer(e);return this._trigger('pan',e);};UIEvents.prototype._pan_end=function(e){this._bokify_hammer(e);return this._trigger('pan:end',e);};UIEvents.prototype._pinch_start=function(e){this._bokify_hammer(e);return this._trigger('pinch:start',e);};UIEvents.prototype._pinch=function(e){this._bokify_hammer(e);return this._trigger('pinch',e);};UIEvents.prototype._pinch_end=function(e){this._bokify_hammer(e);return this._trigger('pinch:end',e);};UIEvents.prototype._rotate_start=function(e){this._bokify_hammer(e);return this._trigger('rotate:start',e);};UIEvents.prototype._rotate=function(e){this._bokify_hammer(e);return this._trigger('rotate',e);};UIEvents.prototype._rotate_end=function(e){this._bokify_hammer(e);return this._trigger('rotate:end',e);};UIEvents.prototype._mouse_enter=function(e){this._bokify_point_event(e);return this._trigger('move:enter',e);};UIEvents.prototype._mouse_move=function(e){this._bokify_point_event(e);return this._trigger('move',e);};UIEvents.prototype._mouse_exit=function(e){this._bokify_point_event(e);return this._trigger('move:exit',e);};UIEvents.prototype._mouse_wheel=function(e){this._bokify_point_event(e,{delta:wheel_1.getDeltaY(e)});return this._trigger('scroll',e);};UIEvents.prototype._key_down=function(e){return this.trigger('keydown',e);};UIEvents.prototype._key_up=function(e){return this.trigger('keyup',e);};return UIEvents;})();},{"./bokeh_events":"core/bokeh_events","./dom":"core/dom","./events":"core/events","./logging":"core/logging","./util/array":"core/util/array","./util/object":"core/util/object","./util/wheel":"core/util/wheel","hammerjs":"hammerjs"}],"core/util/array":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var slice=Array.prototype.slice;function copy(array ){return slice.call(array);}
exports.copy=copy;function concat(arrays){return[].concat.apply([],arrays);}
exports.concat=concat;function contains(array,value){return array.indexOf(value)>=0;}
exports.contains=contains;function nth(array,index){return array[index>=0?index:array.length+index];}
exports.nth=nth;function zip(As,Bs){var n=Math.min(As.length,Bs.length);var ABs=new Array(n);for(var i=0;i<n;i++){ABs[i]=[As[i],Bs[i]];}
return ABs;}
exports.zip=zip;function unzip(ABs){var n=ABs.length;var As=new Array(n);var Bs=new Array(n);for(var i=0;i<n;i++){_a=ABs[i],As[i]=_a[0],Bs[i]=_a[1];}
return[As,Bs];var _a;}
exports.unzip=unzip;function range(start,stop,step){if(step===void 0){step=1;}
if(stop==null){stop=start;start=0;}
var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var i=0;i<length;i++,start+=step){range[i]=start;}
return range;}
exports.range=range;function linspace(start,stop,num){if(num===void 0){num=100;}
var step=(stop-start)/(num-1);var array=new Array(num);for(var i=0;i<num;i++){array[i]=start+step*i;}
return array;}
exports.linspace=linspace;function transpose(array){var rows=array.length;var cols=array[0].length;var transposed=[];for(var j=0;j<cols;j++){transposed[j]=[];for(var i=0;i<rows;i++){transposed[j][i]=array[i][j];}}
return transposed;}
exports.transpose=transpose;function sum(array){return array.reduce(function(a,b){return a+b;},0);}
exports.sum=sum;function cumsum(array){var result=[];array.reduce(function(a,b,i){return result[i]=a+b;},0);return result;}
exports.cumsum=cumsum;function min(array){var value;var result=Infinity;for(var i=0,length_1=array.length;i<length_1;i++){value=array[i];if(value<result){result=value;}}
return result;}
exports.min=min;function minBy(array,key){var value;var result;var computed;var resultComputed=Infinity;for(var i=0,length_2=array.length;i<length_2;i++){value=array[i];computed=key(value);if(computed<resultComputed){result=value;resultComputed=computed;}}
return result;}
exports.minBy=minBy;function max(array){var value;var result=-Infinity;for(var i=0,length_3=array.length;i<length_3;i++){value=array[i];if(value>result){result=value;}}
return result;}
exports.max=max;function maxBy(array,key){var value;var result;var computed;var resultComputed=-Infinity;for(var i=0,length_4=array.length;i<length_4;i++){value=array[i];computed=key(value);if(computed>resultComputed){result=value;resultComputed=computed;}}
return result;}
exports.maxBy=maxBy;function argmin(array){return minBy(range(array.length),function(i){return array[i];});}
exports.argmin=argmin;function argmax(array){return maxBy(range(array.length),function(i){return array[i];});}
exports.argmax=argmax;function all(array,predicate){for(var _i=0,array_1=array;_i<array_1.length;_i++){var item=array_1[_i];if(!predicate(item))
return false;}
return true;}
exports.all=all;function any(array,predicate){for(var _i=0,array_2=array;_i<array_2.length;_i++){var item=array_2[_i];if(predicate(item))
return true;}
return false;}
exports.any=any;function findIndexFactory(dir){return function(array,predicate){var length=array.length;var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index]))
return index;}
return-1;};}
exports.findIndex=findIndexFactory(1);exports.findLastIndex=findIndexFactory(-1);function sortedIndex(array,value){var low=0;var high=array.length;while(low<high){var mid=Math.floor((low+high)/2);if(array[mid]<value)
low=mid+1;else
high=mid;}
return low;}
exports.sortedIndex=sortedIndex;function sortBy(array,key){var tmp=array.map(function(value,index){return{value:value,index:index,key:key(value)};});tmp.sort(function(left,right){var a=left.key;var b=right.key;if(a!==b){if(a>b||a===undefined)
return 1;if(a<b||b===undefined)
return-1;}
return left.index-right.index;});return tmp.map(function(item){return item.value;});}
exports.sortBy=sortBy;function uniq(array){var result=[];for(var _i=0,array_3=array;_i<array_3.length;_i++){var value=array_3[_i];if(!contains(result,value)){result.push(value);}}
return result;}
exports.uniq=uniq;function uniqBy(array,key){var result=[];var seen=[];for(var _i=0,array_4=array;_i<array_4.length;_i++){var value=array_4[_i];var computed=key(value);if(!contains(seen,computed)){seen.push(computed);result.push(value);}}
return result;}
exports.uniqBy=uniqBy;function union(){var arrays=[];for(var _i=0;_i<arguments.length;_i++){arrays[_i]=arguments[_i];}
return uniq(concat(arrays));}
exports.union=union;function intersection(array){var arrays=[];for(var _i=1;_i<arguments.length;_i++){arrays[_i-1]=arguments[_i];}
var result=[];top:for(var _a=0,array_5=array;_a<array_5.length;_a++){var item=array_5[_a];if(contains(result,item))
continue;for(var _b=0,arrays_1=arrays;_b<arrays_1.length;_b++){var other=arrays_1[_b];if(!contains(other,item))
continue top;}
result.push(item);}
return result;}
exports.intersection=intersection;function difference(array){var arrays=[];for(var _i=1;_i<arguments.length;_i++){arrays[_i-1]=arguments[_i];}
var rest=concat(arrays);return array.filter(function(value){return!contains(rest,value);});}
exports.difference=difference;},{}],"core/util/bbox":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function empty(){return{minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,};}
exports.empty=empty;function positive_x(){return{minX:Number.MIN_VALUE,minY:-Infinity,maxX:Infinity,maxY:Infinity,};}
exports.positive_x=positive_x;function positive_y(){return{minX:-Infinity,minY:Number.MIN_VALUE,maxX:Infinity,maxY:Infinity,};}
exports.positive_y=positive_y;function union(a,b){return{minX:Math.min(a.minX,b.minX),maxX:Math.max(a.maxX,b.maxX),minY:Math.min(a.minY,b.minY),maxY:Math.max(a.maxY,b.maxY),};}
exports.union=union;var BBox=(function(){function BBox(bbox){if(bbox==null){this.x0=Infinity;this.y0=-Infinity;this.x1=Infinity;this.y1=-Infinity;}
else{this.x0=bbox.x0;this.y0=bbox.y0;this.x1=bbox.x1;this.y1=bbox.y1;}}
Object.defineProperty(BBox.prototype,"minX",{get:function(){return this.x0;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"minY",{get:function(){return this.y0;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"maxX",{get:function(){return this.x1;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"maxY",{get:function(){return this.y1;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"pt0",{get:function(){return[this.x0,this.y0];},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"pt1",{get:function(){return[this.x1,this.y1];},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"x",{get:function(){return this.x0;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"y",{get:function(){return this.x1;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"width",{get:function(){return this.x1-this.x0;},enumerable:true,configurable:true});Object.defineProperty(BBox.prototype,"height",{get:function(){return this.y1-this.y0;},enumerable:true,configurable:true});BBox.prototype.contains=function(x,y){return x>=this.x0&&x<=this.x1&&y>=this.y0&&y<=this.y1;};BBox.prototype.union=function(that){return new BBox({x0:Math.min(this.x0,that.x0),y0:Math.min(this.y0,that.y0),x1:Math.max(this.x1,that.x1),y1:Math.max(this.y1,that.y1),});};return BBox;}());exports.BBox=BBox;},{}],"core/util/callback":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function delay(func,wait){return setTimeout(func,wait);}
exports.delay=delay;function defer(func){return delay(func,1);}
exports.defer=defer;function throttle(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)
options={};var later=function(){previous=options.leading===false?0:Date.now();timeout=null;result=func.apply(context,args);if(!timeout)
context=args=null;};return function(){var now=Date.now();if(!previous&&options.leading===false)
previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=func.apply(context,args);if(!timeout)
context=args=null;}
else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};}
exports.throttle=throttle;function once(func){var done=false;var memo;return function(){if(!done){done=true;memo=func();}
return memo;};}
exports.once=once;},{}],"core/util/canvas":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fixup_line_dash=function(ctx){if(!ctx.setLineDash){ctx.setLineDash=function(dash){ctx.mozDash=dash;return ctx.webkitLineDash=dash;};}
if(!ctx.getLineDash){return ctx.getLineDash=function(){return ctx.mozDash;};}};exports.fixup_line_dash_offset=function(ctx){ctx.setLineDashOffset=function(dash_offset){ctx.lineDashOffset=dash_offset;ctx.mozDashOffset=dash_offset;return ctx.webkitLineDashOffset=dash_offset;};return ctx.getLineDashOffset=function(){return ctx.mozDashOffset;};};exports.fixup_image_smoothing=function(ctx){ctx.setImageSmoothingEnabled=function(value){ctx.imageSmoothingEnabled=value;ctx.mozImageSmoothingEnabled=value;ctx.oImageSmoothingEnabled=value;return ctx.webkitImageSmoothingEnabled=value;};return ctx.getImageSmoothingEnabled=function(){var ref;return(ref=ctx.imageSmoothingEnabled)!=null?ref:true;};};exports.fixup_measure_text=function(ctx){if(ctx.measureText&&(ctx.html5MeasureText==null)){ctx.html5MeasureText=ctx.measureText;return ctx.measureText=function(text){var textMetrics;textMetrics=ctx.html5MeasureText(text);textMetrics.ascent=ctx.html5MeasureText("m").width*1.6;return textMetrics;};}};exports.get_scale_ratio=function(ctx,hidpi){var backingStoreRatio,devicePixelRatio;if(hidpi){devicePixelRatio=window.devicePixelRatio||1;backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio;}
else{return 1;}};exports.fixup_ellipse=function(ctx){var ellipse_bezier;ellipse_bezier=function(x,y,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise){var c,rx,ry;if(anticlockwise==null){anticlockwise=false;}
c=0.551784;ctx.translate(x,y);ctx.rotate(rotation);rx=radiusX;ry=radiusY;if(anticlockwise){rx=-radiusX;ry=-radiusY;}
ctx.moveTo(-rx,0);ctx.bezierCurveTo(-rx,ry*c,-rx*c,ry,0,ry);ctx.bezierCurveTo(rx*c,ry,rx,ry*c,rx,0);ctx.bezierCurveTo(rx,-ry*c,rx*c,-ry,0,-ry);ctx.bezierCurveTo(-rx*c,-ry,-rx,-ry*c,-rx,0);ctx.rotate(-rotation);ctx.translate(-x,-y);};if(!ctx.ellipse){return ctx.ellipse=ellipse_bezier;}};},{}],"core/util/color":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _component2hex,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var svg_colors=require("./svg_colors");_component2hex=function(v){var h;h=Number(v).toString(16);return h=h.length===1?'0'+h:h;};exports.color2hex=function(color){var hex,rgb,v;color=color+'';if(color.indexOf('#')===0){return color;}
else if(svg_colors[color]!=null){return svg_colors[color];}
else if(color.indexOf('rgb')===0){rgb=color.match(/\d+/g);hex=((function(){var j,len,results;results=[];for(j=0,len=rgb.length;j<len;j++){v=rgb[j];results.push(_component2hex(v));}
return results;})()).join('');return'#'+hex.slice(0,8);}
else{return color;}};exports.color2rgba=function(color,alpha){var hex,i,rgba;if(alpha==null){alpha=1;}
if(!color){return[0,0,0,0];}
hex=exports.color2hex(color);hex=hex.replace(/ |#/g,'');if(hex.length<=4){hex=hex.replace(/(.)/g,'$1$1');}
hex=hex.match(/../g);rgba=(function(){var j,len,results;results=[];for(j=0,len=hex.length;j<len;j++){i=hex[j];results.push(parseInt(i,16)/255);}
return results;})();while(rgba.length<3){rgba.push(0);}
if(rgba.length<4){rgba.push(alpha);}
return rgba.slice(0,4);};exports.valid_rgb=function(value){var contents,params,ref,rgb;switch(value.substring(0,4)){case"rgba":params={start:"rgba(",len:4,alpha:true};break;case"rgb(":params={start:"rgb(",len:3,alpha:false};break;default:return false;}
if(new RegExp(".*?(\\.).*(,)").test(value)){throw new Error("color expects integers for rgb in rgb/rgba tuple, received "+value);}
contents=value.replace(params.start,"").replace(")","").split(',').map(parseFloat);if(contents.length!==params.len){throw new Error("color expects rgba "+expect_len+"-tuple, received "+value);}
if(params.alpha&&!((0<=(ref=contents[3])&&ref<=1))){throw new Error("color expects rgba 4-tuple to have alpha value between 0 and 1");}
if(indexOf.call((function(){var j,len,ref1,results;ref1=contents.slice(0,3);results=[];for(j=0,len=ref1.length;j<len;j++){rgb=ref1[j];results.push((0<=rgb&&rgb<=255));}
return results;})(),false)>=0){throw new Error("color expects rgb to have value between 0 and 255");}
return true;};},{"./svg_colors":"core/util/svg_colors"}],"core/util/data_structures":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var array_1=require("./array");var eq_1=require("./eq");var types_1=require("./types");exports.MultiDict=(function(){function MultiDict(){this._dict={};}
MultiDict.prototype._existing=function(key){if(key in this._dict){return this._dict[key];}
else{return null;}};MultiDict.prototype.add_value=function(key,value){var existing;if(value===null){throw new Error("Can't put null in this dict");}
if(types_1.isArray(value)){throw new Error("Can't put arrays in this dict");}
existing=this._existing(key);if(existing===null){return this._dict[key]=value;}
else if(types_1.isArray(existing)){return existing.push(value);}
else{return this._dict[key]=[existing,value];}};MultiDict.prototype.remove_value=function(key,value){var existing,new_array;existing=this._existing(key);if(types_1.isArray(existing)){new_array=array_1.difference(existing,[value]);if(new_array.length>0){return this._dict[key]=new_array;}
else{return delete this._dict[key];}}
else if(eq_1.isEqual(existing,value)){return delete this._dict[key];}};MultiDict.prototype.get_one=function(key,duplicate_error){var existing;existing=this._existing(key);if(types_1.isArray(existing)){if(existing.length===1){return existing[0];}
else{throw new Error(duplicate_error);}}
else{return existing;}};return MultiDict;})();exports.Set=(function(){function Set(array){if(!array){this.values=[];}
else{if(array.constructor===Set){return new Set(array.values);}
if(array.constructor===Array){this.values=Set.compact(array);}
else{this.values=[array];}}}
Set.compact=function(array){var item,j,len,newArray;newArray=[];for(j=0,len=array.length;j<len;j++){item=array[j];if(newArray.indexOf(item)===-1){newArray.push(item);}}
return newArray;};Set.prototype.push=function(item){if(this.missing(item)){return this.values.push(item);}};Set.prototype.remove=function(item){var i;i=this.values.indexOf(item);return this.values=this.values.slice(0,i).concat(this.values.slice(i+1));};Set.prototype.length=function(){return this.values.length;};Set.prototype.includes=function(item){return this.values.indexOf(item)!==-1;};Set.prototype.missing=function(item){return!this.includes(item);};Set.prototype.slice=function(from,to){return this.values.slice(from,to);};Set.prototype.join=function(str){return this.values.join(str);};Set.prototype.toString=function(){return this.join(', ');};Set.prototype.includes=function(item){return this.values.indexOf(item)!==-1;};Set.prototype.union=function(set){set=new Set(set);return new Set(this.values.concat(set.values));};Set.prototype.intersect=function(set){var item,j,len,newSet,ref;set=new Set(set);newSet=new Set;ref=set.values;for(j=0,len=ref.length;j<len;j++){item=ref[j];if(this.includes(item)&&set.includes(item)){newSet.push(item);}}
return newSet;};Set.prototype.diff=function(set){var item,j,len,newSet,ref;set=new Set(set);newSet=new Set;ref=this.values;for(j=0,len=ref.length;j<len;j++){item=ref[j];if(set.missing(item)){newSet.push(item);}}
return newSet;};return Set;})();},{"./array":"core/util/array","./eq":"core/util/eq","./types":"core/util/types"}],"core/util/eq":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var types_1=require("./types");function eq(a,b,aStack,bStack){if(a===b)
return a!==0||1/a===1/b;if(a==null||b==null)
return a===b;var className=toString.call(a);if(className!==toString.call(b))
return false;switch(className){case'[object RegExp]':case'[object String]':return''+a===''+b;case'[object Number]':if(+a!==+a)
return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case'[object Date]':case'[object Boolean]':return+a===+b;}
var areArrays=className==='[object Array]';if(!areArrays){if(typeof a!='object'||typeof b!='object')
return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(types_1.isFunction(aCtor)&&aCtor instanceof aCtor&&types_1.isFunction(bCtor)&&bCtor instanceof bCtor)&&('constructor'in a&&'constructor'in b)){return false;}}
aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)
return bStack[length]===b;}
aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)
return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))
return false;}}
else{var keys=Object.keys(a);var key=void 0;length=keys.length;if(Object.keys(b).length!==length)
return false;while(length--){key=keys[length];if(!(b.hasOwnProperty(key)&&eq(a[key],b[key],aStack,bStack)))
return false;}}
aStack.pop();bStack.pop();return true;}
function isEqual(a,b){return eq(a,b);}
exports.isEqual=isEqual;},{"./types":"core/util/types"}],"core/util/math":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function angle_norm(angle){while(angle<0){angle+=2*Math.PI;}
while(angle>2*Math.PI){angle-=2*Math.PI;}
return angle;}
exports.angle_norm=angle_norm;function angle_dist(lhs,rhs){return Math.abs(angle_norm(lhs-rhs));}
exports.angle_dist=angle_dist;function angle_between(mid,lhs,rhs,direction){var norm_mid=angle_norm(mid);var d=angle_dist(lhs,rhs);var cond=angle_dist(lhs,norm_mid)<=d&&angle_dist(norm_mid,rhs)<=d;if(direction=="anticlock")
return cond;else
return!cond;}
exports.angle_between=angle_between;function random(){return Math.random();}
exports.random=random;function atan2(start,end){return Math.atan2(end[1]-start[1],end[0]-start[0]);}
exports.atan2=atan2;function rnorm(mu,sigma){var r1;var r2;while(true){r1=random();r2=random();r2=(2*r2-1)*Math.sqrt(2*(1/Math.E));if(-4*r1*r1*Math.log(r1)>=r2*r2)
break;}
var rn=r2/r1;rn=mu+sigma*rn;return rn;}
exports.rnorm=rnorm;function clamp(val,min,max){if(val>max)
return max;if(val<min)
return min;return val;}
exports.clamp=clamp;},{}],"core/util/object":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keys=Object.keys;function values(object){var keys=Object.keys(object);var length=keys.length;var values=new Array(length);for(var i=0;i<length;i++){values[i]=object[keys[i]];}
return values;}
exports.values=values;function extend(dest){var sources=[];for(var _i=1;_i<arguments.length;_i++){sources[_i-1]=arguments[_i];}
for(var _a=0,sources_1=sources;_a<sources_1.length;_a++){var source=sources_1[_a];for(var key in source){if(source.hasOwnProperty(key)){dest[key]=source[key];}}}
return dest;}
exports.extend=extend;function clone(obj){return extend({},obj);}
exports.clone=clone;function isEmpty(obj){return Object.keys(obj).length===0;}
exports.isEmpty=isEmpty;},{}],"core/util/proj4":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var proj4=require("proj4/lib/core");exports.proj4=proj4;var Proj=require("proj4/lib/Proj");var toPoint=require("proj4/lib/common/toPoint");var defs=require("proj4/lib/defs");var transform=require("proj4/lib/transform");proj4.defaultDatum='WGS84';proj4.WGS84=new Proj('WGS84');proj4.Proj=Proj;proj4.toPoint=toPoint;proj4.defs=defs;proj4.transform=transform;exports.mercator=defs('GOOGLE');exports.wgs84=defs('WGS84');},{"proj4/lib/Proj":"proj4/lib/Proj","proj4/lib/common/toPoint":"proj4/lib/common/toPoint","proj4/lib/core":"proj4/lib/core","proj4/lib/defs":"proj4/lib/defs","proj4/lib/transform":"proj4/lib/transform"}],"core/util/projections":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var proj4_1=require("./proj4");exports.project_xy=function(x,y){var i,j,merc_x,merc_x_s,merc_y,merc_y_s,ref,ref1;merc_x_s=[];merc_y_s=[];for(i=j=0,ref=x.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ref1=proj4_1.proj4(proj4_1.mercator,[x[i],y[i]]),merc_x=ref1[0],merc_y=ref1[1];merc_x_s[i]=merc_x;merc_y_s[i]=merc_y;}
return[merc_x_s,merc_y_s];};exports.project_xsys=function(xs,ys){var i,j,merc_x_s,merc_xs_s,merc_y_s,merc_ys_s,ref,ref1;merc_xs_s=[];merc_ys_s=[];for(i=j=0,ref=xs.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ref1=exports.project_xy(xs[i],ys[i]),merc_x_s=ref1[0],merc_y_s=ref1[1];merc_xs_s[i]=merc_x_s;merc_ys_s[i]=merc_y_s;}
return[merc_xs_s,merc_ys_s];};},{"./proj4":"core/util/proj4"}],"core/util/refs":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var has_props_1=require("../has_props");var types_1=require("./types");exports.create_ref=function(obj){var ref;if(!(obj instanceof has_props_1.HasProps)){throw new Error("can only create refs for HasProps subclasses");}
ref={'type':obj.type,'id':obj.id};if(obj._subtype!=null){ref['subtype']=obj._subtype;}
return ref;};exports.is_ref=function(arg){var keys;if(types_1.isObject(arg)){keys=Object.keys(arg).sort();if(keys.length===2){return keys[0]==='id'&&keys[1]==='type';}
if(keys.length===3){return keys[0]==='id'&&keys[1]==='subtype'&&keys[2]==='type';}}
return false;};exports.convert_to_ref=function(value){if(types_1.isArray(value)){return value.map(exports.convert_to_ref);}
else{if(value instanceof has_props_1.HasProps){return value.ref();}}};},{"../has_props":"core/has_props","./types":"core/util/types"}],"core/util/selection":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get_indices=function(data_source){var selected;selected=data_source.selected;if(selected['0d'].glyph){return selected['0d'].indices;}
else if(selected['1d'].indices.length>0){return selected['1d'].indices;}
else if(selected['2d'].indices.length>0){return selected['2d'].indices;}
else{return[];}};},{}],"core/util/serialization":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ARRAY_TYPES,DTYPES,_arrayBufferToBase64,_base64ToArrayBuffer,k,v;var types_1=require("./types");ARRAY_TYPES={float32:Float32Array,float64:Float64Array,uint8:Uint8Array,int8:Int8Array,uint16:Uint16Array,int16:Int16Array,uint32:Uint32Array,int32:Int32Array};DTYPES={};for(k in ARRAY_TYPES){v=ARRAY_TYPES[k];DTYPES[v.name]=k;}
_arrayBufferToBase64=function(buffer){var b,binary,bytes;bytes=new Uint8Array(buffer);binary=(function(){var j,len1,results;results=[];for(j=0,len1=bytes.length;j<len1;j++){b=bytes[j];results.push(String.fromCharCode(b));}
return results;})();return btoa(binary.join(""));};_base64ToArrayBuffer=function(base64){var binary_string,bytes,i,j,len,ref;binary_string=atob(base64);len=binary_string.length;bytes=new Uint8Array(len);for(i=j=0,ref=len;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){bytes[i]=binary_string.charCodeAt(i);}
return bytes.buffer;};exports.decode_base64=function(input){var array,bytes,dtype,shape;bytes=_base64ToArrayBuffer(input['__ndarray__']);dtype=input['dtype'];if(dtype in ARRAY_TYPES){array=new ARRAY_TYPES[dtype](bytes);}
shape=input['shape'];return[array,shape];};exports.encode_base64=function(array,shape){var b64,data,dtype;b64=_arrayBufferToBase64(array.buffer);dtype=DTYPES[array.constructor.name];data={__ndarray__:b64,shape:shape,dtype:dtype};return data;};exports.decode_column_data=function(data){var arr,arrays,data_shapes,j,len1,new_data,ref,ref1,shape,shapes;new_data={};data_shapes={};for(k in data){v=data[k];if(types_1.isArray(v)){arrays=[];shapes=[];for(j=0,len1=v.length;j<len1;j++){arr=v[j];if(types_1.isObject(arr)&&'__ndarray__'in arr){ref=exports.decode_base64(arr),arr=ref[0],shape=ref[1];shapes.push(shape);arrays.push(arr);}
else if(types_1.isArray(arr)){shapes.push([]);arrays.push(arr);}}
if(shapes.length>0){new_data[k]=arrays;data_shapes[k]=shapes;}
else{new_data[k]=v;}}
else if(types_1.isObject(v)&&'__ndarray__'in v){ref1=exports.decode_base64(v),arr=ref1[0],shape=ref1[1];new_data[k]=arr;data_shapes[k]=shape;}
else{new_data[k]=v;data_shapes[k]=[];}}
return[new_data,data_shapes];};exports.encode_column_data=function(data,shapes){var i,j,new_array,new_data,ref,ref1,ref2;new_data={};for(k in data){v=data[k];if((v!=null?v.buffer:void 0)instanceof ArrayBuffer){v=exports.encode_base64(v,shapes!=null?shapes[k]:void 0);}
else if(types_1.isArray(v)){new_array=[];for(i=j=0,ref=v.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(((ref1=v[i])!=null?ref1.buffer:void 0)instanceof ArrayBuffer){new_array.push(exports.encode_base64(v[i],shapes!=null?(ref2=shapes[k])!=null?ref2[i]:void 0:void 0));}
else{new_array.push(v[i]);}}
v=new_array;}
new_data[k]=v;}
return new_data;};},{"./types":"core/util/types"}],"core/util/spatial":[function(require,module,exports){"use strict";var __extends=(this&&this.__extends)||(function(){var extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};})();Object.defineProperty(exports,"__esModule",{value:true});var rbush=require("rbush");var SpatialIndex=(function(){function SpatialIndex(){}
return SpatialIndex;}());exports.SpatialIndex=SpatialIndex;var RBush=(function(_super){__extends(RBush,_super);function RBush(points){var _this=_super.call(this)||this;_this.index=rbush();_this.index.load(points);return _this;}
Object.defineProperty(RBush.prototype,"bbox",{get:function(){var _a=this.index.toJSON(),minX=_a.minX,minY=_a.minY,maxX=_a.maxX,maxY=_a.maxY;return{minX:minX,minY:minY,maxX:maxX,maxY:maxY};},enumerable:true,configurable:true});RBush.prototype.search=function(rect){return this.index.search(rect);};RBush.prototype.indices=function(rect){var points=this.search(rect);var n=points.length;var indices=new Array(n);for(var j=0;j<n;j++){indices[j]=points[j].i;}
return indices;};return RBush;}(SpatialIndex));exports.RBush=RBush;},{"rbush":"rbush"}],"core/util/string":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function startsWith(str,searchString,position){if(position===void 0){position=0;}
return str.substr(position,searchString.length)==searchString;}
exports.startsWith=startsWith;function uniqueId(prefix){var s=new Array(32);var hexDigits="0123456789ABCDEF";for(var i=0;i<32;i++){s[i]=hexDigits.substr(Math.floor(Math.random()*0x10),1);}
s[12]="4";s[16]=hexDigits.substr((s[16].charCodeAt(0)&0x3)|0x8,1);var uuid=s.join("");if(prefix!=null)
return prefix+"-"+uuid;else
return uuid;}
exports.uniqueId=uniqueId;function escape(s){return s.replace(/(?:[&<>"'`])/g,function(ch){switch(ch){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;';case"'":return'&#x27;';case'`':return'&#x60;';}});}
exports.escape=escape;},{}],"core/util/svg_colors":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.indianred="#CD5C5C";exports.lightcoral="#F08080";exports.salmon="#FA8072";exports.darksalmon="#E9967A";exports.lightsalmon="#FFA07A";exports.crimson="#DC143C";exports.red="#FF0000";exports.firebrick="#B22222";exports.darkred="#8B0000";exports.pink="#FFC0CB";exports.lightpink="#FFB6C1";exports.hotpink="#FF69B4";exports.deeppink="#FF1493";exports.mediumvioletred="#C71585";exports.palevioletred="#DB7093";exports.coral="#FF7F50";exports.tomato="#FF6347";exports.orangered="#FF4500";exports.darkorange="#FF8C00";exports.orange="#FFA500";exports.gold="#FFD700";exports.yellow="#FFFF00";exports.lightyellow="#FFFFE0";exports.lemonchiffon="#FFFACD";exports.lightgoldenrodyellow="#FAFAD2";exports.papayawhip="#FFEFD5";exports.moccasin="#FFE4B5";exports.peachpuff="#FFDAB9";exports.palegoldenrod="#EEE8AA";exports.khaki="#F0E68C";exports.darkkhaki="#BDB76B";exports.lavender="#E6E6FA";exports.thistle="#D8BFD8";exports.plum="#DDA0DD";exports.violet="#EE82EE";exports.orchid="#DA70D6";exports.fuchsia="#FF00FF";exports.magenta="#FF00FF";exports.mediumorchid="#BA55D3";exports.mediumpurple="#9370DB";exports.blueviolet="#8A2BE2";exports.darkviolet="#9400D3";exports.darkorchid="#9932CC";exports.darkmagenta="#8B008B";exports.purple="#800080";exports.indigo="#4B0082";exports.slateblue="#6A5ACD";exports.darkslateblue="#483D8B";exports.mediumslateblue="#7B68EE";exports.greenyellow="#ADFF2F";exports.chartreuse="#7FFF00";exports.lawngreen="#7CFC00";exports.lime="#00FF00";exports.limegreen="#32CD32";exports.palegreen="#98FB98";exports.lightgreen="#90EE90";exports.mediumspringgreen="#00FA9A";exports.springgreen="#00FF7F";exports.mediumseagreen="#3CB371";exports.seagreen="#2E8B57";exports.forestgreen="#228B22";exports.green="#008000";exports.darkgreen="#006400";exports.yellowgreen="#9ACD32";exports.olivedrab="#6B8E23";exports.olive="#808000";exports.darkolivegreen="#556B2F";exports.mediumaquamarine="#66CDAA";exports.darkseagreen="#8FBC8F";exports.lightseagreen="#20B2AA";exports.darkcyan="#008B8B";exports.teal="#008080";exports.aqua="#00FFFF";exports.cyan="#00FFFF";exports.lightcyan="#E0FFFF";exports.paleturquoise="#AFEEEE";exports.aquamarine="#7FFFD4";exports.turquoise="#40E0D0";exports.mediumturquoise="#48D1CC";exports.darkturquoise="#00CED1";exports.cadetblue="#5F9EA0";exports.steelblue="#4682B4";exports.lightsteelblue="#B0C4DE";exports.powderblue="#B0E0E6";exports.lightblue="#ADD8E6";exports.skyblue="#87CEEB";exports.lightskyblue="#87CEFA";exports.deepskyblue="#00BFFF";exports.dodgerblue="#1E90FF";exports.cornflowerblue="#6495ED";exports.royalblue="#4169E1";exports.blue="#0000FF";exports.mediumblue="#0000CD";exports.darkblue="#00008B";exports.navy="#000080";exports.midnightblue="#191970";exports.cornsilk="#FFF8DC";exports.blanchedalmond="#FFEBCD";exports.bisque="#FFE4C4";exports.navajowhite="#FFDEAD";exports.wheat="#F5DEB3";exports.burlywood="#DEB887";exports.tan="#D2B48C";exports.rosybrown="#BC8F8F";exports.sandybrown="#F4A460";exports.goldenrod="#DAA520";exports.darkgoldenrod="#B8860B";exports.peru="#CD853F";exports.chocolate="#D2691E";exports.saddlebrown="#8B4513";exports.sienna="#A0522D";exports.brown="#A52A2A";exports.maroon="#800000";exports.white="#FFFFFF";exports.snow="#FFFAFA";exports.honeydew="#F0FFF0";exports.mintcream="#F5FFFA";exports.azure="#F0FFFF";exports.aliceblue="#F0F8FF";exports.ghostwhite="#F8F8FF";exports.whitesmoke="#F5F5F5";exports.seashell="#FFF5EE";exports.beige="#F5F5DC";exports.oldlace="#FDF5E6";exports.floralwhite="#FFFAF0";exports.ivory="#FFFFF0";exports.antiquewhite="#FAEBD7";exports.linen="#FAF0E6";exports.lavenderblush="#FFF0F5";exports.mistyrose="#FFE4E1";exports.gainsboro="#DCDCDC";exports.lightgray="#D3D3D3";exports.lightgrey="#D3D3D3";exports.silver="#C0C0C0";exports.darkgray="#A9A9A9";exports.darkgrey="#A9A9A9";exports.gray="#808080";exports.grey="#808080";exports.dimgray="#696969";exports.dimgrey="#696969";exports.lightslategray="#778899";exports.lightslategrey="#778899";exports.slategray="#708090";exports.slategrey="#708090";exports.darkslategray="#2F4F4F";exports.darkslategrey="#2F4F4F";exports.black="#000000";},{}],"core/util/templating":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _format_number;var SPrintf=require("sprintf");var Numbro=require("numbro");var string_1=require("./string");var types_1=require("./types");_format_number=function(number){var format;if(types_1.isNumber(number)){format=(function(){switch(false){case Math.floor(number)!==number:return"%d";case!(Math.abs(number)>0.1&&Math.abs(number)<1000):return"%0.3f";default:return"%0.3e";}})();return SPrintf.sprintf(format,number);}
else{return""+number;}};exports.replace_placeholders=function(string,data_source,i,special_vars){if(special_vars==null){special_vars={};}
string=string.replace(/(^|[^\$])\$(\w+)/g,(function(_this){return function(match,prefix,name){return prefix+"@$"+name;};})(this));string=string.replace(/(^|[^@])@(?:(\$?\w+)|{([^{}]+)})(?:{([^{}]+)})?/g,(function(_this){return function(match,prefix,name,long_name,format){var ref,replacement,value;name=long_name!=null?long_name:name;value=name[0]==="$"?special_vars[name.substring(1)]:(ref=data_source.get_column(name))!=null?ref[i]:void 0;replacement=null;if(value==null){replacement="???";}
else{if(format==='safe'){return""+prefix+value;}
else if(format!=null){replacement=Numbro.format(value,format);}
else{replacement=_format_number(value);}}
return replacement=""+prefix+(string_1.escape(replacement));};})(this));return string;};},{"./string":"core/util/string","./types":"core/util/types","numbro":"numbro","sprintf":"sprintf"}],"core/util/text":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var cache;var dom_1=require("../dom");cache={};exports.get_text_height=function(font){var block,elem,result,text;if(cache[font]!=null){return cache[font];}
text=dom_1.span({style:{font:font}},"Hg");block=dom_1.div({style:{display:"inline-block",width:"1px",height:"0px"}});elem=dom_1.div({},text,block);document.body.appendChild(elem);try{result={};block.style.verticalAlign="baseline";result.ascent=dom_1.offset(block).top-dom_1.offset(text).top;block.style.verticalAlign="bottom";result.height=dom_1.offset(block).top-dom_1.offset(text).top;result.descent=result.height-result.ascent;}
finally{document.body.removeChild(elem);}
cache[font]=result;return result;};},{"../dom":"core/dom"}],"core/util/throttle":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _delay_animation,delay_animation;_delay_animation=function(f){return f();};delay_animation=(typeof window!=="undefined"&&window!==null?window.requestAnimationFrame:void 0)||(typeof window!=="undefined"&&window!==null?window.mozRequestAnimationFrame:void 0)||(typeof window!=="undefined"&&window!==null?window.webkitRequestAnimationFrame:void 0)||(typeof window!=="undefined"&&window!==null?window.msRequestAnimationFrame:void 0)||_delay_animation;exports.throttle=function(func,wait){var args,context,later,pending,previous,ref,result,timeout;ref=[null,null,null,null],context=ref[0],args=ref[1],timeout=ref[2],result=ref[3];previous=0;pending=false;later=function(){previous=new Date;timeout=null;pending=false;return result=func.apply(context,args);};return function(){var now,remaining;now=new Date;remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0&&!pending){clearTimeout(timeout);pending=true;delay_animation(later);}
else if(!timeout&&!pending){timeout=setTimeout((function(){return delay_animation(later);}),remaining);}
return result;};};},{}],"core/util/types":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var toString=Object.prototype.toString;function isBoolean(obj){return obj===true||obj===false||toString.call(obj)==='[object Boolean]';}
exports.isBoolean=isBoolean;function isNumber(obj){return toString.call(obj)==="[object Number]";}
exports.isNumber=isNumber;function isString(obj){return toString.call(obj)==="[object String]";}
exports.isString=isString;function isStrictNaN(obj){return isNumber(obj)&&obj!==+obj;}
exports.isStrictNaN=isStrictNaN;function isFunction(obj){return toString.call(obj)==="[object Function]";}
exports.isFunction=isFunction;function isArray(obj){return Array.isArray(obj);}
exports.isArray=isArray;function isObject(obj){var tp=typeof obj;return tp==='function'||tp==='object'&&!!obj;}
exports.isObject=isObject;},{}],"core/util/wheel":[function(require,module,exports){/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:true});function fontSize(element){return parseInt(getComputedStyle(element).fontSize,10)||null;}
function lineHeight(element){var parent=element.offsetParent||document.body;return fontSize(parent)||fontSize(element)||16;}
function pageHeight(element){return element.clientHeight;}
function getDeltaY(event){var deltaY=-event.deltaY;if(event.target instanceof HTMLElement){switch(event.deltaMode){case event.DOM_DELTA_LINE:deltaY*=lineHeight(event.target);break;case event.DOM_DELTA_PAGE:deltaY*=pageHeight(event.target);break;}}
return deltaY;}
exports.getDeltaY=getDeltaY;},{}],"core/util/zoom":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var math_1=require("./math");exports.scale_highlow=function(range,factor,center){var high,low,ref,x,x0,x1;if(center==null){center=null;}
ref=[range.start,range.end],low=ref[0],high=ref[1];x=center!=null?center:(high+low)/2.0;x0=low-(low-x)*factor;x1=high-(high-x)*factor;return[x0,x1];};exports.get_info=function(mappers,arg){var end,info,mapper,name,ref,start,x0,x1;x0=arg[0],x1=arg[1];info={};for(name in mappers){mapper=mappers[name];ref=mapper.v_map_from_target([x0,x1],true),start=ref[0],end=ref[1];info[name]={start:start,end:end};}
return info;};exports.scale_range=function(frame,factor,h_axis,v_axis,center){var hfactor,ref,ref1,vfactor,vx0,vx1,vy0,vy1,xrs,yrs;if(h_axis==null){h_axis=true;}
if(v_axis==null){v_axis=true;}
if(center==null){center=null;}
"Utility function for zoom tools to calculate/create the zoom_info object\nof the form required by ``PlotCanvasView.update_range``\n\nParameters:\n  frame : CartesianFrame\n  factor : Number\n  h_axis : Boolean, optional\n    whether to zoom the horizontal axis (default = true)\n  v_axis : Boolean, optional\n    whether to zoom the horizontal axis (default = true)\n  center : object, optional\n    of form {'x': Number, 'y', Number}\n\nReturns:\n  object:";factor=math_1.clamp(factor,-0.9,0.9);hfactor=h_axis?factor:0;ref=exports.scale_highlow(frame.h_range,hfactor,center!=null?center.x:void 0),vx0=ref[0],vx1=ref[1];xrs=exports.get_info(frame.x_mappers,[vx0,vx1]);vfactor=v_axis?factor:0;ref1=exports.scale_highlow(frame.v_range,vfactor,center!=null?center.y:void 0),vy0=ref1[0],vy1=ref1[1];yrs=exports.get_info(frame.y_mappers,[vy0,vy1]);return{xrs:xrs,yrs:yrs,factor:factor};};},{"./math":"core/util/math"}],"core/visuals":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ContextProperties,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var mixins=require("./property_mixins");var color_1=require("./util/color");ContextProperties=(function(){function ContextProperties(obj,prefix){var attr,do_spec,j,len,ref;if(prefix==null){prefix="";}
this.obj=obj;this.prefix=prefix;this.cache={};do_spec=obj.properties[prefix+this.do_attr].spec;this.doit=do_spec.value!==null;ref=this.attrs;for(j=0,len=ref.length;j<len;j++){attr=ref[j];this[attr]=obj.properties[prefix+attr];}}
ContextProperties.prototype.warm_cache=function(source){var attr,j,len,prop,ref,results;ref=this.attrs;results=[];for(j=0,len=ref.length;j<len;j++){attr=ref[j];prop=this.obj.properties[this.prefix+attr];if(prop.spec.value!==void 0){results.push(this.cache[attr]=prop.spec.value);}
else{results.push(this.cache[attr+"_array"]=prop.array(source));}}
return results;};ContextProperties.prototype.cache_select=function(attr,i){var prop;prop=this.obj.properties[this.prefix+attr];if(prop.spec.value!==void 0){return this.cache[attr]=prop.spec.value;}
else{return this.cache[attr]=this.cache[attr+"_array"][i];}};return ContextProperties;})();exports.Line=(function(superClass){extend(Line,superClass);function Line(){return Line.__super__.constructor.apply(this,arguments);}
Line.prototype.attrs=Object.keys(mixins.line());Line.prototype.do_attr="line_color";Line.prototype.set_value=function(ctx){ctx.strokeStyle=this.line_color.value();ctx.globalAlpha=this.line_alpha.value();ctx.lineWidth=this.line_width.value();ctx.lineJoin=this.line_join.value();ctx.lineCap=this.line_cap.value();ctx.setLineDash(this.line_dash.value());return ctx.setLineDashOffset(this.line_dash_offset.value());};Line.prototype.set_vectorize=function(ctx,i){this.cache_select("line_color",i);if(ctx.strokeStyle!==this.cache.line_color){ctx.strokeStyle=this.cache.line_color;}
this.cache_select("line_alpha",i);if(ctx.globalAlpha!==this.cache.line_alpha){ctx.globalAlpha=this.cache.line_alpha;}
this.cache_select("line_width",i);if(ctx.lineWidth!==this.cache.line_width){ctx.lineWidth=this.cache.line_width;}
this.cache_select("line_join",i);if(ctx.lineJoin!==this.cache.line_join){ctx.lineJoin=this.cache.line_join;}
this.cache_select("line_cap",i);if(ctx.lineCap!==this.cache.line_cap){ctx.lineCap=this.cache.line_cap;}
this.cache_select("line_dash",i);if(ctx.getLineDash()!==this.cache.line_dash){ctx.setLineDash(this.cache.line_dash);}
this.cache_select("line_dash_offset",i);if(ctx.getLineDashOffset()!==this.cache.line_dash_offset){return ctx.setLineDashOffset(this.cache.line_dash_offset);}};Line.prototype.color_value=function(){var color;color=color_1.color2rgba(this.line_color.value(),this.line_alpha.value());return"rgba("+(color[0]*255)+","+(color[1]*255)+","+(color[2]*255)+","+color[3]+")";};return Line;})(ContextProperties);exports.Fill=(function(superClass){extend(Fill,superClass);function Fill(){return Fill.__super__.constructor.apply(this,arguments);}
Fill.prototype.attrs=Object.keys(mixins.fill());Fill.prototype.do_attr="fill_color";Fill.prototype.set_value=function(ctx){ctx.fillStyle=this.fill_color.value();return ctx.globalAlpha=this.fill_alpha.value();};Fill.prototype.set_vectorize=function(ctx,i){this.cache_select("fill_color",i);if(ctx.fillStyle!==this.cache.fill_color){ctx.fillStyle=this.cache.fill_color;}
this.cache_select("fill_alpha",i);if(ctx.globalAlpha!==this.cache.fill_alpha){return ctx.globalAlpha=this.cache.fill_alpha;}};Fill.prototype.color_value=function(){var color;color=color_1.color2rgba(this.fill_color.value(),this.fill_alpha.value());return"rgba("+(color[0]*255)+","+(color[1]*255)+","+(color[2]*255)+","+color[3]+")";};return Fill;})(ContextProperties);exports.Text=(function(superClass){extend(Text,superClass);function Text(){return Text.__super__.constructor.apply(this,arguments);}
Text.prototype.attrs=Object.keys(mixins.text());Text.prototype.do_attr="text_color";Text.prototype.cache_select=function(name,i){var val;if(name==="font"){val=Text.__super__.cache_select.call(this,"text_font_style",i)+" "+Text.__super__.cache_select.call(this,"text_font_size",i)+" "+Text.__super__.cache_select.call(this,"text_font",i);return this.cache.font=val;}
else{return Text.__super__.cache_select.call(this,name,i);}};Text.prototype.font_value=function(){var font,font_size,font_style;font=this.text_font.value();font_size=this.text_font_size.value();font_style=this.text_font_style.value();return font_style+" "+font_size+" "+font;};Text.prototype.color_value=function(){var color;color=color_1.color2rgba(this.text_color.value(),this.text_alpha.value());return"rgba("+(color[0]*255)+","+(color[1]*255)+","+(color[2]*255)+","+color[3]+")";};Text.prototype.set_value=function(ctx){ctx.font=this.font_value();ctx.fillStyle=this.text_color.value();ctx.globalAlpha=this.text_alpha.value();ctx.textAlign=this.text_align.value();return ctx.textBaseline=this.text_baseline.value();};Text.prototype.set_vectorize=function(ctx,i){this.cache_select("font",i);if(ctx.font!==this.cache.font){ctx.font=this.cache.font;}
this.cache_select("text_color",i);if(ctx.fillStyle!==this.cache.text_color){ctx.fillStyle=this.cache.text_color;}
this.cache_select("text_alpha",i);if(ctx.globalAlpha!==this.cache.text_alpha){ctx.globalAlpha=this.cache.text_alpha;}
this.cache_select("text_align",i);if(ctx.textAlign!==this.cache.text_align){ctx.textAlign=this.cache.text_align;}
this.cache_select("text_baseline",i);if(ctx.textBaseline!==this.cache.text_baseline){return ctx.textBaseline=this.cache.text_baseline;}};return Text;})(ContextProperties);exports.Visuals=(function(){function Visuals(model){var cls,j,len,name,prefix,ref,ref1,ref2,spec;ref=model.mixins;for(j=0,len=ref.length;j<len;j++){spec=ref[j];ref1=spec.split(":"),name=ref1[0],prefix=(ref2=ref1[1])!=null?ref2:"";cls=(function(){switch(name){case"line":return exports.Line;case"fill":return exports.Fill;case"text":return exports.Text;}})();this[prefix+name]=new cls(model,prefix);}}
Visuals.prototype.warm_cache=function(source){var name,prop,ref,results;ref=this;results=[];for(name in ref){if(!hasProp.call(ref,name))
continue;prop=ref[name];if(prop instanceof ContextProperties){results.push(prop.warm_cache(source));}
else{results.push(void 0);}}
return results;};return Visuals;})();},{"./property_mixins":"core/property_mixins","./util/color":"core/util/color"}],"document":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var EventManager,extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var base_1=require("./base");var version_1=require("./version");var solver_1=require("./core/layout/solver");var logging_1=require("./core/logging");var has_props_1=require("./core/has_props");var refs_1=require("./core/util/refs");var serialization_1=require("./core/util/serialization");var data_structures_1=require("./core/util/data_structures");var array_1=require("./core/util/array");var object_1=require("./core/util/object");var eq_1=require("./core/util/eq");var types_1=require("./core/util/types");var column_data_source_1=require("./models/sources/column_data_source");EventManager=(function(){function EventManager(document1){this.document=document1;this.session=null;this.subscribed_models=new data_structures_1.Set();}
EventManager.prototype.send_event=function(event){var ref1;return(ref1=this.session)!=null?ref1.send_event(event):void 0;};EventManager.prototype.trigger=function(event){var j,len,model,model_id,ref1,results;ref1=this.subscribed_models.values;results=[];for(j=0,len=ref1.length;j<len;j++){model_id=ref1[j];if(event.model_id!==null&&event.model_id!==model_id){continue;}
model=this.document._all_models[model_id];results.push(model!=null?model._process_event(event):void 0);}
return results;};return EventManager;})();exports.DocumentChangedEvent=(function(){function DocumentChangedEvent(document1){this.document=document1;}
return DocumentChangedEvent;})();exports.ModelChangedEvent=(function(superClass){extend1(ModelChangedEvent,superClass);function ModelChangedEvent(document1,model1,attr1,old1,new_1,setter_id1){this.document=document1;this.model=model1;this.attr=attr1;this.old=old1;this.new_=new_1;this.setter_id=setter_id1;ModelChangedEvent.__super__.constructor.call(this,this.document);}
ModelChangedEvent.prototype.json=function(references){var id,value,value_json,value_refs;if(this.attr==='id'){logging_1.logger.warn("'id' field is immutable and should never be in a ModelChangedEvent ",this);throw new Error("'id' field should never change, whatever code just set it is wrong");}
value=this.new_;value_json=this.model.constructor._value_to_json(this.attr,value,this.model);value_refs={};has_props_1.HasProps._value_record_references(value,value_refs,true);if(this.model.id in value_refs&&this.model!==value){delete value_refs[this.model.id];}
for(id in value_refs){references[id]=value_refs[id];}
return{'kind':'ModelChanged','model':this.model.ref(),'attr':this.attr,'new':value_json};};return ModelChangedEvent;})(exports.DocumentChangedEvent);exports.TitleChangedEvent=(function(superClass){extend1(TitleChangedEvent,superClass);function TitleChangedEvent(document1,title1,setter_id1){this.document=document1;this.title=title1;this.setter_id=setter_id1;TitleChangedEvent.__super__.constructor.call(this,this.document);}
TitleChangedEvent.prototype.json=function(references){return{'kind':'TitleChanged','title':this.title};};return TitleChangedEvent;})(exports.DocumentChangedEvent);exports.RootAddedEvent=(function(superClass){extend1(RootAddedEvent,superClass);function RootAddedEvent(document1,model1,setter_id1){this.document=document1;this.model=model1;this.setter_id=setter_id1;RootAddedEvent.__super__.constructor.call(this,this.document);}
RootAddedEvent.prototype.json=function(references){has_props_1.HasProps._value_record_references(this.model,references,true);return{'kind':'RootAdded','model':this.model.ref()};};return RootAddedEvent;})(exports.DocumentChangedEvent);exports.RootRemovedEvent=(function(superClass){extend1(RootRemovedEvent,superClass);function RootRemovedEvent(document1,model1,setter_id1){this.document=document1;this.model=model1;this.setter_id=setter_id1;RootRemovedEvent.__super__.constructor.call(this,this.document);}
RootRemovedEvent.prototype.json=function(references){return{'kind':'RootRemoved','model':this.model.ref()};};return RootRemovedEvent;})(exports.DocumentChangedEvent);exports.DEFAULT_TITLE="Bokeh Application";exports.Document=(function(){function Document(){this._title=exports.DEFAULT_TITLE;this._roots=[];this._all_models={};this._all_models_by_name=new data_structures_1.MultiDict();this._all_models_freeze_count=0;this._callbacks=[];this._doc_width=new solver_1.Variable("document_width");this._doc_height=new solver_1.Variable("document_height");this._solver=new solver_1.Solver();this._init_solver();this.event_manager=new EventManager(this);window.addEventListener("resize",(function(_this){return function(){return _this.resize();};})(this));}
Document.prototype._init_solver=function(){var j,len,model,ref1,results;this._solver.clear();this._solver.add_edit_variable(this._doc_width);this._solver.add_edit_variable(this._doc_height);ref1=this._roots;results=[];for(j=0,len=ref1.length;j<len;j++){model=ref1[j];if(model.layoutable){results.push(this._add_layoutable(model));}
else{results.push(void 0);}}
return results;};Document.prototype.solver=function(){return this._solver;};Document.prototype.resize=function(width,height){if(width==null){width=null;}
if(height==null){height=null;}
this._resize(width,height);return this._resize(width,height);};Document.prototype._resize=function(width,height){var j,len,measuring,ref1,ref2,root,root_div,vars;if(width==null){width=null;}
if(height==null){height=null;}
ref1=this._roots;for(j=0,len=ref1.length;j<len;j++){root=ref1[j];if(root.layoutable!==true){continue;}
vars=root.get_constrained_variables();if((vars.width==null)&&(vars.height==null)){continue;}
root_div=document.getElementById("modelid_"+root.id);if((root_div!=null)&&width===null){measuring=root_div;while(true){measuring=measuring.parentNode;ref2=measuring.getBoundingClientRect(),width=ref2.width,height=ref2.height;if(height!==0){break;}}}
if(vars.width!=null){logging_1.logger.debug("Suggest width on Document -- "+width);this._solver.suggest_value(this._doc_width,width);}
if(vars.height!=null){logging_1.logger.debug("Suggest height on Document -- "+height);this._solver.suggest_value(this._doc_height,height);}}
this._solver.update_variables(false);return this._solver.trigger('resize');};Document.prototype.clear=function(){var results;this._push_all_models_freeze();try{results=[];while(this._roots.length>0){results.push(this.remove_root(this._roots[0]));}
return results;}
finally{this._pop_all_models_freeze();}};Document.prototype.destructively_move=function(dest_doc){var j,l,len,len1,len2,n,r,ref1,roots;if(dest_doc===this){throw new Error("Attempted to overwrite a document with itself");}
dest_doc.clear();roots=[];ref1=this._roots;for(j=0,len=ref1.length;j<len;j++){r=ref1[j];roots.push(r);}
this.clear();for(l=0,len1=roots.length;l<len1;l++){r=roots[l];if(r.document!==null){throw new Error("Somehow we didn't detach "+r);}}
if(Object.keys(this._all_models).length!==0){throw new Error("@_all_models still had stuff in it: "+this._all_models);}
for(n=0,len2=roots.length;n<len2;n++){r=roots[n];dest_doc.add_root(r);}
return dest_doc.set_title(this._title);};Document.prototype._push_all_models_freeze=function(){return this._all_models_freeze_count+=1;};Document.prototype._pop_all_models_freeze=function(){this._all_models_freeze_count-=1;if(this._all_models_freeze_count===0){return this._recompute_all_models();}};Document.prototype._invalidate_all_models=function(){logging_1.logger.debug("invalidating document models");if(this._all_models_freeze_count===0){return this._recompute_all_models();}};Document.prototype._recompute_all_models=function(){var a,d,j,l,len,len1,len2,len3,m,n,name,new_all_models_set,o,old_all_models_set,r,recomputed,ref1,ref2,ref3,ref4,to_attach,to_detach;new_all_models_set=new data_structures_1.Set();ref1=this._roots;for(j=0,len=ref1.length;j<len;j++){r=ref1[j];new_all_models_set=new_all_models_set.union(r.references());}
old_all_models_set=new data_structures_1.Set(object_1.values(this._all_models));to_detach=old_all_models_set.diff(new_all_models_set);to_attach=new_all_models_set.diff(old_all_models_set);recomputed={};ref2=new_all_models_set.values;for(l=0,len1=ref2.length;l<len1;l++){m=ref2[l];recomputed[m.id]=m;}
ref3=to_detach.values;for(n=0,len2=ref3.length;n<len2;n++){d=ref3[n];d.detach_document();name=d.name;if(name!==null){this._all_models_by_name.remove_value(name,d);}}
ref4=to_attach.values;for(o=0,len3=ref4.length;o<len3;o++){a=ref4[o];a.attach_document(this);name=a.name;if(name!==null){this._all_models_by_name.add_value(name,a);}}
return this._all_models=recomputed;};Document.prototype.roots=function(){return this._roots;};Document.prototype._add_layoutable=function(model){var constraint,constraints,edit_variable,editables,j,l,len,len1,ref1,strength,vars;if(model.layoutable!==true){throw new Error("Cannot add non-layoutable - "+model);}
editables=model.get_edit_variables();constraints=model.get_constraints();vars=model.get_constrained_variables();for(j=0,len=editables.length;j<len;j++){ref1=editables[j],edit_variable=ref1.edit_variable,strength=ref1.strength;this._solver.add_edit_variable(edit_variable,strength);}
for(l=0,len1=constraints.length;l<len1;l++){constraint=constraints[l];this._solver.add_constraint(constraint);}
if(vars.width!=null){this._solver.add_constraint(solver_1.EQ(vars.width,this._doc_width));}
if(vars.height!=null){this._solver.add_constraint(solver_1.EQ(vars.height,this._doc_height));}
return this._solver.update_variables();};Document.prototype.add_root=function(model,setter_id){logging_1.logger.debug("Adding root: "+model);if(indexOf.call(this._roots,model)>=0){return;}
this._push_all_models_freeze();try{this._roots.push(model);model._is_root=true;}
finally{this._pop_all_models_freeze();}
this._init_solver();return this._trigger_on_change(new exports.RootAddedEvent(this,model,setter_id));};Document.prototype.remove_root=function(model,setter_id){var i;i=this._roots.indexOf(model);if(i<0){return;}
this._push_all_models_freeze();try{this._roots.splice(i,1);model._is_root=false;}
finally{this._pop_all_models_freeze();}
this._init_solver();return this._trigger_on_change(new exports.RootRemovedEvent(this,model,setter_id));};Document.prototype.title=function(){return this._title;};Document.prototype.set_title=function(title,setter_id){if(title!==this._title){this._title=title;return this._trigger_on_change(new exports.TitleChangedEvent(this,title,setter_id));}};Document.prototype.get_model_by_id=function(model_id){if(model_id in this._all_models){return this._all_models[model_id];}
else{return null;}};Document.prototype.get_model_by_name=function(name){return this._all_models_by_name.get_one(name,"Multiple models are named '"+name+"'");};Document.prototype.on_change=function(callback){if(indexOf.call(this._callbacks,callback)>=0){return;}
return this._callbacks.push(callback);};Document.prototype.remove_on_change=function(callback){var i;i=this._callbacks.indexOf(callback);if(i>=0){return this._callbacks.splice(i,1);}};Document.prototype._trigger_on_change=function(event){var cb,j,len,ref1,results;ref1=this._callbacks;results=[];for(j=0,len=ref1.length;j<len;j++){cb=ref1[j];results.push(cb(event));}
return results;};Document.prototype._notify_change=function(model,attr,old,new_,options){if(attr==='name'){this._all_models_by_name.remove_value(old,model);if(new_!==null){this._all_models_by_name.add_value(new_,model);}}
return this._trigger_on_change(new exports.ModelChangedEvent(this,model,attr,old,new_,options!=null?options.setter_id:void 0));};Document._references_json=function(references,include_defaults){var j,len,r,ref,references_json;if(include_defaults==null){include_defaults=true;}
references_json=[];for(j=0,len=references.length;j<len;j++){r=references[j];ref=r.ref();ref['attributes']=r.attributes_as_json(include_defaults);delete ref['attributes']['id'];references_json.push(ref);}
return references_json;};Document._instantiate_object=function(obj_id,obj_type,obj_attrs){var full_attrs,model;full_attrs=object_1.extend({},obj_attrs,{id:obj_id});model=base_1.Models(obj_type);return new model(full_attrs,{silent:true,defer_initialization:true});};Document._instantiate_references_json=function(references_json,existing_models){var instance,j,len,obj,obj_attrs,obj_id,obj_type,references;references={};for(j=0,len=references_json.length;j<len;j++){obj=references_json[j];obj_id=obj['id'];obj_type=obj['type'];obj_attrs=obj['attributes'];if(obj_id in existing_models){instance=existing_models[obj_id];}
else{instance=Document._instantiate_object(obj_id,obj_type,obj_attrs);if('subtype'in obj){instance.set_subtype(obj['subtype']);}}
references[instance.id]=instance;}
return references;};Document._resolve_refs=function(value,old_references,new_references){var resolve_array,resolve_dict,resolve_ref;resolve_ref=function(v){if(refs_1.is_ref(v)){if(v['id']in old_references){return old_references[v['id']];}
else if(v['id']in new_references){return new_references[v['id']];}
else{throw new Error("reference "+(JSON.stringify(v))+" isn't known (not in Document?)");}}
else if(types_1.isArray(v)){return resolve_array(v);}
else if(types_1.isObject(v)){return resolve_dict(v);}
else{return v;}};resolve_dict=function(dict){var k,resolved,v;resolved={};for(k in dict){v=dict[k];resolved[k]=resolve_ref(v);}
return resolved;};resolve_array=function(array){var j,len,results,v;results=[];for(j=0,len=array.length;j<len;j++){v=array[j];results.push(resolve_ref(v));}
return results;};return resolve_ref(value);};Document._initialize_references_json=function(references_json,old_references,new_references){var foreach_depth_first,instance,j,len,obj,obj_attrs,obj_id,to_update,was_new;to_update={};for(j=0,len=references_json.length;j<len;j++){obj=references_json[j];obj_id=obj['id'];obj_attrs=obj['attributes'];was_new=false;instance=obj_id in old_references?old_references[obj_id]:(was_new=true,new_references[obj_id]);obj_attrs=Document._resolve_refs(obj_attrs,old_references,new_references);to_update[instance.id]=[instance,obj_attrs,was_new];}
foreach_depth_first=function(items,f){var already_started,foreach_value,k,results,v;already_started={};foreach_value=function(v,f){var a,attrs,e,k,l,len1,ref1,results,results1,same_as_v;if(v instanceof has_props_1.HasProps){if(!(v.id in already_started)&&v.id in items){already_started[v.id]=true;ref1=items[v.id],same_as_v=ref1[0],attrs=ref1[1],was_new=ref1[2];for(a in attrs){e=attrs[a];foreach_value(e,f);}
return f(v,attrs,was_new);}}
else if(types_1.isArray(v)){results=[];for(l=0,len1=v.length;l<len1;l++){e=v[l];results.push(foreach_value(e,f));}
return results;}
else if(types_1.isObject(v)){results1=[];for(k in v){e=v[k];results1.push(foreach_value(e,f));}
return results1;}};results=[];for(k in items){v=items[k];results.push(foreach_value(v[0],f));}
return results;};foreach_depth_first(to_update,function(instance,attrs,was_new){if(was_new){return instance.setv(attrs);}});return foreach_depth_first(to_update,function(instance,attrs,was_new){if(was_new){return instance.initialize(attrs);}});};Document._event_for_attribute_change=function(changed_obj,key,new_value,doc,value_refs){var changed_model,event;changed_model=doc.get_model_by_id(changed_obj.id);if(!changed_model.attribute_is_serializable(key)){return null;}
event={'kind':'ModelChanged','model':{id:changed_obj.id,type:changed_obj.type},'attr':key,'new':new_value};has_props_1.HasProps._json_record_references(doc,new_value,value_refs,true);return event;};Document._events_to_sync_objects=function(from_obj,to_obj,to_doc,value_refs){var added,events,from_keys,j,key,l,len,len1,len2,n,new_value,old_value,removed,shared,to_keys;from_keys=Object.keys(from_obj.attributes);to_keys=Object.keys(to_obj.attributes);removed=array_1.difference(from_keys,to_keys);added=array_1.difference(to_keys,from_keys);shared=array_1.intersection(from_keys,to_keys);events=[];for(j=0,len=removed.length;j<len;j++){key=removed[j];logging_1.logger.warn("Server sent key "+key+" but we don't seem to have it in our JSON");}
for(l=0,len1=added.length;l<len1;l++){key=added[l];new_value=to_obj.attributes[key];events.push(Document._event_for_attribute_change(from_obj,key,new_value,to_doc,value_refs));}
for(n=0,len2=shared.length;n<len2;n++){key=shared[n];old_value=from_obj.attributes[key];new_value=to_obj.attributes[key];if(old_value===null&&new_value===null){}
else if(old_value===null||new_value===null){events.push(Document._event_for_attribute_change(from_obj,key,new_value,to_doc,value_refs));}
else{if(!eq_1.isEqual(old_value,new_value)){events.push(Document._event_for_attribute_change(from_obj,key,new_value,to_doc,value_refs));}}}
return events.filter(function(e){return e!==null;});};Document._compute_patch_since_json=function(from_json,to_doc){var events,from_references,from_root_ids,from_roots,id,include_defaults,j,l,len,len1,model,r,ref1,ref2,ref3,refs,to_json,to_references,to_root_ids,to_roots,update_model_events,value_refs;to_json=to_doc.to_json(include_defaults=false);refs=function(json){var j,len,obj,ref1,result;result={};ref1=json['roots']['references'];for(j=0,len=ref1.length;j<len;j++){obj=ref1[j];result[obj.id]=obj;}
return result;};from_references=refs(from_json);from_roots={};from_root_ids=[];ref1=from_json['roots']['root_ids'];for(j=0,len=ref1.length;j<len;j++){r=ref1[j];from_roots[r]=from_references[r];from_root_ids.push(r);}
to_references=refs(to_json);to_roots={};to_root_ids=[];ref2=to_json['roots']['root_ids'];for(l=0,len1=ref2.length;l<len1;l++){r=ref2[l];to_roots[r]=to_references[r];to_root_ids.push(r);}
from_root_ids.sort();to_root_ids.sort();if(array_1.difference(from_root_ids,to_root_ids).length>0||array_1.difference(to_root_ids,from_root_ids).length>0){throw new Error("Not implemented: computing add/remove of document roots");}
value_refs={};events=[];ref3=to_doc._all_models;for(id in ref3){model=ref3[id];if(id in from_references){update_model_events=Document._events_to_sync_objects(from_references[id],to_references[id],to_doc,value_refs);events=events.concat(update_model_events);}}
return{'events':events,'references':Document._references_json(object_1.values(value_refs),include_defaults=false)};};Document.prototype.to_json_string=function(include_defaults){if(include_defaults==null){include_defaults=true;}
return JSON.stringify(this.to_json(include_defaults));};Document.prototype.to_json=function(include_defaults){var j,len,r,ref1,root_ids,root_references;if(include_defaults==null){include_defaults=true;}
root_ids=[];ref1=this._roots;for(j=0,len=ref1.length;j<len;j++){r=ref1[j];root_ids.push(r.id);}
root_references=object_1.values(this._all_models);return{'title':this._title,'roots':{'root_ids':root_ids,'references':Document._references_json(root_references,include_defaults)}};};Document.from_json_string=function(s){var json;if(s===null||(s==null)){throw new Error("JSON string is "+(typeof s));}
json=JSON.parse(s);return Document.from_json(json);};Document.from_json=function(json){var doc,is_dev,j,len,py_version,r,references,references_json,root_ids,roots_json,versions_string;logging_1.logger.debug("Creating Document from JSON");if(typeof json!=='object'){throw new Error("JSON object has wrong type "+(typeof json));}
py_version=json['version'];is_dev=py_version.indexOf('+')!==-1||py_version.indexOf('-')!==-1;versions_string="Library versions: JS ("+version_1.version+")  /  Python ("+py_version+")";if(!is_dev&&version_1.version!==py_version){logging_1.logger.warn("JS/Python version mismatch");logging_1.logger.warn(versions_string);}
else{logging_1.logger.debug(versions_string);}
roots_json=json['roots'];root_ids=roots_json['root_ids'];references_json=roots_json['references'];references=Document._instantiate_references_json(references_json,{});Document._initialize_references_json(references_json,{},references);doc=new Document();for(j=0,len=root_ids.length;j<len;j++){r=root_ids[j];doc.add_root(references[r]);}
doc.set_title(json['title']);return doc;};Document.prototype.replace_with_json=function(json){var replacement;replacement=Document.from_json(json);return replacement.destructively_move(this);};Document.prototype.create_json_patch_string=function(events){return JSON.stringify(this.create_json_patch(events));};Document.prototype.create_json_patch=function(events){var event,j,json_events,len,references,result;references={};json_events=[];for(j=0,len=events.length;j<len;j++){event=events[j];if(event.document!==this){logging_1.logger.warn("Cannot create a patch using events from a different document, event had ",event.document," we are ",this);throw new Error("Cannot create a patch using events from a different document");}
json_events.push(event.json(references));}
return result={events:json_events,references:Document._references_json(object_1.values(references))};};Document.prototype.apply_json_patch_string=function(patch){return this.apply_json_patch(JSON.parse(patch));};Document.prototype.apply_json_patch=function(patch,setter_id){var attr,column_source,column_source_id,data,event_json,events_json,id,j,l,len,len1,model_id,model_type,new_references,obj1,old_references,patched_id,patched_obj,patches,ref1,references,references_json,results,rollover,root_id,root_obj,shapes,value;references_json=patch['references'];events_json=patch['events'];references=Document._instantiate_references_json(references_json,this._all_models);for(j=0,len=events_json.length;j<len;j++){event_json=events_json[j];if('model'in event_json){model_id=event_json['model']['id'];if(model_id in this._all_models){references[model_id]=this._all_models[model_id];}
else{if(!(model_id in references)){logging_1.logger.warn("Got an event for unknown model ",event_json['model']);throw new Error("event model wasn't known");}}}}
old_references={};new_references={};for(id in references){value=references[id];if(id in this._all_models){old_references[id]=value;}
else{new_references[id]=value;}}
Document._initialize_references_json(references_json,old_references,new_references);results=[];for(l=0,len1=events_json.length;l<len1;l++){event_json=events_json[l];switch(event_json.kind){case'ModelChanged':patched_id=event_json['model']['id'];if(!(patched_id in this._all_models)){throw new Error("Cannot apply patch to "+patched_id+" which is not in the document");}
patched_obj=this._all_models[patched_id];attr=event_json['attr'];model_type=event_json['model']['type'];if(attr==='data'&&model_type==='ColumnDataSource'){ref1=serialization_1.decode_column_data(event_json['new']),data=ref1[0],shapes=ref1[1];results.push(patched_obj.setv({_shapes:shapes,data:data},{setter_id:setter_id}));}
else{value=Document._resolve_refs(event_json['new'],old_references,new_references);results.push(patched_obj.setv((obj1={},obj1[""+attr]=value,obj1),{setter_id:setter_id}));}
break;case'ColumnsStreamed':column_source_id=event_json['column_source']['id'];if(!(column_source_id in this._all_models)){throw new Error("Cannot stream to "+column_source_id+" which is not in the document");}
column_source=this._all_models[column_source_id];if(!(column_source instanceof column_data_source_1.ColumnDataSource)){throw new Error("Cannot stream to non-ColumnDataSource");}
data=event_json['data'];rollover=event_json['rollover'];results.push(column_source.stream(data,rollover));break;case'ColumnsPatched':column_source_id=event_json['column_source']['id'];if(!(column_source_id in this._all_models)){throw new Error("Cannot patch "+column_source_id+" which is not in the document");}
column_source=this._all_models[column_source_id];if(!(column_source instanceof column_data_source_1.ColumnDataSource)){throw new Error("Cannot patch non-ColumnDataSource");}
patches=event_json['patches'];results.push(column_source.patch(patches));break;case'RootAdded':root_id=event_json['model']['id'];root_obj=references[root_id];results.push(this.add_root(root_obj,setter_id));break;case'RootRemoved':root_id=event_json['model']['id'];root_obj=references[root_id];results.push(this.remove_root(root_obj,setter_id));break;case'TitleChanged':results.push(this.set_title(event_json['title'],setter_id));break;default:throw new Error("Unknown patch event "+JSON.stringify(event_json));}}
return results;};return Document;})();},{"./base":"base","./core/has_props":"core/has_props","./core/layout/solver":"core/layout/solver","./core/logging":"core/logging","./core/util/array":"core/util/array","./core/util/data_structures":"core/util/data_structures","./core/util/eq":"core/util/eq","./core/util/object":"core/util/object","./core/util/refs":"core/util/refs","./core/util/serialization":"core/util/serialization","./core/util/types":"core/util/types","./models/sources/column_data_source":"models/sources/column_data_source","./version":"version"}],"embed":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_view,_get_session,_handle_notebook_comms,_init_comms,_render_document_to_element,_sessions,_update_comms_callback,add_document_from_session,add_model_from_session,add_model_static,fill_render_item_from_script_tag;var base=require("./base");var client_1=require("./client");var logging_1=require("./core/logging");var document_1=require("./document");var dom_1=require("./core/dom");var callback_1=require("./core/util/callback");exports.BOKEH_ROOT="bk-root";_handle_notebook_comms=function(msg){var data;logging_1.logger.debug("handling notebook comms");data=JSON.parse(msg.content.data);if('events'in data&&'references'in data){return this.apply_json_patch(data);}
else if('doc'in data){return this.replace_with_json(data['doc']);}
else{throw new Error("handling notebook comms message: ",msg);}};_update_comms_callback=function(target,doc,comm){if(target===comm.target_name){return comm.on_msg(_handle_notebook_comms.bind(doc));}};_init_comms=function(target,doc){var comm_manager,e,id,promise,ref,update_comms;if((typeof Jupyter!=="undefined"&&Jupyter!==null)&&(Jupyter.notebook.kernel!=null)){logging_1.logger.info("Registering Jupyter comms for target "+target);comm_manager=Jupyter.notebook.kernel.comm_manager;update_comms=function(comm){return _update_comms_callback(target,doc,comm);};ref=comm_manager.comms;for(id in ref){promise=ref[id];promise.then(update_comms);}
try{return comm_manager.register_target(target,function(comm,msg){logging_1.logger.info("Registering Jupyter comms for target "+target);return comm.on_msg(_handle_notebook_comms.bind(doc));});}
catch(error1){e=error1;return logging_1.logger.warn("Jupyter comms failed to register. push_notebook() will not function. (exception reported: "+e+")");}}
else{return console.warn('Jupyter notebooks comms not available. push_notebook() will not function');}};_create_view=function(model){var view;view=new model.default_view({model:model});base.index[model.id]=view;return view;};_render_document_to_element=function(element,document,use_for_title){var i,len,model,ref,render_model,unrender_model,views;views={};render_model=function(model){var view;view=_create_view(model);views[model.id]=view;return element.appendChild(view.el);};unrender_model=function(model){var view;if(model.id in views){view=views[model.id];element.removeChild(view.el);delete views[model.id];return delete base.index[model.id];}};ref=document.roots();for(i=0,len=ref.length;i<len;i++){model=ref[i];render_model(model);}
if(use_for_title){window.document.title=document.title();}
document.on_change(function(event){if(event instanceof document_1.RootAddedEvent){return render_model(event.model);}
else if(event instanceof document_1.RootRemovedEvent){return unrender_model(event.model);}
else if(use_for_title&&event instanceof document_1.TitleChangedEvent){return window.document.title=event.title;}});return views;};add_model_static=function(element,model_id,doc){var model,view;model=doc.get_model_by_id(model_id);if(model==null){throw new Error("Model "+model_id+" was not in document "+doc);}
view=_create_view(model);return callback_1.delay(function(){return dom_1.replaceWith(element,view.el);});};exports.add_document_static=function(element,doc,use_for_title){return callback_1.delay(function(){return _render_document_to_element(element,doc,use_for_title);});};exports.add_document_standalone=function(document,element,use_for_title){if(use_for_title==null){use_for_title=false;}
return _render_document_to_element(element,document,use_for_title);};_sessions={};_get_session=function(websocket_url,session_id,args_string){var subsessions;if((websocket_url==null)||websocket_url===null){throw new Error("Missing websocket_url");}
if(!(websocket_url in _sessions)){_sessions[websocket_url]={};}
subsessions=_sessions[websocket_url];if(!(session_id in subsessions)){subsessions[session_id]=client_1.pull_session(websocket_url,session_id,args_string);}
return subsessions[session_id];};add_document_from_session=function(element,websocket_url,session_id,use_for_title){var args_string,promise;args_string=window.location.search.substr(1);promise=_get_session(websocket_url,session_id,args_string);return promise.then(function(session){return _render_document_to_element(element,session.document,use_for_title);},function(error){logging_1.logger.error("Failed to load Bokeh session "+session_id+": "+error);throw error;});};add_model_from_session=function(element,websocket_url,model_id,session_id){var args_string,promise;args_string=window.location.search.substr(1);promise=_get_session(websocket_url,session_id,args_string);return promise.then(function(session){var model,view;model=session.document.get_model_by_id(model_id);if(model==null){throw new Error("Did not find model "+model_id+" in session");}
view=_create_view(model);return dom_1.replaceWith(element,view.el);},function(error){logging_1.logger.error("Failed to load Bokeh session "+session_id+": "+error);throw error;});};exports.inject_css=function(url){var element;element=dom_1.link({href:url,rel:"stylesheet",type:"text/css"});return document.body.appendChild(element);};exports.inject_raw_css=function(css){var element;element=dom_1.style({},css);return document.body.appendChild(element);};fill_render_item_from_script_tag=function(script,item){var info;info=script.dataset;if((info.bokehLogLevel!=null)&&info.bokehLogLevel.length>0){logging_1.set_log_level(info.bokehLogLevel);}
if((info.bokehDocId!=null)&&info.bokehDocId.length>0){item['docid']=info.bokehDocId;}
if((info.bokehModelId!=null)&&info.bokehModelId.length>0){item['modelid']=info.bokehModelId;}
if((info.bokehSessionId!=null)&&info.bokehSessionId.length>0){item['sessionid']=info.bokehSessionId;}
return logging_1.logger.info("Will inject Bokeh script tag with params "+(JSON.stringify(item)));};exports.embed_items=function(docs_json,render_items,app_path,absolute_url){var child,container,docid,docs,elem,element_id,i,item,len,loc,promise,protocol,results,use_for_title,websocket_url;protocol='ws:';if(window.location.protocol==='https:'){protocol='wss:';}
if(absolute_url!=null){loc=new URL(absolute_url);}
else{loc=window.location;}
if(app_path!=null){if(app_path==="/"){app_path="";}}
else{app_path=loc.pathname.replace(/\/+$/,'');}
websocket_url=protocol+'//'+loc.host+app_path+'/ws';logging_1.logger.debug("embed: computed ws url: "+websocket_url);docs={};for(docid in docs_json){docs[docid]=document_1.Document.from_json(docs_json[docid]);}
results=[];for(i=0,len=render_items.length;i<len;i++){item=render_items[i];if(item.notebook_comms_target!=null){_init_comms(item.notebook_comms_target,docs[docid]);}
element_id=item['elementid'];elem=document.getElementById(element_id);if(elem==null){throw new Error("Error rendering Bokeh model: could not find tag with id: "+element_id);}
if(!document.body.contains(elem)){throw new Error("Error rendering Bokeh model: element with id '"+element_id+"' must be under <body>");}
if(elem.tagName==="SCRIPT"){fill_render_item_from_script_tag(elem,item);container=dom_1.div({"class":exports.BOKEH_ROOT});dom_1.replaceWith(elem,container);child=dom_1.div();container.appendChild(child);elem=child;}
use_for_title=(item.use_for_title!=null)&&item.use_for_title;promise=null;if(item.modelid!=null){if(item.docid!=null){add_model_static(elem,item.modelid,docs[item.docid]);}
else if(item.sessionid!=null){promise=add_model_from_session(elem,websocket_url,item.modelid,item.sessionid);}
else{throw new Error("Error rendering Bokeh model "+item['modelid']+" to element "+element_id+": no document ID or session ID specified");}}
else{if(item.docid!=null){exports.add_document_static(elem,docs[item.docid],use_for_title);}
else if(item.sessionid!=null){promise=add_document_from_session(elem,websocket_url,item.sessionid,use_for_title);}
else{throw new Error("Error rendering Bokeh document to element "+element_id+": no document ID or session ID specified");}}
if(promise!==null){results.push(promise.then(function(value){return console.log("Bokeh items were rendered successfully");},function(error){return console.log("Error rendering Bokeh items ",error);}));}
else{results.push(void 0);}}
return results;};},{"./base":"base","./client":"client","./core/dom":"core/dom","./core/logging":"core/logging","./core/util/callback":"core/util/callback","./document":"document"}],"main":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var version_1=require("./version");exports.version=version_1.version;var embed=require("./embed");exports.embed=embed;var logging_1=require("./core/logging");exports.logger=logging_1.logger;exports.set_log_level=logging_1.set_log_level;var base_1=require("./base");exports.Models=base_1.Models;exports.index=base_1.index;var safely_1=require("./safely");exports.safely=safely_1.safely;},{"./base":"base","./core/logging":"core/logging","./embed":"embed","./safely":"safely","./version":"version"}],"model":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var has_props_1=require("./core/has_props");var p=require("./core/properties");var types_1=require("./core/util/types");var object_1=require("./core/util/object");var logging_1=require("./core/logging");exports.Model=(function(superClass){extend(Model,superClass);function Model(){return Model.__super__.constructor.apply(this,arguments);}
Model.prototype.type="Model";Model.define({tags:[p.Array,[]],name:[p.String],js_property_callbacks:[p.Any,{}],js_event_callbacks:[p.Any,{}],subscribed_events:[p.Array,[]]});Model.prototype.initialize=function(options){var callbacks,cb,evt,i,len,ref1;Model.__super__.initialize.call(this,options);ref1=this.js_property_callbacks;for(evt in ref1){callbacks=ref1[evt];for(i=0,len=callbacks.length;i<len;i++){cb=callbacks[i];this.listenTo(this,evt,function(){return cb.execute(this);});}}
this.listenTo(this,'change:js_event_callbacks',function(){return this._update_event_callbacks;});return this.listenTo(this,'change:subscribed_events',function(){return this._update_event_callbacks;});};Model.prototype._process_event=function(event){var callback,i,len,ref1,ref2;if(event.is_applicable_to(this)){event=event._customize_event(this);ref2=(ref1=this.js_event_callbacks[event.event_name])!=null?ref1:[];for(i=0,len=ref2.length;i<len;i++){callback=ref2[i];callback.execute(event,{});}
if(this.subscribed_events.some(function(m){return m===event.event_name;})){return this.document.event_manager.send_event(event);}}};Model.prototype.trigger_event=function(event){var ref1;return(ref1=this.document)!=null?ref1.event_manager.trigger(event.set_model_id(this.id)):void 0;};Model.prototype._update_event_callbacks=function(){if(this.document==null){logging_1.logger.warn('WARNING: Document not defined for updating event callbacks');return;}
return this.document.event_manager.subscribed_models.push(this.id);};Model.prototype._doc_attached=function(){if(!object_1.isEmpty(this.js_event_callbacks)||!object_1.isEmpty(this.subscribed_events)){return this._update_event_callbacks();}};Model.prototype.select=function(selector){if(selector.prototype instanceof Model){return this.references().filter(function(ref){return ref instanceof selector;});}
else if(types_1.isString(selector)){return this.references().filter(function(ref){return ref.name===selector;});}
else{throw new Error("invalid selector");}};Model.prototype.select_one=function(selector){var result;result=this.select(selector);switch(result.length){case 0:return null;case 1:return result[0];default:throw new Error("found more than one object matching given selector");}};return Model;})(has_props_1.HasProps);},{"./core/has_props":"core/has_props","./core/logging":"core/logging","./core/properties":"core/properties","./core/util/object":"core/util/object","./core/util/types":"core/util/types"}],"models/annotations/annotation":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var side_panel_1=require("core/layout/side_panel");var p=require("core/properties");var renderer_1=require("../renderers/renderer");exports.AnnotationView=(function(superClass){extend(AnnotationView,superClass);function AnnotationView(){return AnnotationView.__super__.constructor.apply(this,arguments);}
AnnotationView.prototype._get_panel_offset=function(){var x,y;x=this.model.panel._left._value;y=this.model.panel._bottom._value;return{x:x,y:-y};};AnnotationView.prototype._get_size=function(){return-1;};return AnnotationView;})(renderer_1.RendererView);exports.Annotation=(function(superClass){extend(Annotation,superClass);function Annotation(){return Annotation.__super__.constructor.apply(this,arguments);}
Annotation.prototype.type='Annotation';Annotation.prototype.default_view=exports.AnnotationView;Annotation.define({plot:[p.Instance]});Annotation.override({level:'annotation'});Annotation.prototype.add_panel=function(side){this.panel=new side_panel_1.SidePanel({side:side});this.panel.attach_document(this.document);return this.level='overlay';};return Annotation;})(renderer_1.Renderer);},{"../renderers/renderer":"models/renderers/renderer","core/layout/side_panel":"core/layout/side_panel","core/properties":"core/properties"}],"models/annotations/arrow":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var arrow_head_1=require("./arrow_head");var column_data_source_1=require("../sources/column_data_source");var p=require("core/properties");var math_1=require("core/util/math");exports.ArrowView=(function(superClass){extend(ArrowView,superClass);function ArrowView(){return ArrowView.__super__.constructor.apply(this,arguments);}
ArrowView.prototype.initialize=function(options){ArrowView.__super__.initialize.call(this,options);if(this.model.source==null){this.model.source=new column_data_source_1.ColumnDataSource();}
this.canvas=this.plot_model.canvas;this.xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];this.ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];return this.set_data(this.model.source);};ArrowView.prototype.bind_bokeh_events=function(){this.listenTo(this.model,'change',this.plot_view.request_render);return this.listenTo(this.model.source,'change',function(){this.set_data(this.model.source);return this.plot_view.request_render();});};ArrowView.prototype.set_data=function(source){ArrowView.__super__.set_data.call(this,source);return this.visuals.warm_cache(source);};ArrowView.prototype._map_data=function(){var end,start,x_name,y_name;if(this.model.start_units==='data'){start=this.plot_view.map_to_screen(this._x_start,this._y_start,x_name=this.model.x_range_name,y_name=this.model.y_range_name);}
else{start=[this.canvas.v_vx_to_sx(this._x_start),this.canvas.v_vy_to_sy(this._y_start)];}
if(this.model.end_units==='data'){end=this.plot_view.map_to_screen(this._x_end,this._y_end,x_name=this.model.x_range_name,y_name=this.model.y_range_name);}
else{end=[this.canvas.v_vx_to_sx(this._x_end),this.canvas.v_vy_to_sy(this._y_end)];}
return[start,end];};ArrowView.prototype.render=function(){var ctx,ref;if(!this.model.visible){return;}
ctx=this.plot_view.canvas_view.ctx;ctx.save();ref=this._map_data(),this.start=ref[0],this.end=ref[1];if(this.model.end!=null){this._arrow_head(ctx,"render",this.model.end,this.start,this.end);}
if(this.model.start!=null){this._arrow_head(ctx,"render",this.model.start,this.end,this.start);}
ctx.beginPath();ctx.rect(0,0,this.canvas.width,this.canvas.height);if(this.model.end!=null){this._arrow_head(ctx,"clip",this.model.end,this.start,this.end);}
if(this.model.start!=null){this._arrow_head(ctx,"clip",this.model.start,this.end,this.start);}
ctx.closePath();ctx.clip();this._arrow_body(ctx);return ctx.restore();};ArrowView.prototype._arrow_body=function(ctx){var i,j,ref,results;if(!this.visuals.line.doit){return;}
results=[];for(i=j=0,ref=this._x_start.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){this.visuals.line.set_vectorize(ctx,i);ctx.beginPath();ctx.moveTo(this.start[0][i],this.start[1][i]);ctx.lineTo(this.end[0][i],this.end[1][i]);results.push(ctx.stroke());}
return results;};ArrowView.prototype._arrow_head=function(ctx,action,head,start,end){var angle,i,j,ref,results;results=[];for(i=j=0,ref=this._x_start.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){angle=Math.PI/2+math_1.atan2([start[0][i],start[1][i]],[end[0][i],end[1][i]]);ctx.save();ctx.translate(end[0][i],end[1][i]);ctx.rotate(angle);if(action==="render"){head.render(ctx);}
else if(action==="clip"){head.clip(ctx);}
results.push(ctx.restore());}
return results;};return ArrowView;})(annotation_1.AnnotationView);exports.Arrow=(function(superClass){extend(Arrow,superClass);function Arrow(){return Arrow.__super__.constructor.apply(this,arguments);}
Arrow.prototype.default_view=exports.ArrowView;Arrow.prototype.type='Arrow';Arrow.mixins(['line']);Arrow.define({x_start:[p.NumberSpec],y_start:[p.NumberSpec],start_units:[p.String,'data'],start:[p.Instance,null],x_end:[p.NumberSpec],y_end:[p.NumberSpec],end_units:[p.String,'data'],end:[p.Instance,new arrow_head_1.OpenHead({})],source:[p.Instance],x_range_name:[p.String,'default'],y_range_name:[p.String,'default']});return Arrow;})(annotation_1.Annotation);},{"../sources/column_data_source":"models/sources/column_data_source","./annotation":"models/annotations/annotation","./arrow_head":"models/annotations/arrow_head","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/annotations/arrow_head":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var visuals_1=require("core/visuals");var p=require("core/properties");exports.ArrowHead=(function(superClass){extend(ArrowHead,superClass);function ArrowHead(){return ArrowHead.__super__.constructor.apply(this,arguments);}
ArrowHead.prototype.type='ArrowHead';ArrowHead.prototype.initialize=function(options){ArrowHead.__super__.initialize.call(this,options);return this.visuals=new visuals_1.Visuals(this);};ArrowHead.prototype.render=function(ctx,i){return null;};ArrowHead.prototype.clip=function(ctx,i){return null;};return ArrowHead;})(annotation_1.Annotation);exports.OpenHead=(function(superClass){extend(OpenHead,superClass);function OpenHead(){return OpenHead.__super__.constructor.apply(this,arguments);}
OpenHead.prototype.type='OpenHead';OpenHead.prototype.clip=function(ctx,i){this.visuals.line.set_vectorize(ctx,i);ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0.5*this.size,-2);ctx.lineTo(-0.5*this.size,-2);ctx.lineTo(-0.5*this.size,this.size);ctx.lineTo(0,0);return ctx.lineTo(0.5*this.size,this.size);};OpenHead.prototype.render=function(ctx,i){if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);ctx.beginPath();ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0,0);ctx.lineTo(-0.5*this.size,this.size);return ctx.stroke();}};OpenHead.mixins(['line']);OpenHead.define({size:[p.Number,25]});return OpenHead;})(exports.ArrowHead);exports.NormalHead=(function(superClass){extend(NormalHead,superClass);function NormalHead(){return NormalHead.__super__.constructor.apply(this,arguments);}
NormalHead.prototype.type='NormalHead';NormalHead.prototype.clip=function(ctx,i){this.visuals.line.set_vectorize(ctx,i);ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0.5*this.size,-2);ctx.lineTo(-0.5*this.size,-2);ctx.lineTo(-0.5*this.size,this.size);return ctx.lineTo(0.5*this.size,this.size);};NormalHead.prototype.render=function(ctx,i){if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);this._normal(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);this._normal(ctx,i);return ctx.stroke();}};NormalHead.prototype._normal=function(ctx,i){ctx.beginPath();ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0,0);ctx.lineTo(-0.5*this.size,this.size);return ctx.closePath();};NormalHead.mixins(['line','fill']);NormalHead.define({size:[p.Number,25]});NormalHead.override({fill_color:'black'});return NormalHead;})(exports.ArrowHead);exports.VeeHead=(function(superClass){extend(VeeHead,superClass);function VeeHead(){return VeeHead.__super__.constructor.apply(this,arguments);}
VeeHead.prototype.type='VeeHead';VeeHead.prototype.clip=function(ctx,i){this.visuals.line.set_vectorize(ctx,i);ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0.5*this.size,-2);ctx.lineTo(-0.5*this.size,-2);ctx.lineTo(-0.5*this.size,this.size);ctx.lineTo(0,0.5*this.size);return ctx.lineTo(0.5*this.size,this.size);};VeeHead.prototype.render=function(ctx,i){if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);this._vee(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);this._vee(ctx,i);return ctx.stroke();}};VeeHead.prototype._vee=function(ctx,i){ctx.beginPath();ctx.moveTo(0.5*this.size,this.size);ctx.lineTo(0,0);ctx.lineTo(-0.5*this.size,this.size);ctx.lineTo(0,0.5*this.size);return ctx.closePath();};VeeHead.mixins(['line','fill']);VeeHead.define({size:[p.Number,25]});VeeHead.override({fill_color:'black'});return VeeHead;})(exports.ArrowHead);},{"./annotation":"models/annotations/annotation","core/properties":"core/properties","core/visuals":"core/visuals"}],"models/annotations/box_annotation":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var dom_1=require("core/dom");var p=require("core/properties");var types_1=require("core/util/types");exports.BoxAnnotationView=(function(superClass){extend(BoxAnnotationView,superClass);function BoxAnnotationView(){return BoxAnnotationView.__super__.constructor.apply(this,arguments);}
BoxAnnotationView.prototype.initialize=function(options){BoxAnnotationView.__super__.initialize.call(this,options);this.plot_view.canvas_overlays.appendChild(this.el);this.el.classList.add("bk-shading");return dom_1.hide(this.el);};BoxAnnotationView.prototype.bind_bokeh_events=function(){if(this.model.render_mode==='css'){this.listenTo(this.model,'change',this.render);return this.listenTo(this.model,'data_update',this.render);}
else{this.listenTo(this.model,'change',this.plot_view.request_render);return this.listenTo(this.model,'data_update',this.plot_view.request_render);}};BoxAnnotationView.prototype.render=function(){var sbottom,sleft,sright,stop;if(!this.model.visible&&this.model.render_mode==='css'){dom_1.hide(this.el);}
if(!this.model.visible){return;}
if((this.model.left==null)&&(this.model.right==null)&&(this.model.top==null)&&(this.model.bottom==null)){dom_1.hide(this.el);return null;}
this.frame=this.plot_model.frame;this.canvas=this.plot_model.canvas;this.xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];this.ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];sleft=this.canvas.vx_to_sx(this._calc_dim(this.model.left,this.model.left_units,this.xmapper,this.frame.h_range.start));sright=this.canvas.vx_to_sx(this._calc_dim(this.model.right,this.model.right_units,this.xmapper,this.frame.h_range.end));sbottom=this.canvas.vy_to_sy(this._calc_dim(this.model.bottom,this.model.bottom_units,this.ymapper,this.frame.v_range.start));stop=this.canvas.vy_to_sy(this._calc_dim(this.model.top,this.model.top_units,this.ymapper,this.frame.v_range.end));if(this.model.render_mode==='css'){return this._css_box(sleft,sright,sbottom,stop);}
else{return this._canvas_box(sleft,sright,sbottom,stop);}};BoxAnnotationView.prototype._css_box=function(sleft,sright,sbottom,stop){var ld,sh,sw;sw=Math.abs(sright-sleft);sh=Math.abs(sbottom-stop);this.el.style.left=sleft+"px";this.el.style.width=sw+"px";this.el.style.top=stop+"px";this.el.style.height=sh+"px";this.el.style.borderWidth=this.model.line_width.value+"px";this.el.style.borderColor=this.model.line_color.value;this.el.style.backgroundColor=this.model.fill_color.value;this.el.style.opacity=this.model.fill_alpha.value;ld=this.model.line_dash;if(types_1.isArray(ld)){ld=ld.length<2?"solid":"dashed";}
if(types_1.isString(ld)){this.el.style.borderStyle=ld;}
return dom_1.show(this.el);};BoxAnnotationView.prototype._canvas_box=function(sleft,sright,sbottom,stop){var ctx;ctx=this.plot_view.canvas_view.ctx;ctx.save();ctx.beginPath();ctx.rect(sleft,stop,sright-sleft,sbottom-stop);this.visuals.fill.set_value(ctx);ctx.fill();this.visuals.line.set_value(ctx);ctx.stroke();return ctx.restore();};BoxAnnotationView.prototype._calc_dim=function(dim,dim_units,mapper,frame_extrema){var vdim;if(dim!=null){if(dim_units==='data'){vdim=mapper.map_to_target(dim);}
else{vdim=dim;}}
else{vdim=frame_extrema;}
return vdim;};return BoxAnnotationView;})(annotation_1.AnnotationView);exports.BoxAnnotation=(function(superClass){extend(BoxAnnotation,superClass);function BoxAnnotation(){return BoxAnnotation.__super__.constructor.apply(this,arguments);}
BoxAnnotation.prototype.default_view=exports.BoxAnnotationView;BoxAnnotation.prototype.type='BoxAnnotation';BoxAnnotation.mixins(['line','fill']);BoxAnnotation.define({render_mode:[p.RenderMode,'canvas'],x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],top:[p.Number,null],top_units:[p.SpatialUnits,'data'],bottom:[p.Number,null],bottom_units:[p.SpatialUnits,'data'],left:[p.Number,null],left_units:[p.SpatialUnits,'data'],right:[p.Number,null],right_units:[p.SpatialUnits,'data']});BoxAnnotation.override({fill_color:'#fff9ba',fill_alpha:0.4,line_color:'#cccccc',line_alpha:0.3});BoxAnnotation.prototype.update=function(arg){var bottom,left,right,top;left=arg.left,right=arg.right,top=arg.top,bottom=arg.bottom;this.setv({left:left,right:right,top:top,bottom:bottom},{silent:true});return this.trigger('data_update');};return BoxAnnotation;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/annotations/color_bar":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var LONG_DIM_MAX_SCALAR,LONG_DIM_MIN_SCALAR,SHORT_DIM,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var basic_ticker_1=require("../tickers/basic_ticker");var basic_tick_formatter_1=require("../formatters/basic_tick_formatter");var linear_color_mapper_1=require("../mappers/linear_color_mapper");var linear_mapper_1=require("../mappers/linear_mapper");var log_mapper_1=require("../mappers/log_mapper");var range1d_1=require("../ranges/range1d");var p=require("core/properties");var text_util=require("core/util/text");var array_1=require("core/util/array");var types_1=require("core/util/types");SHORT_DIM=25;LONG_DIM_MIN_SCALAR=0.3;LONG_DIM_MAX_SCALAR=0.8;exports.ColorBarView=(function(superClass){extend(ColorBarView,superClass);function ColorBarView(){return ColorBarView.__super__.constructor.apply(this,arguments);}
ColorBarView.prototype.initialize=function(options){ColorBarView.__super__.initialize.call(this,options);return this._set_canvas_image();};ColorBarView.prototype.bind_bokeh_events=function(){this.listenTo(this.model,'change:visible',this.plot_view.request_render);this.listenTo(this.model.ticker,'change',this.plot_view.request_render);this.listenTo(this.model.formatter,'change',this.plot_view.request_render);return this.listenTo(this.model.color_mapper,'change',function(){this._set_canvas_image();return this.plot_view.request_render();});};ColorBarView.prototype._get_panel_offset=function(){var x,y;x=this.model.panel._left._value;y=this.model.panel._top._value;return{x:x,y:-y};};ColorBarView.prototype._get_size=function(){var bbox,side;bbox=this.compute_legend_dimensions();side=this.model.panel.side;if(side==='above'||side==='below'){return bbox.height;}
if(side==='left'||side==='right'){return bbox.width;}};ColorBarView.prototype._set_canvas_image=function(){var buf,buf8,canvas,cmap,h,image_ctx,image_data,k,palette,ref,ref1,ref2,ref3,results,w;palette=this.model.color_mapper.palette;if(this.model.orientation==='vertical'){palette=palette.slice(0).reverse();}
switch(this.model.orientation){case"vertical":ref=[1,palette.length],w=ref[0],h=ref[1];break;case"horizontal":ref1=[palette.length,1],w=ref1[0],h=ref1[1];}
canvas=document.createElement('canvas');ref2=[w,h],canvas.width=ref2[0],canvas.height=ref2[1];image_ctx=canvas.getContext('2d');image_data=image_ctx.getImageData(0,0,w,h);cmap=new linear_color_mapper_1.LinearColorMapper({palette:palette});buf=cmap.v_map_screen((function(){results=[];for(var k=0,ref3=palette.length;0<=ref3?k<ref3:k>ref3;0<=ref3?k++:k--){results.push(k);}
return results;}).apply(this));buf8=new Uint8Array(buf);image_data.data.set(buf8);image_ctx.putImageData(image_data,0,0);return this.image=canvas;};ColorBarView.prototype.compute_legend_dimensions=function(){var image_dimensions,image_height,image_width,label_extent,legend_height,legend_width,padding,ref,tick_extent,title_extent;image_dimensions=this.model._computed_image_dimensions();ref=[image_dimensions.height,image_dimensions.width],image_height=ref[0],image_width=ref[1];label_extent=this._get_label_extent();title_extent=this.model._title_extent();tick_extent=this.model._tick_extent();padding=this.model.padding;switch(this.model.orientation){case"vertical":legend_height=image_height+title_extent+padding*2;legend_width=image_width+tick_extent+label_extent+padding*2;break;case"horizontal":legend_height=image_height+title_extent+tick_extent+label_extent+padding*2;legend_width=image_width+padding*2;}
return{height:legend_height,width:legend_width};};ColorBarView.prototype.compute_legend_location=function(){var h_range,legend_dimensions,legend_height,legend_margin,legend_width,location,ref,sx,sy,v_range,x,y;legend_dimensions=this.compute_legend_dimensions();ref=[legend_dimensions.height,legend_dimensions.width],legend_height=ref[0],legend_width=ref[1];legend_margin=this.model.margin;location=this.model.location;h_range=this.plot_view.frame.h_range;v_range=this.plot_view.frame.v_range;if(types_1.isString(location)){switch(location){case'top_left':x=h_range.start+legend_margin;y=v_range.end-legend_margin;break;case'top_center':x=(h_range.end+h_range.start)/2-legend_width/2;y=v_range.end-legend_margin;break;case'top_right':x=h_range.end-legend_margin-legend_width;y=v_range.end-legend_margin;break;case'center_right':x=h_range.end-legend_margin-legend_width;y=(v_range.end+v_range.start)/2+legend_height/2;break;case'bottom_right':x=h_range.end-legend_margin-legend_width;y=v_range.start+legend_margin+legend_height;break;case'bottom_center':x=(h_range.end+h_range.start)/2-legend_width/2;y=v_range.start+legend_margin+legend_height;break;case'bottom_left':x=h_range.start+legend_margin;y=v_range.start+legend_margin+legend_height;break;case'center_left':x=h_range.start+legend_margin;y=(v_range.end+v_range.start)/2+legend_height/2;break;case'center':x=(h_range.end+h_range.start)/2-legend_width/2;y=(v_range.end+v_range.start)/2+legend_height/2;}}
else if(types_1.isArray(location)&&location.length===2){x=location[0],y=location[1];}
sx=this.plot_view.canvas.vx_to_sx(x);sy=this.plot_view.canvas.vy_to_sy(y);return{sx:sx,sy:sy};};ColorBarView.prototype.render=function(){var ctx,frame_offset,image_offset,location,panel_offset;if(!this.model.visible){return;}
ctx=this.plot_view.canvas_view.ctx;ctx.save();if(this.model.panel!=null){panel_offset=this._get_panel_offset();ctx.translate(panel_offset.x,panel_offset.y);frame_offset=this._get_frame_offset();ctx.translate(frame_offset.x,frame_offset.y);}
location=this.compute_legend_location();ctx.translate(location.sx,location.sy);this._draw_bbox(ctx);image_offset=this._get_image_offset();ctx.translate(image_offset.x,image_offset.y);this._draw_image(ctx);if((this.model.color_mapper.low!=null)&&(this.model.color_mapper.high!=null)){this._draw_major_ticks(ctx);this._draw_minor_ticks(ctx);this._draw_major_labels(ctx);}
if(this.model.title){this._draw_title(ctx);}
return ctx.restore();};ColorBarView.prototype._draw_bbox=function(ctx){var bbox;bbox=this.compute_legend_dimensions();ctx.save();if(this.visuals.background_fill.doit){this.visuals.background_fill.set_value(ctx);ctx.fillRect(0,0,bbox.width,bbox.height);}
if(this.visuals.border_line.doit){this.visuals.border_line.set_value(ctx);ctx.strokeRect(0,0,bbox.width,bbox.height);}
return ctx.restore();};ColorBarView.prototype._draw_image=function(ctx){var image;image=this.model._computed_image_dimensions();ctx.save();ctx.setImageSmoothingEnabled(false);ctx.globalAlpha=this.model.scale_alpha;ctx.drawImage(this.image,0,0,image.width,image.height);if(this.visuals.bar_line.doit){this.visuals.bar_line.set_value(ctx);ctx.strokeRect(0,0,image.width,image.height);}
return ctx.restore();};ColorBarView.prototype._draw_major_ticks=function(ctx){var i,image,k,nx,ny,ref,ref1,ref2,ref3,sx,sy,tin,tout,x_offset,y_offset;if(!this.visuals.major_tick_line.doit){return;}
ref=this.model._normals(),nx=ref[0],ny=ref[1];image=this.model._computed_image_dimensions();ref1=[image.width*nx,image.height*ny],x_offset=ref1[0],y_offset=ref1[1];ref2=this.model._tick_coordinates().major,sx=ref2[0],sy=ref2[1];tin=this.model.major_tick_in;tout=this.model.major_tick_out;ctx.save();ctx.translate(x_offset,y_offset);this.visuals.major_tick_line.set_value(ctx);for(i=k=0,ref3=sx.length;0<=ref3?k<ref3:k>ref3;i=0<=ref3?++k:--k){ctx.beginPath();ctx.moveTo(Math.round(sx[i]+nx*tout),Math.round(sy[i]+ny*tout));ctx.lineTo(Math.round(sx[i]-nx*tin),Math.round(sy[i]-ny*tin));ctx.stroke();}
return ctx.restore();};ColorBarView.prototype._draw_minor_ticks=function(ctx){var i,image,k,nx,ny,ref,ref1,ref2,ref3,sx,sy,tin,tout,x_offset,y_offset;if(!this.visuals.minor_tick_line.doit){return;}
ref=this.model._normals(),nx=ref[0],ny=ref[1];image=this.model._computed_image_dimensions();ref1=[image.width*nx,image.height*ny],x_offset=ref1[0],y_offset=ref1[1];ref2=this.model._tick_coordinates().minor,sx=ref2[0],sy=ref2[1];tin=this.model.minor_tick_in;tout=this.model.minor_tick_out;ctx.save();ctx.translate(x_offset,y_offset);this.visuals.minor_tick_line.set_value(ctx);for(i=k=0,ref3=sx.length;0<=ref3?k<ref3:k>ref3;i=0<=ref3?++k:--k){ctx.beginPath();ctx.moveTo(Math.round(sx[i]+nx*tout),Math.round(sy[i]+ny*tout));ctx.lineTo(Math.round(sx[i]-nx*tin),Math.round(sy[i]-ny*tin));ctx.stroke();}
return ctx.restore();};ColorBarView.prototype._draw_major_labels=function(ctx){var formatted_labels,i,image,k,labels,nx,ny,ref,ref1,ref2,ref3,ref4,standoff,sx,sy,x_offset,x_standoff,y_offset,y_standoff;if(!this.visuals.major_label_text.doit){return;}
ref=this.model._normals(),nx=ref[0],ny=ref[1];image=this.model._computed_image_dimensions();ref1=[image.width*nx,image.height*ny],x_offset=ref1[0],y_offset=ref1[1];standoff=this.model.label_standoff+this.model._tick_extent();ref2=[standoff*nx,standoff*ny],x_standoff=ref2[0],y_standoff=ref2[1];ref3=this.model._tick_coordinates().major,sx=ref3[0],sy=ref3[1];labels=this.model._tick_coordinates().major_labels;formatted_labels=this.model.formatter.doFormat(labels,null);this.visuals.major_label_text.set_value(ctx);ctx.save();ctx.translate(x_offset+x_standoff,y_offset+y_standoff);for(i=k=0,ref4=sx.length;0<=ref4?k<ref4:k>ref4;i=0<=ref4?++k:--k){ctx.fillText(formatted_labels[i],Math.round(sx[i]+nx*this.model.label_standoff),Math.round(sy[i]+ny*this.model.label_standoff));}
return ctx.restore();};ColorBarView.prototype._draw_title=function(ctx){if(!this.visuals.title_text.doit){return;}
ctx.save();this.visuals.title_text.set_value(ctx);ctx.fillText(this.model.title,0,-this.model.title_standoff);return ctx.restore();};ColorBarView.prototype._get_label_extent=function(){var ctx,formatted_labels,label,label_extent;if((this.model.color_mapper.low!=null)&&(this.model.color_mapper.high!=null)){ctx=this.plot_view.canvas_view.ctx;ctx.save();this.visuals.major_label_text.set_value(ctx);switch(this.model.orientation){case"vertical":formatted_labels=this.model.formatter.doFormat(this.model._tick_coordinates().major_labels);label_extent=array_1.max((function(){var k,len,results;results=[];for(k=0,len=formatted_labels.length;k<len;k++){label=formatted_labels[k];results.push(ctx.measureText(label.toString()).width);}
return results;})());break;case"horizontal":label_extent=text_util.get_text_height(this.visuals.major_label_text.font_value()).height;}
label_extent+=this.model.label_standoff;ctx.restore();}
else{label_extent=0;}
return label_extent;};ColorBarView.prototype._get_frame_offset=function(){var frame,panel,ref,xoff,yoff;ref=[0,0],xoff=ref[0],yoff=ref[1];panel=this.model.panel;frame=this.plot_view.frame;switch(panel.side){case"left":case"right":yoff=Math.abs(panel.top-frame.top);break;case"above":case"below":xoff=Math.abs(frame.left);}
return{x:xoff,y:yoff};};ColorBarView.prototype._get_image_offset=function(){var x,y;x=this.model.padding;y=this.model.padding+this.model._title_extent();return{x:x,y:y};};return ColorBarView;})(annotation_1.AnnotationView);exports.ColorBar=(function(superClass){extend(ColorBar,superClass);function ColorBar(){return ColorBar.__super__.constructor.apply(this,arguments);}
ColorBar.prototype.default_view=exports.ColorBarView;ColorBar.prototype.type='ColorBar';ColorBar.mixins(['text:major_label_','text:title_','line:major_tick_','line:minor_tick_','line:border_','line:bar_','fill:background_']);ColorBar.define({location:[p.Any,'top_right'],orientation:[p.Orientation,'vertical'],title:[p.String],title_standoff:[p.Number,2],height:[p.Any,'auto'],width:[p.Any,'auto'],scale_alpha:[p.Number,1.0],ticker:[p.Instance,function(){return new basic_ticker_1.BasicTicker();}],formatter:[p.Instance,function(){return new basic_tick_formatter_1.BasicTickFormatter();}],color_mapper:[p.Instance],label_standoff:[p.Number,5],margin:[p.Number,30],padding:[p.Number,10],major_tick_in:[p.Number,5],major_tick_out:[p.Number,0],minor_tick_in:[p.Number,0],minor_tick_out:[p.Number,0]});ColorBar.override({background_fill_color:"#ffffff",background_fill_alpha:0.95,bar_line_color:null,border_line_color:null,major_label_text_align:"center",major_label_text_baseline:"middle",major_label_text_font_size:"8pt",major_tick_line_color:"#ffffff",minor_tick_line_color:null,title_text_font_size:"10pt",title_text_font_style:"italic"});ColorBar.prototype.initialize=function(attrs,options){return ColorBar.__super__.initialize.call(this,attrs,options);};ColorBar.prototype._normals=function(){var i,j,ref,ref1;if(this.orientation==='vertical'){ref=[1,0],i=ref[0],j=ref[1];}
else{ref1=[0,1],i=ref1[0],j=ref1[1];}
return[i,j];};ColorBar.prototype._title_extent=function(){var font_value,title_extent;font_value=this.title_text_font+" "+this.title_text_font_size+" "+this.title_text_font_style;title_extent=this.title?text_util.get_text_height(font_value).height+this.title_standoff:0;return title_extent;};ColorBar.prototype._tick_extent=function(){var tick_extent;if((this.color_mapper.low!=null)&&(this.color_mapper.high!=null)){tick_extent=array_1.max([this.major_tick_out,this.minor_tick_out]);}
else{tick_extent=0;}
return tick_extent;};ColorBar.prototype._computed_image_dimensions=function(){var frame_height,frame_width,height,title_extent,width;frame_height=this.plot.plot_canvas.frame.height;frame_width=this.plot.plot_canvas.frame.width;title_extent=this._title_extent();switch(this.orientation){case"vertical":if(this.height==='auto'){if(this.panel!=null){height=frame_height-2*this.padding-title_extent;}
else{height=array_1.max([this.color_mapper.palette.length*SHORT_DIM,frame_height*LONG_DIM_MIN_SCALAR]);height=array_1.min([height,frame_height*LONG_DIM_MAX_SCALAR-2*this.padding-title_extent]);}}
else{height=this.height;}
width=this.width==='auto'?SHORT_DIM:this.width;break;case"horizontal":height=this.height==='auto'?SHORT_DIM:this.height;if(this.width==='auto'){if(this.panel!=null){width=frame_width-2*this.padding;}
else{width=array_1.max([this.color_mapper.palette.length*SHORT_DIM,frame_width*LONG_DIM_MIN_SCALAR]);width=array_1.min([width,frame_width*LONG_DIM_MAX_SCALAR-2*this.padding]);}}
else{width=this.width;}}
return{"height":height,"width":width};};ColorBar.prototype._tick_coordinate_mapper=function(scale_length){var mapper,mapping;mapping={'source_range':new range1d_1.Range1d({start:this.color_mapper.low,end:this.color_mapper.high}),'target_range':new range1d_1.Range1d({start:0,end:scale_length})};switch(this.color_mapper.type){case"LinearColorMapper":mapper=new linear_mapper_1.LinearMapper(mapping);break;case"LogColorMapper":mapper=new log_mapper_1.LogMapper(mapping);}
return mapper;};ColorBar.prototype._tick_coordinates=function(){var coord,end,i,ii,image_dimensions,j,k,l,major_coords,major_labels,majors,mapper,minor_coords,minors,ref,ref1,ref2,ref3,scale_length,start,ticks;image_dimensions=this._computed_image_dimensions();switch(this.orientation){case"vertical":scale_length=image_dimensions.height;break;case"horizontal":scale_length=image_dimensions.width;}
mapper=this._tick_coordinate_mapper(scale_length);ref=this._normals(),i=ref[0],j=ref[1];ref1=[this.color_mapper.low,this.color_mapper.high],start=ref1[0],end=ref1[1];ticks=this.ticker.get_ticks(start,end,null,null,this.ticker.desired_num_ticks);majors=ticks.major;minors=ticks.minor;major_coords=[[],[]];minor_coords=[[],[]];for(ii=k=0,ref2=majors.length;0<=ref2?k<ref2:k>ref2;ii=0<=ref2?++k:--k){if(majors[ii]<start||majors[ii]>end){continue;}
major_coords[i].push(majors[ii]);major_coords[j].push(0);}
for(ii=l=0,ref3=minors.length;0<=ref3?l<ref3:l>ref3;ii=0<=ref3?++l:--l){if(minors[ii]<start||minors[ii]>end){continue;}
minor_coords[i].push(minors[ii]);minor_coords[j].push(0);}
major_labels=major_coords[i].slice(0);major_coords[i]=mapper.v_map_to_target(major_coords[i]);minor_coords[i]=mapper.v_map_to_target(minor_coords[i]);if(this.orientation==='vertical'){major_coords[i]=new Float64Array((function(){var len,m,ref4,results;ref4=major_coords[i];results=[];for(m=0,len=ref4.length;m<len;m++){coord=ref4[m];results.push(scale_length-coord);}
return results;})());minor_coords[i]=new Float64Array((function(){var len,m,ref4,results;ref4=minor_coords[i];results=[];for(m=0,len=ref4.length;m<len;m++){coord=ref4[m];results.push(scale_length-coord);}
return results;})());}
return{"major":major_coords,"minor":minor_coords,"major_labels":major_labels};};return ColorBar;})(annotation_1.Annotation);},{"../formatters/basic_tick_formatter":"models/formatters/basic_tick_formatter","../mappers/linear_color_mapper":"models/mappers/linear_color_mapper","../mappers/linear_mapper":"models/mappers/linear_mapper","../mappers/log_mapper":"models/mappers/log_mapper","../ranges/range1d":"models/ranges/range1d","../tickers/basic_ticker":"models/tickers/basic_ticker","./annotation":"models/annotations/annotation","core/properties":"core/properties","core/util/array":"core/util/array","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var annotation_1=require("./annotation");exports.Annotation=annotation_1.Annotation;var arrow_1=require("./arrow");exports.Arrow=arrow_1.Arrow;var arrow_head_1=require("./arrow_head");exports.ArrowHead=arrow_head_1.ArrowHead;var arrow_head_2=require("./arrow_head");exports.OpenHead=arrow_head_2.OpenHead;var arrow_head_3=require("./arrow_head");exports.NormalHead=arrow_head_3.NormalHead;var arrow_head_4=require("./arrow_head");exports.VeeHead=arrow_head_4.VeeHead;var box_annotation_1=require("./box_annotation");exports.BoxAnnotation=box_annotation_1.BoxAnnotation;var color_bar_1=require("./color_bar");exports.ColorBar=color_bar_1.ColorBar;var label_1=require("./label");exports.Label=label_1.Label;var label_set_1=require("./label_set");exports.LabelSet=label_set_1.LabelSet;var legend_1=require("./legend");exports.Legend=legend_1.Legend;var legend_item_1=require("./legend_item");exports.LegendItem=legend_item_1.LegendItem;var poly_annotation_1=require("./poly_annotation");exports.PolyAnnotation=poly_annotation_1.PolyAnnotation;var span_1=require("./span");exports.Span=span_1.Span;var text_annotation_1=require("./text_annotation");exports.TextAnnotation=text_annotation_1.TextAnnotation;var title_1=require("./title");exports.Title=title_1.Title;var tooltip_1=require("./tooltip");exports.Tooltip=tooltip_1.Tooltip;},{"./annotation":"models/annotations/annotation","./arrow":"models/annotations/arrow","./arrow_head":"models/annotations/arrow_head","./box_annotation":"models/annotations/box_annotation","./color_bar":"models/annotations/color_bar","./label":"models/annotations/label","./label_set":"models/annotations/label_set","./legend":"models/annotations/legend","./legend_item":"models/annotations/legend_item","./poly_annotation":"models/annotations/poly_annotation","./span":"models/annotations/span","./text_annotation":"models/annotations/text_annotation","./title":"models/annotations/title","./tooltip":"models/annotations/tooltip"}],"models/annotations/label":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var text_annotation_1=require("./text_annotation");var dom_1=require("core/dom");var p=require("core/properties");exports.LabelView=(function(superClass){extend(LabelView,superClass);function LabelView(){return LabelView.__super__.constructor.apply(this,arguments);}
LabelView.prototype.initialize=function(options){LabelView.__super__.initialize.call(this,options);this.canvas=this.plot_model.canvas;this.xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];this.ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];return this.visuals.warm_cache(null);};LabelView.prototype._get_size=function(){var ctx,height,side,width;ctx=this.plot_view.canvas_view.ctx;this.visuals.text.set_value(ctx);side=this.model.panel.side;if(side==="above"||side==="below"){height=ctx.measureText(this.model.text).ascent;return height;}
if(side==='left'||side==='right'){width=ctx.measureText(this.model.text).width;return width;}};LabelView.prototype.render=function(){var angle,ctx,panel_offset,sx,sy,vx,vy;if(!this.model.visible&&this.model.render_mode==='css'){dom_1.hide(this.el);}
if(!this.model.visible){return;}
ctx=this.plot_view.canvas_view.ctx;switch(this.model.angle_units){case"rad":angle=-1*this.model.angle;break;case"deg":angle=-1*this.model.angle*Math.PI/180.0;}
if(this.model.x_units==="data"){vx=this.xmapper.map_to_target(this.model.x);}
else{vx=this.model.x;}
sx=this.canvas.vx_to_sx(vx);if(this.model.y_units==="data"){vy=this.ymapper.map_to_target(this.model.y);}
else{vy=this.model.y;}
sy=this.canvas.vy_to_sy(vy);if(this.model.panel!=null){panel_offset=this._get_panel_offset();sx+=panel_offset.x;sy+=panel_offset.y;}
if(this.model.render_mode==='canvas'){return this._canvas_text(ctx,this.model.text,sx+this.model.x_offset,sy-this.model.y_offset,angle);}
else{return this._css_text(ctx,this.model.text,sx+this.model.x_offset,sy-this.model.y_offset,angle);}};return LabelView;})(text_annotation_1.TextAnnotationView);exports.Label=(function(superClass){extend(Label,superClass);function Label(){return Label.__super__.constructor.apply(this,arguments);}
Label.prototype.default_view=exports.LabelView;Label.prototype.type='Label';Label.mixins(['text','line:border_','fill:background_']);Label.define({x:[p.Number],x_units:[p.SpatialUnits,'data'],y:[p.Number],y_units:[p.SpatialUnits,'data'],text:[p.String],angle:[p.Angle,0],angle_units:[p.AngleUnits,'rad'],x_offset:[p.Number,0],y_offset:[p.Number,0],x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],render_mode:[p.RenderMode,'canvas']});Label.override({background_fill_color:null,border_line_color:null});return Label;})(text_annotation_1.TextAnnotation);},{"./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/annotations/label_set":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var text_annotation_1=require("./text_annotation");var column_data_source_1=require("../sources/column_data_source");var dom_1=require("core/dom");var p=require("core/properties");var types_1=require("core/util/types");exports.LabelSetView=(function(superClass){extend(LabelSetView,superClass);function LabelSetView(){return LabelSetView.__super__.constructor.apply(this,arguments);}
LabelSetView.prototype.initialize=function(options){var i,j,ref,results;LabelSetView.__super__.initialize.call(this,options);this.xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];this.ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];this.set_data(this.model.source);if(this.model.render_mode==='css'){results=[];for(i=j=0,ref=this._text.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){this.title_div=dom_1.div({"class":'bk-annotation-child',style:{display:"none"}});results.push(this.el.appendChild(this.title_div));}
return results;}};LabelSetView.prototype.bind_bokeh_events=function(){if(this.model.render_mode==='css'){this.listenTo(this.model,'change',function(){this.set_data(this.model.source);return this.render();});return this.listenTo(this.model.source,'change',function(){this.set_data(this.model.source);return this.render();});}
else{this.listenTo(this.model,'change',function(){this.set_data(this.model.source);return this.plot_view.request_render();});return this.listenTo(this.model.source,'change',function(){this.set_data(this.model.source);return this.plot_view.request_render();});}};LabelSetView.prototype.set_data=function(source){LabelSetView.__super__.set_data.call(this,source);return this.visuals.warm_cache(source);};LabelSetView.prototype._map_data=function(){var sx,sy,vx,vy;if(this.model.x_units==="data"){vx=this.xmapper.v_map_to_target(this._x);}
else{vx=this._x.slice(0);}
sx=this.canvas.v_vx_to_sx(vx);if(this.model.y_units==="data"){vy=this.ymapper.v_map_to_target(this._y);}
else{vy=this._y.slice(0);}
sy=this.canvas.v_vy_to_sy(vy);return[sx,sy];};LabelSetView.prototype.render=function(){var ctx,i,j,k,ref,ref1,ref2,results,results1,sx,sy;if(!this.model.visible&&this.model.render_mode==='css'){dom_1.hide(this.el);}
if(!this.model.visible){return;}
ctx=this.plot_view.canvas_view.ctx;ref=this._map_data(),sx=ref[0],sy=ref[1];if(this.model.render_mode==='canvas'){results=[];for(i=j=0,ref1=this._text.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){results.push(this._v_canvas_text(ctx,i,this._text[i],sx[i]+this._x_offset[i],sy[i]-this._y_offset[i],this._angle[i]));}
return results;}
else{results1=[];for(i=k=0,ref2=this._text.length;0<=ref2?k<ref2:k>ref2;i=0<=ref2?++k:--k){results1.push(this._v_css_text(ctx,i,this._text[i],sx[i]+this._x_offset[i],sy[i]-this._y_offset[i],this._angle[i]));}
return results1;}};LabelSetView.prototype._get_size=function(){var ctx,height,side,width;ctx=this.plot_view.canvas_view.ctx;this.visuals.text.set_value(ctx);side=this.model.panel.side;if(side==="above"||side==="below"){height=ctx.measureText(this._text[0]).ascent;return height;}
if(side==='left'||side==='right'){width=ctx.measureText(this._text[0]).width;return width;}};LabelSetView.prototype._v_canvas_text=function(ctx,i,text,sx,sy,angle){var bbox_dims;this.visuals.text.set_vectorize(ctx,i);bbox_dims=this._calculate_bounding_box_dimensions(ctx,text);ctx.save();ctx.beginPath();ctx.translate(sx,sy);ctx.rotate(angle);ctx.rect(bbox_dims[0],bbox_dims[1],bbox_dims[2],bbox_dims[3]);if(this.visuals.background_fill.doit){this.visuals.background_fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.border_line.doit){this.visuals.border_line.set_vectorize(ctx,i);ctx.stroke();}
if(this.visuals.text.doit){this.visuals.text.set_vectorize(ctx,i);ctx.fillText(text,0,0);}
return ctx.restore();};LabelSetView.prototype._v_css_text=function(ctx,i,text,sx,sy,angle){var bbox_dims,el,ld,line_dash;el=this.el.childNodes[i];el.textContent=text;this.visuals.text.set_vectorize(ctx,i);bbox_dims=this._calculate_bounding_box_dimensions(ctx,text);ld=this.visuals.border_line.line_dash.value();if(types_1.isArray(ld)){line_dash=ld.length<2?"solid":"dashed";}
if(types_1.isString(ld)){line_dash=ld;}
this.visuals.border_line.set_vectorize(ctx,i);this.visuals.background_fill.set_vectorize(ctx,i);el.style.position='absolute';el.style.left=(sx+bbox_dims[0])+"px";el.style.top=(sy+bbox_dims[1])+"px";el.style.color=""+(this.visuals.text.text_color.value());el.style.opacity=""+(this.visuals.text.text_alpha.value());el.style.font=""+(this.visuals.text.font_value());el.style.lineHeight="normal";if(angle){el.style.transform="rotate("+angle+"rad)";}
if(this.visuals.background_fill.doit){el.style.backgroundColor=""+(this.visuals.background_fill.color_value());}
if(this.visuals.border_line.doit){el.style.borderStyle=""+line_dash;el.style.borderWidth=(this.visuals.border_line.line_width.value())+"px";el.style.borderColor=""+(this.visuals.border_line.color_value());}
return dom_1.show(el);};return LabelSetView;})(text_annotation_1.TextAnnotationView);exports.LabelSet=(function(superClass){extend(LabelSet,superClass);function LabelSet(){return LabelSet.__super__.constructor.apply(this,arguments);}
LabelSet.prototype.default_view=exports.LabelSetView;LabelSet.prototype.type='Label';LabelSet.mixins(['text','line:border_','fill:background_']);LabelSet.define({x:[p.NumberSpec],y:[p.NumberSpec],x_units:[p.SpatialUnits,'data'],y_units:[p.SpatialUnits,'data'],text:[p.StringSpec,{field:"text"}],angle:[p.AngleSpec,0],x_offset:[p.NumberSpec,{value:0}],y_offset:[p.NumberSpec,{value:0}],source:[p.Instance,function(){return new column_data_source_1.ColumnDataSource();}],x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],render_mode:[p.RenderMode,'canvas']});LabelSet.override({background_fill_color:null,border_line_color:null});return LabelSet;})(text_annotation_1.TextAnnotation);},{"../sources/column_data_source":"models/sources/column_data_source","./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/annotations/legend":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var p=require("core/properties");var text_1=require("core/util/text");var bbox_1=require("core/util/bbox");var array_1=require("core/util/array");var object_1=require("core/util/object");var types_1=require("core/util/types");exports.LegendView=(function(superClass){extend(LegendView,superClass);function LegendView(){return LegendView.__super__.constructor.apply(this,arguments);}
LegendView.prototype.initialize=function(options){return LegendView.__super__.initialize.call(this,options);};LegendView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change:visible',this.plot_view.request_render);};LegendView.prototype.compute_legend_bbox=function(){var ctx,glyph_height,glyph_width,h_range,i,label_height,label_standoff,label_width,legend_height,legend_margin,legend_names,legend_padding,legend_spacing,legend_width,len,location,max_label_width,name,panel,ref,ref1,v_range,width,x,y;legend_names=this.model.get_legend_names();glyph_height=this.model.glyph_height;glyph_width=this.model.glyph_width;label_height=this.model.label_height;label_width=this.model.label_width;this.max_label_height=array_1.max([text_1.get_text_height(this.visuals.label_text.font_value()).height,label_height,glyph_height]);ctx=this.plot_view.canvas_view.ctx;ctx.save();this.visuals.label_text.set_value(ctx);this.text_widths={};for(i=0,len=legend_names.length;i<len;i++){name=legend_names[i];this.text_widths[name]=array_1.max([ctx.measureText(name).width,label_width]);}
ctx.restore();max_label_width=array_1.max(object_1.values(this.text_widths));legend_margin=this.model.margin;legend_padding=this.model.padding;legend_spacing=this.model.spacing;label_standoff=this.model.label_standoff;if(this.model.orientation==="vertical"){legend_height=legend_names.length*this.max_label_height+(legend_names.length-1)*legend_spacing+2*legend_padding;legend_width=max_label_width+glyph_width+label_standoff+2*legend_padding;}
else{legend_width=2*legend_padding+(legend_names.length-1)*legend_spacing;ref=this.text_widths;for(name in ref){width=ref[name];legend_width+=array_1.max([width,label_width])+glyph_width+label_standoff;}
legend_height=this.max_label_height+2*legend_padding;}
panel=(ref1=this.model.panel)!=null?ref1:this.plot_view.frame;h_range={start:panel.left,end:panel.right};v_range={start:panel.bottom,end:panel.top};location=this.model.location;if(types_1.isString(location)){switch(location){case'top_left':x=h_range.start+legend_margin;y=v_range.end-legend_margin;break;case'top_center':x=(h_range.end+h_range.start)/2-legend_width/2;y=v_range.end-legend_margin;break;case'top_right':x=h_range.end-legend_margin-legend_width;y=v_range.end-legend_margin;break;case'center_right':x=h_range.end-legend_margin-legend_width;y=(v_range.end+v_range.start)/2+legend_height/2;break;case'bottom_right':x=h_range.end-legend_margin-legend_width;y=v_range.start+legend_margin+legend_height;break;case'bottom_center':x=(h_range.end+h_range.start)/2-legend_width/2;y=v_range.start+legend_margin+legend_height;break;case'bottom_left':x=h_range.start+legend_margin;y=v_range.start+legend_margin+legend_height;break;case'center_left':x=h_range.start+legend_margin;y=(v_range.end+v_range.start)/2+legend_height/2;break;case'center':x=(h_range.end+h_range.start)/2-legend_width/2;y=(v_range.end+v_range.start)/2+legend_height/2;}}
else if(types_1.isArray(location)&&location.length===2){x=location[0],y=location[1];x+=h_range.start;y+=v_range.start+legend_height;}
x=this.plot_view.canvas.vx_to_sx(x);y=this.plot_view.canvas.vy_to_sy(y);return{x:x,y:y,width:legend_width,height:legend_height};};LegendView.prototype.bbox=function(){var height,ref,width,x,y;ref=this.compute_legend_bbox(),x=ref.x,y=ref.y,width=ref.width,height=ref.height;return new bbox_1.BBox({x0:x,y0:y,x1:x+width,y1:y+height});};LegendView.prototype.on_hit=function(sx,sy){var bbox,field,glyph_height,glyph_width,h,i,item,j,k,l,label,label_standoff,labels,legend_bbox,legend_spacing,len,len1,len2,len3,r,ref,ref1,ref2,ref3,ref4,vertical,w,x1,x2,xoffset,y1,y2,yoffset;glyph_height=this.model.glyph_height;glyph_width=this.model.glyph_width;legend_spacing=this.model.spacing;label_standoff=this.model.label_standoff;xoffset=yoffset=this.model.padding;legend_bbox=this.compute_legend_bbox();vertical=this.model.orientation==="vertical";ref=this.model.items;for(i=0,len=ref.length;i<len;i++){item=ref[i];labels=item.get_labels_list_from_label_prop();field=item.get_field_from_label_prop();for(j=0,len1=labels.length;j<len1;j++){label=labels[j];x1=legend_bbox.x+xoffset;y1=legend_bbox.y+yoffset;x2=x1+glyph_width;y2=y1+glyph_height;if(vertical){ref1=[legend_bbox.width-2*this.model.padding,this.max_label_height],w=ref1[0],h=ref1[1];}
else{ref2=[this.text_widths[label]+glyph_width+label_standoff,this.max_label_height],w=ref2[0],h=ref2[1];}
bbox=new bbox_1.BBox({x0:x1,y0:y1,x1:x1+w,y1:y1+h});if(bbox.contains(sx,sy)){switch(this.model.click_policy){case"hide":ref3=item.renderers;for(k=0,len2=ref3.length;k<len2;k++){r=ref3[k];r.visible=!r.visible;}
break;case"mute":ref4=item.renderers;for(l=0,len3=ref4.length;l<len3;l++){r=ref4[l];r.muted=!r.muted;}}
return true;}
if(vertical){yoffset+=this.max_label_height+legend_spacing;}
else{xoffset+=this.text_widths[label]+glyph_width+label_standoff+legend_spacing;}}}
return false;};LegendView.prototype.render=function(){var bbox,ctx;if(!this.model.visible){return;}
if(this.model.items.length===0){return;}
ctx=this.plot_view.canvas_view.ctx;bbox=this.compute_legend_bbox();ctx.save();this._draw_legend_box(ctx,bbox);this._draw_legend_items(ctx,bbox);return ctx.restore();};LegendView.prototype._draw_legend_box=function(ctx,bbox){ctx.beginPath();ctx.rect(bbox.x,bbox.y,bbox.width,bbox.height);this.visuals.background_fill.set_value(ctx);ctx.fill();if(this.visuals.border_line.doit){this.visuals.border_line.set_value(ctx);return ctx.stroke();}};LegendView.prototype._draw_legend_items=function(ctx,bbox){var active,field,glyph_height,glyph_width,h,i,item,j,k,label,label_standoff,labels,legend_spacing,len,len1,len2,r,ref,ref1,ref2,ref3,vertical,view,w,x1,x2,xoffset,y1,y2,yoffset;glyph_height=this.model.glyph_height;glyph_width=this.model.glyph_width;legend_spacing=this.model.spacing;label_standoff=this.model.label_standoff;xoffset=yoffset=this.model.padding;vertical=this.model.orientation==="vertical";ref=this.model.items;for(i=0,len=ref.length;i<len;i++){item=ref[i];labels=item.get_labels_list_from_label_prop();field=item.get_field_from_label_prop();if(labels.length===0){continue;}
active=(function(){switch(this.model.click_policy){case"none":return true;case"hide":return array_1.all(item.renderers,function(r){return r.visible;});case"mute":return array_1.all(item.renderers,function(r){return!r.muted;});}}).call(this);for(j=0,len1=labels.length;j<len1;j++){label=labels[j];x1=bbox.x+xoffset;y1=bbox.y+yoffset;x2=x1+glyph_width;y2=y1+glyph_height;if(vertical){yoffset+=this.max_label_height+legend_spacing;}
else{xoffset+=this.text_widths[label]+glyph_width+label_standoff+legend_spacing;}
this.visuals.label_text.set_value(ctx);ctx.fillText(label,x2+label_standoff,y1+this.max_label_height/2.0);ref1=item.renderers;for(k=0,len2=ref1.length;k<len2;k++){r=ref1[k];view=this.plot_view.renderer_views[r.id];view.draw_legend(ctx,x1,x2,y1,y2,field,label);}
if(!active){if(vertical){ref2=[bbox.width-2*this.model.padding,this.max_label_height],w=ref2[0],h=ref2[1];}
else{ref3=[this.text_widths[label]+glyph_width+label_standoff,this.max_label_height],w=ref3[0],h=ref3[1];}
ctx.beginPath();ctx.rect(x1,y1,w,h);this.visuals.inactive_fill.set_value(ctx);ctx.fill();}}}
return null;};LegendView.prototype._get_size=function(){var bbox,side;bbox=this.compute_legend_bbox();side=this.model.panel.side;if(side==='above'||side==='below'){return bbox.height;}
if(side==='left'||side==='right'){return bbox.width;}};return LegendView;})(annotation_1.AnnotationView);exports.Legend=(function(superClass){extend(Legend,superClass);function Legend(){return Legend.__super__.constructor.apply(this,arguments);}
Legend.prototype.default_view=exports.LegendView;Legend.prototype.type='Legend';Legend.prototype.cursor=function(){if(this.click_policy==="none"){return null;}
else{return"pointer";}};Legend.prototype.get_legend_names=function(){var i,item,labels,legend_names,len,ref;legend_names=[];ref=this.items;for(i=0,len=ref.length;i<len;i++){item=ref[i];labels=item.get_labels_list_from_label_prop();legend_names=legend_names.concat(labels);}
return legend_names;};Legend.mixins(['text:label_','fill:inactive_','line:border_','fill:background_']);Legend.define({orientation:[p.Orientation,'vertical'],location:[p.Any,'top_right'],label_standoff:[p.Number,5],glyph_height:[p.Number,20],glyph_width:[p.Number,20],label_height:[p.Number,20],label_width:[p.Number,20],margin:[p.Number,10],padding:[p.Number,10],spacing:[p.Number,3],items:[p.Array,[]],click_policy:[p.Any,"none"]});Legend.override({border_line_color:"#e5e5e5",border_line_alpha:0.5,border_line_width:1,background_fill_color:"#ffffff",background_fill_alpha:0.95,inactive_fill_color:"white",inactive_fill_alpha:0.9,label_text_font_size:"10pt",label_text_baseline:"middle"});return Legend;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/properties":"core/properties","core/util/array":"core/util/array","core/util/bbox":"core/util/bbox","core/util/object":"core/util/object","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/legend_item":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var model_1=require("../../model");var p=require("core/properties");var logging_1=require("core/logging");var array_1=require("core/util/array");var column_data_source_1=require("../../models/sources/column_data_source");exports.LegendItem=(function(superClass){extend(LegendItem,superClass);function LegendItem(){this.get_labels_list_from_label_prop=bind(this.get_labels_list_from_label_prop,this);this.get_field_from_label_prop=bind(this.get_field_from_label_prop,this);return LegendItem.__super__.constructor.apply(this,arguments);}
LegendItem.prototype.type="LegendItem";LegendItem.prototype._check_data_sources_on_renderers=function(){var field,i,len,r,ref,source;field=this.get_field_from_label_prop();if(field!=null){if(this.renderers.length<1){return false;}
source=this.renderers[0].data_source;if(source!=null){ref=this.renderers;for(i=0,len=ref.length;i<len;i++){r=ref[i];if(r.data_source!==source){return false;}}}}
return true;};LegendItem.prototype._check_field_label_on_data_source=function(){var field,source;field=this.get_field_from_label_prop();if(field!=null){if(this.renderers.length<1){return false;}
source=this.renderers[0].data_source;if((source!=null)&&indexOf.call(source.columns(),field)<0){return false;}}
return true;};LegendItem.prototype.initialize=function(attrs,options){var data_source_validation,field_validation;LegendItem.__super__.initialize.call(this,attrs,options);data_source_validation=this._check_data_sources_on_renderers();if(!data_source_validation){logging_1.logger.error("Non matching data sources on legend item renderers");}
field_validation=this._check_field_label_on_data_source();if(!field_validation){return logging_1.logger.error("Bad column name on label: "+this.label);}};LegendItem.define({label:[p.StringSpec,null],renderers:[p.Array,[]]});LegendItem.prototype.get_field_from_label_prop=function(){if((this.label!=null)&&(this.label.field!=null)){return this.label.field;}};LegendItem.prototype.get_labels_list_from_label_prop=function(){var data,field,source;if((this.label!=null)&&(this.label.value!=null)){return[this.label.value];}
field=this.get_field_from_label_prop();if(field!=null){if(this.renderers[0]&&(this.renderers[0].data_source!=null)){source=this.renderers[0].data_source;}
else{return["No source found"];}
if(source instanceof column_data_source_1.ColumnDataSource){data=source.get_column(field);if(data!=null){return array_1.uniq(data);}
else{return["Invalid field"];}}}
return[];};return LegendItem;})(model_1.Model);},{"../../model":"model","../../models/sources/column_data_source":"models/sources/column_data_source","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/annotations/poly_annotation":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var p=require("core/properties");exports.PolyAnnotationView=(function(superClass){extend(PolyAnnotationView,superClass);function PolyAnnotationView(){return PolyAnnotationView.__super__.constructor.apply(this,arguments);}
PolyAnnotationView.prototype.bind_bokeh_events=function(){this.listenTo(this.model,'change',this.plot_view.request_render);return this.listenTo(this.model,'data_update',this.plot_view.request_render);};PolyAnnotationView.prototype.render=function(ctx){var canvas,i,j,ref,sx,sy,vx,vy,xs,ys;if(!this.model.visible){return;}
xs=this.model.xs;ys=this.model.ys;if(xs.length!==ys.length){return null;}
if(xs.length<3||ys.length<3){return null;}
canvas=this.plot_view.canvas;ctx=this.plot_view.canvas_view.ctx;for(i=j=0,ref=xs.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(this.model.xs_units==='screen'){vx=xs[i];}
if(this.model.ys_units==='screen'){vy=ys[i];}
sx=canvas.vx_to_sx(vx);sy=canvas.vy_to_sy(vy);if(i===0){ctx.beginPath();ctx.moveTo(sx,sy);}
else{ctx.lineTo(sx,sy);}}
ctx.closePath();if(this.visuals.line.doit){this.visuals.line.set_value(ctx);ctx.stroke();}
if(this.visuals.fill.doit){this.visuals.fill.set_value(ctx);return ctx.fill();}};return PolyAnnotationView;})(annotation_1.AnnotationView);exports.PolyAnnotation=(function(superClass){extend(PolyAnnotation,superClass);function PolyAnnotation(){return PolyAnnotation.__super__.constructor.apply(this,arguments);}
PolyAnnotation.prototype.default_view=exports.PolyAnnotationView;PolyAnnotation.prototype.type="PolyAnnotation";PolyAnnotation.mixins(['line','fill']);PolyAnnotation.define({xs:[p.Array,[]],xs_units:[p.SpatialUnits,'data'],ys:[p.Array,[]],ys_units:[p.SpatialUnits,'data'],x_range_name:[p.String,'default'],y_range_name:[p.String,'default']});PolyAnnotation.override({fill_color:"#fff9ba",fill_alpha:0.4,line_color:"#cccccc",line_alpha:0.3});PolyAnnotation.prototype.update=function(arg){var xs,ys;xs=arg.xs,ys=arg.ys;this.setv({xs:xs,ys:ys},{silent:true});return this.trigger('data_update');};return PolyAnnotation;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/properties":"core/properties"}],"models/annotations/span":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var dom_1=require("core/dom");var p=require("core/properties");exports.SpanView=(function(superClass){extend(SpanView,superClass);function SpanView(){return SpanView.__super__.constructor.apply(this,arguments);}
SpanView.prototype.initialize=function(options){SpanView.__super__.initialize.call(this,options);this.plot_view.canvas_overlays.appendChild(this.el);this.el.style.position="absolute";return dom_1.hide(this.el);};SpanView.prototype.bind_bokeh_events=function(){if(this.model.for_hover){return this.listenTo(this.model,'change:computed_location',this._draw_span);}
else{if(this.model.render_mode==='canvas'){this.listenTo(this.model,'change',this.plot_view.request_render);return this.listenTo(this.model,'change:location',this.plot_view.request_render);}
else{this.listenTo(this.model,'change',this.render);return this.listenTo(this.model,'change:location',this._draw_span);}}};SpanView.prototype.render=function(){if(!this.model.visible&&this.model.render_mode==='css'){dom_1.hide(this.el);}
if(!this.model.visible){return;}
return this._draw_span();};SpanView.prototype._draw_span=function(){var canvas,ctx,frame,height,loc,sleft,stop,width,xmapper,ymapper;if(this.model.for_hover){loc=this.model.computed_location;}
else{loc=this.model.location;}
if(loc==null){dom_1.hide(this.el);return;}
frame=this.plot_model.frame;canvas=this.plot_model.canvas;xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];if(this.model.dimension==='width'){stop=canvas.vy_to_sy(this._calc_dim(loc,ymapper));sleft=canvas.vx_to_sx(frame.left);width=frame.width;height=this.model.properties.line_width.value();}
else{stop=canvas.vy_to_sy(frame.top);sleft=canvas.vx_to_sx(this._calc_dim(loc,xmapper));width=this.model.properties.line_width.value();height=frame.height;}
if(this.model.render_mode==="css"){this.el.style.top=stop+"px";this.el.style.left=sleft+"px";this.el.style.width=width+"px";this.el.style.height=height+"px";this.el.style.zIndex=1000;this.el.style.backgroundColor=this.model.properties.line_color.value();this.el.style.opacity=this.model.properties.line_alpha.value();return dom_1.show(this.el);}
else if(this.model.render_mode==="canvas"){ctx=this.plot_view.canvas_view.ctx;ctx.save();ctx.beginPath();this.visuals.line.set_value(ctx);ctx.moveTo(sleft,stop);if(this.model.dimension==="width"){ctx.lineTo(sleft+width,stop);}
else{ctx.lineTo(sleft,stop+height);}
ctx.stroke();return ctx.restore();}};SpanView.prototype._calc_dim=function(location,mapper){var vdim;if(this.model.location_units==='data'){vdim=mapper.map_to_target(location);}
else{vdim=location;}
return vdim;};return SpanView;})(annotation_1.AnnotationView);exports.Span=(function(superClass){extend(Span,superClass);function Span(){return Span.__super__.constructor.apply(this,arguments);}
Span.prototype.default_view=exports.SpanView;Span.prototype.type='Span';Span.mixins(['line']);Span.define({render_mode:[p.RenderMode,'canvas'],x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],location:[p.Number,null],location_units:[p.SpatialUnits,'data'],dimension:[p.Dimension,'width']});Span.override({line_color:'black'});Span.internal({for_hover:[p.Boolean,false],computed_location:[p.Number,null]});return Span;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/annotations/text_annotation":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var dom_1=require("core/dom");var types_1=require("core/util/types");var text_1=require("core/util/text");exports.TextAnnotationView=(function(superClass){extend(TextAnnotationView,superClass);function TextAnnotationView(){return TextAnnotationView.__super__.constructor.apply(this,arguments);}
TextAnnotationView.prototype.initialize=function(options){TextAnnotationView.__super__.initialize.call(this,options);this.canvas=this.plot_model.canvas;this.frame=this.plot_model.frame;if(this.model.render_mode==='css'){this.el.classList.add('bk-annotation');return this.plot_view.canvas_overlays.appendChild(this.el);}};TextAnnotationView.prototype.bind_bokeh_events=function(){if(this.model.render_mode==='css'){return this.listenTo(this.model,'change',this.render);}
else{return this.listenTo(this.model,'change',this.plot_view.request_render);}};TextAnnotationView.prototype._calculate_text_dimensions=function(ctx,text){var height,width;width=ctx.measureText(text).width;height=text_1.get_text_height(this.visuals.text.font_value()).height;return[width,height];};TextAnnotationView.prototype._calculate_bounding_box_dimensions=function(ctx,text){var height,ref,width,x_offset,y_offset;ref=this._calculate_text_dimensions(ctx,text),width=ref[0],height=ref[1];switch(ctx.textAlign){case'left':x_offset=0;break;case'center':x_offset=-width/2;break;case'right':x_offset=-width;}
switch(ctx.textBaseline){case'top':y_offset=0.0;break;case'middle':y_offset=-0.5*height;break;case'bottom':y_offset=-1.0*height;break;case'alphabetic':y_offset=-0.8*height;break;case'hanging':y_offset=-0.17*height;break;case'ideographic':y_offset=-0.83*height;}
return[x_offset,y_offset,width,height];};TextAnnotationView.prototype._get_size=function(){var ctx;ctx=this.plot_view.canvas_view.ctx;this.visuals.text.set_value(ctx);return ctx.measureText(this.model.text).ascent;};TextAnnotationView.prototype.render=function(){return null;};TextAnnotationView.prototype._canvas_text=function(ctx,text,sx,sy,angle){var bbox_dims;this.visuals.text.set_value(ctx);bbox_dims=this._calculate_bounding_box_dimensions(ctx,text);ctx.save();ctx.beginPath();ctx.translate(sx,sy);if(angle){ctx.rotate(angle);}
ctx.rect(bbox_dims[0],bbox_dims[1],bbox_dims[2],bbox_dims[3]);if(this.visuals.background_fill.doit){this.visuals.background_fill.set_value(ctx);ctx.fill();}
if(this.visuals.border_line.doit){this.visuals.border_line.set_value(ctx);ctx.stroke();}
if(this.visuals.text.doit){this.visuals.text.set_value(ctx);ctx.fillText(text,0,0);}
return ctx.restore();};TextAnnotationView.prototype._css_text=function(ctx,text,sx,sy,angle){var bbox_dims,ld,line_dash;dom_1.hide(this.el);this.visuals.text.set_value(ctx);bbox_dims=this._calculate_bounding_box_dimensions(ctx,text);ld=this.visuals.border_line.line_dash.value();if(types_1.isArray(ld)){if(ld.length<2){line_dash="solid";}
else{line_dash="dashed";}}
if(types_1.isString(ld)){line_dash=ld;}
this.visuals.border_line.set_value(ctx);this.visuals.background_fill.set_value(ctx);this.el.style.position='absolute';this.el.style.left=(sx+bbox_dims[0])+"px";this.el.style.top=(sy+bbox_dims[1])+"px";this.el.style.color=""+(this.visuals.text.text_color.value());this.el.style.opacity=""+(this.visuals.text.text_alpha.value());this.el.style.font=""+(this.visuals.text.font_value());this.el.style.lineHeight="normal";if(angle){this.el.style.transform="rotate("+angle+"rad)";}
if(this.visuals.background_fill.doit){this.el.style.backgroundColor=""+(this.visuals.background_fill.color_value());}
if(this.visuals.border_line.doit){this.el.style.borderStyle=""+line_dash;this.el.style.borderWidth=(this.visuals.border_line.line_width.value())+"px";this.el.style.borderColor=""+(this.visuals.border_line.color_value());}
this.el.textContent=text;return dom_1.show(this.el);};return TextAnnotationView;})(annotation_1.AnnotationView);exports.TextAnnotation=(function(superClass){extend(TextAnnotation,superClass);function TextAnnotation(){return TextAnnotation.__super__.constructor.apply(this,arguments);}
TextAnnotation.prototype.type='TextAnnotation';TextAnnotation.prototype.default_view=exports.TextAnnotationView;return TextAnnotation;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/util/text":"core/util/text","core/util/types":"core/util/types"}],"models/annotations/title":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var text_annotation_1=require("./text_annotation");var dom_1=require("core/dom");var p=require("core/properties");var Visuals=require("core/visuals");exports.TitleView=(function(superClass){extend(TitleView,superClass);function TitleView(){return TitleView.__super__.constructor.apply(this,arguments);}
TitleView.prototype.initialize=function(options){var ctx;TitleView.__super__.initialize.call(this,options);this.visuals.text=new Visuals.Text(this.model);ctx=this.plot_view.canvas_view.ctx;ctx.save();this.model.panel.apply_label_text_heuristics(ctx,'justified');this.model.text_baseline=ctx.textBaseline;this.model.text_align=this.model.align;return ctx.restore();};TitleView.prototype._get_computed_location=function(){var height,ref,sx,sy,vx,vy,width;ref=this._calculate_text_dimensions(this.plot_view.canvas_view.ctx,this.text),width=ref[0],height=ref[1];switch(this.model.panel.side){case'left':vx=0;vy=this._get_text_location(this.model.align,this.frame.v_range)+this.model.offset;break;case'right':vx=this.canvas.right-1;vy=this.canvas.height-this._get_text_location(this.model.align,this.frame.v_range)-this.model.offset;break;case'above':vx=this._get_text_location(this.model.align,this.frame.h_range)+this.model.offset;vy=this.canvas.top-10;break;case'below':vx=this._get_text_location(this.model.align,this.frame.h_range)+this.model.offset;vy=0;}
sx=this.canvas.vx_to_sx(vx);sy=this.canvas.vy_to_sy(vy);return[sx,sy];};TitleView.prototype._get_text_location=function(alignment,range){var text_location;switch(alignment){case'left':text_location=range.start;break;case'center':text_location=(range.end+range.start)/2;break;case'right':text_location=range.end;}
return text_location;};TitleView.prototype.render=function(){var angle,ctx,ref,sx,sy;if(!this.model.visible&&this.model.render_mode==='css'){dom_1.hide(this.el);}
if(!this.model.visible){return;}
angle=this.model.panel.get_label_angle_heuristic('parallel');ref=this._get_computed_location(),sx=ref[0],sy=ref[1];ctx=this.plot_view.canvas_view.ctx;if(this.model.text===""||this.model.text===null){return;}
if(this.model.render_mode==='canvas'){return this._canvas_text(ctx,this.model.text,sx,sy,angle);}
else{return this._css_text(ctx,this.model.text,sx,sy,angle);}};TitleView.prototype._get_size=function(){var ctx,text;text=this.model.text;if(text===""||text===null){return 0;}
else{ctx=this.plot_view.canvas_view.ctx;this.visuals.text.set_value(ctx);return ctx.measureText(text).ascent+10;}};return TitleView;})(text_annotation_1.TextAnnotationView);exports.Title=(function(superClass){extend(Title,superClass);function Title(){return Title.__super__.constructor.apply(this,arguments);}
Title.prototype.default_view=exports.TitleView;Title.prototype.type='Title';Title.mixins(['line:border_','fill:background_']);Title.define({text:[p.String],text_font:[p.Font,'helvetica'],text_font_size:[p.FontSizeSpec,'10pt'],text_font_style:[p.FontStyle,'bold'],text_color:[p.ColorSpec,'#444444'],text_alpha:[p.NumberSpec,1.0],align:[p.TextAlign,'left'],offset:[p.Number,0],render_mode:[p.RenderMode,'canvas']});Title.override({background_fill_color:null,border_line_color:null});Title.internal({text_align:[p.TextAlign,'left'],text_baseline:[p.TextBaseline,'bottom']});return Title;})(text_annotation_1.TextAnnotation);},{"./text_annotation":"models/annotations/text_annotation","core/dom":"core/dom","core/properties":"core/properties","core/visuals":"core/visuals"}],"models/annotations/tooltip":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var annotation_1=require("./annotation");var dom_1=require("core/dom");var p=require("core/properties");exports.TooltipView=(function(superClass){extend(TooltipView,superClass);function TooltipView(){return TooltipView.__super__.constructor.apply(this,arguments);}
TooltipView.prototype.className="bk-tooltip";TooltipView.prototype.initialize=function(options){TooltipView.__super__.initialize.call(this,options);this.plot_view.canvas_overlays.appendChild(this.el);this.el.style.zIndex=1010;return dom_1.hide(this.el);};TooltipView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change:data',this._draw_tips);};TooltipView.prototype.render=function(){if(!this.model.visible){return;}
return this._draw_tips();};TooltipView.prototype._draw_tips=function(){var arrow_size,attachment,bottom,content,data,height,i,left,len,side,sx,sy,tip,top,val,vx,vy,width;data=this.model.data;dom_1.empty(this.el);dom_1.hide(this.el);if(this.model.custom){this.el.classList.add("bk-tooltip-custom");}
else{this.el.classList.remove("bk-tooltip-custom");}
if(data.length===0){return;}
for(i=0,len=data.length;i<len;i++){val=data[i];vx=val[0],vy=val[1],content=val[2];if(this.model.inner_only&&!this.plot_view.frame.contains(vx,vy)){continue;}
tip=dom_1.div({},content);this.el.appendChild(tip);}
sx=this.plot_view.model.canvas.vx_to_sx(vx);sy=this.plot_view.model.canvas.vy_to_sy(vy);attachment=this.model.attachment;switch(attachment){case"horizontal":width=this.plot_view.frame.width;left=this.plot_view.frame.left;if(vx-left<width/2){side='right';}
else{side='left';}
break;case"vertical":height=this.plot_view.frame.height;bottom=this.plot_view.frame.bottom;if(vy-bottom<height/2){side='below';}
else{side='above';}
break;default:side=attachment;}
this.el.classList.remove("bk-right");this.el.classList.remove("bk-left");this.el.classList.remove("bk-above");this.el.classList.remove("bk-below");arrow_size=10;dom_1.show(this.el);switch(side){case"right":this.el.classList.add("bk-left");left=sx+(this.el.offsetWidth-this.el.clientWidth)+arrow_size;top=sy-this.el.offsetHeight/2;break;case"left":this.el.classList.add("bk-right");left=sx-this.el.offsetWidth-arrow_size;top=sy-this.el.offsetHeight/2;break;case"above":this.el.classList.add("bk-above");top=sy+(this.el.offsetHeight-this.el.clientHeight)+arrow_size;left=Math.round(sx-this.el.offsetWidth/2);break;case"below":this.el.classList.add("bk-below");top=sy-this.el.offsetHeight-arrow_size;left=Math.round(sx-this.el.offsetWidth/2);}
if(this.model.show_arrow){this.el.classList.add("bk-tooltip-arrow");}
if(this.el.childNodes.length>0){this.el.style.top=top+"px";return this.el.style.left=left+"px";}
else{return dom_1.hide(this.el);}};return TooltipView;})(annotation_1.AnnotationView);exports.Tooltip=(function(superClass){extend(Tooltip,superClass);function Tooltip(){return Tooltip.__super__.constructor.apply(this,arguments);}
Tooltip.prototype.default_view=exports.TooltipView;Tooltip.prototype.type='Tooltip';Tooltip.define({attachment:[p.String,'horizontal'],inner_only:[p.Bool,true],show_arrow:[p.Bool,true]});Tooltip.override({level:'overlay'});Tooltip.internal({data:[p.Any,[]],custom:[p.Any]});Tooltip.prototype.clear=function(){return this.data=[];};Tooltip.prototype.add=function(vx,vy,content){var data;data=this.data;data.push([vx,vy,content]);this.data=data;return this.trigger('change:data');};return Tooltip;})(annotation_1.Annotation);},{"./annotation":"models/annotations/annotation","core/dom":"core/dom","core/properties":"core/properties"}],"models/axes/axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var side_panel_1=require("core/layout/side_panel");var guide_renderer_1=require("../renderers/guide_renderer");var renderer_1=require("../renderers/renderer");var logging_1=require("core/logging");var p=require("core/properties");var types_1=require("core/util/types");exports.AxisView=(function(superClass){extend(AxisView,superClass);function AxisView(){return AxisView.__super__.constructor.apply(this,arguments);}
AxisView.prototype.initialize=function(options){AxisView.__super__.initialize.call(this,options);this._x_range_name=this.model.x_range_name;return this._y_range_name=this.model.y_range_name;};AxisView.prototype.render=function(){var ctx;if(this.model.visible===false){return;}
ctx=this.plot_view.canvas_view.ctx;ctx.save();this._draw_rule(ctx);this._draw_major_ticks(ctx);this._draw_minor_ticks(ctx);this._draw_major_labels(ctx);this._draw_axis_label(ctx);return ctx.restore();};AxisView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change',this.plot_view.request_render);};AxisView.prototype._get_size=function(){return this._tick_extent()+this._tick_label_extent()+this._axis_label_extent();};AxisView.prototype._draw_rule=function(ctx){var coords,i,k,nx,ny,ref,ref1,ref2,ref3,ref4,sx,sy,x,xoff,y,yoff;if(!this.visuals.axis_line.doit){return;}
ref=coords=this.model.rule_coords,x=ref[0],y=ref[1];ref1=this.plot_view.map_to_screen(x,y,this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ref2=this.model.normals,nx=ref2[0],ny=ref2[1];ref3=this.model.offsets,xoff=ref3[0],yoff=ref3[1];this.visuals.axis_line.set_value(ctx);ctx.beginPath();ctx.moveTo(Math.round(sx[0]+nx*xoff),Math.round(sy[0]+ny*yoff));for(i=k=1,ref4=sx.length;1<=ref4?k<ref4:k>ref4;i=1<=ref4?++k:--k){ctx.lineTo(Math.round(sx[i]+nx*xoff),Math.round(sy[i]+ny*yoff));}
return ctx.stroke();};AxisView.prototype._draw_major_ticks=function(ctx){var coords,i,k,nx,ny,ref,ref1,ref2,ref3,ref4,results,sx,sy,tin,tout,x,xoff,y,yoff;if(!this.visuals.major_tick_line.doit){return;}
coords=this.model.tick_coords;ref=coords.major,x=ref[0],y=ref[1];ref1=this.plot_view.map_to_screen(x,y,this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ref2=this.model.normals,nx=ref2[0],ny=ref2[1];ref3=this.model.offsets,xoff=ref3[0],yoff=ref3[1];tin=this.model.major_tick_in;tout=this.model.major_tick_out;this.visuals.major_tick_line.set_value(ctx);results=[];for(i=k=0,ref4=sx.length;0<=ref4?k<ref4:k>ref4;i=0<=ref4?++k:--k){ctx.beginPath();ctx.moveTo(Math.round(sx[i]+nx*tout+nx*xoff),Math.round(sy[i]+ny*tout+ny*yoff));ctx.lineTo(Math.round(sx[i]-nx*tin+nx*xoff),Math.round(sy[i]-ny*tin+ny*yoff));results.push(ctx.stroke());}
return results;};AxisView.prototype._draw_minor_ticks=function(ctx){var coords,i,k,nx,ny,ref,ref1,ref2,ref3,ref4,results,sx,sy,tin,tout,x,xoff,y,yoff;if(!this.visuals.minor_tick_line.doit){return;}
coords=this.model.tick_coords;ref=coords.minor,x=ref[0],y=ref[1];ref1=this.plot_view.map_to_screen(x,y,this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ref2=this.model.normals,nx=ref2[0],ny=ref2[1];ref3=this.model.offsets,xoff=ref3[0],yoff=ref3[1];tin=this.model.minor_tick_in;tout=this.model.minor_tick_out;this.visuals.minor_tick_line.set_value(ctx);results=[];for(i=k=0,ref4=sx.length;0<=ref4?k<ref4:k>ref4;i=0<=ref4?++k:--k){ctx.beginPath();ctx.moveTo(Math.round(sx[i]+nx*tout+nx*xoff),Math.round(sy[i]+ny*tout+ny*yoff));ctx.lineTo(Math.round(sx[i]-nx*tin+nx*xoff),Math.round(sy[i]-ny*tin+ny*yoff));results.push(ctx.stroke());}
return results;};AxisView.prototype._draw_major_labels=function(ctx){var angle,coords,dim,i,k,labels,nx,ny,orient,ref,ref1,ref2,ref3,ref4,results,side,standoff,sx,sy,x,xoff,y,yoff;coords=this.model.tick_coords;ref=coords.major,x=ref[0],y=ref[1];ref1=this.plot_view.map_to_screen(x,y,this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ref2=this.model.normals,nx=ref2[0],ny=ref2[1];ref3=this.model.offsets,xoff=ref3[0],yoff=ref3[1];dim=this.model.dimension;side=this.model.panel_side;orient=this.model.major_label_orientation;if(types_1.isString(orient)){angle=this.model.panel.get_label_angle_heuristic(orient);}
else{angle=-orient;}
standoff=this._tick_extent()+this.model.major_label_standoff;labels=this.model.formatter.doFormat(coords.major[dim],this.model.loc);this.visuals.major_label_text.set_value(ctx);this.model.panel.apply_label_text_heuristics(ctx,orient);results=[];for(i=k=0,ref4=sx.length;0<=ref4?k<ref4:k>ref4;i=0<=ref4?++k:--k){if(angle){ctx.translate(sx[i]+nx*standoff+nx*xoff,sy[i]+ny*standoff+ny*yoff);ctx.rotate(angle);ctx.fillText(labels[i],0,0);ctx.rotate(-angle);results.push(ctx.translate(-sx[i]-nx*standoff+nx*xoff,-sy[i]-ny*standoff+ny*yoff));}
else{results.push(ctx.fillText(labels[i],Math.round(sx[i]+nx*standoff+nx*xoff),Math.round(sy[i]+ny*standoff+ny*yoff)));}}
return results;};AxisView.prototype._draw_axis_label=function(ctx){var angle,label,nx,ny,orient,ref,ref1,ref2,ref3,side,standoff,sx,sy,x,xoff,y,yoff;label=this.model.axis_label;if(label==null){return;}
ref=this.model.rule_coords,x=ref[0],y=ref[1];ref1=this.plot_view.map_to_screen(x,y,this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ref2=this.model.normals,nx=ref2[0],ny=ref2[1];ref3=this.model.offsets,xoff=ref3[0],yoff=ref3[1];side=this.model.panel_side;orient='parallel';angle=this.model.panel.get_label_angle_heuristic(orient);standoff=this._tick_extent()+this._tick_label_extent()+this.model.axis_label_standoff;sx=(sx[0]+sx[sx.length-1])/2;sy=(sy[0]+sy[sy.length-1])/2;this.visuals.axis_label_text.set_value(ctx);this.model.panel.apply_label_text_heuristics(ctx,orient);x=sx+nx*standoff+nx*xoff;y=sy+ny*standoff+ny*yoff;if(isNaN(x)||isNaN(y)){return;}
if(angle){ctx.translate(x,y);ctx.rotate(angle);ctx.fillText(label,0,0);ctx.rotate(-angle);return ctx.translate(-x,-y);}
else{return ctx.fillText(label,x,y);}};AxisView.prototype._tick_extent=function(){return this.model.major_tick_out;};AxisView.prototype._tick_label_extent=function(){var angle,c,coords,ctx,dim,extent,h,hfactor,hscale,i,k,labels,orient,ref,s,side,val,w,wfactor;extent=0;ctx=this.plot_view.canvas_view.ctx;dim=this.model.dimension;coords=this.model.tick_coords.major;side=this.model.panel_side;orient=this.model.major_label_orientation;labels=this.model.formatter.doFormat(coords[dim],this.model.loc);this.visuals.major_label_text.set_value(ctx);if(types_1.isString(orient)){hscale=1;angle=this.model.panel.get_label_angle_heuristic(orient);}
else{hscale=2;angle=-orient;}
angle=Math.abs(angle);c=Math.cos(angle);s=Math.sin(angle);if(side==="above"||side==="below"){wfactor=s;hfactor=c;}
else{wfactor=c;hfactor=s;}
for(i=k=0,ref=labels.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){if(labels[i]==null){continue;}
w=ctx.measureText(labels[i]).width*1.1;h=ctx.measureText(labels[i]).ascent*0.9;val=w*wfactor+(h/hscale)*hfactor;if(val>extent){extent=val;}}
if(extent>0){extent+=this.model.major_label_standoff;}
return extent;};AxisView.prototype._axis_label_extent=function(){var angle,axis_label,c,ctx,extent,h,orient,s,side,w;extent=0;side=this.model.panel_side;axis_label=this.model.axis_label;orient='parallel';ctx=this.plot_view.canvas_view.ctx;this.visuals.axis_label_text.set_value(ctx);angle=Math.abs(this.model.panel.get_label_angle_heuristic(orient));c=Math.cos(angle);s=Math.sin(angle);if(axis_label){extent+=this.model.axis_label_standoff;this.visuals.axis_label_text.set_value(ctx);w=ctx.measureText(axis_label).width*1.1;h=ctx.measureText(axis_label).ascent*0.9;if(side==="above"||side==="below"){extent+=w*s+h*c;}
else{extent+=w*c+h*s;}}
return extent;};return AxisView;})(renderer_1.RendererView);exports.Axis=(function(superClass){extend(Axis,superClass);function Axis(){return Axis.__super__.constructor.apply(this,arguments);}
Axis.prototype.default_view=exports.AxisView;Axis.prototype.type='Axis';Axis.mixins(['line:axis_','line:major_tick_','line:minor_tick_','text:major_label_','text:axis_label_']);Axis.define({bounds:[p.Any,'auto'],ticker:[p.Instance,null],formatter:[p.Instance,null],x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],axis_label:[p.String,''],axis_label_standoff:[p.Int,5],major_label_standoff:[p.Int,5],major_label_orientation:[p.Any,"horizontal"],major_tick_in:[p.Number,2],major_tick_out:[p.Number,6],minor_tick_in:[p.Number,0],minor_tick_out:[p.Number,4]});Axis.override({axis_line_color:'black',major_tick_line_color:'black',minor_tick_line_color:'black',major_label_text_font_size:"8pt",major_label_text_align:"center",major_label_text_baseline:"alphabetic",axis_label_text_font_size:"10pt",axis_label_text_font_style:"italic"});Axis.internal({panel_side:[p.Any]});Axis.prototype.initialize=function(attrs,options){Axis.__super__.initialize.call(this,attrs,options);this.define_computed_property('computed_bounds',this._computed_bounds,false);this.add_dependencies('computed_bounds',this,['bounds']);return this.add_dependencies('computed_bounds',this.plot,['x_range','y_range']);};Axis.getters({computed_bounds:function(){return this._get_computed('computed_bounds');},rule_coords:function(){return this._rule_coords();},tick_coords:function(){return this._tick_coords();},ranges:function(){return this._ranges();},normals:function(){return this.panel._normals;},dimension:function(){return this.panel._dim;},offsets:function(){return this._offsets();},loc:function(){return this._get_loc();}});Axis.prototype.add_panel=function(side){this.panel=new side_panel_1.SidePanel({side:side});this.panel.attach_document(this.document);return this.panel_side=side;};Axis.prototype._offsets=function(){var frame,ref,side,xoff,yoff;side=this.panel_side;ref=[0,0],xoff=ref[0],yoff=ref[1];frame=this.plot.plot_canvas.frame;switch(side){case"below":yoff=Math.abs(this.panel.top-frame.bottom);break;case"above":yoff=Math.abs(this.panel.bottom-frame.top);break;case"right":xoff=Math.abs(this.panel.left-frame.right);break;case"left":xoff=Math.abs(this.panel.right-frame.left);}
return[xoff,yoff];};Axis.prototype._ranges=function(){var frame,i,j,ranges;i=this.dimension;j=(i+1)%2;frame=this.plot.plot_canvas.frame;ranges=[frame.x_ranges[this.x_range_name],frame.y_ranges[this.y_range_name]];return[ranges[i],ranges[j]];};Axis.prototype._computed_bounds=function(){var cross_range,end,range,range_bounds,ref,ref1,start,user_bounds;ref=this.ranges,range=ref[0],cross_range=ref[1];user_bounds=(ref1=this.bounds)!=null?ref1:'auto';range_bounds=[range.min,range.max];if(user_bounds==='auto'){return range_bounds;}
if(types_1.isArray(user_bounds)){if(Math.abs(user_bounds[0]-user_bounds[1])>Math.abs(range_bounds[0]-range_bounds[1])){start=Math.max(Math.min(user_bounds[0],user_bounds[1]),range_bounds[0]);end=Math.min(Math.max(user_bounds[0],user_bounds[1]),range_bounds[1]);}
else{start=Math.min(user_bounds[0],user_bounds[1]);end=Math.max(user_bounds[0],user_bounds[1]);}
return[start,end];}
logging_1.logger.error("user bounds '"+user_bounds+"' not understood");return null;};Axis.prototype._rule_coords=function(){var coords,cross_range,end,i,j,range,ref,ref1,start,xs,ys;i=this.dimension;j=(i+1)%2;ref=this.ranges,range=ref[0],cross_range=ref[1];ref1=this.computed_bounds,start=ref1[0],end=ref1[1];xs=new Array(2);ys=new Array(2);coords=[xs,ys];coords[i][0]=Math.max(start,range.min);coords[i][1]=Math.min(end,range.max);if(coords[i][0]>coords[i][1]){coords[i][0]=coords[i][1]=0/0;}
coords[j][0]=this.loc;coords[j][1]=this.loc;return coords;};Axis.prototype._tick_coords=function(){var coords,cross_range,end,i,ii,j,k,l,m,majors,minor_coords,minor_xs,minor_ys,minors,range,range_max,range_min,ref,ref1,ref2,ref3,ref4,ref5,start,ticks,xs,ys;i=this.dimension;j=(i+1)%2;ref=this.ranges,range=ref[0],cross_range=ref[1];ref1=this.computed_bounds,start=ref1[0],end=ref1[1];ticks=this.ticker.get_ticks(start,end,range,this.loc,{});majors=ticks.major;minors=ticks.minor;xs=[];ys=[];coords=[xs,ys];minor_xs=[];minor_ys=[];minor_coords=[minor_xs,minor_ys];if(range.type==="FactorRange"){for(ii=k=0,ref2=majors.length;0<=ref2?k<ref2:k>ref2;ii=0<=ref2?++k:--k){coords[i].push(majors[ii]);coords[j].push(this.loc);}}
else{ref3=[range.min,range.max],range_min=ref3[0],range_max=ref3[1];for(ii=l=0,ref4=majors.length;0<=ref4?l<ref4:l>ref4;ii=0<=ref4?++l:--l){if(majors[ii]<range_min||majors[ii]>range_max){continue;}
coords[i].push(majors[ii]);coords[j].push(this.loc);}
for(ii=m=0,ref5=minors.length;0<=ref5?m<ref5:m>ref5;ii=0<=ref5?++m:--m){if(minors[ii]<range_min||minors[ii]>range_max){continue;}
minor_coords[i].push(minors[ii]);minor_coords[j].push(this.loc);}}
return{"major":coords,"minor":minor_coords};};Axis.prototype._get_loc=function(){var cend,cross_range,cstart,range,ref,side;ref=this.ranges,range=ref[0],cross_range=ref[1];cstart=cross_range.start;cend=cross_range.end;side=this.panel_side;switch(side){case'left':case'below':return cross_range.start;case'right':case'above':return cross_range.end;}};return Axis;})(guide_renderer_1.GuideRenderer);},{"../renderers/guide_renderer":"models/renderers/guide_renderer","../renderers/renderer":"models/renderers/renderer","core/layout/side_panel":"core/layout/side_panel","core/logging":"core/logging","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/axes/categorical_axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var axis_1=require("./axis");var categorical_tick_formatter_1=require("../formatters/categorical_tick_formatter");var categorical_ticker_1=require("../tickers/categorical_ticker");var logging_1=require("core/logging");exports.CategoricalAxisView=(function(superClass){extend(CategoricalAxisView,superClass);function CategoricalAxisView(){return CategoricalAxisView.__super__.constructor.apply(this,arguments);}
return CategoricalAxisView;})(axis_1.AxisView);exports.CategoricalAxis=(function(superClass){extend(CategoricalAxis,superClass);function CategoricalAxis(){return CategoricalAxis.__super__.constructor.apply(this,arguments);}
CategoricalAxis.prototype.default_view=exports.CategoricalAxisView;CategoricalAxis.prototype.type='CategoricalAxis';CategoricalAxis.override({ticker:function(){return new categorical_ticker_1.CategoricalTicker();},formatter:function(){return new categorical_tick_formatter_1.CategoricalTickFormatter();}});CategoricalAxis.prototype._computed_bounds=function(){var cross_range,range,range_bounds,ref,ref1,user_bounds;ref=this.ranges,range=ref[0],cross_range=ref[1];user_bounds=(ref1=this.bounds)!=null?ref1:'auto';range_bounds=[range.min,range.max];if(user_bounds!=='auto'){logging_1.logger.warn("Categorical Axes only support user_bounds='auto', ignoring");}
return range_bounds;};return CategoricalAxis;})(axis_1.Axis);},{"../formatters/categorical_tick_formatter":"models/formatters/categorical_tick_formatter","../tickers/categorical_ticker":"models/tickers/categorical_ticker","./axis":"models/axes/axis","core/logging":"core/logging"}],"models/axes/continuous_axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var axis_1=require("./axis");exports.ContinuousAxis=(function(superClass){extend(ContinuousAxis,superClass);function ContinuousAxis(){return ContinuousAxis.__super__.constructor.apply(this,arguments);}
ContinuousAxis.prototype.type='ContinuousAxis';return ContinuousAxis;})(axis_1.Axis);},{"./axis":"models/axes/axis"}],"models/axes/datetime_axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var linear_axis_1=require("./linear_axis");var datetime_tick_formatter_1=require("../formatters/datetime_tick_formatter");var datetime_ticker_1=require("../tickers/datetime_ticker");exports.DatetimeAxisView=(function(superClass){extend(DatetimeAxisView,superClass);function DatetimeAxisView(){return DatetimeAxisView.__super__.constructor.apply(this,arguments);}
return DatetimeAxisView;})(linear_axis_1.LinearAxisView);exports.DatetimeAxis=(function(superClass){extend(DatetimeAxis,superClass);function DatetimeAxis(){return DatetimeAxis.__super__.constructor.apply(this,arguments);}
DatetimeAxis.prototype.default_view=exports.DatetimeAxisView;DatetimeAxis.prototype.type='DatetimeAxis';DatetimeAxis.override({ticker:function(){return new datetime_ticker_1.DatetimeTicker();},formatter:function(){return new datetime_tick_formatter_1.DatetimeTickFormatter();}});return DatetimeAxis;})(linear_axis_1.LinearAxis);},{"../formatters/datetime_tick_formatter":"models/formatters/datetime_tick_formatter","../tickers/datetime_ticker":"models/tickers/datetime_ticker","./linear_axis":"models/axes/linear_axis"}],"models/axes/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var axis_1=require("./axis");exports.Axis=axis_1.Axis;var categorical_axis_1=require("./categorical_axis");exports.CategoricalAxis=categorical_axis_1.CategoricalAxis;var continuous_axis_1=require("./continuous_axis");exports.ContinuousAxis=continuous_axis_1.ContinuousAxis;var datetime_axis_1=require("./datetime_axis");exports.DatetimeAxis=datetime_axis_1.DatetimeAxis;var linear_axis_1=require("./linear_axis");exports.LinearAxis=linear_axis_1.LinearAxis;var log_axis_1=require("./log_axis");exports.LogAxis=log_axis_1.LogAxis;},{"./axis":"models/axes/axis","./categorical_axis":"models/axes/categorical_axis","./continuous_axis":"models/axes/continuous_axis","./datetime_axis":"models/axes/datetime_axis","./linear_axis":"models/axes/linear_axis","./log_axis":"models/axes/log_axis"}],"models/axes/linear_axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var axis_1=require("./axis");var continuous_axis_1=require("./continuous_axis");var basic_tick_formatter_1=require("../formatters/basic_tick_formatter");var basic_ticker_1=require("../tickers/basic_ticker");exports.LinearAxisView=(function(superClass){extend(LinearAxisView,superClass);function LinearAxisView(){return LinearAxisView.__super__.constructor.apply(this,arguments);}
return LinearAxisView;})(axis_1.AxisView);exports.LinearAxis=(function(superClass){extend(LinearAxis,superClass);function LinearAxis(){return LinearAxis.__super__.constructor.apply(this,arguments);}
LinearAxis.prototype.default_view=exports.LinearAxisView;LinearAxis.prototype.type='LinearAxis';LinearAxis.override({ticker:function(){return new basic_ticker_1.BasicTicker();},formatter:function(){return new basic_tick_formatter_1.BasicTickFormatter();}});return LinearAxis;})(continuous_axis_1.ContinuousAxis);},{"../formatters/basic_tick_formatter":"models/formatters/basic_tick_formatter","../tickers/basic_ticker":"models/tickers/basic_ticker","./axis":"models/axes/axis","./continuous_axis":"models/axes/continuous_axis"}],"models/axes/log_axis":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var axis_1=require("./axis");var continuous_axis_1=require("./continuous_axis");var log_tick_formatter_1=require("../formatters/log_tick_formatter");var log_ticker_1=require("../tickers/log_ticker");exports.LogAxisView=(function(superClass){extend(LogAxisView,superClass);function LogAxisView(){return LogAxisView.__super__.constructor.apply(this,arguments);}
return LogAxisView;})(axis_1.AxisView);exports.LogAxis=(function(superClass){extend(LogAxis,superClass);function LogAxis(){return LogAxis.__super__.constructor.apply(this,arguments);}
LogAxis.prototype.default_view=exports.LogAxisView;LogAxis.prototype.type='LogAxis';LogAxis.override({ticker:function(){return new log_ticker_1.LogTicker();},formatter:function(){return new log_tick_formatter_1.LogTickFormatter();}});return LogAxis;})(continuous_axis_1.ContinuousAxis);},{"../formatters/log_tick_formatter":"models/formatters/log_tick_formatter","../tickers/log_ticker":"models/tickers/log_ticker","./axis":"models/axes/axis","./continuous_axis":"models/axes/continuous_axis"}],"models/callbacks/customjs":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var p=require("core/properties");var object_1=require("core/util/object");var model_1=require("../../model");exports.CustomJS=(function(superClass){extend(CustomJS,superClass);function CustomJS(){return CustomJS.__super__.constructor.apply(this,arguments);}
CustomJS.prototype.type='CustomJS';CustomJS.define({args:[p.Any,{}],code:[p.String,'']});CustomJS.getters({values:function(){return this._make_values();},func:function(){return this._make_func();}});CustomJS.prototype.execute=function(cb_obj,cb_data){return this.func.apply(this,slice.call(this.values).concat([cb_obj],[cb_data],[require],[{}]));};CustomJS.prototype._make_values=function(){return object_1.values(this.args);};CustomJS.prototype._make_func=function(){return(function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child;})(Function,slice.call(Object.keys(this.args)).concat(["cb_obj"],["cb_data"],["require"],["exports"],[this.code]),function(){});};return CustomJS;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/callbacks/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var customjs_1=require("./customjs");exports.CustomJS=customjs_1.CustomJS;var open_url_1=require("./open_url");exports.OpenURL=open_url_1.OpenURL;},{"./customjs":"models/callbacks/customjs","./open_url":"models/callbacks/open_url"}],"models/callbacks/open_url":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var p=require("core/properties");var selection_1=require("core/util/selection");var templating_1=require("core/util/templating");exports.OpenURL=(function(superClass){extend(OpenURL,superClass);function OpenURL(){return OpenURL.__super__.constructor.apply(this,arguments);}
OpenURL.prototype.type='OpenURL';OpenURL.define({url:[p.String,'http://']});OpenURL.prototype.execute=function(data_source){var i,j,len,ref,url;ref=selection_1.get_indices(data_source);for(j=0,len=ref.length;j<len;j++){i=ref[j];url=templating_1.replace_placeholders(this.url,data_source,i);window.open(url);}
return null;};return OpenURL;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties","core/util/selection":"core/util/selection","core/util/templating":"core/util/templating"}],"models/canvas/canvas":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var canvas_template_1=require("./canvas_template");var layout_canvas_1=require("core/layout/layout_canvas");var bokeh_view_1=require("core/bokeh_view");var solver_1=require("core/layout/solver");var logging_1=require("core/logging");var p=require("core/properties");var eq_1=require("core/util/eq");var canvas_1=require("core/util/canvas");exports.CanvasView=(function(superClass){extend(CanvasView,superClass);function CanvasView(){return CanvasView.__super__.constructor.apply(this,arguments);}
CanvasView.prototype.className="bk-canvas-wrapper";CanvasView.prototype.template=canvas_template_1.default;CanvasView.prototype.initialize=function(options){var html;CanvasView.__super__.initialize.call(this,options);html=this.template({map:this.model.map});this.el.appendChild(html);this.ctx=this.get_ctx();canvas_1.fixup_line_dash(this.ctx);canvas_1.fixup_line_dash_offset(this.ctx);canvas_1.fixup_image_smoothing(this.ctx);canvas_1.fixup_measure_text(this.ctx);canvas_1.fixup_ellipse(this.ctx);if(window.CanvasPixelArray!=null){CanvasPixelArray.prototype.set=function(arr){var i,j,ref,results;results=[];for(i=j=0,ref=this.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(this[i]=arr[i]);}
return results;};}
this.map_div=this.el.querySelector('div.bk-canvas-map');this.set_dims([this.model.initial_width,this.model.initial_height]);return logging_1.logger.debug("CanvasView initialized");};CanvasView.prototype.get_canvas_element=function(){return this.el.querySelector('canvas.bk-canvas');};CanvasView.prototype.get_ctx=function(){return this.get_canvas_element().getContext('2d');};CanvasView.prototype.prepare_canvas=function(force){var canvas_el,dpr,height,ratio,width;if(force==null){force=false;}
width=this.model._width._value;height=this.model._height._value;dpr=window.devicePixelRatio;if(!eq_1.isEqual(this.last_dims,[width,height,dpr])||force){this.el.style.width=width+"px";this.el.style.height=height+"px";this.pixel_ratio=ratio=canvas_1.get_scale_ratio(this.ctx,this.model.use_hidpi);canvas_el=this.get_canvas_element();canvas_el.style.width=width+"px";canvas_el.style.height=height+"px";canvas_el.setAttribute('width',width*ratio);canvas_el.setAttribute('height',height*ratio);logging_1.logger.debug("Rendering CanvasView [force="+force+"] with width: "+width+", height: "+height+", ratio: "+ratio);this.model.pixel_ratio=this.pixel_ratio;return this.last_dims=[width,height,dpr];}};CanvasView.prototype.set_dims=function(dims,trigger){if(trigger==null){trigger=true;}
this.requested_width=dims[0];this.requested_height=dims[1];this.update_constraints(trigger);};CanvasView.prototype.update_constraints=function(trigger){var MIN_SIZE,requested_height,requested_width,s;if(trigger==null){trigger=true;}
requested_width=this.requested_width;requested_height=this.requested_height;if((requested_width==null)||(requested_height==null)){return;}
MIN_SIZE=50;if(requested_width<MIN_SIZE||requested_height<MIN_SIZE){return;}
if(eq_1.isEqual(this.last_requested_dims,[requested_width,requested_height])){return;}
s=this.model.document.solver();if(this._width_constraint!=null){s.remove_constraint(this._width_constraint,true);}
this._width_constraint=solver_1.EQ(this.model._width,-requested_width);s.add_constraint(this._width_constraint);if(this._height_constraint!=null){s.remove_constraint(this._height_constraint,true);}
this._height_constraint=solver_1.EQ(this.model._height,-requested_height);s.add_constraint(this._height_constraint);this.last_requested_dims=[requested_width,requested_height];return s.update_variables(trigger);};return CanvasView;})(bokeh_view_1.BokehView);exports.Canvas=(function(superClass){extend(Canvas,superClass);function Canvas(){return Canvas.__super__.constructor.apply(this,arguments);}
Canvas.prototype.type='Canvas';Canvas.prototype.default_view=exports.CanvasView;Canvas.internal({map:[p.Boolean,false],initial_width:[p.Number],initial_height:[p.Number],use_hidpi:[p.Boolean,true],pixel_ratio:[p.Number]});Canvas.prototype.initialize=function(attrs,options){Canvas.__super__.initialize.call(this,attrs,options);return this.panel=this;};Canvas.prototype.vx_to_sx=function(x){return x;};Canvas.prototype.vy_to_sy=function(y){return this._height._value-(y+1);};Canvas.prototype.v_vx_to_sx=function(xx){return new Float64Array(xx);};Canvas.prototype.v_vy_to_sy=function(yy){var _yy,height,idx,j,len,y;_yy=new Float64Array(yy.length);height=this._height._value;for(idx=j=0,len=yy.length;j<len;idx=++j){y=yy[idx];_yy[idx]=height-(y+1);}
return _yy;};Canvas.prototype.sx_to_vx=function(x){return x;};Canvas.prototype.sy_to_vy=function(y){return this._height._value-(y+1);};Canvas.prototype.v_sx_to_vx=function(xx){return new Float64Array(xx);};Canvas.prototype.v_sy_to_vy=function(yy){var _yy,height,idx,j,len,y;_yy=new Float64Array(yy.length);height=this._height._value;for(idx=j=0,len=yy.length;j<len;idx=++j){y=yy[idx];_yy[idx]=height-(y+1);}
return _yy;};Canvas.prototype.get_constraints=function(){var constraints;constraints=Canvas.__super__.get_constraints.call(this);constraints.push(solver_1.GE(this._top));constraints.push(solver_1.GE(this._bottom));constraints.push(solver_1.GE(this._left));constraints.push(solver_1.GE(this._right));constraints.push(solver_1.GE(this._width));constraints.push(solver_1.GE(this._height));constraints.push(solver_1.EQ(this._width,[-1,this._right]));constraints.push(solver_1.EQ(this._height,[-1,this._top]));return constraints;};return Canvas;})(layout_canvas_1.LayoutCanvas);},{"./canvas_template":"models/canvas/canvas_template","core/bokeh_view":"core/bokeh_view","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/canvas":"core/util/canvas","core/util/eq":"core/util/eq"}],"models/canvas/canvas_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){return(DOM.createElement("fragment",null,props.map&&DOM.createElement("div",{class:"bk-canvas-map"}),DOM.createElement("div",{class:"bk-canvas-events"}),DOM.createElement("div",{class:"bk-canvas-overlays"}),DOM.createElement("canvas",{class:'bk-canvas'})));};},{"core/dom":"core/dom"}],"models/canvas/cartesian_frame":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var categorical_mapper_1=require("../mappers/categorical_mapper");var linear_mapper_1=require("../mappers/linear_mapper");var log_mapper_1=require("../mappers/log_mapper");var range1d_1=require("../ranges/range1d");var solver_1=require("core/layout/solver");var layout_canvas_1=require("core/layout/layout_canvas");var logging_1=require("core/logging");var p=require("core/properties");exports.CartesianFrame=(function(superClass){extend(CartesianFrame,superClass);function CartesianFrame(){return CartesianFrame.__super__.constructor.apply(this,arguments);}
CartesianFrame.prototype.type='CartesianFrame';CartesianFrame.prototype.initialize=function(attrs,options){CartesianFrame.__super__.initialize.call(this,attrs,options);this.panel=this;this._configure_mappers();this.listenTo(this,'change',(function(_this){return function(){return _this._configure_mappers();};})(this));return null;};CartesianFrame.prototype._doc_attached=function(){this.listenTo(this.document.solver(),'layout_update',(function(_this){return function(){return _this._update_mappers();};})(this));return null;};CartesianFrame.prototype.contains=function(vx,vy){return vx>=this.left&&vx<=this.right&&vy>=this.bottom&&vy<=this.top;};CartesianFrame.prototype.map_to_screen=function(x,y,canvas,x_name,y_name){var sx,sy,vx,vy;if(x_name==null){x_name='default';}
if(y_name==null){y_name='default';}
vx=this.x_mappers[x_name].v_map_to_target(x);sx=canvas.v_vx_to_sx(vx);vy=this.y_mappers[y_name].v_map_to_target(y);sy=canvas.v_vy_to_sy(vy);return[sx,sy];};CartesianFrame.prototype._get_ranges=function(range,extra_ranges){var extra_range,name,ranges;ranges={};ranges['default']=range;if(extra_ranges!=null){for(name in extra_ranges){extra_range=extra_ranges[name];ranges[name]=extra_range;}}
return ranges;};CartesianFrame.prototype._get_mappers=function(mapper_type,ranges,frame_range){var mapper_model,mappers,name,range;mappers={};for(name in ranges){range=ranges[name];if(range.type==="Range1d"||range.type==="DataRange1d"){if(mapper_type==="log"){mapper_model=log_mapper_1.LogMapper;}
else{mapper_model=linear_mapper_1.LinearMapper;}
range.mapper_hint=mapper_type;}
else if(range.type==="FactorRange"){mapper_model=categorical_mapper_1.CategoricalMapper;}
else{logging_1.logger.warn("unknown range type for range '"+name+"': "+range);return null;}
mappers[name]=new mapper_model({source_range:range,target_range:frame_range});}
return mappers;};CartesianFrame.prototype._configure_frame_ranges=function(){this._h_range=new range1d_1.Range1d({start:this.left,end:this.left+this.width});return this._v_range=new range1d_1.Range1d({start:this.bottom,end:this.bottom+this.height});};CartesianFrame.prototype._configure_mappers=function(){this._configure_frame_ranges();this._x_ranges=this._get_ranges(this.x_range,this.extra_x_ranges);this._y_ranges=this._get_ranges(this.y_range,this.extra_y_ranges);this._x_mappers=this._get_mappers(this.x_mapper_type,this._x_ranges,this._h_range);return this._y_mappers=this._get_mappers(this.y_mapper_type,this._y_ranges,this._v_range);};CartesianFrame.prototype._update_mappers=function(){var mapper,name,ref,ref1;this._configure_frame_ranges();ref=this._x_mappers;for(name in ref){mapper=ref[name];mapper.target_range=this._h_range;}
ref1=this._y_mappers;for(name in ref1){mapper=ref1[name];mapper.target_range=this._v_range;}
return null;};CartesianFrame.getters({h_range:function(){return this._h_range;},v_range:function(){return this._v_range;},x_ranges:function(){return this._x_ranges;},y_ranges:function(){return this._y_ranges;},x_mappers:function(){return this._x_mappers;},y_mappers:function(){return this._y_mappers;}});CartesianFrame.internal({extra_x_ranges:[p.Any,{}],extra_y_ranges:[p.Any,{}],x_range:[p.Instance],y_range:[p.Instance],x_mapper_type:[p.String,'auto'],y_mapper_type:[p.String,'auto']});CartesianFrame.prototype.get_constraints=function(){var constraints;constraints=[];constraints.push(solver_1.GE(this._top));constraints.push(solver_1.GE(this._bottom));constraints.push(solver_1.GE(this._left));constraints.push(solver_1.GE(this._right));constraints.push(solver_1.GE(this._width));constraints.push(solver_1.GE(this._height));constraints.push(solver_1.EQ(this._left,this._width,[-1,this._right]));constraints.push(solver_1.EQ(this._bottom,this._height,[-1,this._top]));return constraints;};return CartesianFrame;})(layout_canvas_1.LayoutCanvas);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","../mappers/linear_mapper":"models/mappers/linear_mapper","../mappers/log_mapper":"models/mappers/log_mapper","../ranges/range1d":"models/ranges/range1d","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties"}],"models/canvas/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var canvas_1=require("./canvas");exports.Canvas=canvas_1.Canvas;var cartesian_frame_1=require("./cartesian_frame");exports.CartesianFrame=cartesian_frame_1.CartesianFrame;},{"./canvas":"models/canvas/canvas","./cartesian_frame":"models/canvas/cartesian_frame"}],"models/formatters/basic_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var tick_formatter_1=require("./tick_formatter");var p=require("core/properties");var types_1=require("core/util/types");exports.BasicTickFormatter=(function(superClass){extend(BasicTickFormatter,superClass);function BasicTickFormatter(){return BasicTickFormatter.__super__.constructor.apply(this,arguments);}
BasicTickFormatter.prototype.type='BasicTickFormatter';BasicTickFormatter.define({precision:[p.Any,'auto'],use_scientific:[p.Bool,true],power_limit_high:[p.Number,5],power_limit_low:[p.Number,-3]});BasicTickFormatter.getters({scientific_limit_low:function(){return Math.pow(10.0,this.power_limit_low);},scientific_limit_high:function(){return Math.pow(10.0,this.power_limit_high);}});BasicTickFormatter.prototype.initialize=function(attrs,options){BasicTickFormatter.__super__.initialize.call(this,attrs,options);return this.last_precision=3;};BasicTickFormatter.prototype.doFormat=function(ticks,loc){var i,is_ok,j,k,l,labels,len,m,n,need_sci,o,precision,ref,ref1,ref2,ref3,ref4,tick,tick_abs,x,zero_eps;if(ticks.length===0){return[];}
zero_eps=0;if(ticks.length>=2){zero_eps=Math.abs(ticks[1]-ticks[0])/10000;}
need_sci=false;if(this.use_scientific){for(j=0,len=ticks.length;j<len;j++){tick=ticks[j];tick_abs=Math.abs(tick);if(tick_abs>zero_eps&&(tick_abs>=this.scientific_limit_high||tick_abs<=this.scientific_limit_low)){need_sci=true;break;}}}
precision=this.precision;if((precision==null)||types_1.isNumber(precision)){labels=new Array(ticks.length);if(need_sci){for(i=k=0,ref=ticks.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){labels[i]=ticks[i].toExponential(precision||void 0);}}
else{for(i=l=0,ref1=ticks.length;0<=ref1?l<ref1:l>ref1;i=0<=ref1?++l:--l){labels[i]=ticks[i].toFixed(precision||void 0).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"");}}
return labels;}
else if(precision==='auto'){labels=new Array(ticks.length);for(x=m=ref2=this.last_precision;ref2<=15?m<=15:m>=15;x=ref2<=15?++m:--m){is_ok=true;if(need_sci){for(i=n=0,ref3=ticks.length;0<=ref3?n<ref3:n>ref3;i=0<=ref3?++n:--n){labels[i]=ticks[i].toExponential(x);if(i>0){if(labels[i]===labels[i-1]){is_ok=false;break;}}}
if(is_ok){break;}}
else{for(i=o=0,ref4=ticks.length;0<=ref4?o<ref4:o>ref4;i=0<=ref4?++o:--o){labels[i]=ticks[i].toFixed(x).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"");if(i>0){if(labels[i]===labels[i-1]){is_ok=false;break;}}}
if(is_ok){break;}}
if(is_ok){this.last_precision=x;return labels;}}}
return labels;};return BasicTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/formatters/categorical_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var tick_formatter_1=require("./tick_formatter");exports.CategoricalTickFormatter=(function(superClass){extend(CategoricalTickFormatter,superClass);function CategoricalTickFormatter(){return CategoricalTickFormatter.__super__.constructor.apply(this,arguments);}
CategoricalTickFormatter.prototype.type='CategoricalTickFormatter';CategoricalTickFormatter.prototype.doFormat=function(ticks,loc){return ticks;};return CategoricalTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter"}],"models/formatters/datetime_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _array,_strftime,_us,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var SPrintf=require("sprintf");var tz=require("timezone");var tick_formatter_1=require("./tick_formatter");var logging_1=require("core/logging");var p=require("core/properties");var array_1=require("core/util/array");var types_1=require("core/util/types");_us=function(t){return Math.round(((t/1000)%1)*1000000);};_array=function(t){return tz(t,"%Y %m %d %H %M %S").split(/\s+/).map(function(e){return parseInt(e,10);});};_strftime=function(t,format){var microsecond_replacement_string;if(types_1.isFunction(format)){return format(t);}
else{microsecond_replacement_string=SPrintf.sprintf("$1%06d",_us(t));format=format.replace(/((^|[^%])(%%)*)%f/,microsecond_replacement_string);if(format.indexOf("%")===-1){return format;}
return tz(t,format);}};exports.DatetimeTickFormatter=(function(superClass){extend(DatetimeTickFormatter,superClass);function DatetimeTickFormatter(){return DatetimeTickFormatter.__super__.constructor.apply(this,arguments);}
DatetimeTickFormatter.prototype.type='DatetimeTickFormatter';DatetimeTickFormatter.define({microseconds:[p.Array,['%fus']],milliseconds:[p.Array,['%3Nms','%S.%3Ns']],seconds:[p.Array,['%Ss']],minsec:[p.Array,[':%M:%S']],minutes:[p.Array,[':%M','%Mm']],hourmin:[p.Array,['%H:%M']],hours:[p.Array,['%Hh','%H:%M']],days:[p.Array,['%m/%d','%a%d']],months:[p.Array,['%m/%Y','%b%y']],years:[p.Array,['%Y']]});DatetimeTickFormatter.prototype.format_order=['microseconds','milliseconds','seconds','minsec','minutes','hourmin','hours','days','months','years'];DatetimeTickFormatter.prototype.strip_leading_zeros=true;DatetimeTickFormatter.prototype.initialize=function(attrs,options){DatetimeTickFormatter.__super__.initialize.call(this,attrs,options);return this._update_width_formats();};DatetimeTickFormatter.prototype._update_width_formats=function(){var _widths,now;now=tz(new Date());_widths=function(fmt_strings){var fmt_string,sizes,sorted;sizes=(function(){var j,len,results;results=[];for(j=0,len=fmt_strings.length;j<len;j++){fmt_string=fmt_strings[j];results.push(_strftime(now,fmt_string).length);}
return results;})();sorted=array_1.sortBy(array_1.zip(sizes,fmt_strings),function(arg){var fmt,size;size=arg[0],fmt=arg[1];return size;});return array_1.unzip(sorted);};return this._width_formats={microseconds:_widths(this.microseconds),milliseconds:_widths(this.milliseconds),seconds:_widths(this.seconds),minsec:_widths(this.minsec),minutes:_widths(this.minutes),hourmin:_widths(this.hourmin),hours:_widths(this.hours),days:_widths(this.days),months:_widths(this.months),years:_widths(this.years)};};DatetimeTickFormatter.prototype._get_resolution_str=function(resolution_secs,span_secs){var adjusted_secs;adjusted_secs=resolution_secs*1.1;switch(false){case!(adjusted_secs<1e-3):return"microseconds";case!(adjusted_secs<1.0):return"milliseconds";case!(adjusted_secs<60):if(span_secs>=60){return"minsec";}
else{return"seconds";}
case!(adjusted_secs<3600):if(span_secs>=3600){return"hourmin";}
else{return"minutes";}
case!(adjusted_secs<24*3600):return"hours";case!(adjusted_secs<31*24*3600):return"days";case!(adjusted_secs<365*24*3600):return"months";default:return"years";}};DatetimeTickFormatter.prototype.doFormat=function(ticks,loc,num_labels,char_width,fill_ratio,ticker){var error,fmt,format,formats,good_formats,hybrid_handled,i,j,k,l,labels,len,len1,next_format,next_ndx,r,ref,ref1,ref2,resol,resol_ndx,s,span,ss,t,time_tuple_ndx_for_resol,tm,widths;if(num_labels==null){num_labels=null;}
if(char_width==null){char_width=null;}
if(fill_ratio==null){fill_ratio=0.3;}
if(ticker==null){ticker=null;}
if(ticks.length===0){return[];}
span=Math.abs(ticks[ticks.length-1]-ticks[0])/1000.0;if(ticker){r=ticker.resolution;}
else{r=span/(ticks.length-1);}
resol=this._get_resolution_str(r,span);ref=this._width_formats[resol],widths=ref[0],formats=ref[1];format=formats[0];if(char_width){good_formats=[];for(i=j=0,ref1=widths.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){if(widths[i]*ticks.length<fill_ratio*char_width){good_formats.push(this._width_formats[i]);}}
if(good_formats.length>0){format=good_formats[good_formats.length-1];}}
labels=[];resol_ndx=this.format_order.indexOf(resol);time_tuple_ndx_for_resol={};ref2=this.format_order;for(k=0,len=ref2.length;k<len;k++){fmt=ref2[k];time_tuple_ndx_for_resol[fmt]=0;}
time_tuple_ndx_for_resol["seconds"]=5;time_tuple_ndx_for_resol["minsec"]=4;time_tuple_ndx_for_resol["minutes"]=4;time_tuple_ndx_for_resol["hourmin"]=3;time_tuple_ndx_for_resol["hours"]=3;for(l=0,len1=ticks.length;l<len1;l++){t=ticks[l];try{tm=_array(t);s=_strftime(t,format);}
catch(error1){error=error1;logging_1.logger.warn("unable to format tick for timestamp value "+t);logging_1.logger.warn(" - "+error);labels.push("ERR");continue;}
hybrid_handled=false;next_ndx=resol_ndx;while(tm[time_tuple_ndx_for_resol[this.format_order[next_ndx]]]===0){next_ndx+=1;if(next_ndx===this.format_order.length){break;}
if((resol==="minsec"||resol==="hourmin")&&!hybrid_handled){if((resol==="minsec"&&tm[4]===0&&tm[5]!==0)||(resol==="hourmin"&&tm[3]===0&&tm[4]!==0)){next_format=this._width_formats[this.format_order[resol_ndx-1]][1][0];s=_strftime(t,next_format);break;}
else{hybrid_handled=true;}}
next_format=this._width_formats[this.format_order[next_ndx]][1][0];s=_strftime(t,next_format);}
if(this.strip_leading_zeros){ss=s.replace(/^0+/g,"");if(ss!==s&&isNaN(parseInt(ss))){ss='0'+ss;}
labels.push(ss);}
else{labels.push(s);}}
return labels;};return DatetimeTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array","core/util/types":"core/util/types","sprintf":"sprintf","timezone":"timezone/index"}],"models/formatters/func_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var tick_formatter_1=require("./tick_formatter");var p=require("core/properties");var object_1=require("core/util/object");exports.FuncTickFormatter=(function(superClass){extend(FuncTickFormatter,superClass);function FuncTickFormatter(){return FuncTickFormatter.__super__.constructor.apply(this,arguments);}
FuncTickFormatter.prototype.type='FuncTickFormatter';FuncTickFormatter.define({args:[p.Any,{}],code:[p.String,'']});FuncTickFormatter.prototype.initialize=function(attrs,options){return FuncTickFormatter.__super__.initialize.call(this,attrs,options);};FuncTickFormatter.prototype._make_func=function(){return(function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child;})(Function,["tick"].concat(slice.call(Object.keys(this.args)),["require"],[this.code]),function(){});};FuncTickFormatter.prototype.doFormat=function(ticks,loc){var func,tick;func=this._make_func();return(function(){var i,len,results;results=[];for(i=0,len=ticks.length;i<len;i++){tick=ticks[i];results.push(func.apply(null,[tick].concat(slice.call(object_1.values(this.args)),[require])));}
return results;}).call(this);};return FuncTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/formatters/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var basic_tick_formatter_1=require("./basic_tick_formatter");exports.BasicTickFormatter=basic_tick_formatter_1.BasicTickFormatter;var categorical_tick_formatter_1=require("./categorical_tick_formatter");exports.CategoricalTickFormatter=categorical_tick_formatter_1.CategoricalTickFormatter;var datetime_tick_formatter_1=require("./datetime_tick_formatter");exports.DatetimeTickFormatter=datetime_tick_formatter_1.DatetimeTickFormatter;var func_tick_formatter_1=require("./func_tick_formatter");exports.FuncTickFormatter=func_tick_formatter_1.FuncTickFormatter;var log_tick_formatter_1=require("./log_tick_formatter");exports.LogTickFormatter=log_tick_formatter_1.LogTickFormatter;var mercator_tick_formatter_1=require("./mercator_tick_formatter");exports.MercatorTickFormatter=mercator_tick_formatter_1.MercatorTickFormatter;var numeral_tick_formatter_1=require("./numeral_tick_formatter");exports.NumeralTickFormatter=numeral_tick_formatter_1.NumeralTickFormatter;var printf_tick_formatter_1=require("./printf_tick_formatter");exports.PrintfTickFormatter=printf_tick_formatter_1.PrintfTickFormatter;var tick_formatter_1=require("./tick_formatter");exports.TickFormatter=tick_formatter_1.TickFormatter;},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","./categorical_tick_formatter":"models/formatters/categorical_tick_formatter","./datetime_tick_formatter":"models/formatters/datetime_tick_formatter","./func_tick_formatter":"models/formatters/func_tick_formatter","./log_tick_formatter":"models/formatters/log_tick_formatter","./mercator_tick_formatter":"models/formatters/mercator_tick_formatter","./numeral_tick_formatter":"models/formatters/numeral_tick_formatter","./printf_tick_formatter":"models/formatters/printf_tick_formatter","./tick_formatter":"models/formatters/tick_formatter"}],"models/formatters/log_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var basic_tick_formatter_1=require("./basic_tick_formatter");var tick_formatter_1=require("./tick_formatter");var logging_1=require("core/logging");var p=require("core/properties");exports.LogTickFormatter=(function(superClass){extend(LogTickFormatter,superClass);function LogTickFormatter(){return LogTickFormatter.__super__.constructor.apply(this,arguments);}
LogTickFormatter.prototype.type='LogTickFormatter';LogTickFormatter.define({ticker:[p.Instance,null]});LogTickFormatter.prototype.initialize=function(attrs,options){LogTickFormatter.__super__.initialize.call(this,attrs,options);this.basic_formatter=new basic_tick_formatter_1.BasicTickFormatter();if(this.ticker==null){return logging_1.logger.warn("LogTickFormatter not configured with a ticker, using default base of 10 (labels will be incorrect if ticker base is not 10)");}};LogTickFormatter.prototype.doFormat=function(ticks,loc){var base,i,j,labels,ref,small_interval;if(ticks.length===0){return[];}
if(this.ticker!=null){base=this.ticker.base;}
else{base=10;}
small_interval=false;labels=new Array(ticks.length);for(i=j=0,ref=ticks.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){labels[i]=base+"^"+(Math.round(Math.log(ticks[i])/Math.log(base)));if((i>0)&&(labels[i]===labels[i-1])){small_interval=true;break;}}
if(small_interval){labels=this.basic_formatter.doFormat(ticks);}
return labels;};return LogTickFormatter;})(tick_formatter_1.TickFormatter);},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","./tick_formatter":"models/formatters/tick_formatter","core/logging":"core/logging","core/properties":"core/properties"}],"models/formatters/mercator_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var basic_tick_formatter_1=require("./basic_tick_formatter");var p=require("core/properties");var proj4_1=require("core/util/proj4");exports.MercatorTickFormatter=(function(superClass){extend(MercatorTickFormatter,superClass);function MercatorTickFormatter(){return MercatorTickFormatter.__super__.constructor.apply(this,arguments);}
MercatorTickFormatter.prototype.type='MercatorTickFormatter';MercatorTickFormatter.define({dimension:[p.LatLon]});MercatorTickFormatter.prototype.doFormat=function(ticks,loc){var i,j,k,lat,lon,proj_ticks,ref,ref1,ref2,ref3;if(this.dimension==null){throw new Error("MercatorTickFormatter.dimension not configured");}
if(ticks.length===0){return[];}
proj_ticks=new Array(ticks.length);if(this.dimension==="lon"){for(i=j=0,ref=ticks.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ref1=proj4_1.proj4(proj4_1.mercator).inverse([ticks[i],loc]),lon=ref1[0],lat=ref1[1];proj_ticks[i]=lon;}}
else{for(i=k=0,ref2=ticks.length;0<=ref2?k<ref2:k>ref2;i=0<=ref2?++k:--k){ref3=proj4_1.proj4(proj4_1.mercator).inverse([loc,ticks[i]]),lon=ref3[0],lat=ref3[1];proj_ticks[i]=lat;}}
return MercatorTickFormatter.__super__.doFormat.call(this,proj_ticks,loc);};return MercatorTickFormatter;})(basic_tick_formatter_1.BasicTickFormatter);},{"./basic_tick_formatter":"models/formatters/basic_tick_formatter","core/properties":"core/properties","core/util/proj4":"core/util/proj4"}],"models/formatters/numeral_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var Numbro=require("numbro");var tick_formatter_1=require("./tick_formatter");var p=require("core/properties");exports.NumeralTickFormatter=(function(superClass){extend(NumeralTickFormatter,superClass);function NumeralTickFormatter(){return NumeralTickFormatter.__super__.constructor.apply(this,arguments);}
NumeralTickFormatter.prototype.type='NumeralTickFormatter';NumeralTickFormatter.define({format:[p.String,'0,0'],language:[p.String,'en'],rounding:[p.String,'round']});NumeralTickFormatter.prototype.doFormat=function(ticks,loc){var format,labels,language,rounding,tick;format=this.format;language=this.language;rounding=(function(){switch(this.rounding){case"round":case"nearest":return Math.round;case"floor":case"rounddown":return Math.floor;case"ceil":case"roundup":return Math.ceil;}}).call(this);labels=(function(){var i,len,results;results=[];for(i=0,len=ticks.length;i<len;i++){tick=ticks[i];results.push(Numbro.format(tick,format,language,rounding));}
return results;})();return labels;};return NumeralTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","numbro":"numbro"}],"models/formatters/printf_tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var SPrintf=require("sprintf");var tick_formatter_1=require("./tick_formatter");var p=require("core/properties");exports.PrintfTickFormatter=(function(superClass){extend(PrintfTickFormatter,superClass);function PrintfTickFormatter(){return PrintfTickFormatter.__super__.constructor.apply(this,arguments);}
PrintfTickFormatter.prototype.type='PrintfTickFormatter';PrintfTickFormatter.define({format:[p.String,'%s']});PrintfTickFormatter.prototype.doFormat=function(ticks,loc){var format,labels,tick;format=this.format;labels=(function(){var i,len,results;results=[];for(i=0,len=ticks.length;i<len;i++){tick=ticks[i];results.push(SPrintf.sprintf(format,tick));}
return results;})();return labels;};return PrintfTickFormatter;})(tick_formatter_1.TickFormatter);},{"./tick_formatter":"models/formatters/tick_formatter","core/properties":"core/properties","sprintf":"sprintf"}],"models/formatters/tick_formatter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");exports.TickFormatter=(function(superClass){extend(TickFormatter,superClass);function TickFormatter(){return TickFormatter.__super__.constructor.apply(this,arguments);}
TickFormatter.prototype.type='TickFormatter';TickFormatter.prototype.doFormat=function(ticks,loc){};return TickFormatter;})(model_1.Model);},{"../../model":"model"}],"models/glyphs/annular_wedge":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");var math_1=require("core/util/math");exports.AnnularWedgeView=(function(superClass){extend(AnnularWedgeView,superClass);function AnnularWedgeView(){return AnnularWedgeView.__super__.constructor.apply(this,arguments);}
AnnularWedgeView.prototype._map_data=function(){var i,j,ref,results;if(this.model.properties.inner_radius.units==="data"){this.sinner_radius=this.sdist(this.renderer.xmapper,this._x,this._inner_radius);}
else{this.sinner_radius=this._inner_radius;}
if(this.model.properties.outer_radius.units==="data"){this.souter_radius=this.sdist(this.renderer.xmapper,this._x,this._outer_radius);}
else{this.souter_radius=this._outer_radius;}
this._angle=new Float32Array(this._start_angle.length);results=[];for(i=j=0,ref=this._start_angle.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(this._angle[i]=this._end_angle[i]-this._start_angle[i]);}
return results;};AnnularWedgeView.prototype._render=function(ctx,indices,arg){var _angle,_start_angle,direction,i,j,len,results,sinner_radius,souter_radius,sx,sy;sx=arg.sx,sy=arg.sy,_start_angle=arg._start_angle,_angle=arg._angle,sinner_radius=arg.sinner_radius,souter_radius=arg.souter_radius;direction=this.model.properties.direction.value();results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sinner_radius[i]+souter_radius[i]+_start_angle[i]+_angle[i])){continue;}
ctx.translate(sx[i],sy[i]);ctx.rotate(_start_angle[i]);ctx.moveTo(souter_radius[i],0);ctx.beginPath();ctx.arc(0,0,souter_radius[i],0,_angle[i],direction);ctx.rotate(_angle[i]);ctx.lineTo(sinner_radius[i],0);ctx.arc(0,0,sinner_radius[i],0,-_angle[i],!direction);ctx.closePath();ctx.rotate(-_angle[i]-_start_angle[i]);ctx.translate(-sx[i],-sy[i]);if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};AnnularWedgeView.prototype._hit_point=function(geometry){var angle,bbox,candidates,direction,dist,hits,i,ir2,j,k,len,len1,or2,ref,ref1,ref2,ref3,ref4,sx,sx0,sx1,sy,sy0,sy1,vx,vx0,vx1,vy,vy0,vy1,x,x0,x1,y,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);if(this.model.properties.outer_radius.units==="data"){x0=x-this.max_outer_radius;x1=x+this.max_outer_radius;y0=y-this.max_outer_radius;y1=y+this.max_outer_radius;}
else{vx0=vx-this.max_outer_radius;vx1=vx+this.max_outer_radius;ref1=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref1[0],x1=ref1[1];vy0=vy-this.max_outer_radius;vy1=vy+this.max_outer_radius;ref2=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref2[0],y1=ref2[1];}
candidates=[];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);ref3=this.index.indices(bbox);for(j=0,len=ref3.length;j<len;j++){i=ref3[j];or2=Math.pow(this.souter_radius[i],2);ir2=Math.pow(this.sinner_radius[i],2);sx0=this.renderer.xmapper.map_to_target(x,true);sx1=this.renderer.xmapper.map_to_target(this._x[i],true);sy0=this.renderer.ymapper.map_to_target(y,true);sy1=this.renderer.ymapper.map_to_target(this._y[i],true);dist=Math.pow(sx0-sx1,2)+Math.pow(sy0-sy1,2);if(dist<=or2&&dist>=ir2){candidates.push([i,dist]);}}
direction=this.model.properties.direction.value();hits=[];for(k=0,len1=candidates.length;k<len1;k++){ref4=candidates[k],i=ref4[0],dist=ref4[1];sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);angle=Math.atan2(sy-this.sy[i],sx-this.sx[i]);if(math_1.angle_between(-angle,-this._start_angle[i],-this._end_angle[i],direction)){hits.push([i,dist]);}}
return hittest.create_1d_hit_test_result(hits);};AnnularWedgeView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};AnnularWedgeView.prototype._scxy=function(i){var a,r;r=(this.sinner_radius[i]+this.souter_radius[i])/2;a=(this._start_angle[i]+this._end_angle[i])/2;return{x:this.sx[i]+r*Math.cos(a),y:this.sy[i]+r*Math.sin(a)};};AnnularWedgeView.prototype.scx=function(i){return this._scxy(i).x;};AnnularWedgeView.prototype.scy=function(i){return this._scxy(i).y;};return AnnularWedgeView;})(xy_glyph_1.XYGlyphView);exports.AnnularWedge=(function(superClass){extend(AnnularWedge,superClass);function AnnularWedge(){return AnnularWedge.__super__.constructor.apply(this,arguments);}
AnnularWedge.prototype.default_view=exports.AnnularWedgeView;AnnularWedge.prototype.type='AnnularWedge';AnnularWedge.mixins(['line','fill']);AnnularWedge.define({direction:[p.Direction,'anticlock'],inner_radius:[p.DistanceSpec],outer_radius:[p.DistanceSpec],start_angle:[p.AngleSpec],end_angle:[p.AngleSpec]});return AnnularWedge;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/glyphs/annulus":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");exports.AnnulusView=(function(superClass){extend(AnnulusView,superClass);function AnnulusView(){return AnnulusView.__super__.constructor.apply(this,arguments);}
AnnulusView.prototype._map_data=function(){if(this.model.properties.inner_radius.units==="data"){this.sinner_radius=this.sdist(this.renderer.xmapper,this._x,this._inner_radius);}
else{this.sinner_radius=this._inner_radius;}
if(this.model.properties.outer_radius.units==="data"){return this.souter_radius=this.sdist(this.renderer.xmapper,this._x,this._outer_radius);}
else{return this.souter_radius=this._outer_radius;}};AnnulusView.prototype._render=function(ctx,indices,arg){var clockwise,i,isie,j,k,len,len1,ref,results,sinner_radius,souter_radius,sx,sy;sx=arg.sx,sy=arg.sy,sinner_radius=arg.sinner_radius,souter_radius=arg.souter_radius;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sinner_radius[i]+souter_radius[i])){continue;}
isie=navigator.userAgent.indexOf('MSIE')>=0||navigator.userAgent.indexOf('Trident')>0||navigator.userAgent.indexOf('Edge')>0;if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.beginPath();if(isie){ref=[false,true];for(k=0,len1=ref.length;k<len1;k++){clockwise=ref[k];ctx.arc(sx[i],sy[i],sinner_radius[i],0,Math.PI,clockwise);ctx.arc(sx[i],sy[i],souter_radius[i],Math.PI,0,!clockwise);}}
else{ctx.arc(sx[i],sy[i],sinner_radius[i],0,2*Math.PI,true);ctx.arc(sx[i],sy[i],souter_radius[i],2*Math.PI,0,false);}
ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);ctx.beginPath();ctx.arc(sx[i],sy[i],sinner_radius[i],0,2*Math.PI);ctx.moveTo(sx[i]+souter_radius[i],sy[i]);ctx.arc(sx[i],sy[i],souter_radius[i],0,2*Math.PI);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};AnnulusView.prototype._hit_point=function(geometry){var bbox,dist,hits,i,ir2,j,len,or2,ref,ref1,sx0,sx1,sy0,sy1,vx,vy,x,x0,x1,y,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);x0=x-this.max_radius;x1=x+this.max_radius;y=this.renderer.ymapper.map_from_target(vy,true);y0=y-this.max_radius;y1=y+this.max_radius;hits=[];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);ref1=this.index.indices(bbox);for(j=0,len=ref1.length;j<len;j++){i=ref1[j];or2=Math.pow(this.souter_radius[i],2);ir2=Math.pow(this.sinner_radius[i],2);sx0=this.renderer.xmapper.map_to_target(x);sx1=this.renderer.xmapper.map_to_target(this._x[i]);sy0=this.renderer.ymapper.map_to_target(y);sy1=this.renderer.ymapper.map_to_target(this._y[i]);dist=Math.pow(sx0-sx1,2)+Math.pow(sy0-sy1,2);if(dist<=or2&&dist>=ir2){hits.push([i,dist]);}}
return hittest.create_1d_hit_test_result(hits);};AnnulusView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){var data,indices,r,sinner_radius,souter_radius,sx,sy;indices=[index];sx={};sx[index]=(x0+x1)/2;sy={};sy[index]=(y0+y1)/2;r=Math.min(Math.abs(x1-x0),Math.abs(y1-y0))*0.5;sinner_radius={};sinner_radius[index]=r*0.4;souter_radius={};souter_radius[index]=r*0.8;data={sx:sx,sy:sy,sinner_radius:sinner_radius,souter_radius:souter_radius};return this._render(ctx,indices,data);};return AnnulusView;})(xy_glyph_1.XYGlyphView);exports.Annulus=(function(superClass){extend(Annulus,superClass);function Annulus(){return Annulus.__super__.constructor.apply(this,arguments);}
Annulus.prototype.default_view=exports.AnnulusView;Annulus.prototype.type='Annulus';Annulus.mixins(['line','fill']);Annulus.define({inner_radius:[p.DistanceSpec],outer_radius:[p.DistanceSpec]});return Annulus;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/glyphs/arc":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");exports.ArcView=(function(superClass){extend(ArcView,superClass);function ArcView(){return ArcView.__super__.constructor.apply(this,arguments);}
ArcView.prototype._map_data=function(){if(this.model.properties.radius.units==="data"){return this.sradius=this.sdist(this.renderer.xmapper,this._x,this._radius);}
else{return this.sradius=this._radius;}};ArcView.prototype._render=function(ctx,indices,arg){var _end_angle,_start_angle,direction,i,j,len,results,sradius,sx,sy;sx=arg.sx,sy=arg.sy,sradius=arg.sradius,_start_angle=arg._start_angle,_end_angle=arg._end_angle;if(this.visuals.line.doit){direction=this.model.properties.direction.value();results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sradius[i]+_start_angle[i]+_end_angle[i])){continue;}
ctx.beginPath();ctx.arc(sx[i],sy[i],sradius[i],_start_angle[i],_end_angle[i],direction);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
return results;}};ArcView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return ArcView;})(xy_glyph_1.XYGlyphView);exports.Arc=(function(superClass){extend(Arc,superClass);function Arc(){return Arc.__super__.constructor.apply(this,arguments);}
Arc.prototype.default_view=exports.ArcView;Arc.prototype.type='Arc';Arc.mixins(['line']);Arc.define({direction:[p.Direction,'anticlock'],radius:[p.DistanceSpec],start_angle:[p.AngleSpec],end_angle:[p.AngleSpec]});return Arc;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/bezier":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _cbb,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");_cbb=function(x0,y0,x1,y1,x2,y2,x3,y3){var a,b,b2ac,bounds,c,i,j,jlen,k,mt,sqrtb2ac,t,t1,t2,tvalues,x,y;tvalues=[];bounds=[[],[]];for(i=k=0;k<=2;i=++k){if(i===0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}
else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}
if(Math.abs(a)<1e-12){if(Math.abs(b)<1e-12){continue;}
t=-c/b;if(0<t&&t<1){tvalues.push(t);}
continue;}
b2ac=b*b-4*c*a;sqrtb2ac=Math.sqrt(b2ac);if(b2ac<0){continue;}
t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}
t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}
j=tvalues.length;jlen=j;while(j--){t=tvalues[j];mt=1-t;x=(mt*mt*mt*x0)+(3*mt*mt*t*x1)+(3*mt*t*t*x2)+(t*t*t*x3);bounds[0][j]=x;y=(mt*mt*mt*y0)+(3*mt*mt*t*y1)+(3*mt*t*t*y2)+(t*t*t*y3);bounds[1][j]=y;}
bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;return[Math.min.apply(null,bounds[0]),Math.max.apply(null,bounds[1]),Math.max.apply(null,bounds[0]),Math.min.apply(null,bounds[1])];};exports.BezierView=(function(superClass){extend(BezierView,superClass);function BezierView(){return BezierView.__super__.constructor.apply(this,arguments);}
BezierView.prototype._index_data=function(){var i,k,points,ref,ref1,x0,x1,y0,y1;points=[];for(i=k=0,ref=this._x0.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){if(isNaN(this._x0[i]+this._x1[i]+this._y0[i]+this._y1[i]+this._cx0[i]+this._cy0[i]+this._cx1[i]+this._cy1[i])){continue;}
ref1=_cbb(this._x0[i],this._y0[i],this._x1[i],this._y1[i],this._cx0[i],this._cy0[i],this._cx1[i],this._cy1[i]),x0=ref1[0],y0=ref1[1],x1=ref1[2],y1=ref1[3];points.push({minX:x0,minY:y0,maxX:x1,maxY:y1,i:i});}
return new spatial_1.RBush(points);};BezierView.prototype._render=function(ctx,indices,arg){var i,k,len,results,scx,scx0,scx1,scy0,scy1,sx0,sx1,sy0,sy1;sx0=arg.sx0,sy0=arg.sy0,sx1=arg.sx1,sy1=arg.sy1,scx=arg.scx,scx0=arg.scx0,scy0=arg.scy0,scx1=arg.scx1,scy1=arg.scy1;if(this.visuals.line.doit){results=[];for(k=0,len=indices.length;k<len;k++){i=indices[k];if(isNaN(sx0[i]+sy0[i]+sx1[i]+sy1[i]+scx0[i]+scy0[i]+scx1[i]+scy1[i])){continue;}
ctx.beginPath();ctx.moveTo(sx0[i],sy0[i]);ctx.bezierCurveTo(scx0[i],scy0[i],scx1[i],scy1[i],sx1[i],sy1[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
return results;}};BezierView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return BezierView;})(glyph_1.GlyphView);exports.Bezier=(function(superClass){extend(Bezier,superClass);function Bezier(){return Bezier.__super__.constructor.apply(this,arguments);}
Bezier.prototype.default_view=exports.BezierView;Bezier.prototype.type='Bezier';Bezier.coords([['x0','y0'],['x1','y1'],['cx0','cy0'],['cx1','cy1']]);Bezier.mixins(['line']);return Bezier;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/glyphs/circle":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");exports.CircleView=(function(superClass){extend(CircleView,superClass);function CircleView(){return CircleView.__super__.constructor.apply(this,arguments);}
CircleView.prototype._map_data=function(){var rd,s;if(this._radius!=null){if(this.model.properties.radius.spec.units==="data"){rd=this.model.properties.radius_dimension.spec.value;return this.sradius=this.sdist(this.renderer[rd+"mapper"],this["_"+rd],this._radius);}
else{this.sradius=this._radius;return this.max_size=2*this.max_radius;}}
else{return this.sradius=(function(){var j,len,ref,results;ref=this._size;results=[];for(j=0,len=ref.length;j<len;j++){s=ref[j];results.push(s/2);}
return results;}).call(this);}};CircleView.prototype._mask_data=function(all_indices){var bbox,hr,ref,ref1,ref2,ref3,sx0,sx1,sy0,sy1,vr,x0,x1,y0,y1;hr=this.renderer.plot_view.frame.h_range;vr=this.renderer.plot_view.frame.v_range;if((this._radius!=null)&&this.model.properties.radius.units==="data"){sx0=hr.start;sx1=hr.end;ref=this.renderer.xmapper.v_map_from_target([sx0,sx1],true),x0=ref[0],x1=ref[1];x0-=this.max_radius;x1+=this.max_radius;sy0=vr.start;sy1=vr.end;ref1=this.renderer.ymapper.v_map_from_target([sy0,sy1],true),y0=ref1[0],y1=ref1[1];y0-=this.max_radius;y1+=this.max_radius;}
else{sx0=hr.start-this.max_size;sx1=hr.end+this.max_size;ref2=this.renderer.xmapper.v_map_from_target([sx0,sx1],true),x0=ref2[0],x1=ref2[1];sy0=vr.start-this.max_size;sy1=vr.end+this.max_size;ref3=this.renderer.ymapper.v_map_from_target([sy0,sy1],true),y0=ref3[0],y1=ref3[1];}
bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);return this.index.indices(bbox);};CircleView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sradius,sx,sy;sx=arg.sx,sy=arg.sy,sradius=arg.sradius;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sradius[i])){continue;}
ctx.beginPath();ctx.arc(sx[i],sy[i],sradius[i],0,2*Math.PI,false);if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};CircleView.prototype._hit_point=function(geometry){var bbox,candidates,dist,hits,i,j,k,len,len1,r2,ref,ref1,ref2,ref3,ref4,sx,sx0,sx1,sy,sy0,sy1,vx,vx0,vx1,vy,vy0,vy1,x,x0,x1,y,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);if((this._radius!=null)&&this.model.properties.radius.units==="data"){x0=x-this.max_radius;x1=x+this.max_radius;y0=y-this.max_radius;y1=y+this.max_radius;}
else{vx0=vx-this.max_size;vx1=vx+this.max_size;ref1=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref1[0],x1=ref1[1];ref2=[Math.min(x0,x1),Math.max(x0,x1)],x0=ref2[0],x1=ref2[1];vy0=vy-this.max_size;vy1=vy+this.max_size;ref3=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref3[0],y1=ref3[1];ref4=[Math.min(y0,y1),Math.max(y0,y1)],y0=ref4[0],y1=ref4[1];}
bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);candidates=this.index.indices(bbox);hits=[];if((this._radius!=null)&&this.model.properties.radius.units==="data"){for(j=0,len=candidates.length;j<len;j++){i=candidates[j];r2=Math.pow(this.sradius[i],2);sx0=this.renderer.xmapper.map_to_target(x,true);sx1=this.renderer.xmapper.map_to_target(this._x[i],true);sy0=this.renderer.ymapper.map_to_target(y,true);sy1=this.renderer.ymapper.map_to_target(this._y[i],true);dist=Math.pow(sx0-sx1,2)+Math.pow(sy0-sy1,2);if(dist<=r2){hits.push([i,dist]);}}}
else{sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);for(k=0,len1=candidates.length;k<len1;k++){i=candidates[k];r2=Math.pow(this.sradius[i],2);dist=Math.pow(this.sx[i]-sx,2)+Math.pow(this.sy[i]-sy,2);if(dist<=r2){hits.push([i,dist]);}}}
return hittest.create_1d_hit_test_result(hits);};CircleView.prototype._hit_span=function(geometry){var bbox,hits,maxX,maxY,minX,minY,ms,ref,ref1,ref2,ref3,ref4,ref5,result,vx,vx0,vx1,vy,vy0,vy1,x0,x1,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];ref1=this.bounds(),minX=ref1.minX,minY=ref1.minY,maxX=ref1.maxX,maxY=ref1.maxY;result=hittest.create_hit_test_result();if(geometry.direction==='h'){y0=minY;y1=maxY;if((this._radius!=null)&&this.model.properties.radius.units==="data"){vx0=vx-this.max_radius;vx1=vx+this.max_radius;ref2=this.renderer.xmapper.v_map_from_target([vx0,vx1]),x0=ref2[0],x1=ref2[1];}
else{ms=this.max_size/2;vx0=vx-ms;vx1=vx+ms;ref3=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref3[0],x1=ref3[1];}}
else{x0=minX;x1=maxX;if((this._radius!=null)&&this.model.properties.radius.units==="data"){vy0=vy-this.max_radius;vy1=vy+this.max_radius;ref4=this.renderer.ymapper.v_map_from_target([vy0,vy1]),y0=ref4[0],y1=ref4[1];}
else{ms=this.max_size/2;vy0=vy-ms;vy1=vy+ms;ref5=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref5[0],y1=ref5[1];}}
bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);hits=this.index.indices(bbox);result['1d'].indices=hits;return result;};CircleView.prototype._hit_rect=function(geometry){var bbox,ref,ref1,result,x0,x1,y0,y1;ref=this.renderer.xmapper.v_map_from_target([geometry.vx0,geometry.vx1],true),x0=ref[0],x1=ref[1];ref1=this.renderer.ymapper.v_map_from_target([geometry.vy0,geometry.vy1],true),y0=ref1[0],y1=ref1[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);result=hittest.create_hit_test_result();result['1d'].indices=this.index.indices(bbox);return result;};CircleView.prototype._hit_poly=function(geometry){var candidates,hits,i,idx,j,k,ref,ref1,ref2,result,results,sx,sy,vx,vy;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];sx=this.renderer.plot_view.canvas.v_vx_to_sx(vx);sy=this.renderer.plot_view.canvas.v_vy_to_sy(vy);candidates=(function(){results=[];for(var j=0,ref1=this.sx.length;0<=ref1?j<ref1:j>ref1;0<=ref1?j++:j--){results.push(j);}
return results;}).apply(this);hits=[];for(i=k=0,ref2=candidates.length;0<=ref2?k<ref2:k>ref2;i=0<=ref2?++k:--k){idx=candidates[i];if(hittest.point_in_poly(this.sx[i],this.sy[i],sx,sy)){hits.push(idx);}}
result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};CircleView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){var data,indices,sradius,sx,sy;indices=[index];sx={};sx[index]=(x0+x1)/2;sy={};sy[index]=(y0+y1)/2;sradius={};sradius[index]=Math.min(Math.abs(x1-x0),Math.abs(y1-y0))*0.2;data={sx:sx,sy:sy,sradius:sradius};return this._render(ctx,indices,data);};return CircleView;})(xy_glyph_1.XYGlyphView);exports.Circle=(function(superClass){extend(Circle,superClass);function Circle(){return Circle.__super__.constructor.apply(this,arguments);}
Circle.prototype.default_view=exports.CircleView;Circle.prototype.type='Circle';Circle.mixins(['line','fill']);Circle.define({angle:[p.AngleSpec,0],size:[p.DistanceSpec,{units:"screen",value:4}],radius:[p.DistanceSpec,null],radius_dimension:[p.String,'x']});Circle.prototype.initialize=function(attrs,options){Circle.__super__.initialize.call(this,attrs,options);return this.properties.radius.optional=true;};return Circle;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/glyphs/ellipse":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");exports.EllipseView=(function(superClass){extend(EllipseView,superClass);function EllipseView(){return EllipseView.__super__.constructor.apply(this,arguments);}
EllipseView.prototype._set_data=function(){this.max_w2=0;if(this.model.properties.width.units==="data"){this.max_w2=this.max_width/2;}
this.max_h2=0;if(this.model.properties.height.units==="data"){return this.max_h2=this.max_height/2;}};EllipseView.prototype._map_data=function(){if(this.model.properties.width.units==="data"){this.sw=this.sdist(this.renderer.xmapper,this._x,this._width,'center');}
else{this.sw=this._width;}
if(this.model.properties.height.units==="data"){return this.sh=this.sdist(this.renderer.ymapper,this._y,this._height,'center');}
else{return this.sh=this._height;}};EllipseView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sh,sw,sx,sy;sx=arg.sx,sy=arg.sy,sw=arg.sw,sh=arg.sh;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sw[i]+sh[i]+this._angle[i])){continue;}
ctx.beginPath();ctx.ellipse(sx[i],sy[i],sw[i]/2.0,sh[i]/2.0,this._angle[i],0,2*Math.PI);if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};EllipseView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){var d,data,indices,scale,sh,sw,sx,sy;indices=[index];sx={};sx[index]=(x0+x1)/2;sy={};sy[index]=(y0+y1)/2;scale=this.sw[index]/this.sh[index];d=Math.min(Math.abs(x1-x0),Math.abs(y1-y0))*0.8;sw={};sh={};if(scale>1){sw[index]=d;sh[index]=d/scale;}
else{sw[index]=d*scale;sh[index]=d;}
data={sx:sx,sy:sy,sw:sw,sh:sh};return this._render(ctx,indices,data);};EllipseView.prototype._bounds=function(bds){return this.max_wh2_bounds(bds);};return EllipseView;})(xy_glyph_1.XYGlyphView);exports.Ellipse=(function(superClass){extend(Ellipse,superClass);function Ellipse(){return Ellipse.__super__.constructor.apply(this,arguments);}
Ellipse.prototype.default_view=exports.EllipseView;Ellipse.prototype.type='Ellipse';Ellipse.mixins(['line','fill']);Ellipse.define({angle:[p.AngleSpec,0.0],width:[p.DistanceSpec],height:[p.DistanceSpec]});return Ellipse;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/glyph":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var bbox=require("core/util/bbox");var proj=require("core/util/projections");var bokeh_view_1=require("core/bokeh_view");var model_1=require("../../model");var visuals_1=require("core/visuals");var logging_1=require("core/logging");var object_1=require("core/util/object");var types_1=require("core/util/types");exports.GlyphView=(function(superClass){extend1(GlyphView,superClass);function GlyphView(){return GlyphView.__super__.constructor.apply(this,arguments);}
GlyphView.prototype.initialize=function(options){var Cls,ctx,e,glglyphs;GlyphView.__super__.initialize.call(this,options);this._nohit_warned={};this.renderer=options.renderer;this.visuals=new visuals_1.Visuals(this.model);ctx=this.renderer.plot_view.canvas_view.ctx;if(ctx.glcanvas!=null){try{glglyphs=require("models/glyphs/webgl/index");}
catch(error){e=error;if(e.code==='MODULE_NOT_FOUND'){logging_1.logger.warn('WebGL was requested and is supported, but bokeh-gl(.min).js is not available, falling back to 2D rendering.');glglyphs=null;}
else{throw e;}}
if(glglyphs!=null){Cls=glglyphs[this.model.type+'GLGlyph'];if(Cls!=null){return this.glglyph=new Cls(ctx.glcanvas.gl,this);}}}};GlyphView.prototype.set_visuals=function(source){this.visuals.warm_cache(source);if(this.glglyph!=null){return this.glglyph.set_visuals_changed();}};GlyphView.prototype.render=function(ctx,indices,data){ctx.beginPath();if(this.glglyph!=null){if(this.glglyph.render(ctx,indices,data)){return;}}
return this._render(ctx,indices,data);};GlyphView.prototype.bounds=function(){if(this.index==null){return bbox.empty();}
else{return this._bounds(this.index.bbox);}};GlyphView.prototype.log_bounds=function(){var bb,j,k,len,len1,positive_x_bbs,positive_y_bbs,x,y;if(this.index==null){return bbox.empty();}
bb=bbox.empty();positive_x_bbs=this.index.search(bbox.positive_x());positive_y_bbs=this.index.search(bbox.positive_y());for(j=0,len=positive_x_bbs.length;j<len;j++){x=positive_x_bbs[j];if(x.minX<bb.minX){bb.minX=x.minX;}
if(x.maxX>bb.maxX){bb.maxX=x.maxX;}}
for(k=0,len1=positive_y_bbs.length;k<len1;k++){y=positive_y_bbs[k];if(y.minY<bb.minY){bb.minY=y.minY;}
if(y.maxY>bb.maxY){bb.maxY=y.maxY;}}
return this._bounds(bb);};GlyphView.prototype.max_wh2_bounds=function(bds){return{minX:bds.minX-this.max_w2,maxX:bds.maxX+this.max_w2,minY:bds.minY-this.max_h2,maxY:bds.maxY+this.max_h2};};GlyphView.prototype.get_anchor_point=function(anchor,i,arg){var sx,sy;sx=arg[0],sy=arg[1];switch(anchor){case"center":return{x:this.scx(i,sx,sy),y:this.scy(i,sx,sy)};default:return null;}};GlyphView.prototype.scx=function(i){return this.sx[i];};GlyphView.prototype.scy=function(i){return this.sy[i];};GlyphView.prototype.sdist=function(mapper,pts,spans,pts_location,dilate){var d,halfspan,i,pt0,pt1,spt0,spt1;if(pts_location==null){pts_location="edge";}
if(dilate==null){dilate=false;}
if(types_1.isString(pts[0])){pts=mapper.v_map_to_target(pts);}
if(pts_location==='center'){halfspan=(function(){var j,len,results;results=[];for(j=0,len=spans.length;j<len;j++){d=spans[j];results.push(d/2);}
return results;})();pt0=(function(){var j,ref,results;results=[];for(i=j=0,ref=pts.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(pts[i]-halfspan[i]);}
return results;})();pt1=(function(){var j,ref,results;results=[];for(i=j=0,ref=pts.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(pts[i]+halfspan[i]);}
return results;})();}
else{pt0=pts;pt1=(function(){var j,ref,results;results=[];for(i=j=0,ref=pt0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(pt0[i]+spans[i]);}
return results;})();}
spt0=mapper.v_map_to_target(pt0);spt1=mapper.v_map_to_target(pt1);if(dilate){return(function(){var j,ref,results;results=[];for(i=j=0,ref=spt0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(Math.ceil(Math.abs(spt1[i]-spt0[i])));}
return results;})();}
else{return(function(){var j,ref,results;results=[];for(i=j=0,ref=spt0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(Math.abs(spt1[i]-spt0[i]));}
return results;})();}};GlyphView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return null;};GlyphView.prototype._generic_line_legend=function(ctx,x0,x1,y0,y1,index){ctx.save();ctx.beginPath();ctx.moveTo(x0,(y0+y1)/2);ctx.lineTo(x1,(y0+y1)/2);if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,index);ctx.stroke();}
return ctx.restore();};GlyphView.prototype._generic_area_legend=function(ctx,x0,x1,y0,y1,index){var dh,dw,h,indices,sx0,sx1,sy0,sy1,w;indices=[index];w=Math.abs(x1-x0);dw=w*0.1;h=Math.abs(y1-y0);dh=h*0.1;sx0=x0+dw;sx1=x1-dw;sy0=y0+dh;sy1=y1-dh;if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,index);ctx.fillRect(sx0,sy0,sx1-sx0,sy1-sy0);}
if(this.visuals.line.doit){ctx.beginPath();ctx.rect(sx0,sy0,sx1-sx0,sy1-sy0);this.visuals.line.set_vectorize(ctx,index);return ctx.stroke();}};GlyphView.prototype.hit_test=function(geometry){var func,result;result=null;func="_hit_"+geometry.type;if(this[func]!=null){result=this[func](geometry);}
else if(this._nohit_warned[geometry.type]==null){logging_1.logger.debug("'"+geometry.type+"' selection not available for "+this.model.type);this._nohit_warned[geometry.type]=true;}
return result;};GlyphView.prototype.set_data=function(source){var data,ref,ref1;data=this.model.materialize_dataspecs(source);object_1.extend(this,data);if(this.renderer.plot_view.model.use_map){if(this._x!=null){ref=proj.project_xy(this._x,this._y),this._x=ref[0],this._y=ref[1];}
if(this._xs!=null){ref1=proj.project_xsys(this._xs,this._ys),this._xs=ref1[0],this._ys=ref1[1];}}
if(this.glglyph!=null){this.glglyph.set_data_changed(this._x.length);}
this._set_data(source);return this.index=this._index_data();};GlyphView.prototype._set_data=function(){};GlyphView.prototype._index_data=function(){};GlyphView.prototype.mask_data=function(indices){if(this.glglyph!=null){return indices;}
else{return this._mask_data(indices);}};GlyphView.prototype._mask_data=function(indices){return indices;};GlyphView.prototype._bounds=function(bounds){return bounds;};GlyphView.prototype.map_data=function(){var i,j,k,len,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,ref8,sx,sxname,sy,syname,xname,yname;ref=this.model._coords;for(j=0,len=ref.length;j<len;j++){ref1=ref[j],xname=ref1[0],yname=ref1[1];sxname="s"+xname;syname="s"+yname;xname="_"+xname;yname="_"+yname;if(types_1.isArray((ref2=this[xname])!=null?ref2[0]:void 0)||((ref3=this[xname])!=null?(ref4=ref3[0])!=null?ref4.buffer:void 0:void 0)instanceof ArrayBuffer){ref5=[[],[]],this[sxname]=ref5[0],this[syname]=ref5[1];for(i=k=0,ref6=this[xname].length;0<=ref6?k<ref6:k>ref6;i=0<=ref6?++k:--k){ref7=this.map_to_screen(this[xname][i],this[yname][i]),sx=ref7[0],sy=ref7[1];this[sxname].push(sx);this[syname].push(sy);}}
else{ref8=this.map_to_screen(this[xname],this[yname]),this[sxname]=ref8[0],this[syname]=ref8[1];}}
return this._map_data();};GlyphView.prototype._map_data=function(){};GlyphView.prototype.map_to_screen=function(x,y){return this.renderer.plot_view.map_to_screen(x,y,this.model.x_range_name,this.model.y_range_name);};return GlyphView;})(bokeh_view_1.BokehView);exports.Glyph=(function(superClass){extend1(Glyph,superClass);function Glyph(){return Glyph.__super__.constructor.apply(this,arguments);}
Glyph.prototype._coords=[];Glyph.coords=function(coords){var _coords,j,len,ref,result,x,y;_coords=this.prototype._coords.concat(coords);this.prototype._coords=_coords;result={};for(j=0,len=coords.length;j<len;j++){ref=coords[j],x=ref[0],y=ref[1];result[x]=[p.NumberSpec];result[y]=[p.NumberSpec];}
return this.define(result);};Glyph.internal({x_range_name:[p.String,'default'],y_range_name:[p.String,'default']});return Glyph;})(model_1.Model);},{"../../model":"model","core/bokeh_view":"core/bokeh_view","core/logging":"core/logging","core/properties":"core/properties","core/util/bbox":"core/util/bbox","core/util/object":"core/util/object","core/util/projections":"core/util/projections","core/util/types":"core/util/types","core/visuals":"core/visuals","models/glyphs/webgl/index":undefined}],"models/glyphs/hbar":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");var categorical_mapper_1=require("../mappers/categorical_mapper");var hittest=require("core/hittest");var p=require("core/properties");exports.HBarView=(function(superClass){extend(HBarView,superClass);function HBarView(){return HBarView.__super__.constructor.apply(this,arguments);}
HBarView.prototype._map_data=function(){var i,j,ref,vleft,vright,vy;vy=this.renderer.ymapper.v_map_to_target(this._y);this.sy=this.renderer.plot_view.canvas.v_vy_to_sy(vy);vright=this.renderer.xmapper.v_map_to_target(this._right);vleft=this.renderer.xmapper.v_map_to_target(this._left);this.sright=this.renderer.plot_view.canvas.v_vx_to_sx(vright);this.sleft=this.renderer.plot_view.canvas.v_vx_to_sx(vleft);this.stop=[];this.sbottom=[];this.sh=this.sdist(this.renderer.ymapper,this._y,this._height,'center');for(i=j=0,ref=this.sy.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){this.stop.push(this.sy[i]-this.sh[i]/2);this.sbottom.push(this.sy[i]+this.sh[i]/2);}
return null;};HBarView.prototype._index_data=function(){var b,height,i,j,l,left,map_to_synthetic,points,r,ref,right,t,y;map_to_synthetic=function(mapper,array){if(mapper instanceof categorical_mapper_1.CategoricalMapper){return mapper.v_map_to_target(array,true);}
else{return array;}};left=map_to_synthetic(this.renderer.xmapper,this._left);right=map_to_synthetic(this.renderer.xmapper,this._right);y=map_to_synthetic(this.renderer.ymapper,this._y);height=map_to_synthetic(this.renderer.ymapper,this._height);points=[];for(i=j=0,ref=y.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){l=left[i];r=right[i];t=y[i]+0.5*height[i];b=y[i]-0.5*height[i];if(isNaN(l+r+t+b)||!isFinite(l+r+t+b)){continue;}
points.push({minX:l,minY:b,maxX:r,maxY:t,i:i});}
return new spatial_1.RBush(points);};HBarView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sbottom,sleft,sright,stop;sleft=arg.sleft,sright=arg.sright,stop=arg.stop,sbottom=arg.sbottom;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sleft[i]+stop[i]+sright[i]+sbottom[i])){continue;}
if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fillRect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);}
if(this.visuals.line.doit){ctx.beginPath();ctx.rect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};HBarView.prototype._hit_point=function(geometry){var hits,ref,result,vx,vy,x,y;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);hits=this.index.indices({minX:x,minY:y,maxX:x,maxY:y});result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};HBarView.prototype.scx=function(i){return(this.sleft[i]+this.sright[i])/2;};HBarView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return HBarView;})(glyph_1.GlyphView);exports.HBar=(function(superClass){extend(HBar,superClass);function HBar(){return HBar.__super__.constructor.apply(this,arguments);}
HBar.prototype.default_view=exports.HBarView;HBar.prototype.type='HBar';HBar.mixins(['line','fill']);HBar.define({y:[p.NumberSpec],height:[p.DistanceSpec],left:[p.NumberSpec,0],right:[p.NumberSpec]});return HBar;})(glyph_1.Glyph);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/spatial":"core/util/spatial"}],"models/glyphs/image":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Greys9,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var linear_color_mapper_1=require("../mappers/linear_color_mapper");var p=require("core/properties");var array_1=require("core/util/array");exports.ImageView=(function(superClass){extend(ImageView,superClass);function ImageView(){return ImageView.__super__.constructor.apply(this,arguments);}
ImageView.prototype.initialize=function(options){ImageView.__super__.initialize.call(this,options);return this.listenTo(this.model.color_mapper,'change',this._update_image);};ImageView.prototype._update_image=function(){if(this.image_data!=null){this._set_data();return this.renderer.plot_view.request_render();}};ImageView.prototype._set_data=function(){var buf,buf8,canvas,cmap,ctx,i,image_data,img,j,ref,results,shape;if((this.image_data==null)||this.image_data.length!==this._image.length){this.image_data=new Array(this._image.length);}
if((this._width==null)||this._width.length!==this._image.length){this._width=new Array(this._image.length);}
if((this._height==null)||this._height.length!==this._image.length){this._height=new Array(this._image.length);}
results=[];for(i=j=0,ref=this._image.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){shape=[];if(this._image_shape!=null){shape=this._image_shape[i];}
if(shape.length>0){img=this._image[i];this._height[i]=shape[0];this._width[i]=shape[1];}
else{img=array_1.concat(this._image[i]);this._height[i]=this._image[i].length;this._width[i]=this._image[i][0].length;}
if((this.image_data[i]!=null)&&this.image_data[i].width===this._width[i]&&this.image_data[i].height===this._height[i]){canvas=this.image_data[i];}
else{canvas=document.createElement('canvas');canvas.width=this._width[i];canvas.height=this._height[i];}
ctx=canvas.getContext('2d');image_data=ctx.getImageData(0,0,this._width[i],this._height[i]);cmap=this.model.color_mapper;buf=cmap.v_map_screen(img,true);buf8=new Uint8Array(buf);image_data.data.set(buf8);ctx.putImageData(image_data,0,0);this.image_data[i]=canvas;this.max_dw=0;if(this._dw.units==="data"){this.max_dw=array_1.max(this._dw);}
this.max_dh=0;if(this._dh.units==="data"){results.push(this.max_dh=array_1.max(this._dh));}
else{results.push(void 0);}}
return results;};ImageView.prototype._map_data=function(){switch(this.model.properties.dw.units){case"data":this.sw=this.sdist(this.renderer.xmapper,this._x,this._dw,'edge',this.model.dilate);break;case"screen":this.sw=this._dw;}
switch(this.model.properties.dh.units){case"data":return this.sh=this.sdist(this.renderer.ymapper,this._y,this._dh,'edge',this.model.dilate);case"screen":return this.sh=this._dh;}};ImageView.prototype._render=function(ctx,indices,arg){var i,image_data,j,len,old_smoothing,sh,sw,sx,sy,y_offset;image_data=arg.image_data,sx=arg.sx,sy=arg.sy,sw=arg.sw,sh=arg.sh;old_smoothing=ctx.getImageSmoothingEnabled();ctx.setImageSmoothingEnabled(false);for(j=0,len=indices.length;j<len;j++){i=indices[j];if(image_data[i]==null){continue;}
if(isNaN(sx[i]+sy[i]+sw[i]+sh[i])){continue;}
y_offset=sy[i];ctx.translate(0,y_offset);ctx.scale(1,-1);ctx.translate(0,-y_offset);ctx.drawImage(image_data[i],sx[i]|0,sy[i]|0,sw[i],sh[i]);ctx.translate(0,y_offset);ctx.scale(1,-1);ctx.translate(0,-y_offset);}
return ctx.setImageSmoothingEnabled(old_smoothing);};ImageView.prototype.bounds=function(){var bbox;bbox=this.index.bbox;bbox.maxX+=this.max_dw;bbox.maxY+=this.max_dh;return bbox;};return ImageView;})(xy_glyph_1.XYGlyphView);Greys9=function(){return[0x000000,0x252525,0x525252,0x737373,0x969696,0xbdbdbd,0xd9d9d9,0xf0f0f0,0xffffff];};exports.Image=(function(superClass){extend(Image,superClass);function Image(){return Image.__super__.constructor.apply(this,arguments);}
Image.prototype.default_view=exports.ImageView;Image.prototype.type='Image';Image.define({image:[p.NumberSpec],dw:[p.DistanceSpec],dh:[p.DistanceSpec],dilate:[p.Bool,false],color_mapper:[p.Instance,function(){return new linear_color_mapper_1.LinearColorMapper({palette:Greys9()});}]});return Image;})(xy_glyph_1.XYGlyph);},{"../mappers/linear_color_mapper":"models/mappers/linear_color_mapper","./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/glyphs/image_rgba":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");var array_1=require("core/util/array");exports.ImageRGBAView=(function(superClass){extend(ImageRGBAView,superClass);function ImageRGBAView(){return ImageRGBAView.__super__.constructor.apply(this,arguments);}
ImageRGBAView.prototype._set_data=function(source,arg){var buf,buf8,canvas,color,ctx,flat,i,image_data,j,k,l,m,ref,ref1,ref2,results,shape;if((this.image_data==null)||this.image_data.length!==this._image.length){this.image_data=new Array(this._image.length);}
if((this._width==null)||this._width.length!==this._image.length){this._width=new Array(this._image.length);}
if((this._height==null)||this._height.length!==this._image.length){this._height=new Array(this._image.length);}
results=[];for(i=k=0,ref=this._image.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){if(arg!=null){if(i!==arg){continue;}}
shape=[];if(this._image_shape!=null){shape=this._image_shape[i];}
if(this._rows!=null){this._height[i]=this._rows[i];this._width[i]=this._cols[i];if(shape.length>0){buf=this._image[i].buffer;}
else{flat=this._image[i];buf=new ArrayBuffer(flat.length*4);color=new Uint32Array(buf);for(j=l=0,ref1=flat.length;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){color[j]=flat[j];}}}
else if(shape.length>0){buf=this._image[i].buffer;this._height[i]=shape[0];this._width[i]=shape[1];}
else{flat=array_1.concat(this._image[i]);buf=new ArrayBuffer(flat.length*4);color=new Uint32Array(buf);for(j=m=0,ref2=flat.length;0<=ref2?m<ref2:m>ref2;j=0<=ref2?++m:--m){color[j]=flat[j];}
this._height[i]=this._image[i].length;this._width[i]=this._image[i][0].length;}
if((this.image_data[i]!=null)&&this.image_data[i].width===this._width[i]&&this.image_data[i].height===this._height[i]){canvas=this.image_data[i];}
else{canvas=document.createElement('canvas');canvas.width=this._width[i];canvas.height=this._height[i];}
ctx=canvas.getContext('2d');image_data=ctx.getImageData(0,0,this._width[i],this._height[i]);buf8=new Uint8Array(buf);image_data.data.set(buf8);ctx.putImageData(image_data,0,0);this.image_data[i]=canvas;this.max_dw=0;if(this._dw.units==="data"){this.max_dw=array_1.max(this._dw);}
this.max_dh=0;if(this._dh.units==="data"){results.push(this.max_dh=array_1.max(this._dh));}
else{results.push(void 0);}}
return results;};ImageRGBAView.prototype._map_data=function(){switch(this.model.properties.dw.units){case"data":this.sw=this.sdist(this.renderer.xmapper,this._x,this._dw,'edge',this.model.dilate);break;case"screen":this.sw=this._dw;}
switch(this.model.properties.dh.units){case"data":return this.sh=this.sdist(this.renderer.ymapper,this._y,this._dh,'edge',this.model.dilate);case"screen":return this.sh=this._dh;}};ImageRGBAView.prototype._render=function(ctx,indices,arg1){var i,image_data,k,len,old_smoothing,sh,sw,sx,sy,y_offset;image_data=arg1.image_data,sx=arg1.sx,sy=arg1.sy,sw=arg1.sw,sh=arg1.sh;old_smoothing=ctx.getImageSmoothingEnabled();ctx.setImageSmoothingEnabled(false);for(k=0,len=indices.length;k<len;k++){i=indices[k];if(isNaN(sx[i]+sy[i]+sw[i]+sh[i])){continue;}
y_offset=sy[i];ctx.translate(0,y_offset);ctx.scale(1,-1);ctx.translate(0,-y_offset);ctx.drawImage(image_data[i],sx[i]|0,sy[i]|0,sw[i],sh[i]);ctx.translate(0,y_offset);ctx.scale(1,-1);ctx.translate(0,-y_offset);}
return ctx.setImageSmoothingEnabled(old_smoothing);};ImageRGBAView.prototype.bounds=function(){var bbox;bbox=this.index.bbox;bbox.maxX+=this.max_dw;bbox.maxY+=this.max_dh;return bbox;};return ImageRGBAView;})(xy_glyph_1.XYGlyphView);exports.ImageRGBA=(function(superClass){extend(ImageRGBA,superClass);function ImageRGBA(){return ImageRGBA.__super__.constructor.apply(this,arguments);}
ImageRGBA.prototype.default_view=exports.ImageRGBAView;ImageRGBA.prototype.type='ImageRGBA';ImageRGBA.define({image:[p.NumberSpec],rows:[p.NumberSpec],cols:[p.NumberSpec],dw:[p.DistanceSpec],dh:[p.DistanceSpec],dilate:[p.Bool,false]});ImageRGBA.prototype.initialize=function(attrs,options){ImageRGBA.__super__.initialize.call(this,attrs,options);this.properties.rows.optional=true;return this.properties.cols.optional=true;};return ImageRGBA;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/glyphs/image_url":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var glyph_1=require("./glyph");var logging_1=require("core/logging");var p=require("core/properties");exports.ImageURLView=(function(superClass){extend(ImageURLView,superClass);function ImageURLView(){return ImageURLView.__super__.constructor.apply(this,arguments);}
ImageURLView.prototype.initialize=function(options){ImageURLView.__super__.initialize.call(this,options);return this.listenTo(this.model,'change:global_alpha',this.renderer.request_render);};ImageURLView.prototype._index_data=function(){};ImageURLView.prototype._set_data=function(){var i,img,j,ref,results,retry_attempts,retry_timeout;if((this.image==null)||this.image.length!==this._url.length){this.image=(function(){var j,len,ref,results;ref=this._url;results=[];for(j=0,len=ref.length;j<len;j++){img=ref[j];results.push(null);}
return results;}).call(this);}
retry_attempts=this.model.retry_attempts;retry_timeout=this.model.retry_timeout;this.retries=(function(){var j,len,ref,results;ref=this._url;results=[];for(j=0,len=ref.length;j<len;j++){img=ref[j];results.push(retry_attempts);}
return results;}).call(this);results=[];for(i=j=0,ref=this._url.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(this._url[i]==null){continue;}
img=new Image();img.onerror=(function(_this){return function(i,img){return function(){if(_this.retries[i]>0){logging_1.logger.trace("ImageURL failed to load "+_this._url[i]+" image, retrying in "+retry_timeout+" ms");setTimeout((function(){return img.src=_this._url[i];}),retry_timeout);}
else{logging_1.logger.warn("ImageURL unable to load "+_this._url[i]+" image after "+retry_attempts+" retries");}
return _this.retries[i]-=1;};};})(this)(i,img);img.onload=(function(_this){return function(img,i){return function(){_this.image[i]=img;return _this.renderer.request_render();};};})(this)(img,i);results.push(img.src=this._url[i]);}
return results;};ImageURLView.prototype._map_data=function(){var hs,ws,x;ws=((function(){var j,len,ref,results;if(this._w!=null){return this._w;}
else{ref=this._x;results=[];for(j=0,len=ref.length;j<len;j++){x=ref[j];results.push(0/0);}
return results;}}).call(this));hs=((function(){var j,len,ref,results;if(this._h!=null){return this._h;}
else{ref=this._x;results=[];for(j=0,len=ref.length;j<len;j++){x=ref[j];results.push(0/0);}
return results;}}).call(this));switch(this.model.properties.w.units){case"data":this.sw=this.sdist(this.renderer.xmapper,this._x,ws,'edge',this.model.dilate);break;case"screen":this.sw=ws;}
switch(this.model.properties.h.units){case"data":return this.sh=this.sdist(this.renderer.ymapper,this._y,hs,'edge',this.model.dilate);case"screen":return this.sh=hs;}};ImageURLView.prototype._render=function(ctx,indices,arg){var _angle,_url,frame,i,image,j,len,results,sh,sw,sx,sy;_url=arg._url,image=arg.image,sx=arg.sx,sy=arg.sy,sw=arg.sw,sh=arg.sh,_angle=arg._angle;frame=this.renderer.plot_view.frame;ctx.rect(frame.left+1,frame.bottom+1,frame.width-2,frame.height-2);ctx.clip();results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+_angle[i])){continue;}
if(this.retries[i]===-1){continue;}
if(image[i]==null){continue;}
results.push(this._render_image(ctx,i,image[i],sx,sy,sw,sh,_angle));}
return results;};ImageURLView.prototype._final_sx_sy=function(anchor,sx,sy,sw,sh){switch(anchor){case'top_left':return[sx,sy];case'top_center':return[sx-sw/2,sy];case'top_right':return[sx-sw,sy];case'center_right':return[sx-sw,sy-sh/2];case'bottom_right':return[sx-sw,sy-sh];case'bottom_center':return[sx-sw/2,sy-sh];case'bottom_left':return[sx,sy-sh];case'center_left':return[sx,sy-sh/2];case'center':return[sx-sw/2,sy-sh/2];}};ImageURLView.prototype._render_image=function(ctx,i,image,sx,sy,sw,sh,angle){var anchor,ref;if(isNaN(sw[i])){sw[i]=image.width;}
if(isNaN(sh[i])){sh[i]=image.height;}
anchor=this.model.anchor;ref=this._final_sx_sy(anchor,sx[i],sy[i],sw[i],sh[i]),sx=ref[0],sy=ref[1];ctx.save();ctx.globalAlpha=this.model.global_alpha;if(angle[i]){ctx.translate(sx,sy);ctx.rotate(angle[i]);ctx.drawImage(image,0,0,sw[i],sh[i]);ctx.rotate(-angle[i]);ctx.translate(-sx,-sy);}
else{ctx.drawImage(image,sx,sy,sw[i],sh[i]);}
return ctx.restore();};return ImageURLView;})(glyph_1.GlyphView);exports.ImageURL=(function(superClass){extend(ImageURL,superClass);function ImageURL(){return ImageURL.__super__.constructor.apply(this,arguments);}
ImageURL.prototype.default_view=exports.ImageURLView;ImageURL.prototype.type='ImageURL';ImageURL.coords([['x','y']]);ImageURL.mixins([]);ImageURL.define({url:[p.StringSpec],anchor:[p.Anchor,'top_left'],global_alpha:[p.Number,1.0],angle:[p.AngleSpec,0],w:[p.DistanceSpec],h:[p.DistanceSpec],dilate:[p.Bool,false],retry_attempts:[p.Number,0],retry_timeout:[p.Number,0]});return ImageURL;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/logging":"core/logging","core/properties":"core/properties"}],"models/glyphs/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var annular_wedge_1=require("./annular_wedge");exports.AnnularWedge=annular_wedge_1.AnnularWedge;var annulus_1=require("./annulus");exports.Annulus=annulus_1.Annulus;var arc_1=require("./arc");exports.Arc=arc_1.Arc;var bezier_1=require("./bezier");exports.Bezier=bezier_1.Bezier;var circle_1=require("./circle");exports.Circle=circle_1.Circle;var ellipse_1=require("./ellipse");exports.Ellipse=ellipse_1.Ellipse;var glyph_1=require("./glyph");exports.Glyph=glyph_1.Glyph;var hbar_1=require("./hbar");exports.HBar=hbar_1.HBar;var image_1=require("./image");exports.Image=image_1.Image;var image_rgba_1=require("./image_rgba");exports.ImageRGBA=image_rgba_1.ImageRGBA;var image_url_1=require("./image_url");exports.ImageURL=image_url_1.ImageURL;var line_1=require("./line");exports.Line=line_1.Line;var multi_line_1=require("./multi_line");exports.MultiLine=multi_line_1.MultiLine;var oval_1=require("./oval");exports.Oval=oval_1.Oval;var patch_1=require("./patch");exports.Patch=patch_1.Patch;var patches_1=require("./patches");exports.Patches=patches_1.Patches;var quad_1=require("./quad");exports.Quad=quad_1.Quad;var quadratic_1=require("./quadratic");exports.Quadratic=quadratic_1.Quadratic;var ray_1=require("./ray");exports.Ray=ray_1.Ray;var rect_1=require("./rect");exports.Rect=rect_1.Rect;var segment_1=require("./segment");exports.Segment=segment_1.Segment;var text_1=require("./text");exports.Text=text_1.Text;var vbar_1=require("./vbar");exports.VBar=vbar_1.VBar;var wedge_1=require("./wedge");exports.Wedge=wedge_1.Wedge;var xy_glyph_1=require("./xy_glyph");exports.XYGlyph=xy_glyph_1.XYGlyph;},{"./annular_wedge":"models/glyphs/annular_wedge","./annulus":"models/glyphs/annulus","./arc":"models/glyphs/arc","./bezier":"models/glyphs/bezier","./circle":"models/glyphs/circle","./ellipse":"models/glyphs/ellipse","./glyph":"models/glyphs/glyph","./hbar":"models/glyphs/hbar","./image":"models/glyphs/image","./image_rgba":"models/glyphs/image_rgba","./image_url":"models/glyphs/image_url","./line":"models/glyphs/line","./multi_line":"models/glyphs/multi_line","./oval":"models/glyphs/oval","./patch":"models/glyphs/patch","./patches":"models/glyphs/patches","./quad":"models/glyphs/quad","./quadratic":"models/glyphs/quadratic","./ray":"models/glyphs/ray","./rect":"models/glyphs/rect","./segment":"models/glyphs/segment","./text":"models/glyphs/text","./vbar":"models/glyphs/vbar","./wedge":"models/glyphs/wedge","./xy_glyph":"models/glyphs/xy_glyph"}],"models/glyphs/line":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");exports.LineView=(function(superClass){extend(LineView,superClass);function LineView(){return LineView.__super__.constructor.apply(this,arguments);}
LineView.prototype._render=function(ctx,indices,arg){var drawing,i,j,len,sx,sy;sx=arg.sx,sy=arg.sy;drawing=false;this.visuals.line.set_value(ctx);for(j=0,len=indices.length;j<len;j++){i=indices[j];if(!isFinite(sx[i]+sy[i])&&drawing){ctx.stroke();ctx.beginPath();drawing=false;continue;}
if(drawing){ctx.lineTo(sx[i],sy[i]);}
else{ctx.beginPath();ctx.moveTo(sx[i],sy[i]);drawing=true;}}
if(drawing){return ctx.stroke();}};LineView.prototype._hit_point=function(geometry){var dist,i,j,p0,p1,point,ref,ref1,result,shortest,threshold;result=hittest.create_hit_test_result();point={x:this.renderer.plot_view.canvas.vx_to_sx(geometry.vx),y:this.renderer.plot_view.canvas.vy_to_sy(geometry.vy)};shortest=9999;threshold=Math.max(2,this.visuals.line.line_width.value()/2);for(i=j=0,ref=this.sx.length-1;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ref1=[{x:this.sx[i],y:this.sy[i]},{x:this.sx[i+1],y:this.sy[i+1]}],p0=ref1[0],p1=ref1[1];dist=hittest.dist_to_segment(point,p0,p1);if(dist<threshold&&dist<shortest){shortest=dist;result['0d'].glyph=this.model;result['0d'].get_view=(function(){return this;}).bind(this);result['0d'].flag=true;result['0d'].indices=[i];}}
return result;};LineView.prototype._hit_span=function(geometry){var i,j,ref,ref1,result,val,values,vx,vy;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];result=hittest.create_hit_test_result();if(geometry.direction==='v'){val=this.renderer.ymapper.map_from_target(vy);values=this._y;}
else{val=this.renderer.xmapper.map_from_target(vx);values=this._x;}
for(i=j=0,ref1=values.length-1;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){if((values[i]<=val&&val<=values[i+1])){result['0d'].glyph=this.model;result['0d'].get_view=(function(){return this;}).bind(this);result['0d'].flag=true;result['0d'].indices.push(i);}}
return result;};LineView.prototype.get_interpolation_hit=function(i,geometry){var ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,res,vx,vy,x0,x1,x2,x3,y0,y1,y2,y3;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];ref1=[this._x[i],this._y[i],this._x[i+1],this._y[i+1]],x2=ref1[0],y2=ref1[1],x3=ref1[2],y3=ref1[3];if(geometry.type==='point'){ref2=this.renderer.ymapper.v_map_from_target([vy-1,vy+1]),y0=ref2[0],y1=ref2[1];ref3=this.renderer.xmapper.v_map_from_target([vx-1,vx+1]),x0=ref3[0],x1=ref3[1];}
else{if(geometry.direction==='v'){ref4=this.renderer.ymapper.v_map_from_target([vy,vy]),y0=ref4[0],y1=ref4[1];ref5=[x2,x3],x0=ref5[0],x1=ref5[1];}
else{ref6=this.renderer.xmapper.v_map_from_target([vx,vx]),x0=ref6[0],x1=ref6[1];ref7=[y2,y3],y0=ref7[0],y1=ref7[1];}}
res=hittest.check_2_segments_intersect(x0,y0,x1,y1,x2,y2,x3,y3);return[res.x,res.y];};LineView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return LineView;})(xy_glyph_1.XYGlyphView);exports.Line=(function(superClass){extend(Line,superClass);function Line(){return Line.__super__.constructor.apply(this,arguments);}
Line.prototype.default_view=exports.LineView;Line.prototype.type='Line';Line.mixins(['line']);return Line;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest"}],"models/glyphs/multi_line":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var hittest=require("core/hittest");var array_1=require("core/util/array");var types_1=require("core/util/types");var glyph_1=require("./glyph");exports.MultiLineView=(function(superClass){extend(MultiLineView,superClass);function MultiLineView(){return MultiLineView.__super__.constructor.apply(this,arguments);}
MultiLineView.prototype._index_data=function(){var i,k,points,ref,x,xs,y,ys;points=[];for(i=k=0,ref=this._xs.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){xs=(function(){var l,len,ref1,results;ref1=this._xs[i];results=[];for(l=0,len=ref1.length;l<len;l++){x=ref1[l];if(!types_1.isStrictNaN(x)){results.push(x);}}
return results;}).call(this);ys=(function(){var l,len,ref1,results;ref1=this._ys[i];results=[];for(l=0,len=ref1.length;l<len;l++){y=ref1[l];if(!types_1.isStrictNaN(y)){results.push(y);}}
return results;}).call(this);if(xs.length===0){continue;}
points.push({minX:array_1.min(xs),minY:array_1.min(ys),maxX:array_1.max(xs),maxY:array_1.max(ys),i:i});}
return new spatial_1.RBush(points);};MultiLineView.prototype._render=function(ctx,indices,arg){var i,j,k,l,len,ref,ref1,results,sx,sxs,sy,sys;sxs=arg.sxs,sys=arg.sys;results=[];for(k=0,len=indices.length;k<len;k++){i=indices[k];ref=[sxs[i],sys[i]],sx=ref[0],sy=ref[1];this.visuals.line.set_vectorize(ctx,i);for(j=l=0,ref1=sx.length;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){if(j===0){ctx.beginPath();ctx.moveTo(sx[j],sy[j]);continue;}
else if(isNaN(sx[j])||isNaN(sy[j])){ctx.stroke();ctx.beginPath();continue;}
else{ctx.lineTo(sx[j],sy[j]);}}
results.push(ctx.stroke());}
return results;};MultiLineView.prototype._hit_point=function(geometry){var dist,hits,i,j,k,l,p0,p1,point,points,ref,ref1,ref2,result,shortest,threshold;result=hittest.create_hit_test_result();point={x:this.renderer.plot_view.canvas.vx_to_sx(geometry.vx),y:this.renderer.plot_view.canvas.vy_to_sy(geometry.vy)};shortest=9999;threshold=Math.max(2,this.visuals.line.line_width.value()/2);hits={};for(i=k=0,ref=this.sxs.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){points=null;for(j=l=0,ref1=this.sxs[i].length-1;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){ref2=[{x:this.sxs[i][j],y:this.sys[i][j]},{x:this.sxs[i][j+1],y:this.sys[i][j+1]}],p0=ref2[0],p1=ref2[1];dist=hittest.dist_to_segment(point,p0,p1);if(dist<threshold&&dist<shortest){shortest=dist;points=[j];}}
if(points){hits[i]=points;}}
result['1d'].indices=Object.keys(hits);result['2d'].indices=hits;return result;};MultiLineView.prototype._hit_span=function(geometry){var hits,i,j,k,l,points,ref,ref1,ref2,result,val,values,vx,vy;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];result=hittest.create_hit_test_result();if(geometry.direction==='v'){val=this.renderer.ymapper.map_from_target(vy);values=this._ys;}
else{val=this.renderer.xmapper.map_from_target(vx);values=this._xs;}
hits={};for(i=k=0,ref1=values.length;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){points=[];for(j=l=0,ref2=values[i].length-1;0<=ref2?l<ref2:l>ref2;j=0<=ref2?++l:--l){if((values[i][j]<=val&&val<=values[i][j+1])){points.push(j);}}
if(points.length>0){hits[i]=points;}}
result['1d'].indices=Object.keys(hits);result['2d'].indices=hits;return result;};MultiLineView.prototype.get_interpolation_hit=function(i,point_i,geometry){var ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,res,vx,vy,x0,x1,x2,x3,y0,y1,y2,y3;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];ref1=[this._xs[i][point_i],this._ys[i][point_i],this._xs[i][point_i+1],this._ys[i][point_i+1]],x2=ref1[0],y2=ref1[1],x3=ref1[2],y3=ref1[3];if(geometry.type==='point'){ref2=this.renderer.ymapper.v_map_from_target([vy-1,vy+1]),y0=ref2[0],y1=ref2[1];ref3=this.renderer.xmapper.v_map_from_target([vx-1,vx+1]),x0=ref3[0],x1=ref3[1];}
else{if(geometry.direction==='v'){ref4=this.renderer.ymapper.v_map_from_target([vy,vy]),y0=ref4[0],y1=ref4[1];ref5=[x2,x3],x0=ref5[0],x1=ref5[1];}
else{ref6=this.renderer.xmapper.v_map_from_target([vx,vx]),x0=ref6[0],x1=ref6[1];ref7=[y2,y3],y0=ref7[0],y1=ref7[1];}}
res=hittest.check_2_segments_intersect(x0,y0,x1,y1,x2,y2,x3,y3);return[res.x,res.y];};MultiLineView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return MultiLineView;})(glyph_1.GlyphView);exports.MultiLine=(function(superClass){extend(MultiLine,superClass);function MultiLine(){return MultiLine.__super__.constructor.apply(this,arguments);}
MultiLine.prototype.default_view=exports.MultiLineView;MultiLine.prototype.type='MultiLine';MultiLine.coords([['xs','ys']]);MultiLine.mixins(['line']);return MultiLine;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/array":"core/util/array","core/util/spatial":"core/util/spatial","core/util/types":"core/util/types"}],"models/glyphs/oval":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");exports.OvalView=(function(superClass){extend(OvalView,superClass);function OvalView(){return OvalView.__super__.constructor.apply(this,arguments);}
OvalView.prototype._set_data=function(){this.max_w2=0;if(this.model.properties.width.units==="data"){this.max_w2=this.max_width/2;}
this.max_h2=0;if(this.model.properties.height.units==="data"){return this.max_h2=this.max_height/2;}};OvalView.prototype._map_data=function(){if(this.model.properties.width.units==="data"){this.sw=this.sdist(this.renderer.xmapper,this._x,this._width,'center');}
else{this.sw=this._width;}
if(this.model.properties.height.units==="data"){return this.sh=this.sdist(this.renderer.ymapper,this._y,this._height,'center');}
else{return this.sh=this._height;}};OvalView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sh,sw,sx,sy;sx=arg.sx,sy=arg.sy,sw=arg.sw,sh=arg.sh;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sw[i]+sh[i]+this._angle[i])){continue;}
ctx.translate(sx[i],sy[i]);ctx.rotate(this._angle[i]);ctx.beginPath();ctx.moveTo(0,-sh[i]/2);ctx.bezierCurveTo(sw[i]/2,-sh[i]/2,sw[i]/2,sh[i]/2,0,sh[i]/2);ctx.bezierCurveTo(-sw[i]/2,sh[i]/2,-sw[i]/2,-sh[i]/2,0,-sh[i]/2);ctx.closePath();if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);ctx.stroke();}
ctx.rotate(-this._angle[i]);results.push(ctx.translate(-sx[i],-sy[i]));}
return results;};OvalView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){var d,data,indices,scale,sh,sw,sx,sy;indices=[index];sx={};sx[index]=(x0+x1)/2;sy={};sy[index]=(y0+y1)/2;scale=this.sw[index]/this.sh[index];d=Math.min(Math.abs(x1-x0),Math.abs(y1-y0))*0.8;sw={};sh={};if(scale>1){sw[index]=d;sh[index]=d/scale;}
else{sw[index]=d*scale;sh[index]=d;}
data={sx:sx,sy:sy,sw:sw,sh:sh};return this._render(ctx,indices,data);};OvalView.prototype._bounds=function(bds){return this.max_wh2_bounds(bds);};return OvalView;})(xy_glyph_1.XYGlyphView);exports.Oval=(function(superClass){extend(Oval,superClass);function Oval(){return Oval.__super__.constructor.apply(this,arguments);}
Oval.prototype.default_view=exports.OvalView;Oval.prototype.type='Oval';Oval.mixins(['line','fill']);Oval.define({angle:[p.AngleSpec,0.0],width:[p.DistanceSpec],height:[p.DistanceSpec]});return Oval;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/patch":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");exports.PatchView=(function(superClass){extend(PatchView,superClass);function PatchView(){return PatchView.__super__.constructor.apply(this,arguments);}
PatchView.prototype._render=function(ctx,indices,arg){var i,j,k,len,len1,sx,sy;sx=arg.sx,sy=arg.sy;if(this.visuals.fill.doit){this.visuals.fill.set_value(ctx);for(j=0,len=indices.length;j<len;j++){i=indices[j];if(i===0){ctx.beginPath();ctx.moveTo(sx[i],sy[i]);continue;}
else if(isNaN(sx[i]+sy[i])){ctx.closePath();ctx.fill();ctx.beginPath();continue;}
else{ctx.lineTo(sx[i],sy[i]);}}
ctx.closePath();ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_value(ctx);for(k=0,len1=indices.length;k<len1;k++){i=indices[k];if(i===0){ctx.beginPath();ctx.moveTo(sx[i],sy[i]);continue;}
else if(isNaN(sx[i]+sy[i])){ctx.closePath();ctx.stroke();ctx.beginPath();continue;}
else{ctx.lineTo(sx[i],sy[i]);}}
ctx.closePath();return ctx.stroke();}};PatchView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return PatchView;})(xy_glyph_1.XYGlyphView);exports.Patch=(function(superClass){extend(Patch,superClass);function Patch(){return Patch.__super__.constructor.apply(this,arguments);}
Patch.prototype.default_view=exports.PatchView;Patch.prototype.type='Patch';Patch.mixins(['line','fill']);return Patch;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph"}],"models/glyphs/patches":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");var array_1=require("core/util/array");var types_1=require("core/util/types");var hittest=require("core/hittest");exports.PatchesView=(function(superClass){extend(PatchesView,superClass);function PatchesView(){return PatchesView.__super__.constructor.apply(this,arguments);}
PatchesView.prototype._build_discontinuous_object=function(nanned_qs){var denanned,ds,i,k,nan_index,q,qs,qs_part,ref;ds={};for(i=k=0,ref=nanned_qs.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){ds[i]=[];qs=array_1.copy(nanned_qs[i]);while(qs.length>0){nan_index=array_1.findLastIndex(qs,function(q){return types_1.isStrictNaN(q);});if(nan_index>=0){qs_part=qs.splice(nan_index);}
else{qs_part=qs;qs=[];}
denanned=(function(){var l,len,results;results=[];for(l=0,len=qs_part.length;l<len;l++){q=qs_part[l];if(!types_1.isStrictNaN(q)){results.push(q);}}
return results;})();ds[i].push(denanned);}}
return ds;};PatchesView.prototype._index_data=function(){var i,j,k,l,points,ref,ref1,xs,xss,ys,yss;xss=this._build_discontinuous_object(this._xs);yss=this._build_discontinuous_object(this._ys);points=[];for(i=k=0,ref=this._xs.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){for(j=l=0,ref1=xss[i].length;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){xs=xss[i][j];ys=yss[i][j];if(xs.length===0){continue;}
points.push({minX:array_1.min(xs),minY:array_1.min(ys),maxX:array_1.max(xs),maxY:array_1.max(ys),i:i});}}
return new spatial_1.RBush(points);};PatchesView.prototype._mask_data=function(all_indices){var bbox,ref,ref1,x0,x1,xr,y0,y1,yr;xr=this.renderer.plot_view.x_range;ref=[xr.min,xr.max],x0=ref[0],x1=ref[1];yr=this.renderer.plot_view.y_range;ref1=[yr.min,yr.max],y0=ref1[0],y1=ref1[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);return this.index.indices(bbox);};PatchesView.prototype._render=function(ctx,indices,arg){var i,j,k,l,len,m,ref,ref1,ref2,results,sx,sxs,sy,sys;sxs=arg.sxs,sys=arg.sys;this.renderer.sxss=this._build_discontinuous_object(sxs);this.renderer.syss=this._build_discontinuous_object(sys);results=[];for(k=0,len=indices.length;k<len;k++){i=indices[k];ref=[sxs[i],sys[i]],sx=ref[0],sy=ref[1];if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);for(j=l=0,ref1=sx.length;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){if(j===0){ctx.beginPath();ctx.moveTo(sx[j],sy[j]);continue;}
else if(isNaN(sx[j]+sy[j])){ctx.closePath();ctx.fill();ctx.beginPath();continue;}
else{ctx.lineTo(sx[j],sy[j]);}}
ctx.closePath();ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);for(j=m=0,ref2=sx.length;0<=ref2?m<ref2:m>ref2;j=0<=ref2?++m:--m){if(j===0){ctx.beginPath();ctx.moveTo(sx[j],sy[j]);continue;}
else if(isNaN(sx[j]+sy[j])){ctx.closePath();ctx.stroke();ctx.beginPath();continue;}
else{ctx.lineTo(sx[j],sy[j]);}}
ctx.closePath();results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};PatchesView.prototype._hit_point=function(geometry){var candidates,hits,i,idx,j,k,l,ref,ref1,ref2,result,sx,sxs,sy,sys,vx,vy,x,y;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);candidates=this.index.indices({minX:x,minY:y,maxX:x,maxY:y});hits=[];for(i=k=0,ref1=candidates.length;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){idx=candidates[i];sxs=this.renderer.sxss[idx];sys=this.renderer.syss[idx];for(j=l=0,ref2=sxs.length;0<=ref2?l<ref2:l>ref2;j=0<=ref2?++l:--l){if(hittest.point_in_poly(sx,sy,sxs[j],sys[j])){hits.push(idx);}}}
result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};PatchesView.prototype._get_snap_coord=function(array){var k,len,s,sum;sum=0;for(k=0,len=array.length;k<len;k++){s=array[k];sum+=s;}
return sum/array.length;};PatchesView.prototype.scx=function(i,sx,sy){var j,k,ref,sxs,sys;if(this.renderer.sxss[i].length===1){return this._get_snap_coord(this.sxs[i]);}
else{sxs=this.renderer.sxss[i];sys=this.renderer.syss[i];for(j=k=0,ref=sxs.length;0<=ref?k<ref:k>ref;j=0<=ref?++k:--k){if(hittest.point_in_poly(sx,sy,sxs[j],sys[j])){return this._get_snap_coord(sxs[j]);}}}
return null;};PatchesView.prototype.scy=function(i,sx,sy){var j,k,ref,sxs,sys;if(this.renderer.syss[i].length===1){return this._get_snap_coord(this.sys[i]);}
else{sxs=this.renderer.sxss[i];sys=this.renderer.syss[i];for(j=k=0,ref=sxs.length;0<=ref?k<ref:k>ref;j=0<=ref?++k:--k){if(hittest.point_in_poly(sx,sy,sxs[j],sys[j])){return this._get_snap_coord(sys[j]);}}}};PatchesView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return PatchesView;})(glyph_1.GlyphView);exports.Patches=(function(superClass){extend(Patches,superClass);function Patches(){return Patches.__super__.constructor.apply(this,arguments);}
Patches.prototype.default_view=exports.PatchesView;Patches.prototype.type='Patches';Patches.coords([['xs','ys']]);Patches.mixins(['line','fill']);return Patches;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/array":"core/util/array","core/util/spatial":"core/util/spatial","core/util/types":"core/util/types"}],"models/glyphs/quad":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");var categorical_mapper_1=require("../mappers/categorical_mapper");var hittest=require("core/hittest");exports.QuadView=(function(superClass){extend(QuadView,superClass);function QuadView(){return QuadView.__super__.constructor.apply(this,arguments);}
QuadView.prototype._index_data=function(){var b,bottom,i,j,l,left,map_to_synthetic,points,r,ref,right,t,top;map_to_synthetic=function(mapper,array){if(mapper instanceof categorical_mapper_1.CategoricalMapper){return mapper.v_map_to_target(array,true);}
else{return array;}};left=map_to_synthetic(this.renderer.xmapper,this._left);right=map_to_synthetic(this.renderer.xmapper,this._right);top=map_to_synthetic(this.renderer.ymapper,this._top);bottom=map_to_synthetic(this.renderer.ymapper,this._bottom);points=[];for(i=j=0,ref=left.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){l=left[i];r=right[i];t=top[i];b=bottom[i];if(isNaN(l+r+t+b)||!isFinite(l+r+t+b)){continue;}
points.push({minX:l,minY:b,maxX:r,maxY:t,i:i});}
return new spatial_1.RBush(points);};QuadView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sbottom,sleft,sright,stop;sleft=arg.sleft,sright=arg.sright,stop=arg.stop,sbottom=arg.sbottom;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sleft[i]+stop[i]+sright[i]+sbottom[i])){continue;}
if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fillRect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);}
if(this.visuals.line.doit){ctx.beginPath();ctx.rect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};QuadView.prototype._hit_point=function(geometry){var hits,ref,result,vx,vy,x,y;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);hits=this.index.indices({minX:x,minY:y,maxX:x,maxY:y});result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};QuadView.prototype.get_anchor_point=function(anchor,i,spt){var bottom,left,right,top;left=Math.min(this.sleft[i],this.sright[i]);right=Math.max(this.sright[i],this.sleft[i]);top=Math.min(this.stop[i],this.sbottom[i]);bottom=Math.max(this.sbottom[i],this.stop[i]);switch(anchor){case'top_left':return{x:left,y:top};case'top_center':return{x:(left+right)/2,y:top};case'top_right':return{x:right,y:top};case'center_right':return{x:right,y:(top+bottom)/2};case'bottom_right':return{x:right,y:bottom};case'bottom_center':return{x:(left+right)/2,y:bottom};case'bottom_left':return{x:left,y:bottom};case'center_left':return{x:left,y:(top+bottom)/2};case'center':return{x:(left+right)/2,y:(top+bottom)/2};}};QuadView.prototype.scx=function(i){return(this.sleft[i]+this.sright[i])/2;};QuadView.prototype.scy=function(i){return(this.stop[i]+this.sbottom[i])/2;};QuadView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return QuadView;})(glyph_1.GlyphView);exports.Quad=(function(superClass){extend(Quad,superClass);function Quad(){return Quad.__super__.constructor.apply(this,arguments);}
Quad.prototype.default_view=exports.QuadView;Quad.prototype.type='Quad';Quad.coords([['right','bottom'],['left','top']]);Quad.mixins(['line','fill']);return Quad;})(glyph_1.Glyph);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/util/spatial":"core/util/spatial"}],"models/glyphs/quadratic":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _qbb,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");_qbb=function(u,v,w){var bd,t;if(v===(u+w)/2){return[u,w];}
else{t=(u-v)/(u-2*v+w);bd=u*Math.pow(1-t,2)+2*v*(1-t)*t+w*Math.pow(t,2);return[Math.min(u,w,bd),Math.max(u,w,bd)];}};exports.QuadraticView=(function(superClass){extend(QuadraticView,superClass);function QuadraticView(){return QuadraticView.__super__.constructor.apply(this,arguments);}
QuadraticView.prototype._index_data=function(){var i,j,points,ref,ref1,ref2,x0,x1,y0,y1;points=[];for(i=j=0,ref=this._x0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(isNaN(this._x0[i]+this._x1[i]+this._y0[i]+this._y1[i]+this._cx[i]+this._cy[i])){continue;}
ref1=_qbb(this._x0[i],this._cx[i],this._x1[i]),x0=ref1[0],x1=ref1[1];ref2=_qbb(this._y0[i],this._cy[i],this._y1[i]),y0=ref2[0],y1=ref2[1];points.push({minX:x0,minY:y0,maxX:x1,maxY:y1,i:i});}
return new spatial_1.RBush(points);};QuadraticView.prototype._render=function(ctx,indices,arg){var i,j,len,results,scx,scy,sx0,sx1,sy0,sy1;sx0=arg.sx0,sy0=arg.sy0,sx1=arg.sx1,sy1=arg.sy1,scx=arg.scx,scy=arg.scy;if(this.visuals.line.doit){results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx0[i]+sy0[i]+sx1[i]+sy1[i]+scx[i]+scy[i])){continue;}
ctx.beginPath();ctx.moveTo(sx0[i],sy0[i]);ctx.quadraticCurveTo(scx[i],scy[i],sx1[i],sy1[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
return results;}};QuadraticView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return QuadraticView;})(glyph_1.GlyphView);exports.Quadratic=(function(superClass){extend(Quadratic,superClass);function Quadratic(){return Quadratic.__super__.constructor.apply(this,arguments);}
Quadratic.prototype.default_view=exports.QuadraticView;Quadratic.prototype.type='Quadratic';Quadratic.coords([['x0','y0'],['x1','y1'],['cx','cy']]);Quadratic.mixins(['line']);return Quadratic;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/glyphs/ray":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");exports.RayView=(function(superClass){extend(RayView,superClass);function RayView(){return RayView.__super__.constructor.apply(this,arguments);}
RayView.prototype._map_data=function(){return this.slength=this.sdist(this.renderer.xmapper,this._x,this._length);};RayView.prototype._render=function(ctx,indices,arg){var _angle,height,i,inf_len,j,k,len,ref,results,slength,sx,sy,width;sx=arg.sx,sy=arg.sy,slength=arg.slength,_angle=arg._angle;if(this.visuals.line.doit){width=this.renderer.plot_view.frame.width;height=this.renderer.plot_view.frame.height;inf_len=2*(width+height);for(i=j=0,ref=slength.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(slength[i]===0){slength[i]=inf_len;}}
results=[];for(k=0,len=indices.length;k<len;k++){i=indices[k];if(isNaN(sx[i]+sy[i]+_angle[i]+slength[i])){continue;}
ctx.translate(sx[i],sy[i]);ctx.rotate(_angle[i]);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(slength[i],0);this.visuals.line.set_vectorize(ctx,i);ctx.stroke();ctx.rotate(-_angle[i]);results.push(ctx.translate(-sx[i],-sy[i]));}
return results;}};RayView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return RayView;})(xy_glyph_1.XYGlyphView);exports.Ray=(function(superClass){extend(Ray,superClass);function Ray(){return Ray.__super__.constructor.apply(this,arguments);}
Ray.prototype.default_view=exports.RayView;Ray.prototype.type='Ray';Ray.mixins(['line']);Ray.define({length:[p.DistanceSpec],angle:[p.AngleSpec]});return Ray;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/rect":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");var array_1=require("core/util/array");var types_1=require("core/util/types");var categorical_mapper_1=require("../mappers/categorical_mapper");exports.RectView=(function(superClass){extend(RectView,superClass);function RectView(){return RectView.__super__.constructor.apply(this,arguments);}
RectView.prototype._set_data=function(){this.max_w2=0;if(this.model.properties.width.units==="data"){this.max_w2=this.max_width/2;}
this.max_h2=0;if(this.model.properties.height.units==="data"){return this.max_h2=this.max_height/2;}};RectView.prototype._map_data=function(){var canvas,i,ref,ref1;canvas=this.renderer.plot_view.canvas;if(this.model.properties.width.units==="data"){ref=this._map_dist_corner_for_data_side_length(this._x,this._width,this.renderer.xmapper,canvas,0),this.sw=ref[0],this.sx0=ref[1];}
else{this.sw=this._width;this.sx0=(function(){var j,ref1,results;results=[];for(i=j=0,ref1=this.sx.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){results.push(this.sx[i]-this.sw[i]/2);}
return results;}).call(this);}
if(this.model.properties.height.units==="data"){ref1=this._map_dist_corner_for_data_side_length(this._y,this._height,this.renderer.ymapper,canvas,1),this.sh=ref1[0],this.sy1=ref1[1];}
else{this.sh=this._height;this.sy1=(function(){var j,ref2,results;results=[];for(i=j=0,ref2=this.sy.length;0<=ref2?j<ref2:j>ref2;i=0<=ref2?++j:--j){results.push(this.sy[i]-this.sh[i]/2);}
return results;}).call(this);}
return this.ssemi_diag=(function(){var j,ref2,results;results=[];for(i=j=0,ref2=this.sw.length;0<=ref2?j<ref2:j>ref2;i=0<=ref2?++j:--j){results.push(Math.sqrt(this.sw[i]/2*this.sw[i]/2+this.sh[i]/2*this.sh[i]/2));}
return results;}).call(this);};RectView.prototype._render=function(ctx,indices,arg){var _angle,i,j,k,len,len1,sh,sw,sx,sx0,sy,sy1;sx=arg.sx,sy=arg.sy,sx0=arg.sx0,sy1=arg.sy1,sw=arg.sw,sh=arg.sh,_angle=arg._angle;if(this.visuals.fill.doit){for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sx0[i]+sy1[i]+sw[i]+sh[i]+_angle[i])){continue;}
this.visuals.fill.set_vectorize(ctx,i);if(_angle[i]){ctx.translate(sx[i],sy[i]);ctx.rotate(_angle[i]);ctx.fillRect(-sw[i]/2,-sh[i]/2,sw[i],sh[i]);ctx.rotate(-_angle[i]);ctx.translate(-sx[i],-sy[i]);}
else{ctx.fillRect(sx0[i],sy1[i],sw[i],sh[i]);}}}
if(this.visuals.line.doit){ctx.beginPath();for(k=0,len1=indices.length;k<len1;k++){i=indices[k];if(isNaN(sx[i]+sy[i]+sx0[i]+sy1[i]+sw[i]+sh[i]+_angle[i])){continue;}
if(sw[i]===0||sh[i]===0){continue;}
if(_angle[i]){ctx.translate(sx[i],sy[i]);ctx.rotate(_angle[i]);ctx.rect(-sw[i]/2,-sh[i]/2,sw[i],sh[i]);ctx.rotate(-_angle[i]);ctx.translate(-sx[i],-sy[i]);}
else{ctx.rect(sx0[i],sy1[i],sw[i],sh[i]);}
this.visuals.line.set_vectorize(ctx,i);ctx.stroke();ctx.beginPath();}
return ctx.stroke();}};RectView.prototype._hit_rect=function(geometry){var bbox,ref,ref1,result,x0,x1,y0,y1;ref=this.renderer.xmapper.v_map_from_target([geometry.vx0,geometry.vx1],true),x0=ref[0],x1=ref[1];ref1=this.renderer.ymapper.v_map_from_target([geometry.vy0,geometry.vy1],true),y0=ref1[0],y1=ref1[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);result=hittest.create_hit_test_result();result['1d'].indices=this.index.indices(bbox);return result;};RectView.prototype._hit_point=function(geometry){var bbox,c,d,height_in,hits,i,j,len,max_x2_ddist,max_y2_ddist,px,py,ref,ref1,result,s,scenter_x,scenter_y,sx,sy,vx,vy,width_in,x,x0,x1,y,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);scenter_x=(function(){var j,ref1,results;results=[];for(i=j=0,ref1=this.sx0.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){results.push(this.sx0[i]+this.sw[i]/2);}
return results;}).call(this);scenter_y=(function(){var j,ref1,results;results=[];for(i=j=0,ref1=this.sy1.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){results.push(this.sy1[i]+this.sh[i]/2);}
return results;}).call(this);max_x2_ddist=array_1.max(this._ddist(0,scenter_x,this.ssemi_diag));max_y2_ddist=array_1.max(this._ddist(1,scenter_y,this.ssemi_diag));x0=x-max_x2_ddist;x1=x+max_x2_ddist;y0=y-max_y2_ddist;y1=y+max_y2_ddist;hits=[];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);ref1=this.index.indices(bbox);for(j=0,len=ref1.length;j<len;j++){i=ref1[j];sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);if(this._angle[i]){d=Math.sqrt(Math.pow(sx-this.sx[i],2)+Math.pow(sy-this.sy[i],2));s=Math.sin(-this._angle[i]);c=Math.cos(-this._angle[i]);px=c*(sx-this.sx[i])-s*(sy-this.sy[i])+this.sx[i];py=s*(sx-this.sx[i])+c*(sy-this.sy[i])+this.sy[i];sx=px;sy=py;width_in=Math.abs(this.sx[i]-sx)<=this.sw[i]/2;height_in=Math.abs(this.sy[i]-sy)<=this.sh[i]/2;}
else{width_in=sx-this.sx0[i]<=this.sw[i]&&sx-this.sx0[i]>=0;height_in=sy-this.sy1[i]<=this.sh[i]&&sy-this.sy1[i]>=0;}
if(height_in&&width_in){hits.push(i);}}
result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};RectView.prototype._map_dist_corner_for_data_side_length=function(coord,side_length,mapper,canvas,dim){var i,pt0,pt1,return_synthetic,sside_length,synthetic_pt,synthetic_pt_corner,vpt0,vpt1,vpt_corner;if(types_1.isString(coord[0])&&mapper instanceof categorical_mapper_1.CategoricalMapper){return_synthetic=true;synthetic_pt=mapper.v_map_to_target(coord,return_synthetic);if(dim===0){synthetic_pt_corner=(function(){var j,ref,results;results=[];for(i=j=0,ref=coord.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(synthetic_pt[i]-side_length[i]/2);}
return results;})();}
else if(dim===1){synthetic_pt_corner=(function(){var j,ref,results;results=[];for(i=j=0,ref=coord.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(synthetic_pt[i]+side_length[i]/2);}
return results;})();}
vpt_corner=mapper.v_map_to_target(synthetic_pt_corner);sside_length=this.sdist(mapper,coord,side_length,'center',this.model.dilate);}
else{pt0=(function(){var j,ref,results;results=[];for(i=j=0,ref=coord.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(Number(coord[i])-side_length[i]/2);}
return results;})();pt1=(function(){var j,ref,results;results=[];for(i=j=0,ref=coord.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(Number(coord[i])+side_length[i]/2);}
return results;})();vpt0=mapper.v_map_to_target(pt0);vpt1=mapper.v_map_to_target(pt1);sside_length=this.sdist(mapper,pt0,side_length,'edge',this.model.dilate);if(dim===0){vpt_corner=vpt0[0]<vpt1[0]?vpt0:vpt1;}
else if(dim===1){vpt_corner=vpt0[0]<vpt1[0]?vpt1:vpt0;}}
if(dim===0){return[sside_length,canvas.v_vx_to_sx(vpt_corner)];}
else if(dim===1){return[sside_length,canvas.v_vy_to_sy(vpt_corner)];}};RectView.prototype._ddist=function(dim,spts,spans){var i,mapper,pt0,pt1,vpt0,vpt1,vpts;if(dim===0){vpts=this.renderer.plot_view.canvas.v_sx_to_vx(spts);mapper=this.renderer.xmapper;}
else{vpts=this.renderer.plot_view.canvas.v_vy_to_sy(spts);mapper=this.renderer.ymapper;}
vpt0=vpts;vpt1=(function(){var j,ref,results;results=[];for(i=j=0,ref=vpt0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(vpt0[i]+spans[i]);}
return results;})();pt0=mapper.v_map_from_target(vpt0);pt1=mapper.v_map_from_target(vpt1);return(function(){var j,ref,results;results=[];for(i=j=0,ref=pt0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(Math.abs(pt1[i]-pt0[i]));}
return results;})();};RectView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};RectView.prototype._bounds=function(bds){return this.max_wh2_bounds(bds);};return RectView;})(xy_glyph_1.XYGlyphView);exports.Rect=(function(superClass){extend(Rect,superClass);function Rect(){return Rect.__super__.constructor.apply(this,arguments);}
Rect.prototype.default_view=exports.RectView;Rect.prototype.type='Rect';Rect.mixins(['line','fill']);Rect.define({angle:[p.AngleSpec,0],width:[p.DistanceSpec],height:[p.DistanceSpec],dilate:[p.Bool,false]});return Rect;})(xy_glyph_1.XYGlyph);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/array":"core/util/array","core/util/types":"core/util/types"}],"models/glyphs/segment":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");exports.SegmentView=(function(superClass){extend(SegmentView,superClass);function SegmentView(){return SegmentView.__super__.constructor.apply(this,arguments);}
SegmentView.prototype._index_data=function(){var i,j,points,ref;points=[];for(i=j=0,ref=this._x0.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){if(!isNaN(this._x0[i]+this._x1[i]+this._y0[i]+this._y1[i])){points.push({minX:Math.min(this._x0[i],this._x1[i]),minY:Math.min(this._y0[i],this._y1[i]),maxX:Math.max(this._x0[i],this._x1[i]),maxY:Math.max(this._y0[i],this._y1[i]),i:i});}}
return new spatial_1.RBush(points);};SegmentView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sx0,sx1,sy0,sy1;sx0=arg.sx0,sy0=arg.sy0,sx1=arg.sx1,sy1=arg.sy1;if(this.visuals.line.doit){results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx0[i]+sy0[i]+sx1[i]+sy1[i])){continue;}
ctx.beginPath();ctx.moveTo(sx0[i],sy0[i]);ctx.lineTo(sx1[i],sy1[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
return results;}};SegmentView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_line_legend(ctx,x0,x1,y0,y1,index);};return SegmentView;})(glyph_1.GlyphView);exports.Segment=(function(superClass){extend(Segment,superClass);function Segment(){return Segment.__super__.constructor.apply(this,arguments);}
Segment.prototype.default_view=exports.SegmentView;Segment.prototype.type='Segment';Segment.coords([['x0','y0'],['x1','y1']]);Segment.mixins(['line']);return Segment;})(glyph_1.Glyph);},{"./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/glyphs/text":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var p=require("core/properties");exports.TextView=(function(superClass){extend(TextView,superClass);function TextView(){return TextView.__super__.constructor.apply(this,arguments);}
TextView.prototype._render=function(ctx,indices,arg){var _angle,_text,_x_offset,_y_offset,i,j,len,results,sx,sy;sx=arg.sx,sy=arg.sy,_x_offset=arg._x_offset,_y_offset=arg._y_offset,_angle=arg._angle,_text=arg._text;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+_x_offset[i]+_y_offset[i]+_angle[i])||(_text[i]==null)){continue;}
if(this.visuals.text.doit){ctx.save();ctx.translate(sx[i]+_x_offset[i],sy[i]+_y_offset[i]);ctx.rotate(_angle[i]);this.visuals.text.set_vectorize(ctx,i);ctx.fillText(_text[i],0,0);results.push(ctx.restore());}
else{results.push(void 0);}}
return results;};TextView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){ctx.save();this.text_props.set_value(ctx);ctx.font=this.text_props.font_value();ctx.font=ctx.font.replace(/\b[\d\.]+[\w]+\b/,'10pt');ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillText("text",x2,(y1+y2)/2);return ctx.restore();};return TextView;})(xy_glyph_1.XYGlyphView);exports.Text=(function(superClass){extend(Text,superClass);function Text(){return Text.__super__.constructor.apply(this,arguments);}
Text.prototype.default_view=exports.TextView;Text.prototype.type='Text';Text.mixins(['text']);Text.define({text:[p.StringSpec,{field:"text"}],angle:[p.AngleSpec,0],x_offset:[p.NumberSpec,0],y_offset:[p.NumberSpec,0]});return Text;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/properties":"core/properties"}],"models/glyphs/vbar":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");var categorical_mapper_1=require("../mappers/categorical_mapper");var hittest=require("core/hittest");var p=require("core/properties");exports.VBarView=(function(superClass){extend(VBarView,superClass);function VBarView(){return VBarView.__super__.constructor.apply(this,arguments);}
VBarView.prototype._map_data=function(){var i,j,ref,vbottom,vtop;this.sx=this.renderer.xmapper.v_map_to_target(this._x);vtop=this.renderer.ymapper.v_map_to_target(this._top);vbottom=this.renderer.ymapper.v_map_to_target(this._bottom);this.stop=this.renderer.plot_view.canvas.v_vy_to_sy(vtop);this.sbottom=this.renderer.plot_view.canvas.v_vy_to_sy(vbottom);this.sleft=[];this.sright=[];this.sw=this.sdist(this.renderer.xmapper,this._x,this._width,'center');for(i=j=0,ref=this.sx.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){this.sleft.push(this.sx[i]-this.sw[i]/2);this.sright.push(this.sx[i]+this.sw[i]/2);}
return null;};VBarView.prototype._index_data=function(){var b,bottom,i,j,l,map_to_synthetic,points,r,ref,t,top,width,x;map_to_synthetic=function(mapper,array){if(mapper instanceof categorical_mapper_1.CategoricalMapper){return mapper.v_map_to_target(array,true);}
else{return array;}};x=map_to_synthetic(this.renderer.xmapper,this._x);width=map_to_synthetic(this.renderer.xmapper,this._width);top=map_to_synthetic(this.renderer.ymapper,this._top);bottom=map_to_synthetic(this.renderer.ymapper,this._bottom);points=[];for(i=j=0,ref=x.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){l=x[i]-width[i]/2;r=x[i]+width[i]/2;t=top[i];b=bottom[i];if(isNaN(l+r+t+b)||!isFinite(l+r+t+b)){continue;}
points.push({minX:l,minY:b,maxX:r,maxY:t,i:i});}
return new spatial_1.RBush(points);};VBarView.prototype._render=function(ctx,indices,arg){var i,j,len,results,sbottom,sleft,sright,stop;sleft=arg.sleft,sright=arg.sright,stop=arg.stop,sbottom=arg.sbottom;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sleft[i]+stop[i]+sright[i]+sbottom[i])){continue;}
if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fillRect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);}
if(this.visuals.line.doit){ctx.beginPath();ctx.rect(sleft[i],stop[i],sright[i]-sleft[i],sbottom[i]-stop[i]);this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};VBarView.prototype._hit_point=function(geometry){var hits,ref,result,vx,vy,x,y;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);hits=this.index.indices({minX:x,minY:y,maxX:x,maxY:y});result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};VBarView.prototype.scy=function(i){return(this.stop[i]+this.sbottom[i])/2;};VBarView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return VBarView;})(glyph_1.GlyphView);exports.VBar=(function(superClass){extend(VBar,superClass);function VBar(){return VBar.__super__.constructor.apply(this,arguments);}
VBar.prototype.default_view=exports.VBarView;VBar.prototype.type='VBar';VBar.mixins(['line','fill']);VBar.define({x:[p.NumberSpec],width:[p.DistanceSpec],top:[p.NumberSpec],bottom:[p.NumberSpec,0]});return VBar;})(glyph_1.Glyph);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","./glyph":"models/glyphs/glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/spatial":"core/util/spatial"}],"models/glyphs/wedge":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("./xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");var math_1=require("core/util/math");exports.WedgeView=(function(superClass){extend(WedgeView,superClass);function WedgeView(){return WedgeView.__super__.constructor.apply(this,arguments);}
WedgeView.prototype._map_data=function(){if(this.model.properties.radius.units==="data"){return this.sradius=this.sdist(this.renderer.xmapper,this._x,this._radius);}
else{return this.sradius=this._radius;}};WedgeView.prototype._render=function(ctx,indices,arg){var _end_angle,_start_angle,direction,i,j,len,results,sradius,sx,sy;sx=arg.sx,sy=arg.sy,sradius=arg.sradius,_start_angle=arg._start_angle,_end_angle=arg._end_angle;direction=this.model.properties.direction.value();results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+sradius[i]+_start_angle[i]+_end_angle[i])){continue;}
ctx.beginPath();ctx.arc(sx[i],sy[i],sradius[i],_start_angle[i],_end_angle[i],direction);ctx.lineTo(sx[i],sy[i]);ctx.closePath();if(this.visuals.fill.doit){this.visuals.fill.set_vectorize(ctx,i);ctx.fill();}
if(this.visuals.line.doit){this.visuals.line.set_vectorize(ctx,i);results.push(ctx.stroke());}
else{results.push(void 0);}}
return results;};WedgeView.prototype._hit_point=function(geometry){var angle,bbox,candidates,direction,dist,hits,i,j,k,len,len1,r2,ref,ref1,ref2,ref3,ref4,sx,sx0,sx1,sy,sy0,sy1,vx,vx0,vx1,vy,vy0,vy1,x,x0,x1,y,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];x=this.renderer.xmapper.map_from_target(vx,true);y=this.renderer.ymapper.map_from_target(vy,true);if(this.model.properties.radius.units==="data"){x0=x-this.max_radius;x1=x+this.max_radius;y0=y-this.max_radius;y1=y+this.max_radius;}
else{vx0=vx-this.max_radius;vx1=vx+this.max_radius;ref1=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref1[0],x1=ref1[1];vy0=vy-this.max_radius;vy1=vy+this.max_radius;ref2=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref2[0],y1=ref2[1];}
candidates=[];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);ref3=this.index.indices(bbox);for(j=0,len=ref3.length;j<len;j++){i=ref3[j];r2=Math.pow(this.sradius[i],2);sx0=this.renderer.xmapper.map_to_target(x,true);sx1=this.renderer.xmapper.map_to_target(this._x[i],true);sy0=this.renderer.ymapper.map_to_target(y,true);sy1=this.renderer.ymapper.map_to_target(this._y[i],true);dist=Math.pow(sx0-sx1,2)+Math.pow(sy0-sy1,2);if(dist<=r2){candidates.push([i,dist]);}}
direction=this.model.properties.direction.value();hits=[];for(k=0,len1=candidates.length;k<len1;k++){ref4=candidates[k],i=ref4[0],dist=ref4[1];sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);angle=Math.atan2(sy-this.sy[i],sx-this.sx[i]);if(math_1.angle_between(-angle,-this._start_angle[i],-this._end_angle[i],direction)){hits.push([i,dist]);}}
return hittest.create_1d_hit_test_result(hits);};WedgeView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){return this._generic_area_legend(ctx,x0,x1,y0,y1,index);};return WedgeView;})(xy_glyph_1.XYGlyphView);exports.Wedge=(function(superClass){extend(Wedge,superClass);function Wedge(){return Wedge.__super__.constructor.apply(this,arguments);}
Wedge.prototype.default_view=exports.WedgeView;Wedge.prototype.type='Wedge';Wedge.mixins(['line','fill']);Wedge.define({direction:[p.Direction,'anticlock'],radius:[p.DistanceSpec],start_angle:[p.AngleSpec],end_angle:[p.AngleSpec]});return Wedge;})(xy_glyph_1.XYGlyph);},{"./xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/glyphs/xy_glyph":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var spatial_1=require("core/util/spatial");var glyph_1=require("./glyph");var categorical_mapper_1=require("../mappers/categorical_mapper");exports.XYGlyphView=(function(superClass){extend(XYGlyphView,superClass);function XYGlyphView(){return XYGlyphView.__super__.constructor.apply(this,arguments);}
XYGlyphView.prototype._index_data=function(){var i,j,points,ref,x,xx,y,yy;if(this.renderer.xmapper instanceof categorical_mapper_1.CategoricalMapper){xx=this.renderer.xmapper.v_map_to_target(this._x,true);}
else{xx=this._x;}
if(this.renderer.ymapper instanceof categorical_mapper_1.CategoricalMapper){yy=this.renderer.ymapper.v_map_to_target(this._y,true);}
else{yy=this._y;}
points=[];for(i=j=0,ref=xx.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){x=xx[i];if(isNaN(x)||!isFinite(x)){continue;}
y=yy[i];if(isNaN(y)||!isFinite(y)){continue;}
points.push({minX:x,minY:y,maxX:x,maxY:y,i:i});}
return new spatial_1.RBush(points);};return XYGlyphView;})(glyph_1.GlyphView);exports.XYGlyph=(function(superClass){extend(XYGlyph,superClass);function XYGlyph(){return XYGlyph.__super__.constructor.apply(this,arguments);}
XYGlyph.prototype.type="XYGlyph";XYGlyph.prototype.default_view=exports.XYGlyphView;XYGlyph.coords([['x','y']]);return XYGlyph;})(glyph_1.Glyph);},{"../mappers/categorical_mapper":"models/mappers/categorical_mapper","./glyph":"models/glyphs/glyph","core/util/spatial":"core/util/spatial"}],"models/grids/grid":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var guide_renderer_1=require("../renderers/guide_renderer");var renderer_1=require("../renderers/renderer");var p=require("core/properties");var types_1=require("core/util/types");exports.GridView=(function(superClass){extend(GridView,superClass);function GridView(){return GridView.__super__.constructor.apply(this,arguments);}
GridView.prototype.initialize=function(attrs,options){GridView.__super__.initialize.call(this,attrs,options);this._x_range_name=this.model.x_range_name;return this._y_range_name=this.model.y_range_name;};GridView.prototype.render=function(){var ctx;if(this.model.visible===false){return;}
ctx=this.plot_view.canvas_view.ctx;ctx.save();this._draw_regions(ctx);this._draw_minor_grids(ctx);this._draw_grids(ctx);return ctx.restore();};GridView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change',this.request_render);};GridView.prototype._draw_regions=function(ctx){var i,k,ref,ref1,ref2,ref3,sx0,sx1,sy0,sy1,xs,ys;if(!this.visuals.band_fill.doit){return;}
ref=this.model.grid_coords('major',false),xs=ref[0],ys=ref[1];this.visuals.band_fill.set_value(ctx);for(i=k=0,ref1=xs.length-1;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){if(i%2===1){ref2=this.plot_view.map_to_screen(xs[i],ys[i],this._x_range_name,this._y_range_name),sx0=ref2[0],sy0=ref2[1];ref3=this.plot_view.map_to_screen(xs[i+1],ys[i+1],this._x_range_name,this._y_range_name),sx1=ref3[0],sy1=ref3[1];ctx.fillRect(sx0[0],sy0[0],sx1[1]-sx0[0],sy1[1]-sy0[0]);ctx.fill();}}};GridView.prototype._draw_grids=function(ctx){var ref,xs,ys;if(!this.visuals.grid_line.doit){return;}
ref=this.model.grid_coords('major'),xs=ref[0],ys=ref[1];return this._draw_grid_helper(ctx,this.visuals.grid_line,xs,ys);};GridView.prototype._draw_minor_grids=function(ctx){var ref,xs,ys;if(!this.visuals.minor_grid_line.doit){return;}
ref=this.model.grid_coords('minor'),xs=ref[0],ys=ref[1];return this._draw_grid_helper(ctx,this.visuals.minor_grid_line,xs,ys);};GridView.prototype._draw_grid_helper=function(ctx,props,xs,ys){var i,k,l,ref,ref1,ref2,sx,sy;props.set_value(ctx);for(i=k=0,ref=xs.length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){ref1=this.plot_view.map_to_screen(xs[i],ys[i],this._x_range_name,this._y_range_name),sx=ref1[0],sy=ref1[1];ctx.beginPath();ctx.moveTo(Math.round(sx[0]),Math.round(sy[0]));for(i=l=1,ref2=sx.length;1<=ref2?l<ref2:l>ref2;i=1<=ref2?++l:--l){ctx.lineTo(Math.round(sx[i]),Math.round(sy[i]));}
ctx.stroke();}};return GridView;})(renderer_1.RendererView);exports.Grid=(function(superClass){extend(Grid,superClass);function Grid(){return Grid.__super__.constructor.apply(this,arguments);}
Grid.prototype.default_view=exports.GridView;Grid.prototype.type='Grid';Grid.mixins(['line:grid_','line:minor_grid_','fill:band_']);Grid.define({bounds:[p.Any,'auto'],dimension:[p.Number,0],ticker:[p.Instance],x_range_name:[p.String,'default'],y_range_name:[p.String,'default']});Grid.override({level:"underlay",band_fill_color:null,band_fill_alpha:0,grid_line_color:'#e5e5e5',minor_grid_line_color:null});Grid.prototype.ranges=function(){var frame,i,j,ranges;i=this.dimension;j=(i+1)%2;frame=this.plot.plot_canvas.frame;ranges=[frame.x_ranges[this.x_range_name],frame.y_ranges[this.y_range_name]];return[ranges[i],ranges[j]];};Grid.prototype.computed_bounds=function(){var cross_range,end,range,range_bounds,ref,start,user_bounds;ref=this.ranges(),range=ref[0],cross_range=ref[1];user_bounds=this.bounds;range_bounds=[range.min,range.max];if(types_1.isArray(user_bounds)){start=Math.min(user_bounds[0],user_bounds[1]);end=Math.max(user_bounds[0],user_bounds[1]);if(start<range_bounds[0]){start=range_bounds[0];}
else if(start>range_bounds[1]){start=null;}
if(end>range_bounds[1]){end=range_bounds[1];}
else if(end<range_bounds[0]){end=null;}}
else{start=range_bounds[0],end=range_bounds[1];}
return[start,end];};Grid.prototype.grid_coords=function(location,exclude_ends){var N,cmax,cmin,coords,cross_range,dim_i,dim_j,end,i,ii,j,k,l,loc,max,min,n,range,ref,ref1,ref2,ref3,start,ticks,tmp;if(exclude_ends==null){exclude_ends=true;}
i=this.dimension;j=(i+1)%2;ref=this.ranges(),range=ref[0],cross_range=ref[1];ref1=this.computed_bounds(),start=ref1[0],end=ref1[1];tmp=Math.min(start,end);end=Math.max(start,end);start=tmp;ticks=this.ticker.get_ticks(start,end,range,cross_range.min,{})[location];min=range.min;max=range.max;cmin=cross_range.min;cmax=cross_range.max;coords=[[],[]];for(ii=k=0,ref2=ticks.length;0<=ref2?k<ref2:k>ref2;ii=0<=ref2?++k:--k){if((ticks[ii]===min||ticks[ii]===max)&&exclude_ends){continue;}
dim_i=[];dim_j=[];N=2;for(n=l=0,ref3=N;0<=ref3?l<ref3:l>ref3;n=0<=ref3?++l:--l){loc=cmin+(cmax-cmin)/(N-1)*n;dim_i.push(ticks[ii]);dim_j.push(loc);}
coords[i].push(dim_i);coords[j].push(dim_j);}
return coords;};return Grid;})(guide_renderer_1.GuideRenderer);},{"../renderers/guide_renderer":"models/renderers/guide_renderer","../renderers/renderer":"models/renderers/renderer","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/grids/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var grid_1=require("./grid");exports.Grid=grid_1.Grid;},{"./grid":"models/grids/grid"}],"models/index":[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}
Object.defineProperty(exports,"__esModule",{value:true});__export(require("./annotations"));__export(require("./axes"));__export(require("./callbacks"));__export(require("./canvas"));__export(require("./formatters"));__export(require("./glyphs"));__export(require("./grids"));__export(require("./layouts"));__export(require("./mappers"));__export(require("./transforms"));__export(require("./markers"));__export(require("./plots"));__export(require("./ranges"));__export(require("./renderers"));__export(require("./sources"));__export(require("./tickers"));__export(require("./tiles"));__export(require("./tools"));},{"./annotations":"models/annotations/index","./axes":"models/axes/index","./callbacks":"models/callbacks/index","./canvas":"models/canvas/index","./formatters":"models/formatters/index","./glyphs":"models/glyphs/index","./grids":"models/grids/index","./layouts":"models/layouts/index","./mappers":"models/mappers/index","./markers":"models/markers/index","./plots":"models/plots/index","./ranges":"models/ranges/index","./renderers":"models/renderers/index","./sources":"models/sources/index","./tickers":"models/tickers/index","./tiles":"models/tiles/index","./tools":"models/tools/index","./transforms":"models/transforms/index"}],"models/layouts/box":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var solver_1=require("core/layout/solver");var p=require("core/properties");var types_1=require("core/util/types");var array_1=require("core/util/array");var object_1=require("core/util/object");var layout_dom_1=require("./layout_dom");exports.BoxView=(function(superClass){extend1(BoxView,superClass);function BoxView(){return BoxView.__super__.constructor.apply(this,arguments);}
BoxView.prototype.className="bk-grid";BoxView.prototype.bind_bokeh_events=function(){BoxView.__super__.bind_bokeh_events.call(this);return this.listenTo(this.model,'change:children',this.build_child_views);};BoxView.prototype.get_height=function(){var child_heights,children,height;children=this.model.get_layoutable_children();child_heights=children.map(function(child){return child._height._value;});if(this.model._horizontal){height=array_1.max(child_heights);}
else{height=array_1.sum(child_heights);}
return height;};BoxView.prototype.get_width=function(){var child_widths,children,width;children=this.model.get_layoutable_children();child_widths=children.map(function(child){return child._width._value;});if(this.model._horizontal){width=array_1.sum(child_widths);}
else{width=array_1.max(child_widths);}
return width;};return BoxView;})(layout_dom_1.LayoutDOMView);exports.Box=(function(superClass){extend1(Box,superClass);Box.prototype.default_view=exports.BoxView;function Box(attrs,options){Box.__super__.constructor.call(this,attrs,options);this._child_equal_size_width=new solver_1.Variable();this._child_equal_size_height=new solver_1.Variable();this._box_equal_size_top=new solver_1.Variable();this._box_equal_size_bottom=new solver_1.Variable();this._box_equal_size_left=new solver_1.Variable();this._box_equal_size_right=new solver_1.Variable();this._box_cell_align_top=new solver_1.Variable();this._box_cell_align_bottom=new solver_1.Variable();this._box_cell_align_left=new solver_1.Variable();this._box_cell_align_right=new solver_1.Variable();}
Box.define({children:[p.Array,[]]});Box.internal({spacing:[p.Number,6]});Box.prototype.get_layoutable_children=function(){return this.children;};Box.prototype.variables_updated=function(){var child,j,len,ref;ref=this.get_layoutable_children();for(j=0,len=ref.length;j<len;j++){child=ref[j];child.trigger('change');}
return this.trigger('change');};Box.prototype.get_edit_variables=function(){var child,edit_variables,j,len,ref;edit_variables=Box.__super__.get_edit_variables.call(this);ref=this.get_layoutable_children();for(j=0,len=ref.length;j<len;j++){child=ref[j];edit_variables=edit_variables.concat(child.get_edit_variables());}
return edit_variables;};Box.prototype.get_constrained_variables=function(){var constrained_variables;constrained_variables=Box.__super__.get_constrained_variables.call(this);constrained_variables=object_1.extend(constrained_variables,{'box-equal-size-top':this._box_equal_size_top,'box-equal-size-bottom':this._box_equal_size_bottom,'box-equal-size-left':this._box_equal_size_left,'box-equal-size-right':this._box_equal_size_right,'box-cell-align-top':this._box_cell_align_top,'box-cell-align-bottom':this._box_cell_align_bottom,'box-cell-align-left':this._box_cell_align_left,'box-cell-align-right':this._box_cell_align_right});return constrained_variables;};Box.prototype.get_constraints=function(){var child,children,constraints,i,j,k,last,len,next,rect,ref,var_keys,vars;constraints=[];children=this.get_layoutable_children();if(children.length===0){return constraints;}
for(j=0,len=children.length;j<len;j++){child=children[j];this._test_layoutable(child);vars=child.get_constrained_variables();var_keys=Object.keys(vars);rect=this._child_rect(vars);if(this._horizontal){if(this._has_var('height',var_keys)){constraints.push(solver_1.EQ(rect.height,[-1,this._height]));}}
else{if(this._has_var('width',var_keys)){constraints.push(solver_1.EQ(rect.width,[-1,this._width]));}}
if(this._horizontal){if(this._has_var(['box-equal-size-left','box-equal-size-right','width'],var_keys)){constraints.push(solver_1.EQ([-1,vars['box-equal-size-left']],[-1,vars['box-equal-size-right']],vars['width'],this._child_equal_size_width));}}
else{if(this._has_var(['box-equal-size-top','box-equal-size-bottom','height'],var_keys)){constraints.push(solver_1.EQ([-1,vars['box-equal-size-top']],[-1,vars['box-equal-size-bottom']],vars['height'],this._child_equal_size_height));}}
constraints=constraints.concat(child.get_constraints());}
last=this._info(children[0].get_constrained_variables());constraints.push(solver_1.EQ(last.span.start,0));for(i=k=1,ref=children.length;1<=ref?k<ref:k>ref;i=1<=ref?++k:--k){next=this._info(children[i].get_constrained_variables());if(last.span.size){constraints.push(solver_1.EQ(last.span.start,last.span.size,[-1,next.span.start]));}
constraints.push(solver_1.WEAK_EQ(last.whitespace.after,next.whitespace.before,0-this.spacing));constraints.push(solver_1.GE(last.whitespace.after,next.whitespace.before,0-this.spacing));last=next;}
if(this._horizontal){if(this._has_var('width',var_keys)){constraints.push(solver_1.EQ(last.span.start,last.span.size,[-1,this._width]));}}
else{if(this._has_var('height',var_keys)){constraints.push(solver_1.EQ(last.span.start,last.span.size,[-1,this._height]));}}
constraints=constraints.concat(this._align_outer_edges_constraints(true));constraints=constraints.concat(this._align_outer_edges_constraints(false));constraints=constraints.concat(this._align_inner_cell_edges_constraints());constraints=constraints.concat(this._box_equal_size_bounds(true));constraints=constraints.concat(this._box_equal_size_bounds(false));constraints=constraints.concat(this._box_cell_align_bounds(true));constraints=constraints.concat(this._box_cell_align_bounds(false));constraints=constraints.concat(this._box_whitespace(true));constraints=constraints.concat(this._box_whitespace(false));return constraints;};Box.prototype._has_var=function(look_up,var_keys){var look_up_list;look_up_list=types_1.isString(look_up)?[look_up]:look_up;return array_1.all(look_up_list,function(x){return indexOf.call(var_keys,x)>=0;});};Box.prototype._test_layoutable=function(child){var j,key,len,required_constrained_variables,vars;required_constrained_variables=['origin-x','origin-y','whitespace-top','whitespace-right','whitespace-bottom','whitespace-left'];if(child.get_constrained_variables==null){throw new Error(child+" is missing get_constrained_variables method");}
vars=child.get_constrained_variables();for(j=0,len=required_constrained_variables.length;j<len;j++){key=required_constrained_variables[j];if(indexOf.call(Object.keys(vars),key)<0){throw new Error(child+" is missing constrained_variable "+key);}
if(!vars[key]instanceof solver_1.Variable){throw new Error(child+" "+key+" is not a solver Variable");}}
return true;};Box.prototype._child_rect=function(vars){var height,ref,width,x,y;width=vars['width'];height=vars['height'];ref=[vars['origin-x'],vars['origin-y']],x=ref[0],y=ref[1];return{x:x,y:y,width:width,height:height};};Box.prototype._span=function(rect){if(this._horizontal){return{start:rect.x,size:rect.width};}
else{return{start:rect.y,size:rect.height};}};Box.prototype._info=function(vars){var span,whitespace;if(this._horizontal){whitespace={before:vars['whitespace-left'],after:vars['whitespace-right']};}
else{whitespace={before:vars['whitespace-top'],after:vars['whitespace-bottom']};}
span=this._span(this._child_rect(vars));return{span:span,whitespace:whitespace};};Box.prototype._flatten_cell_edge_variables=function(horizontal){var add_path,all_vars,arity,cell,cell_vars,child,children,direction,flattened,j,k,key,kind,len,len1,name,new_key,parsed,path,relevant_edges,variables;if(horizontal){relevant_edges=Box._top_bottom_inner_cell_edge_variables;}
else{relevant_edges=Box._left_right_inner_cell_edge_variables;}
add_path=horizontal!==this._horizontal;children=this.get_layoutable_children();arity=children.length;flattened={};cell=0;for(j=0,len=children.length;j<len;j++){child=children[j];if(child instanceof Box){cell_vars=child._flatten_cell_edge_variables(horizontal);}
else{cell_vars={};}
all_vars=child.get_constrained_variables();for(k=0,len1=relevant_edges.length;k<len1;k++){name=relevant_edges[k];if(name in all_vars){cell_vars[name]=[all_vars[name]];}}
for(key in cell_vars){variables=cell_vars[key];if(add_path){parsed=key.split(" ");kind=parsed[0];if(parsed.length>1){path=parsed[1];}
else{path="";}
if(this._horizontal){direction="row";}
else{direction="col";}
new_key=kind+" "+direction+"-"+arity+"-"+cell+"-"+path;}
else{new_key=key;}
if(new_key in flattened){flattened[new_key]=flattened[new_key].concat(variables);}
else{flattened[new_key]=variables;}}
cell=cell+1;}
return flattened;};Box.prototype._align_inner_cell_edges_constraints=function(){var constraints,flattened,i,j,key,last,ref,variables;constraints=[];if(this._is_root){flattened=this._flatten_cell_edge_variables(this._horizontal);for(key in flattened){variables=flattened[key];if(variables.length>1){last=variables[0];for(i=j=1,ref=variables.length;1<=ref?j<ref:j>ref;i=1<=ref?++j:--j){constraints.push(solver_1.EQ(variables[i],[-1,last]));}}}}
return constraints;};Box.prototype._find_edge_leaves=function(horizontal){var child,child_leaves,children,end,j,leaves,len,start;children=this.get_layoutable_children();leaves=[[],[]];if(children.length>0){if(this._horizontal===horizontal){start=children[0];end=children[children.length-1];if(start instanceof Box){leaves[0]=leaves[0].concat(start._find_edge_leaves(horizontal)[0]);}
else{leaves[0].push(start);}
if(end instanceof Box){leaves[1]=leaves[1].concat(end._find_edge_leaves(horizontal)[1]);}
else{leaves[1].push(end);}}
else{for(j=0,len=children.length;j<len;j++){child=children[j];if(child instanceof Box){child_leaves=child._find_edge_leaves(horizontal);leaves[0]=leaves[0].concat(child_leaves[0]);leaves[1]=leaves[1].concat(child_leaves[1]);}
else{leaves[0].push(child);leaves[1].push(child);}}}}
return leaves;};Box.prototype._align_outer_edges_constraints=function(horizontal){var add_all_equal,collect_vars,end_edges,end_leaves,end_variable,ref,result,start_edges,start_leaves,start_variable;ref=this._find_edge_leaves(horizontal),start_leaves=ref[0],end_leaves=ref[1];if(horizontal){start_variable='on-edge-align-left';end_variable='on-edge-align-right';}
else{start_variable='on-edge-align-top';end_variable='on-edge-align-bottom';}
collect_vars=function(leaves,name){var edges,j,leaf,len,vars;edges=[];for(j=0,len=leaves.length;j<len;j++){leaf=leaves[j];vars=leaf.get_constrained_variables();if(name in vars){edges.push(vars[name]);}}
return edges;};start_edges=collect_vars(start_leaves,start_variable);end_edges=collect_vars(end_leaves,end_variable);result=[];add_all_equal=function(edges){var edge,first,i,j,ref1;if(edges.length>1){first=edges[0];for(i=j=1,ref1=edges.length;1<=ref1?j<ref1:j>ref1;i=1<=ref1?++j:--j){edge=edges[i];result.push(solver_1.EQ([-1,first],edge));}
return null;}};add_all_equal(start_edges);add_all_equal(end_edges);return result;};Box.prototype._box_insets_from_child_insets=function(horizontal,child_variable_prefix,our_variable_prefix,minimum){var add_constraints,end_leaves,end_variable,our_end,our_start,ref,result,start_leaves,start_variable;ref=this._find_edge_leaves(horizontal),start_leaves=ref[0],end_leaves=ref[1];if(horizontal){start_variable=child_variable_prefix+"-left";end_variable=child_variable_prefix+"-right";our_start=this[our_variable_prefix+"_left"];our_end=this[our_variable_prefix+"_right"];}
else{start_variable=child_variable_prefix+"-top";end_variable=child_variable_prefix+"-bottom";our_start=this[our_variable_prefix+"_top"];our_end=this[our_variable_prefix+"_bottom"];}
result=[];add_constraints=function(ours,leaves,name){var edges,j,leaf,len,vars;edges=[];for(j=0,len=leaves.length;j<len;j++){leaf=leaves[j];vars=leaf.get_constrained_variables();if(name in vars){if(minimum){result.push(solver_1.GE([-1,ours],vars[name]));}
else{result.push(solver_1.EQ([-1,ours],vars[name]));}}}
return null;};add_constraints(our_start,start_leaves,start_variable);add_constraints(our_end,end_leaves,end_variable);return result;};Box.prototype._box_equal_size_bounds=function(horizontal){return this._box_insets_from_child_insets(horizontal,'box-equal-size','_box_equal_size',false);};Box.prototype._box_cell_align_bounds=function(horizontal){return this._box_insets_from_child_insets(horizontal,'box-cell-align','_box_cell_align',false);};Box.prototype._box_whitespace=function(horizontal){return this._box_insets_from_child_insets(horizontal,'whitespace','_whitespace',true);};Box._left_right_inner_cell_edge_variables=['box-cell-align-left','box-cell-align-right'];Box._top_bottom_inner_cell_edge_variables=['box-cell-align-top','box-cell-align-bottom'];return Box;})(layout_dom_1.LayoutDOM);},{"./layout_dom":"models/layouts/layout_dom","core/layout/solver":"core/layout/solver","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object","core/util/types":"core/util/types"}],"models/layouts/column":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var box_1=require("./box");exports.ColumnView=(function(superClass){extend(ColumnView,superClass);function ColumnView(){return ColumnView.__super__.constructor.apply(this,arguments);}
ColumnView.prototype.className="bk-grid-column";return ColumnView;})(box_1.BoxView);exports.Column=(function(superClass){extend(Column,superClass);Column.prototype.type='Column';Column.prototype.default_view=exports.ColumnView;function Column(attrs,options){Column.__super__.constructor.call(this,attrs,options);this._horizontal=false;}
return Column;})(box_1.Box);},{"./box":"models/layouts/box"}],"models/layouts/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var box_1=require("./box");exports.Box=box_1.Box;var column_1=require("./column");exports.Column=column_1.Column;var layout_dom_1=require("./layout_dom");exports.LayoutDOM=layout_dom_1.LayoutDOM;var row_1=require("./row");exports.Row=row_1.Row;var spacer_1=require("./spacer");exports.Spacer=spacer_1.Spacer;var widget_box_1=require("./widget_box");exports.WidgetBox=widget_box_1.WidgetBox;},{"./box":"models/layouts/box","./column":"models/layouts/column","./layout_dom":"models/layouts/layout_dom","./row":"models/layouts/row","./spacer":"models/layouts/spacer","./widget_box":"models/layouts/widget_box"}],"models/layouts/layout_dom":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var dom_1=require("core/dom");var p=require("core/properties");var solver_1=require("core/layout/solver");var build_views_1=require("core/build_views");var bokeh_view_1=require("core/bokeh_view");var logging_1=require("core/logging");var object_1=require("core/util/object");exports.LayoutDOMView=(function(superClass){extend1(LayoutDOMView,superClass);function LayoutDOMView(){return LayoutDOMView.__super__.constructor.apply(this,arguments);}
LayoutDOMView.prototype.initialize=function(options){var cls,i,len,ref;LayoutDOMView.__super__.initialize.call(this,options);this.el.setAttribute("id","modelid_"+this.model.id);this.el.classList.add("bk-layout-"+this.model.sizing_mode);if(this.model.css_classes!=null){ref=this.model.css_classes;for(i=0,len=ref.length;i<len;i++){cls=ref[i];this.el.classList.add(cls);}}
this.child_views={};return this.build_child_views(false);};LayoutDOMView.prototype.build_child_views=function(init_solver){var child,child_view,children,i,len;if(init_solver==null){init_solver=true;}
this.unbind_bokeh_events();if(init_solver){this.model.document._invalidate_all_models();this.model.document._init_solver();}
children=this.model.get_layoutable_children();this.child_views={};build_views_1.build_views(this.child_views,children);dom_1.empty(this.el);for(i=0,len=children.length;i<len;i++){child=children[i];child_view=this.child_views[child.id];this.el.appendChild(child_view.el);}
return this.bind_bokeh_events();};LayoutDOMView.prototype.unbind_bokeh_events=function(){var id,ref,results,view;this.stopListening();ref=this.child_views;results=[];for(id in ref){view=ref[id];view.stopListening();results.push(typeof view.unbind_bokeh_events==="function"?view.unbind_bokeh_events():void 0);}
return results;};LayoutDOMView.prototype.bind_bokeh_events=function(){var sizing_mode_msg;this.listenTo(this.model,'change',this.render);if(this.model.sizing_mode==='fixed'){this.listenToOnce(this.model.document.solver(),'resize',(function(_this){return function(){return _this.render();};})(this));}
else{this.listenTo(this.model.document.solver(),'resize',(function(_this){return function(){return _this.render();};})(this));}
sizing_mode_msg="Changing sizing_mode after initialization is not currently supported.";return this.listenTo(this.model,'change:sizing_mode',function(){return logging_1.logger.warn(sizing_mode_msg);});};LayoutDOMView.prototype.render=function(){var height,s,width;s=this.model.document.solver();if(this.model.sizing_mode==='fixed'){if(this.model.width!=null){width=this.model.width;}
else{width=this.get_width();this.model.width=width;}
if(this.model.height!=null){height=this.model.height;}
else{height=this.get_height();this.model.height=height;}
s.suggest_value(this.model._width,width);s.suggest_value(this.model._height,height);s.update_variables();this.el.style.width=width+"px";this.el.style.height=height+"px";}
if(this.model.sizing_mode==='scale_width'){height=this.get_height();s.suggest_value(this.model._height,height);s.update_variables();this.el.style.width=this.model._width._value+"px";this.el.style.height=this.model._height._value+"px";}
if(this.model.sizing_mode==='scale_height'){width=this.get_width();s.suggest_value(this.model._width,width);s.update_variables();this.el.style.width=this.model._width._value+"px";this.el.style.height=this.model._height._value+"px";}
if(this.model.sizing_mode==='stretch_both'){this.el.style.position='absolute';this.el.style.left=this.model._dom_left._value+"px";this.el.style.top=this.model._dom_top._value+"px";this.el.style.width=this.model._width._value+"px";return this.el.style.height=this.model._height._value+"px";}};LayoutDOMView.prototype.get_height=function(){return null;};LayoutDOMView.prototype.get_width=function(){return null;};return LayoutDOMView;})(bokeh_view_1.BokehView);exports.LayoutDOM=(function(superClass){extend1(LayoutDOM,superClass);function LayoutDOM(){return LayoutDOM.__super__.constructor.apply(this,arguments);}
LayoutDOM.prototype.type="LayoutDOM";LayoutDOM.prototype.initialize=function(attrs,options){LayoutDOM.__super__.initialize.call(this,attrs,options);this._width=new solver_1.Variable("_width "+this.id);this._height=new solver_1.Variable("_height "+this.id);this._left=new solver_1.Variable("_left "+this.id);this._right=new solver_1.Variable("_right "+this.id);this._top=new solver_1.Variable("_top "+this.id);this._bottom=new solver_1.Variable("_bottom "+this.id);this._dom_top=new solver_1.Variable("_dom_top "+this.id);this._dom_left=new solver_1.Variable("_dom_left "+this.id);this._width_minus_right=new solver_1.Variable("_width_minus_right "+this.id);this._height_minus_bottom=new solver_1.Variable("_height_minus_bottom "+this.id);this._whitespace_top=new solver_1.Variable();this._whitespace_bottom=new solver_1.Variable();this._whitespace_left=new solver_1.Variable();return this._whitespace_right=new solver_1.Variable();};LayoutDOM.prototype.get_constraints=function(){var constraints;constraints=[];constraints.push(solver_1.GE(this._dom_left));constraints.push(solver_1.GE(this._dom_top));constraints.push(solver_1.GE(this._left));constraints.push(solver_1.GE(this._width,[-1,this._right]));constraints.push(solver_1.GE(this._top));constraints.push(solver_1.GE(this._height,[-1,this._bottom]));constraints.push(solver_1.EQ(this._width_minus_right,[-1,this._width],this._right));constraints.push(solver_1.EQ(this._height_minus_bottom,[-1,this._height],this._bottom));return constraints;};LayoutDOM.prototype.get_layoutable_children=function(){return[];};LayoutDOM.prototype.get_edit_variables=function(){var edit_variables;edit_variables=[];if(this.sizing_mode==='fixed'){edit_variables.push({edit_variable:this._height,strength:solver_1.Strength.strong});edit_variables.push({edit_variable:this._width,strength:solver_1.Strength.strong});}
if(this.sizing_mode==='scale_width'){edit_variables.push({edit_variable:this._height,strength:solver_1.Strength.strong});}
if(this.sizing_mode==='scale_height'){edit_variables.push({edit_variable:this._width,strength:solver_1.Strength.strong});}
return edit_variables;};LayoutDOM.prototype.get_constrained_variables=function(){var constrained_variables;constrained_variables={'origin-x':this._dom_left,'origin-y':this._dom_top,'whitespace-top':this._whitespace_top,'whitespace-bottom':this._whitespace_bottom,'whitespace-left':this._whitespace_left,'whitespace-right':this._whitespace_right};if(this.sizing_mode==='stretch_both'){constrained_variables=object_1.extend(constrained_variables,{'width':this._width,'height':this._height});}
if(this.sizing_mode==='scale_width'){constrained_variables=object_1.extend(constrained_variables,{'width':this._width});}
if(this.sizing_mode==='scale_height'){constrained_variables=object_1.extend(constrained_variables,{'height':this._height});}
return constrained_variables;};LayoutDOM.define({height:[p.Number],width:[p.Number],disabled:[p.Bool,false],sizing_mode:[p.SizingMode,"fixed"],css_classes:[p.Array]});LayoutDOM.internal({layoutable:[p.Bool,true]});return LayoutDOM;})(model_1.Model);},{"../../model":"model","core/bokeh_view":"core/bokeh_view","core/build_views":"core/build_views","core/dom":"core/dom","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/layouts/row":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var box_1=require("./box");exports.RowView=(function(superClass){extend(RowView,superClass);function RowView(){return RowView.__super__.constructor.apply(this,arguments);}
RowView.prototype.className="bk-grid-row";return RowView;})(box_1.BoxView);exports.Row=(function(superClass){extend(Row,superClass);Row.prototype.type='Row';Row.prototype.default_view=exports.RowView;function Row(attrs,options){Row.__super__.constructor.call(this,attrs,options);this._horizontal=true;}
return Row;})(box_1.Box);},{"./box":"models/layouts/box"}],"models/layouts/spacer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var layout_dom_1=require("./layout_dom");var object_1=require("core/util/object");exports.SpacerView=(function(superClass){extend1(SpacerView,superClass);function SpacerView(){return SpacerView.__super__.constructor.apply(this,arguments);}
SpacerView.prototype.className="bk-spacer-box";SpacerView.prototype.render=function(){SpacerView.__super__.render.call(this);if(this.sizing_mode==='fixed'){this.el.style.width=this.model.width+"px";return this.el.style.height=this.model.height+"px";}};SpacerView.prototype.get_height=function(){return 1;};return SpacerView;})(layout_dom_1.LayoutDOMView);exports.Spacer=(function(superClass){extend1(Spacer,superClass);function Spacer(){return Spacer.__super__.constructor.apply(this,arguments);}
Spacer.prototype.type='Spacer';Spacer.prototype.default_view=exports.SpacerView;Spacer.prototype.get_constrained_variables=function(){var constrained_variables;constrained_variables=Spacer.__super__.get_constrained_variables.call(this);constrained_variables=object_1.extend(constrained_variables,{'on-edge-align-top':this._top,'on-edge-align-bottom':this._height_minus_bottom,'on-edge-align-left':this._left,'on-edge-align-right':this._width_minus_right,'box-cell-align-top':this._top,'box-cell-align-bottom':this._height_minus_bottom,'box-cell-align-left':this._left,'box-cell-align-right':this._width_minus_right,'box-equal-size-top':this._top,'box-equal-size-bottom':this._height_minus_bottom,'box-equal-size-left':this._left,'box-equal-size-right':this._width_minus_right});return constrained_variables;};return Spacer;})(layout_dom_1.LayoutDOM);},{"./layout_dom":"models/layouts/layout_dom","core/util/object":"core/util/object"}],"models/layouts/widget_box":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var logging_1=require("core/logging");var p=require("core/properties");var object_1=require("core/util/object");var layout_dom_1=require("../layouts/layout_dom");exports.WidgetBoxView=(function(superClass){extend1(WidgetBoxView,superClass);function WidgetBoxView(){return WidgetBoxView.__super__.constructor.apply(this,arguments);}
WidgetBoxView.prototype.className="bk-widget-box";WidgetBoxView.prototype.initialize=function(options){WidgetBoxView.__super__.initialize.call(this,options);return this.render();};WidgetBoxView.prototype.bind_bokeh_events=function(){WidgetBoxView.__super__.bind_bokeh_events.call(this);return this.listenTo(this.model,'change:children',(function(_this){return function(){return _this.build_child_views();};})(this));};WidgetBoxView.prototype.render=function(){var css_width,height,s,width;s=this.model.document.solver();if(this.model.sizing_mode==='fixed'||this.model.sizing_mode==='scale_height'){width=this.get_width();if(this.model._width._value!==width){s.suggest_value(this.model._width,width);s.update_variables();}}
if(this.model.sizing_mode==='fixed'||this.model.sizing_mode==='scale_width'){height=this.get_height();if(this.model._height._value!==height){s.suggest_value(this.model._height,height);s.update_variables();}}
if(this.model._width._value-20>0){css_width=(this.model._width._value-20)+"px";}
else{css_width="100%";}
if(this.model.sizing_mode==='stretch_both'){this.el.style.position='absolute';this.el.style.left=this.model._dom_left._value+"px";this.el.style.top=this.model._dom_top._value+"px";this.el.style.width=this.model._width._value+"px";return this.el.style.height=this.model._height._value+"px";}
else{return this.el.style.width=css_width;}};WidgetBoxView.prototype.get_height=function(){var child_view,height,key,ref;height=0;ref=this.child_views;for(key in ref){if(!hasProp.call(ref,key))
continue;child_view=ref[key];height+=child_view.el.scrollHeight;}
return height+20;};WidgetBoxView.prototype.get_width=function(){var child_view,child_width,key,ref,width;if(this.model.width!=null){return this.model.width;}
else{width=this.el.scrollWidth+20;ref=this.child_views;for(key in ref){if(!hasProp.call(ref,key))
continue;child_view=ref[key];child_width=child_view.el.scrollWidth;if(child_width>width){width=child_width;}}
return width;}};return WidgetBoxView;})(layout_dom_1.LayoutDOMView);exports.WidgetBox=(function(superClass){extend1(WidgetBox,superClass);function WidgetBox(){return WidgetBox.__super__.constructor.apply(this,arguments);}
WidgetBox.prototype.type='WidgetBox';WidgetBox.prototype.default_view=exports.WidgetBoxView;WidgetBox.prototype.initialize=function(options){WidgetBox.__super__.initialize.call(this,options);if(this.sizing_mode==='fixed'&&this.width===null){this.width=300;logging_1.logger.info("WidgetBox mode is fixed, but no width specified. Using default of 300.");}
if(this.sizing_mode==='scale_height'){return logging_1.logger.warn("sizing_mode `scale_height` is not experimental for WidgetBox. Please report your results to the bokeh dev team so we can improve.");}};WidgetBox.prototype.get_edit_variables=function(){var child,edit_variables,i,len,ref;edit_variables=WidgetBox.__super__.get_edit_variables.call(this);ref=this.get_layoutable_children();for(i=0,len=ref.length;i<len;i++){child=ref[i];edit_variables=edit_variables.concat(child.get_edit_variables());}
return edit_variables;};WidgetBox.prototype.get_constraints=function(){var child,constraints,i,len,ref;constraints=WidgetBox.__super__.get_constraints.call(this);ref=this.get_layoutable_children();for(i=0,len=ref.length;i<len;i++){child=ref[i];constraints=constraints.concat(child.get_constraints());}
return constraints;};WidgetBox.prototype.get_constrained_variables=function(){var constrained_variables;constrained_variables=WidgetBox.__super__.get_constrained_variables.call(this);constrained_variables=object_1.extend(constrained_variables,{'on-edge-align-top':this._top,'on-edge-align-bottom':this._height_minus_bottom,'on-edge-align-left':this._left,'on-edge-align-right':this._width_minus_right,'box-cell-align-top':this._top,'box-cell-align-bottom':this._height_minus_bottom,'box-cell-align-left':this._left,'box-cell-align-right':this._width_minus_right,'box-equal-size-top':this._top,'box-equal-size-bottom':this._height_minus_bottom});if(this.sizing_mode!=='fixed'){constrained_variables=object_1.extend(constrained_variables,{'box-equal-size-left':this._left,'box-equal-size-right':this._width_minus_right});}
return constrained_variables;};WidgetBox.prototype.get_layoutable_children=function(){return this.children;};WidgetBox.define({'children':[p.Array,[]]});return WidgetBox;})(layout_dom_1.LayoutDOM);},{"../layouts/layout_dom":"models/layouts/layout_dom","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/mappers/categorical_color_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var color_mapper_1=require("./color_mapper");exports.CategoricalColorMapper=(function(superClass){extend(CategoricalColorMapper,superClass);function CategoricalColorMapper(){return CategoricalColorMapper.__super__.constructor.apply(this,arguments);}
CategoricalColorMapper.prototype.type="CategoricalColorMapper";CategoricalColorMapper.define({factors:[p.Array]});CategoricalColorMapper.prototype._get_values=function(data,palette){var color,d,i,key,len,values;values=[];for(i=0,len=data.length;i<len;i++){d=data[i];key=this.factors.indexOf(d);if(key<0||key>=palette.length){color=this.nan_color;}
else{color=palette[key];}
values.push(color);}
return values;};return CategoricalColorMapper;})(color_mapper_1.ColorMapper);},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties"}],"models/mappers/categorical_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var linear_mapper_1=require("./linear_mapper");var types_1=require("core/util/types");exports.CategoricalMapper=(function(superClass){extend(CategoricalMapper,superClass);function CategoricalMapper(){return CategoricalMapper.__super__.constructor.apply(this,arguments);}
CategoricalMapper.prototype.map_to_target=function(x,return_synthetic){var factor,factors,percent,range,ref,result;if(return_synthetic==null){return_synthetic=false;}
if(types_1.isNumber(x)){if(return_synthetic){return x;}
else{return CategoricalMapper.__super__.map_to_target.call(this,x);}}
range=this.source_range;factors=range.factors;if(x.indexOf(':')>=0){ref=x.split(':'),factor=ref[0],percent=ref[1];percent=parseFloat(percent);result=factors.indexOf(factor)+0.5+range.offset+percent;}
else{result=factors.indexOf(x)+1+range.offset;}
if(return_synthetic){return result;}
else{return CategoricalMapper.__super__.map_to_target.call(this,result);}};CategoricalMapper.prototype.v_map_to_target=function(xs,return_synthetic){var factor,factors,i,j,percent,range,ref,ref1,results,x;if(return_synthetic==null){return_synthetic=false;}
if(types_1.isNumber(xs[0])){if(return_synthetic){return xs;}
else{return CategoricalMapper.__super__.v_map_to_target.call(this,xs);}}
range=this.source_range;factors=range.factors;results=Array(xs.length);for(i=j=0,ref=xs.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){x=xs[i];if(x.indexOf(':')>=0){ref1=x.split(':'),factor=ref1[0],percent=ref1[1];percent=parseFloat(percent);results[i]=factors.indexOf(factor)+0.5+range.offset+percent;}
else{results[i]=factors.indexOf(x)+1+range.offset;}}
if(return_synthetic){return results;}
else{return CategoricalMapper.__super__.v_map_to_target.call(this,results);}};CategoricalMapper.prototype.map_from_target=function(xprime,skip_cat){var factors,range;if(skip_cat==null){skip_cat=false;}
xprime=CategoricalMapper.__super__.map_from_target.call(this,xprime);if(skip_cat){return xprime;}
range=this.source_range;factors=range.factors;return factors[Math.floor(xprime-0.5-range.offset)];};CategoricalMapper.prototype.v_map_from_target=function(xprimes,skip_cat){var factors,i,j,k,range,ref,ref1,result,x;if(skip_cat==null){skip_cat=false;}
x=CategoricalMapper.__super__.v_map_from_target.call(this,xprimes);for(i=j=0,ref=x.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){x[i]=x[i];}
if(skip_cat){return x;}
result=Array(x);range=this.source_range;factors=range.factors;for(i=k=0,ref1=xprimes.length;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){result[i]=factors[Math.floor(x[i]-0.5-range.offset)];}
return result;};return CategoricalMapper;})(linear_mapper_1.LinearMapper);},{"./linear_mapper":"models/mappers/linear_mapper","core/util/types":"core/util/types"}],"models/mappers/color_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var model_1=require("../../model");var types_1=require("core/util/types");exports.ColorMapper=(function(superClass){extend(ColorMapper,superClass);function ColorMapper(){return ColorMapper.__super__.constructor.apply(this,arguments);}
ColorMapper.prototype.type="ColorMapper";ColorMapper.define({palette:[p.Any],nan_color:[p.Color,"gray"]});ColorMapper.prototype.initialize=function(attrs,options){ColorMapper.__super__.initialize.call(this,attrs,options);this._little_endian=this._is_little_endian();this._palette=this._build_palette(this.palette);return this.listenTo(this,'change',function(){return this._palette=this._build_palette(this.palette);});};ColorMapper.prototype.v_map_screen=function(data,image_glyph){var buf,color,i,j,k,ref,ref1,value,values;if(image_glyph==null){image_glyph=false;}
values=this._get_values(data,this._palette,image_glyph);buf=new ArrayBuffer(data.length*4);color=new Uint32Array(buf);if(this._little_endian){for(i=j=0,ref=data.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){value=values[i];color[i]=(0xff<<24)|((value&0xff0000)>>16)|(value&0xff00)|((value&0xff)<<16);}}
else{for(i=k=0,ref1=data.length;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){value=values[i];color[i]=(value<<8)|0xff;}}
return buf;};ColorMapper.prototype.compute=function(x){return null;};ColorMapper.prototype.v_compute=function(xs){var values;values=this._get_values(xs,this.palette);return values;};ColorMapper.prototype._get_values=function(data,palette,image_glyph){if(image_glyph==null){image_glyph=false;}
return[];};ColorMapper.prototype._is_little_endian=function(){var buf,buf32,buf8,little_endian;buf=new ArrayBuffer(4);buf8=new Uint8Array(buf);buf32=new Uint32Array(buf);buf32[1]=0x0a0b0c0d;little_endian=true;if(buf8[4]===0x0a&&buf8[5]===0x0b&&buf8[6]===0x0c&&buf8[7]===0x0d){little_endian=false;}
return little_endian;};ColorMapper.prototype._build_palette=function(palette){var _convert,i,j,new_palette,ref;new_palette=new Uint32Array(palette.length);_convert=function(value){if(types_1.isNumber(value)){return value;}
else{return parseInt(value.slice(1),16);}};for(i=j=0,ref=palette.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){new_palette[i]=_convert(palette[i]);}
return new_palette;};return ColorMapper;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/mappers/grid_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");exports.GridMapper=(function(superClass){extend(GridMapper,superClass);function GridMapper(){return GridMapper.__super__.constructor.apply(this,arguments);}
GridMapper.prototype.map_to_target=function(x,y){var xprime,yprime;xprime=this.domain_mapper.map_to_target(x);yprime=this.codomain_mapper.map_to_target(y);return[xprime,yprime];};GridMapper.prototype.v_map_to_target=function(xs,ys){var xprimes,yprimes;xprimes=this.domain_mapper.v_map_to_target(xs);yprimes=this.codomain_mapper.v_map_to_target(ys);return[xprimes,yprimes];};GridMapper.prototype.map_from_target=function(xprime,yprime){var x,y;x=this.domain_mapper.map_from_target(xprime);y=this.codomain_mapper.map_from_target(yprime);return[x,y];};GridMapper.prototype.v_map_from_target=function(xprimes,yprimes){var xs,ys;xs=this.domain_mapper.v_map_from_target(xprimes);ys=this.codomain_mapper.v_map_from_target(yprimes);return[xs,ys];};return GridMapper;})(model_1.Model);},{"../../model":"model"}],"models/mappers/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var categorical_color_mapper_1=require("./categorical_color_mapper");exports.CategoricalColorMapper=categorical_color_mapper_1.CategoricalColorMapper;var categorical_mapper_1=require("./categorical_mapper");exports.CategoricalMapper=categorical_mapper_1.CategoricalMapper;var color_mapper_1=require("./color_mapper");exports.ColorMapper=color_mapper_1.ColorMapper;var grid_mapper_1=require("./grid_mapper");exports.GridMapper=grid_mapper_1.GridMapper;var linear_color_mapper_1=require("./linear_color_mapper");exports.LinearColorMapper=linear_color_mapper_1.LinearColorMapper;var linear_mapper_1=require("./linear_mapper");exports.LinearMapper=linear_mapper_1.LinearMapper;var log_color_mapper_1=require("./log_color_mapper");exports.LogColorMapper=log_color_mapper_1.LogColorMapper;var log_mapper_1=require("./log_mapper");exports.LogMapper=log_mapper_1.LogMapper;},{"./categorical_color_mapper":"models/mappers/categorical_color_mapper","./categorical_mapper":"models/mappers/categorical_mapper","./color_mapper":"models/mappers/color_mapper","./grid_mapper":"models/mappers/grid_mapper","./linear_color_mapper":"models/mappers/linear_color_mapper","./linear_mapper":"models/mappers/linear_mapper","./log_color_mapper":"models/mappers/log_color_mapper","./log_mapper":"models/mappers/log_mapper"}],"models/mappers/linear_color_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var color_1=require("core/util/color");var array_1=require("core/util/array");var color_mapper_1=require("./color_mapper");exports.LinearColorMapper=(function(superClass){extend(LinearColorMapper,superClass);function LinearColorMapper(){return LinearColorMapper.__super__.constructor.apply(this,arguments);}
LinearColorMapper.prototype.type="LinearColorMapper";LinearColorMapper.define({high:[p.Number],low:[p.Number],high_color:[p.Color],low_color:[p.Color]});LinearColorMapper.prototype.initialize=function(attrs,options){LinearColorMapper.__super__.initialize.call(this,attrs,options);this._nan_color=this._build_palette([color_1.color2hex(this.nan_color)])[0];this._high_color=this.high_color!=null?this._build_palette([color_1.color2hex(this.high_color)])[0]:void 0;return this._low_color=this.low_color!=null?this._build_palette([color_1.color2hex(this.low_color)])[0]:void 0;};LinearColorMapper.prototype._get_values=function(data,palette,image_glyph){var d,high,high_color,i,key,len,low,low_color,max_key,nan_color,norm_factor,normed_d,normed_interval,ref,ref1,values;if(image_glyph==null){image_glyph=false;}
low=(ref=this.low)!=null?ref:array_1.min(data);high=(ref1=this.high)!=null?ref1:array_1.max(data);max_key=palette.length-1;values=[];nan_color=image_glyph?this._nan_color:this.nan_color;low_color=image_glyph?this._low_color:this.low_color;high_color=image_glyph?this._high_color:this.high_color;norm_factor=1/(high-low);normed_interval=1/palette.length;for(i=0,len=data.length;i<len;i++){d=data[i];if(isNaN(d)){values.push(nan_color);continue;}
if(d===high){values.push(palette[max_key]);continue;}
normed_d=(d-low)*norm_factor;key=Math.floor(normed_d/normed_interval);if(key<0){if(this.low_color!=null){values.push(low_color);}
else{values.push(palette[0]);}}
else if(key>max_key){if(this.high_color!=null){values.push(high_color);}
else{values.push(palette[max_key]);}}
else{values.push(palette[key]);}}
return values;};return LinearColorMapper;})(color_mapper_1.ColorMapper);},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties","core/util/array":"core/util/array","core/util/color":"core/util/color"}],"models/mappers/linear_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var p=require("core/properties");exports.LinearMapper=(function(superClass){extend(LinearMapper,superClass);function LinearMapper(){return LinearMapper.__super__.constructor.apply(this,arguments);}
LinearMapper.prototype.initialize=function(attrs,options){LinearMapper.__super__.initialize.call(this,attrs,options);this.define_computed_property('mapper_state',this._mapper_state,true);this.add_dependencies('mapper_state',this,['source_range','target_range']);this.add_dependencies('mapper_state',this.source_range,['start','end']);return this.add_dependencies('mapper_state',this.target_range,['start','end']);};LinearMapper.getters({mapper_state:function(){return this._get_computed('mapper_state');}});LinearMapper.prototype.map_to_target=function(x){var offset,ref,scale;ref=this.mapper_state,scale=ref[0],offset=ref[1];return scale*x+offset;};LinearMapper.prototype.v_map_to_target=function(xs){var i,idx,len,offset,ref,result,scale,x;ref=this.mapper_state,scale=ref[0],offset=ref[1];result=new Float64Array(xs.length);for(idx=i=0,len=xs.length;i<len;idx=++i){x=xs[idx];result[idx]=scale*x+offset;}
return result;};LinearMapper.prototype.map_from_target=function(xprime){var offset,ref,scale;ref=this.mapper_state,scale=ref[0],offset=ref[1];return(xprime-offset)/scale;};LinearMapper.prototype.v_map_from_target=function(xprimes){var i,idx,len,offset,ref,result,scale,xprime;ref=this.mapper_state,scale=ref[0],offset=ref[1];result=new Float64Array(xprimes.length);for(idx=i=0,len=xprimes.length;i<len;idx=++i){xprime=xprimes[idx];result[idx]=(xprime-offset)/scale;}
return result;};LinearMapper.prototype._mapper_state=function(){var offset,scale,source_end,source_start,target_end,target_start;source_start=this.source_range.start;source_end=this.source_range.end;target_start=this.target_range.start;target_end=this.target_range.end;scale=(target_end-target_start)/(source_end-source_start);offset=-(scale*source_start)+target_start;return[scale,offset];};LinearMapper.internal({source_range:[p.Any],target_range:[p.Any]});return LinearMapper;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/mappers/log_color_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var log1p,ref,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var color_1=require("core/util/color");var array_1=require("core/util/array");var color_mapper_1=require("./color_mapper");log1p=(ref=Math.log1p)!=null?ref:function(x){return Math.log(1+x);};exports.LogColorMapper=(function(superClass){extend(LogColorMapper,superClass);function LogColorMapper(){return LogColorMapper.__super__.constructor.apply(this,arguments);}
LogColorMapper.prototype.type="LogColorMapper";LogColorMapper.define({high:[p.Number],low:[p.Number],high_color:[p.Color],low_color:[p.Color]});LogColorMapper.prototype.initialize=function(attrs,options){LogColorMapper.__super__.initialize.call(this,attrs,options);this._nan_color=this._build_palette([color_1.color2hex(this.nan_color)])[0];this._high_color=this.high_color!=null?this._build_palette([color_1.color2hex(this.high_color)])[0]:void 0;return this._low_color=this.low_color!=null?this._build_palette([color_1.color2hex(this.low_color)])[0]:void 0;};LogColorMapper.prototype._get_values=function(data,palette,image_glyph){var d,high,high_color,i,key,len,log,low,low_color,max_key,n,nan_color,ref1,ref2,scale,values;if(image_glyph==null){image_glyph=false;}
n=palette.length;low=(ref1=this.low)!=null?ref1:array_1.min(data);high=(ref2=this.high)!=null?ref2:array_1.max(data);scale=n/(log1p(high)-log1p(low));max_key=palette.length-1;values=[];nan_color=image_glyph?this._nan_color:this.nan_color;high_color=image_glyph?this._high_color:this.high_color;low_color=image_glyph?this._low_color:this.low_color;for(i=0,len=data.length;i<len;i++){d=data[i];if(isNaN(d)){values.push(nan_color);continue;}
if(d>high){if(this.high_color!=null){values.push(high_color);}
else{values.push(palette[max_key]);}
continue;}
if(d===high){values.push(palette[max_key]);continue;}
if(d<low){if(this.low_color!=null){values.push(low_color);}
else{values.push(palette[0]);}
continue;}
log=log1p(d)-log1p(low);key=Math.floor(log*scale);if(key>max_key){key=max_key;}
values.push(palette[key]);}
return values;};return LogColorMapper;})(color_mapper_1.ColorMapper);},{"./color_mapper":"models/mappers/color_mapper","core/properties":"core/properties","core/util/array":"core/util/array","core/util/color":"core/util/color"}],"models/mappers/log_mapper":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var p=require("core/properties");exports.LogMapper=(function(superClass){extend(LogMapper,superClass);function LogMapper(){return LogMapper.__super__.constructor.apply(this,arguments);}
LogMapper.prototype.initialize=function(attrs,options){LogMapper.__super__.initialize.call(this,attrs,options);this.define_computed_property('mapper_state',this._mapper_state,true);this.add_dependencies('mapper_state',this,['source_range','target_range']);this.add_dependencies('mapper_state',this.source_range,['start','end']);return this.add_dependencies('mapper_state',this.target_range,['start','end']);};LogMapper.getters({mapper_state:function(){return this._get_computed('mapper_state');}});LogMapper.prototype.map_to_target=function(x){var inter_offset,inter_scale,offset,ref,scale,value;ref=this.mapper_state,scale=ref[0],offset=ref[1],inter_scale=ref[2],inter_offset=ref[3];if(inter_scale===0){value=0;}
else{value=(Math.log(x)-inter_offset)/inter_scale;if(isNaN(value)||!isFinite(value)){value=0;}}
return value*scale+offset;};LogMapper.prototype.v_map_to_target=function(xs){var i,inter_offset,inter_scale,j,k,l,offset,ref,ref1,ref2,ref3,result,scale,value;ref=this.mapper_state,scale=ref[0],offset=ref[1],inter_scale=ref[2],inter_offset=ref[3];result=new Float64Array(xs.length);if(inter_scale===0){for(i=j=0,ref1=xs.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){result[i]=0;}}
else{for(i=k=0,ref2=xs.length;0<=ref2?k<ref2:k>ref2;i=0<=ref2?++k:--k){value=(Math.log(xs[i])-inter_offset)/inter_scale;if(isNaN(value)||!isFinite(value)){result[i]=0;}
else{result[i]=value;}}}
for(i=l=0,ref3=xs.length;0<=ref3?l<ref3:l>ref3;i=0<=ref3?++l:--l){result[i]=result[i]*scale+offset;}
return result;};LogMapper.prototype.map_from_target=function(xprime){var inter_offset,inter_scale,offset,ref,scale,value;ref=this.mapper_state,scale=ref[0],offset=ref[1],inter_scale=ref[2],inter_offset=ref[3];value=(xprime-offset)/scale;return Math.exp(inter_scale*value+inter_offset);};LogMapper.prototype.v_map_from_target=function(xprimes){var i,inter_offset,inter_scale,j,offset,ref,ref1,result,scale,value;ref=this.mapper_state,scale=ref[0],offset=ref[1],inter_scale=ref[2],inter_offset=ref[3];result=new Float64Array(xprimes.length);for(i=j=0,ref1=xprimes.length;0<=ref1?j<ref1:j>ref1;i=0<=ref1?++j:--j){value=(xprimes[i]-offset)/scale;result[i]=Math.exp(inter_scale*value+inter_offset);}
return result;};LogMapper.prototype._get_safe_scale=function(orig_start,orig_end){var end,log_val,ref,start;if(orig_start<0){start=0;}
else{start=orig_start;}
if(orig_end<0){end=0;}
else{end=orig_end;}
if(start===end){if(start===0){ref=[1,10],start=ref[0],end=ref[1];}
else{log_val=Math.log(start)/Math.log(10);start=Math.pow(10,Math.floor(log_val));if(Math.ceil(log_val)!==Math.floor(log_val)){end=Math.pow(10,Math.ceil(log_val));}
else{end=Math.pow(10,Math.ceil(log_val)+1);}}}
return[start,end];};LogMapper.prototype._mapper_state=function(){var end,inter_offset,inter_scale,offset,ref,scale,screen_range,source_end,source_start,start,target_end,target_start;source_start=this.source_range.start;source_end=this.source_range.end;target_start=this.target_range.start;target_end=this.target_range.end;screen_range=target_end-target_start;ref=this._get_safe_scale(source_start,source_end),start=ref[0],end=ref[1];if(start===0){inter_scale=Math.log(end);inter_offset=0;}
else{inter_scale=Math.log(end)-Math.log(start);inter_offset=Math.log(start);}
scale=screen_range;offset=target_start;return[scale,offset,inter_scale,inter_offset];};LogMapper.internal({source_range:[p.Any],target_range:[p.Any]});return LogMapper;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/markers/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var SQ3,_mk_model,_one_cross,_one_diamond,_one_tri,_one_x,asterisk,circle_cross,circle_x,cross,diamond,diamond_cross,inverted_triangle,square,square_cross,square_x,triangle,x,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var marker_1=require("./marker");SQ3=Math.sqrt(3);_one_x=function(ctx,r){ctx.moveTo(-r,r);ctx.lineTo(r,-r);ctx.moveTo(-r,-r);return ctx.lineTo(r,r);};_one_cross=function(ctx,r){ctx.moveTo(0,r);ctx.lineTo(0,-r);ctx.moveTo(-r,0);return ctx.lineTo(r,0);};_one_diamond=function(ctx,r){ctx.moveTo(0,r);ctx.lineTo(r/1.5,0);ctx.lineTo(0,-r);ctx.lineTo(-r/1.5,0);return ctx.closePath();};_one_tri=function(ctx,r){var a,h;h=r*SQ3;a=h/3;ctx.moveTo(-r,a);ctx.lineTo(r,a);ctx.lineTo(0,a-h);return ctx.closePath();};asterisk=function(ctx,i,sx,sy,r,line,fill){var r2;r2=r*0.65;_one_cross(ctx,r);_one_x(ctx,r2);if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};circle_cross=function(ctx,i,sx,sy,r,line,fill){ctx.arc(0,0,r,0,2*Math.PI,false);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);_one_cross(ctx,r);ctx.stroke();}};circle_x=function(ctx,i,sx,sy,r,line,fill){ctx.arc(0,0,r,0,2*Math.PI,false);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);_one_x(ctx,r);ctx.stroke();}};cross=function(ctx,i,sx,sy,r,line,fill){_one_cross(ctx,r);if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};diamond=function(ctx,i,sx,sy,r,line,fill){_one_diamond(ctx,r);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};diamond_cross=function(ctx,i,sx,sy,r,line,fill){_one_diamond(ctx,r);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);_one_cross(ctx,r);ctx.stroke();}};inverted_triangle=function(ctx,i,sx,sy,r,line,fill){ctx.rotate(Math.PI);_one_tri(ctx,r);ctx.rotate(-Math.PI);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};square=function(ctx,i,sx,sy,r,line,fill){var size;size=2*r;ctx.rect(-r,-r,size,size);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};square_cross=function(ctx,i,sx,sy,r,line,fill){var size;size=2*r;ctx.rect(-r,-r,size,size);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);_one_cross(ctx,r);ctx.stroke();}};square_x=function(ctx,i,sx,sy,r,line,fill){var size;size=2*r;ctx.rect(-r,-r,size,size);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);_one_x(ctx,r);ctx.stroke();}};triangle=function(ctx,i,sx,sy,r,line,fill){_one_tri(ctx,r);if(fill.doit){fill.set_vectorize(ctx,i);ctx.fill();}
if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};x=function(ctx,i,sx,sy,r,line,fill){_one_x(ctx,r);if(line.doit){line.set_vectorize(ctx,i);ctx.stroke();}};_mk_model=function(type,f){var model,view;view=(function(superClass){extend(view,superClass);function view(){return view.__super__.constructor.apply(this,arguments);}
view.prototype._render_one=f;return view;})(marker_1.MarkerView);model=(function(superClass){extend(model,superClass);function model(){return model.__super__.constructor.apply(this,arguments);}
model.prototype.default_view=view;model.prototype.type=type;return model;})(marker_1.Marker);return model;};exports.Asterisk=_mk_model('Asterisk',asterisk);exports.CircleCross=_mk_model('CircleCross',circle_cross);exports.CircleX=_mk_model('CircleX',circle_x);exports.Cross=_mk_model('Cross',cross);exports.Diamond=_mk_model('Diamond',diamond);exports.DiamondCross=_mk_model('DiamondCross',diamond_cross);exports.InvertedTriangle=_mk_model('InvertedTriangle',inverted_triangle);exports.Square=_mk_model('Square',square);exports.SquareCross=_mk_model('SquareCross',square_cross);exports.SquareX=_mk_model('SquareX',square_x);exports.Triangle=_mk_model('Triangle',triangle);exports.X=_mk_model('X',x);},{"./marker":"models/markers/marker"}],"models/markers/marker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var xy_glyph_1=require("../glyphs/xy_glyph");var hittest=require("core/hittest");var p=require("core/properties");exports.MarkerView=(function(superClass){extend(MarkerView,superClass);function MarkerView(){return MarkerView.__super__.constructor.apply(this,arguments);}
MarkerView.prototype.draw_legend_for_index=function(ctx,x0,x1,y0,y1,index){var angle,data,indices,size,sx,sy;indices=[index];sx={};sx[index]=(x0+x1)/2;sy={};sy[index]=(y0+y1)/2;size={};size[index]=Math.min(Math.abs(x1-x0),Math.abs(y1-y0))*0.4;angle={};angle[index]=this._angle[index];data={sx:sx,sy:sy,_size:size,_angle:angle};return this._render(ctx,indices,data);};MarkerView.prototype._render=function(ctx,indices,arg){var _angle,_size,i,j,len,r,results,sx,sy;sx=arg.sx,sy=arg.sy,_size=arg._size,_angle=arg._angle;results=[];for(j=0,len=indices.length;j<len;j++){i=indices[j];if(isNaN(sx[i]+sy[i]+_size[i]+_angle[i])){continue;}
r=_size[i]/2;ctx.beginPath();ctx.translate(sx[i],sy[i]);if(_angle[i]){ctx.rotate(_angle[i]);}
this._render_one(ctx,i,sx[i],sy[i],r,this.visuals.line,this.visuals.fill);if(_angle[i]){ctx.rotate(-_angle[i]);}
results.push(ctx.translate(-sx[i],-sy[i]));}
return results;};MarkerView.prototype._mask_data=function(all_indices){var bbox,hr,ref,ref1,vr,vx0,vx1,vy0,vy1,x0,x1,y0,y1;hr=this.renderer.plot_view.frame.h_range;vx0=hr.start-this.max_size;vx1=hr.end+this.max_size;ref=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref[0],x1=ref[1];vr=this.renderer.plot_view.frame.v_range;vy0=vr.start-this.max_size;vy1=vr.end+this.max_size;ref1=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref1[0],y1=ref1[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);return this.index.indices(bbox);};MarkerView.prototype._hit_point=function(geometry){var bbox,candidates,dist,hits,i,j,len,ref,ref1,ref2,s2,sx,sy,vx,vx0,vx1,vy,vy0,vy1,x0,x1,y0,y1;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];sx=this.renderer.plot_view.canvas.vx_to_sx(vx);sy=this.renderer.plot_view.canvas.vy_to_sy(vy);vx0=vx-this.max_size;vx1=vx+this.max_size;ref1=this.renderer.xmapper.v_map_from_target([vx0,vx1],true),x0=ref1[0],x1=ref1[1];vy0=vy-this.max_size;vy1=vy+this.max_size;ref2=this.renderer.ymapper.v_map_from_target([vy0,vy1],true),y0=ref2[0],y1=ref2[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);candidates=this.index.indices(bbox);hits=[];for(j=0,len=candidates.length;j<len;j++){i=candidates[j];s2=this._size[i]/2;dist=Math.abs(this.sx[i]-sx)+Math.abs(this.sy[i]-sy);if(Math.abs(this.sx[i]-sx)<=s2&&Math.abs(this.sy[i]-sy)<=s2){hits.push([i,dist]);}}
return hittest.create_1d_hit_test_result(hits);};MarkerView.prototype._hit_rect=function(geometry){var bbox,ref,ref1,result,x0,x1,y0,y1;ref=this.renderer.xmapper.v_map_from_target([geometry.vx0,geometry.vx1],true),x0=ref[0],x1=ref[1];ref1=this.renderer.ymapper.v_map_from_target([geometry.vy0,geometry.vy1],true),y0=ref1[0],y1=ref1[1];bbox=hittest.validate_bbox_coords([x0,x1],[y0,y1]);result=hittest.create_hit_test_result();result['1d'].indices=this.index.indices(bbox);return result;};MarkerView.prototype._hit_poly=function(geometry){var candidates,hits,i,idx,j,k,ref,ref1,ref2,result,results,sx,sy,vx,vy;ref=[geometry.vx,geometry.vy],vx=ref[0],vy=ref[1];sx=this.renderer.plot_view.canvas.v_vx_to_sx(vx);sy=this.renderer.plot_view.canvas.v_vy_to_sy(vy);candidates=(function(){results=[];for(var j=0,ref1=this.sx.length;0<=ref1?j<ref1:j>ref1;0<=ref1?j++:j--){results.push(j);}
return results;}).apply(this);hits=[];for(i=k=0,ref2=candidates.length;0<=ref2?k<ref2:k>ref2;i=0<=ref2?++k:--k){idx=candidates[i];if(hittest.point_in_poly(this.sx[i],this.sy[i],sx,sy)){hits.push(idx);}}
result=hittest.create_hit_test_result();result['1d'].indices=hits;return result;};return MarkerView;})(xy_glyph_1.XYGlyphView);exports.Marker=(function(superClass){extend(Marker,superClass);function Marker(){return Marker.__super__.constructor.apply(this,arguments);}
Marker.mixins(['line','fill']);Marker.define({size:[p.DistanceSpec,{units:"screen",value:4}],angle:[p.AngleSpec,0]});return Marker;})(xy_glyph_1.XYGlyph);},{"../glyphs/xy_glyph":"models/glyphs/xy_glyph","core/hittest":"core/hittest","core/properties":"core/properties"}],"models/plots/gmap_plot":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var logging_1=require("core/logging");var gmap_plot_canvas_1=require("./gmap_plot_canvas");var plot_1=require("./plot");var p=require("core/properties");var model_1=require("../../model");exports.MapOptions=(function(superClass){extend(MapOptions,superClass);function MapOptions(){return MapOptions.__super__.constructor.apply(this,arguments);}
MapOptions.prototype.type='MapOptions';MapOptions.define({lat:[p.Number],lng:[p.Number],zoom:[p.Number,12]});return MapOptions;})(model_1.Model);exports.GMapOptions=(function(superClass){extend(GMapOptions,superClass);function GMapOptions(){return GMapOptions.__super__.constructor.apply(this,arguments);}
GMapOptions.prototype.type='GMapOptions';GMapOptions.define({map_type:[p.String,"roadmap"],scale_control:[p.Bool,false],styles:[p.String]});return GMapOptions;})(exports.MapOptions);exports.GMapPlotView=(function(superClass){extend(GMapPlotView,superClass);function GMapPlotView(){return GMapPlotView.__super__.constructor.apply(this,arguments);}
return GMapPlotView;})(plot_1.PlotView);exports.GMapPlot=(function(superClass){extend(GMapPlot,superClass);function GMapPlot(){return GMapPlot.__super__.constructor.apply(this,arguments);}
GMapPlot.prototype.type='GMapPlot';GMapPlot.prototype.default_view=exports.GMapPlotView;GMapPlot.prototype.initialize=function(options){GMapPlot.__super__.initialize.call(this,options);if(!this.api_key){logging_1.logger.error("api_key is required. See https://developers.google.com/maps/documentation/javascript/get-api-key for more information on how to obtain your own.");}
this._plot_canvas=new gmap_plot_canvas_1.GMapPlotCanvas({plot:this});return this.plot_canvas.toolbar=this.toolbar;};GMapPlot.define({map_options:[p.Instance],api_key:[p.String]});return GMapPlot;})(plot_1.Plot);},{"../../model":"model","./gmap_plot_canvas":"models/plots/gmap_plot_canvas","./plot":"models/plots/plot","core/logging":"core/logging","core/properties":"core/properties"}],"models/plots/gmap_plot_canvas":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var load_google_api,bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var proj4_1=require("core/util/proj4");var plot_canvas_1=require("./plot_canvas");load_google_api=function(callback,api_key){var ref,script;if(((ref=window.google)!=null?ref.maps:void 0)==null){window._bokeh_gmap_callback=function(){return callback();};script=document.createElement('script');script.type='text/javascript';script.src="https://maps.googleapis.com/maps/api/js?key="+api_key+"&callback=_bokeh_gmap_callback";return document.body.appendChild(script);}};exports.GMapPlotCanvasView=(function(superClass){extend(GMapPlotCanvasView,superClass);function GMapPlotCanvasView(){this._set_bokeh_ranges=bind(this._set_bokeh_ranges,this);this._get_projected_bounds=bind(this._get_projected_bounds,this);this._get_latlon_bounds=bind(this._get_latlon_bounds,this);return GMapPlotCanvasView.__super__.constructor.apply(this,arguments);}
GMapPlotCanvasView.prototype.initialize=function(options){var mo;GMapPlotCanvasView.__super__.initialize.call(this,options);this.zoom_count=0;mo=this.model.plot.map_options;this.initial_zoom=mo.zoom;this.initial_lat=mo.lat;this.initial_lng=mo.lng;this.canvas_view.map_div.style.position="absolute";return load_google_api(this.request_render,this.model.plot.api_key);};GMapPlotCanvasView.prototype.update_range=function(range_info){var mo,new_map_zoom,old_map_zoom,proj_xend,proj_xstart,proj_yend,proj_ystart,ref,zoom_change;if(range_info==null){mo=this.model.plot.map_options;this.map.setCenter({lat:this.initial_lat,lng:this.initial_lng});this.map.setOptions({zoom:this.initial_zoom});GMapPlotCanvasView.__super__.update_range.call(this,null);}
else if((range_info.sdx!=null)||(range_info.sdy!=null)){this.map.panBy(range_info.sdx,range_info.sdy);GMapPlotCanvasView.__super__.update_range.call(this,range_info);}
else if(range_info.factor!=null){this.pause();if(this.zoom_count!==10){this.zoom_count+=1;return;}
this.zoom_count=0;GMapPlotCanvasView.__super__.update_range.call(this,range_info);if(range_info.factor<0){zoom_change=-1;}
else{zoom_change=1;}
old_map_zoom=this.map.getZoom();new_map_zoom=old_map_zoom+zoom_change;if(new_map_zoom>=2){this.map.setZoom(new_map_zoom);ref=this._get_projected_bounds(),proj_xstart=ref[0],proj_xend=ref[1],proj_ystart=ref[2],proj_yend=ref[3];if((proj_xend-proj_xstart)<0){this.map.setZoom(old_map_zoom);}}
this.unpause();}
return this._set_bokeh_ranges();};GMapPlotCanvasView.prototype._build_map=function(){var map_options,maps,mo;maps=window.google.maps;this.map_types={satellite:maps.MapTypeId.SATELLITE,terrain:maps.MapTypeId.TERRAIN,roadmap:maps.MapTypeId.ROADMAP,hybrid:maps.MapTypeId.HYBRID};mo=this.model.plot.map_options;map_options={center:new maps.LatLng(mo.lat,mo.lng),zoom:mo.zoom,disableDefaultUI:true,mapTypeId:this.map_types[mo.map_type],scaleControl:mo.scale_control};if(mo.styles!=null){map_options.styles=JSON.parse(mo.styles);}
this.map=new maps.Map(this.canvas_view.map_div,map_options);maps.event.addListenerOnce(this.map,'idle',this._set_bokeh_ranges);this.listenTo(this.model.plot,'change:map_options',(function(_this){return function(){return _this._update_options();};})(this));this.listenTo(this.model.plot.map_options,'change:styles',(function(_this){return function(){return _this._update_styles();};})(this));this.listenTo(this.model.plot.map_options,'change:lat',(function(_this){return function(){return _this._update_center('lat');};})(this));this.listenTo(this.model.plot.map_options,'change:lng',(function(_this){return function(){return _this._update_center('lng');};})(this));this.listenTo(this.model.plot.map_options,'change:zoom',(function(_this){return function(){return _this._update_zoom();};})(this));this.listenTo(this.model.plot.map_options,'change:map_type',(function(_this){return function(){return _this._update_map_type();};})(this));return this.listenTo(this.model.plot.map_options,'change:scale_control',(function(_this){return function(){return _this._update_scale_control();};})(this));};GMapPlotCanvasView.prototype._get_latlon_bounds=function(){var bottom_left,bounds,top_right,xend,xstart,yend,ystart;bounds=this.map.getBounds();top_right=bounds.getNorthEast();bottom_left=bounds.getSouthWest();xstart=bottom_left.lng();xend=top_right.lng();ystart=bottom_left.lat();yend=top_right.lat();return[xstart,xend,ystart,yend];};GMapPlotCanvasView.prototype._get_projected_bounds=function(){var proj_xend,proj_xstart,proj_yend,proj_ystart,ref,ref1,ref2,xend,xstart,yend,ystart;ref=this._get_latlon_bounds(),xstart=ref[0],xend=ref[1],ystart=ref[2],yend=ref[3];ref1=proj4_1.proj4(proj4_1.mercator,[xstart,ystart]),proj_xstart=ref1[0],proj_ystart=ref1[1];ref2=proj4_1.proj4(proj4_1.mercator,[xend,yend]),proj_xend=ref2[0],proj_yend=ref2[1];return[proj_xstart,proj_xend,proj_ystart,proj_yend];};GMapPlotCanvasView.prototype._set_bokeh_ranges=function(){var proj_xend,proj_xstart,proj_yend,proj_ystart,ref;ref=this._get_projected_bounds(),proj_xstart=ref[0],proj_xend=ref[1],proj_ystart=ref[2],proj_yend=ref[3];this.x_range.setv({start:proj_xstart,end:proj_xend});return this.y_range.setv({start:proj_ystart,end:proj_yend});};GMapPlotCanvasView.prototype._update_center=function(fld){var c;c=this.map.getCenter().toJSON();c[fld]=this.model.plot.map_options[fld];this.map.setCenter(c);return this._set_bokeh_ranges();};GMapPlotCanvasView.prototype._update_map_type=function(){var maps;maps=window.google.maps;return this.map.setOptions({mapTypeId:this.map_types[this.model.plot.map_options.map_type]});};GMapPlotCanvasView.prototype._update_scale_control=function(){var maps;maps=window.google.maps;return this.map.setOptions({scaleControl:this.model.plot.map_options.scale_control});};GMapPlotCanvasView.prototype._update_options=function(){this._update_styles();this._update_center('lat');this._update_center('lng');this._update_zoom();return this._update_map_type();};GMapPlotCanvasView.prototype._update_styles=function(){return this.map.setOptions({styles:JSON.parse(this.model.plot.map_options.styles)});};GMapPlotCanvasView.prototype._update_zoom=function(){this.map.setOptions({zoom:this.model.plot.map_options.zoom});return this._set_bokeh_ranges();};GMapPlotCanvasView.prototype._map_hook=function(ctx,frame_box){var height,left,top,width;left=frame_box[0],top=frame_box[1],width=frame_box[2],height=frame_box[3];this.canvas_view.map_div.style.top=top+"px";this.canvas_view.map_div.style.left=left+"px";this.canvas_view.map_div.style.width=width+"px";this.canvas_view.map_div.style.height=height+"px";if(this.map==null){return this._build_map();}};GMapPlotCanvasView.prototype._paint_empty=function(ctx,frame_box){var ih,iw,left,oh,ow,top;ow=this.canvas.width;oh=this.canvas.height;left=frame_box[0],top=frame_box[1],iw=frame_box[2],ih=frame_box[3];ctx.clearRect(0,0,ow,oh);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,oh);ctx.lineTo(ow,oh);ctx.lineTo(ow,0);ctx.lineTo(0,0);ctx.moveTo(left,top);ctx.lineTo(left+iw,top);ctx.lineTo(left+iw,top+ih);ctx.lineTo(left,top+ih);ctx.lineTo(left,top);ctx.closePath();ctx.fillStyle=this.model.plot.border_fill_color;return ctx.fill();};return GMapPlotCanvasView;})(plot_canvas_1.PlotCanvasView);exports.GMapPlotCanvas=(function(superClass){extend(GMapPlotCanvas,superClass);function GMapPlotCanvas(){return GMapPlotCanvas.__super__.constructor.apply(this,arguments);}
GMapPlotCanvas.prototype.type='GMapPlotCanvas';GMapPlotCanvas.prototype.default_view=exports.GMapPlotCanvasView;GMapPlotCanvas.prototype.initialize=function(attrs,options){this.use_map=true;return GMapPlotCanvas.__super__.initialize.call(this,attrs,options);};return GMapPlotCanvas;})(plot_canvas_1.PlotCanvas);},{"./plot_canvas":"models/plots/plot_canvas","core/util/proj4":"core/util/proj4"}],"models/plots/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var gmap_plot_1=require("./gmap_plot");exports.MapOptions=gmap_plot_1.MapOptions;var gmap_plot_2=require("./gmap_plot");exports.GMapOptions=gmap_plot_2.GMapOptions;var gmap_plot_3=require("./gmap_plot");exports.GMapPlot=gmap_plot_3.GMapPlot;var gmap_plot_canvas_1=require("./gmap_plot_canvas");exports.GMapPlotCanvas=gmap_plot_canvas_1.GMapPlotCanvas;var plot_1=require("./plot");exports.Plot=plot_1.Plot;var plot_canvas_1=require("./plot_canvas");exports.PlotCanvas=plot_canvas_1.PlotCanvas;},{"./gmap_plot":"models/plots/gmap_plot","./gmap_plot_canvas":"models/plots/gmap_plot_canvas","./plot":"models/plots/plot","./plot_canvas":"models/plots/plot_canvas"}],"models/plots/plot":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var solver_1=require("core/layout/solver");var logging_1=require("core/logging");var p=require("core/properties");var object_1=require("core/util/object");var types_1=require("core/util/types");var layout_dom_1=require("../layouts/layout_dom");var title_1=require("../annotations/title");var toolbar_1=require("../tools/toolbar");var tool_events_1=require("../tools/tool_events");var plot_canvas_1=require("./plot_canvas");var column_data_source_1=require("../sources/column_data_source");var glyph_renderer_1=require("../renderers/glyph_renderer");var bokeh_events_1=require("core/bokeh_events");exports.PlotView=(function(superClass){extend1(PlotView,superClass);function PlotView(){return PlotView.__super__.constructor.apply(this,arguments);}
PlotView.prototype.className="bk-plot-layout";PlotView.prototype.bind_bokeh_events=function(){var title_msg;PlotView.__super__.bind_bokeh_events.call(this);title_msg="Title object cannot be replaced. Try changing properties on title to update it after initialization.";return this.listenTo(this.model,'change:title',(function(_this){return function(){return logging_1.logger.warn(title_msg);};})(this));};PlotView.prototype.render=function(){var height,ref,s,width;PlotView.__super__.render.call(this);if(this.model.sizing_mode==='scale_both'){ref=this.get_width_height(),width=ref[0],height=ref[1];s=this.model.document.solver();s.suggest_value(this.model._width,width);s.suggest_value(this.model._height,height);this.el.style.position='absolute';this.el.style.left=this.model._dom_left._value+"px";this.el.style.top=this.model._dom_top._value+"px";this.el.style.width=(this.model._width.value())+"px";return this.el.style.height=(this.model._height.value())+"px";}};PlotView.prototype.get_width_height=function(){var ar,height,new_height_1,new_height_2,new_width_1,new_width_2,parent_height,parent_width,width;parent_height=this.el.parentNode.clientHeight;parent_width=this.el.parentNode.clientWidth;ar=this.model.get_aspect_ratio();new_width_1=parent_width;new_height_1=parent_width/ar;new_width_2=parent_height*ar;new_height_2=parent_height;if(new_width_1<new_width_2){width=new_width_1;height=new_height_1;}
else{width=new_width_2;height=new_height_2;}
return[width,height];};PlotView.prototype.get_height=function(){return this.model._width._value/this.model.get_aspect_ratio();};PlotView.prototype.get_width=function(){return this.model._height._value*this.model.get_aspect_ratio();};PlotView.prototype.save=function(name){var view;return((function(){var i,len,ref,results;ref=object_1.values(this.child_views);results=[];for(i=0,len=ref.length;i<len;i++){view=ref[i];if(view instanceof plot_canvas_1.PlotCanvasView){results.push(view);}}
return results;}).call(this))[0].save(name);};return PlotView;})(layout_dom_1.LayoutDOMView);exports.Plot=(function(superClass){extend1(Plot,superClass);function Plot(){return Plot.__super__.constructor.apply(this,arguments);}
Plot.prototype.type='Plot';Plot.prototype.default_view=exports.PlotView;Plot.prototype.initialize=function(options){var i,j,len,len1,plots,ref,ref1,ref2,title,xr,yr;Plot.__super__.initialize.call(this,options);ref=object_1.values(this.extra_x_ranges).concat(this.x_range);for(i=0,len=ref.length;i<len;i++){xr=ref[i];plots=xr.plots;if(types_1.isArray(plots)){plots=plots.concat(this);xr.setv('plots',plots,{silent:true});}}
ref1=object_1.values(this.extra_y_ranges).concat(this.y_range);for(j=0,len1=ref1.length;j<len1;j++){yr=ref1[j];plots=yr.plots;if(types_1.isArray(plots)){plots=plots.concat(this);yr.setv('plots',plots,{silent:true});}}
this._horizontal=false;if((ref2=this.toolbar_location)==='left'||ref2==='right'){this._horizontal=true;}
if(this.min_border!=null){if(this.min_border_top==null){this.min_border_top=this.min_border;}
if(this.min_border_bottom==null){this.min_border_bottom=this.min_border;}
if(this.min_border_left==null){this.min_border_left=this.min_border;}
if(this.min_border_right==null){this.min_border_right=this.min_border;}}
if(this.title!=null){title=types_1.isString(this.title)?new title_1.Title({text:this.title}):this.title;this.add_layout(title,this.title_location);}
this._plot_canvas=new plot_canvas_1.PlotCanvas({plot:this});this.toolbar.toolbar_location=this.toolbar_location;this.toolbar.toolbar_sticky=this.toolbar_sticky;this.plot_canvas.toolbar=this.toolbar;if(this.width==null){this.width=this.plot_width;}
if(this.height==null){return this.height=this.plot_height;}};Plot.getter("plot_canvas",function(){return this._plot_canvas;});Plot.prototype._doc_attached=function(){var i,j,layout_renderers,len,len1,r,ref,side;ref=['above','below','left','right'];for(i=0,len=ref.length;i<len;i++){side=ref[i];layout_renderers=this.getv(side);for(j=0,len1=layout_renderers.length;j<len1;j++){r=layout_renderers[j];this.plot_canvas.add_renderer_to_canvas_side(r,side);}}
this.plot_canvas.attach_document(this.document);this._set_orientation_variables(this);this._set_orientation_variables(this.toolbar);this._set_orientation_variables(this.plot_canvas);return Plot.__super__._doc_attached.call(this);};Plot.prototype.add_renderers=function(){var new_renderers,renderers;new_renderers=1<=arguments.length?slice.call(arguments,0):[];renderers=this.renderers;renderers=renderers.concat(new_renderers);return this.renderers=renderers;};Plot.prototype.add_layout=function(renderer,side){var side_renderers;if(side==null){side="center";}
if(renderer.props.plot!=null){renderer.plot=this;}
this.add_renderers(renderer);if(side!=='center'){side_renderers=this.getv(side);return side_renderers.push(renderer);}};Plot.prototype.add_glyph=function(glyph,source,attrs){var renderer;if(attrs==null){attrs={};}
if(source==null){source=new column_data_source_1.ColumnDataSource();}
attrs=object_1.extend({},attrs,{data_source:source,glyph:glyph});renderer=new glyph_renderer_1.GlyphRenderer(attrs);this.add_renderers(renderer);return renderer;};Plot.prototype.add_tools=function(){var attrs,new_tools,tool,tools;tools=1<=arguments.length?slice.call(arguments,0):[];new_tools=(function(){var i,len,results;results=[];for(i=0,len=tools.length;i<len;i++){tool=tools[i];if(tool.overlay!=null){this.add_renderers(tool.overlay);}
if(tool.plot!=null){results.push(tool);}
else{attrs=object_1.clone(tool.attributes);attrs.plot=this;results.push(new tool.constructor(attrs));}}
return results;}).call(this);return this.toolbar.tools=this.toolbar.tools.concat(new_tools);};Plot.prototype.get_aspect_ratio=function(){return this.width/this.height;};Plot.prototype.get_layoutable_children=function(){var children;children=[this.plot_canvas];if(this.toolbar_location!=null){children=[this.toolbar,this.plot_canvas];}
return children;};Plot.prototype.get_edit_variables=function(){var child,edit_variables,i,len,ref;edit_variables=Plot.__super__.get_edit_variables.call(this);if(this.sizing_mode==='scale_both'){edit_variables.push({edit_variable:this._width,strength:solver_1.Strength.strong});edit_variables.push({edit_variable:this._height,strength:solver_1.Strength.strong});}
ref=this.get_layoutable_children();for(i=0,len=ref.length;i<len;i++){child=ref[i];edit_variables=edit_variables.concat(child.get_edit_variables());}
return edit_variables;};Plot.prototype.get_constraints=function(){var child,constraints,i,len,ref,ref1,ref2,sticky_edge;constraints=Plot.__super__.get_constraints.call(this);if(this.toolbar_location!=null){if(this.toolbar_sticky===true){constraints.push(solver_1.EQ(this._sizeable,[-1,this.plot_canvas._sizeable]));}
else{constraints.push(solver_1.EQ(this._sizeable,[-1,this.plot_canvas._sizeable],[-1,this.toolbar._sizeable]));}
constraints.push(solver_1.EQ(this._full,[-1,this.plot_canvas._full]));if(this.toolbar_location==='above'){sticky_edge=this.toolbar_sticky===true?this.plot_canvas._top:this.plot_canvas._dom_top;constraints.push(solver_1.EQ(sticky_edge,[-1,this.toolbar._dom_top],[-1,this.toolbar._height]));}
if(this.toolbar_location==='below'){if(this.toolbar_sticky===false){constraints.push(solver_1.EQ(this.toolbar._dom_top,[-1,this.plot_canvas._height],this.toolbar._bottom,[-1,this.toolbar._height]));}
if(this.toolbar_sticky===true){constraints.push(solver_1.GE(this.plot_canvas.below_panel._height,[-1,this.toolbar._height]));constraints.push(solver_1.WEAK_EQ(this.toolbar._dom_top,[-1,this.plot_canvas._height],this.plot_canvas.below_panel._height));}}
if(this.toolbar_location==='left'){sticky_edge=this.toolbar_sticky===true?this.plot_canvas._left:this.plot_canvas._dom_left;constraints.push(solver_1.EQ(sticky_edge,[-1,this.toolbar._dom_left],[-1,this.toolbar._width]));}
if(this.toolbar_location==='right'){if(this.toolbar_sticky===false){constraints.push(solver_1.EQ(this.toolbar._dom_left,[-1,this.plot_canvas._width],this.toolbar._right,[-1,this.toolbar._width]));}
if(this.toolbar_sticky===true){constraints.push(solver_1.GE(this.plot_canvas.right_panel._width,[-1,this.toolbar._width]));constraints.push(solver_1.WEAK_EQ(this.toolbar._dom_left,[-1,this.plot_canvas._width],this.plot_canvas.right_panel._width));}}
if((ref=this.toolbar_location)==='above'||ref==='below'){constraints.push(solver_1.EQ(this._width,[-1,this.toolbar._width],[-1,this.plot_canvas._width_minus_right]));}
if((ref1=this.toolbar_location)==='left'||ref1==='right'){constraints.push(solver_1.EQ(this._height,[-1,this.toolbar._height],[-1,this.plot_canvas.above_panel._height]));constraints.push(solver_1.EQ(this.toolbar._dom_top,[-1,this.plot_canvas.above_panel._height]));}}
if(this.toolbar_location==null){constraints.push(solver_1.EQ(this._width,[-1,this.plot_canvas._width]));constraints.push(solver_1.EQ(this._height,[-1,this.plot_canvas._height]));}
ref2=this.get_layoutable_children();for(i=0,len=ref2.length;i<len;i++){child=ref2[i];constraints=constraints.concat(child.get_constraints());}
return constraints;};Plot.prototype.get_constrained_variables=function(){var constrained_variables;constrained_variables=Plot.__super__.get_constrained_variables.call(this);constrained_variables=object_1.extend(constrained_variables,{'on-edge-align-top':this.plot_canvas._top,'on-edge-align-bottom':this.plot_canvas._height_minus_bottom,'on-edge-align-left':this.plot_canvas._left,'on-edge-align-right':this.plot_canvas._width_minus_right,'box-cell-align-top':this.plot_canvas._top,'box-cell-align-bottom':this.plot_canvas._height_minus_bottom,'box-cell-align-left':this.plot_canvas._left,'box-cell-align-right':this.plot_canvas._width_minus_right,'box-equal-size-top':this.plot_canvas._top,'box-equal-size-bottom':this.plot_canvas._height_minus_bottom});if(this.sizing_mode!=='fixed'){constrained_variables=object_1.extend(constrained_variables,{'box-equal-size-left':this.plot_canvas._left,'box-equal-size-right':this.plot_canvas._width_minus_right});}
return constrained_variables;};Plot.prototype._set_orientation_variables=function(model){if(this._horizontal===false){model._sizeable=model._height;model._full=model._width;}
if(this._horizontal===true){model._sizeable=model._width;return model._full=model._height;}};Plot.mixins(['line:outline_','fill:background_','fill:border_']);Plot.define({toolbar:[p.Instance,function(){return new toolbar_1.Toolbar();}],toolbar_location:[p.Location,'right'],toolbar_sticky:[p.Bool,true],plot_width:[p.Number,600],plot_height:[p.Number,600],title:[p.Any,function(){return new title_1.Title({text:""});}],title_location:[p.Location,'above'],h_symmetry:[p.Bool,true],v_symmetry:[p.Bool,false],above:[p.Array,[]],below:[p.Array,[]],left:[p.Array,[]],right:[p.Array,[]],renderers:[p.Array,[]],x_range:[p.Instance],extra_x_ranges:[p.Any,{}],y_range:[p.Instance],extra_y_ranges:[p.Any,{}],x_mapper_type:[p.String,'auto'],y_mapper_type:[p.String,'auto'],tool_events:[p.Instance,function(){return new tool_events_1.ToolEvents();}],lod_factor:[p.Number,10],lod_interval:[p.Number,300],lod_threshold:[p.Number,2000],lod_timeout:[p.Number,500],webgl:[p.Bool,false],hidpi:[p.Bool,true],min_border:[p.Number,5],min_border_top:[p.Number,null],min_border_left:[p.Number,null],min_border_bottom:[p.Number,null],min_border_right:[p.Number,null],inner_width:[p.Number],inner_height:[p.Number],layout_width:[p.Number],layout_height:[p.Number]});Plot.override({outline_line_color:'#e5e5e5',border_fill_color:"#ffffff",background_fill_color:"#ffffff"});Plot.getters({all_renderers:function(){var i,len,ref,renderers,tool;renderers=this.renderers;ref=this.toolbar.tools;for(i=0,len=ref.length;i<len;i++){tool=ref[i];renderers=renderers.concat(tool.synthetic_renderers);}
return renderers;}});return Plot;})(layout_dom_1.LayoutDOM);bokeh_events_1.register_with_event(bokeh_events_1.UIEvent,exports.Plot);},{"../annotations/title":"models/annotations/title","../layouts/layout_dom":"models/layouts/layout_dom","../renderers/glyph_renderer":"models/renderers/glyph_renderer","../sources/column_data_source":"models/sources/column_data_source","../tools/tool_events":"models/tools/tool_events","../tools/toolbar":"models/tools/toolbar","./plot_canvas":"models/plots/plot_canvas","core/bokeh_events":"core/bokeh_events","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object","core/util/types":"core/util/types"}],"models/plots/plot_canvas":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var global_glcanvas,bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var canvas_1=require("../canvas/canvas");var cartesian_frame_1=require("../canvas/cartesian_frame");var data_range1d_1=require("../ranges/data_range1d");var glyph_renderer_1=require("../renderers/glyph_renderer");var layout_dom_1=require("../layouts/layout_dom");var build_views_1=require("core/build_views");var ui_events_1=require("core/ui_events");var bokeh_events_1=require("core/bokeh_events");var layout_canvas_1=require("core/layout/layout_canvas");var visuals_1=require("core/visuals");var bokeh_view_1=require("core/bokeh_view");var solver_1=require("core/layout/solver");var logging_1=require("core/logging");var enums=require("core/enums");var p=require("core/properties");var throttle_1=require("core/util/throttle");var types_1=require("core/util/types");var array_1=require("core/util/array");var object_1=require("core/util/object");var callback_1=require("core/util/callback");var side_panel_1=require("core/layout/side_panel");global_glcanvas=null;exports.PlotCanvasView=(function(superClass){extend1(PlotCanvasView,superClass);function PlotCanvasView(){this.remove=bind(this.remove,this);this.request_render=bind(this.request_render,this);return PlotCanvasView.__super__.constructor.apply(this,arguments);}
PlotCanvasView.prototype.className="bk-plot-wrapper";PlotCanvasView.prototype.state={history:[],index:-1};PlotCanvasView.prototype.view_options=function(){return object_1.extend({plot_view:this},this.options);};PlotCanvasView.prototype.pause=function(){return this.is_paused=true;};PlotCanvasView.prototype.unpause=function(){this.is_paused=false;return this.request_render();};PlotCanvasView.prototype.request_render=function(){if(!this.is_paused){this.throttled_render();}};PlotCanvasView.prototype.remove=function(){var id,ref,results,tool_view;PlotCanvasView.__super__.remove.call(this);ref=this.tool_views;results=[];for(id in ref){tool_view=ref[id];results.push(tool_view.remove());}
return results;};PlotCanvasView.prototype.initialize=function(options){var j,len,level,ref;PlotCanvasView.__super__.initialize.call(this,options);this.pause();this.lod_started=false;this.visuals=new visuals_1.Visuals(this.model.plot);this._initial_state_info={range:null,selection:{},dimensions:{width:this.model.canvas.width,height:this.model.canvas.height}};this.frame=this.model.frame;this.x_range=this.frame.x_ranges['default'];this.y_range=this.frame.y_ranges['default'];this.xmapper=this.frame.x_mappers['default'];this.ymapper=this.frame.y_mappers['default'];this.canvas=this.model.canvas;this.canvas_view=new this.canvas.default_view({'model':this.canvas});this.el.appendChild(this.canvas_view.el);this.canvas_view.render(true);if(this.model.plot.webgl){this.init_webgl();}
this.throttled_render=throttle_1.throttle(this.render,15);if(this.model.document._unrendered_plots==null){this.model.document._unrendered_plots={};}
this.model.document._unrendered_plots[this.id]=true;this.ui_event_bus=new ui_events_1.UIEvents(this,this.model.toolbar,this.canvas_view.el,this.model.plot);this.levels={};ref=enums.RenderLevel;for(j=0,len=ref.length;j<len;j++){level=ref[j];this.levels[level]={};}
this.renderer_views={};this.tool_views={};this.build_levels();this.build_tools();this.bind_bokeh_events();this.update_dataranges();this.unpause();logging_1.logger.debug("PlotView initialized");return this;};PlotCanvasView.prototype.get_canvas_element=function(){return this.canvas_view.ctx.canvas;};PlotCanvasView.prototype.set_cursor=function(cursor){if(cursor==null){cursor="default";}
return this.canvas_view.el.style.cursor=cursor;};PlotCanvasView.getters({canvas_overlays:function(){return this.el.querySelector('.bk-canvas-overlays');}});PlotCanvasView.prototype.init_webgl=function(){var ctx,glcanvas,opts;ctx=this.canvas_view.ctx;glcanvas=global_glcanvas;if(glcanvas==null){global_glcanvas=glcanvas=document.createElement('canvas');opts={'premultipliedAlpha':true};glcanvas.gl=glcanvas.getContext("webgl",opts)||glcanvas.getContext("experimental-webgl",opts);}
if(glcanvas.gl!=null){return ctx.glcanvas=glcanvas;}
else{return logging_1.logger.warn('WebGL is not supported, falling back to 2D canvas.');}};PlotCanvasView.prototype.prepare_webgl=function(ratio,frame_box){var canvas,ctx,flipped_top,gl;ctx=this.canvas_view.ctx;canvas=this.canvas_view.get_canvas_element();if(ctx.glcanvas){ctx.glcanvas.width=canvas.width;ctx.glcanvas.height=canvas.height;gl=ctx.glcanvas.gl;gl.viewport(0,0,ctx.glcanvas.width,ctx.glcanvas.height);gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT||gl.DEPTH_BUFFER_BIT);gl.enable(gl.SCISSOR_TEST);flipped_top=ctx.glcanvas.height-ratio*(frame_box[1]+frame_box[3]);gl.scissor(ratio*frame_box[0],flipped_top,ratio*frame_box[2],ratio*frame_box[3]);gl.enable(gl.BLEND);return gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE_MINUS_DST_ALPHA,gl.ONE);}};PlotCanvasView.prototype.blit_webgl=function(ratio){var ctx;ctx=this.canvas_view.ctx;if(ctx.glcanvas){logging_1.logger.debug('drawing with WebGL');ctx.restore();ctx.drawImage(ctx.glcanvas,0,0);ctx.save();ctx.scale(ratio,ratio);return ctx.translate(0.5,0.5);}};PlotCanvasView.prototype.update_dataranges=function(){var bds,bounds,bounds_to_use,calculate_log_bounds,follow_enabled,frame,has_bounds,j,k,l,len,len1,len2,len3,len4,log_bds,log_bounds,m,n,o,r,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,v,xr,yr;frame=this.model.frame;bounds={};log_bounds={};calculate_log_bounds=false;ref=object_1.values(frame.x_ranges).concat(object_1.values(frame.y_ranges));for(j=0,len=ref.length;j<len;j++){r=ref[j];if(r instanceof data_range1d_1.DataRange1d){if(r.mapper_hint==="log"){calculate_log_bounds=true;}}}
ref1=this.renderer_views;for(k in ref1){v=ref1[k];bds=(ref2=v.glyph)!=null?typeof ref2.bounds==="function"?ref2.bounds():void 0:void 0;if(bds!=null){bounds[k]=bds;}
if(calculate_log_bounds){log_bds=(ref3=v.glyph)!=null?typeof ref3.log_bounds==="function"?ref3.log_bounds():void 0:void 0;if(log_bds!=null){log_bounds[k]=log_bds;}}}
follow_enabled=false;has_bounds=false;ref4=object_1.values(frame.x_ranges);for(l=0,len1=ref4.length;l<len1;l++){xr=ref4[l];if(xr instanceof data_range1d_1.DataRange1d){bounds_to_use=xr.mapper_hint==="log"?log_bounds:bounds;xr.update(bounds_to_use,0,this.model.id);if(xr.follow){follow_enabled=true;}}
if(xr.bounds!=null){has_bounds=true;}}
ref5=object_1.values(frame.y_ranges);for(m=0,len2=ref5.length;m<len2;m++){yr=ref5[m];if(yr instanceof data_range1d_1.DataRange1d){bounds_to_use=yr.mapper_hint==="log"?log_bounds:bounds;yr.update(bounds_to_use,1,this.model.id);if(yr.follow){follow_enabled=true;}}
if(yr.bounds!=null){has_bounds=true;}}
if(follow_enabled&&has_bounds){logging_1.logger.warn('Follow enabled so bounds are unset.');ref6=object_1.values(frame.x_ranges);for(n=0,len3=ref6.length;n<len3;n++){xr=ref6[n];xr.bounds=null;}
ref7=object_1.values(frame.y_ranges);for(o=0,len4=ref7.length;o<len4;o++){yr=ref7[o];yr.bounds=null;}}
return this.range_update_timestamp=Date.now();};PlotCanvasView.prototype.map_to_screen=function(x,y,x_name,y_name){if(x_name==null){x_name='default';}
if(y_name==null){y_name='default';}
return this.frame.map_to_screen(x,y,this.canvas,x_name,y_name);};PlotCanvasView.prototype.push_state=function(type,info){var prev_info,ref;prev_info=((ref=this.state.history[this.state.index])!=null?ref.info:void 0)||{};info=object_1.extend({},this._initial_state_info,prev_info,info);this.state.history.slice(0,this.state.index+1);this.state.history.push({type:type,info:info});this.state.index=this.state.history.length-1;return this.trigger("state_changed");};PlotCanvasView.prototype.clear_state=function(){this.state={history:[],index:-1};return this.trigger("state_changed");};PlotCanvasView.prototype.can_undo=function(){return this.state.index>=0;};PlotCanvasView.prototype.can_redo=function(){return this.state.index<this.state.history.length-1;};PlotCanvasView.prototype.undo=function(){if(this.can_undo()){this.state.index-=1;this._do_state_change(this.state.index);return this.trigger("state_changed");}};PlotCanvasView.prototype.redo=function(){if(this.can_redo()){this.state.index+=1;this._do_state_change(this.state.index);return this.trigger("state_changed");}};PlotCanvasView.prototype._do_state_change=function(index){var info,ref;info=((ref=this.state.history[index])!=null?ref.info:void 0)||this._initial_state_info;if(info.range!=null){this.update_range(info.range);}
if(info.selection!=null){this.update_selection(info.selection);}
if(info.dimensions!=null){return this.canvas_view.set_dims([info.dimensions.width,info.dimensions.height]);}};PlotCanvasView.prototype.reset_dimensions=function(){return this.update_dimensions(this.canvas.initial_width,this.canvas.initial_height);};PlotCanvasView.prototype.update_dimensions=function(width,height){this.pause();this.model.plot.width=width;this.model.plot.height=height;this.model.document.resize();return this.unpause();};PlotCanvasView.prototype.get_selection=function(){var j,len,ref,renderer,selected,selection;selection=[];ref=this.model.plot.renderers;for(j=0,len=ref.length;j<len;j++){renderer=ref[j];if(renderer instanceof glyph_renderer_1.GlyphRenderer){selected=renderer.data_source.selected;selection[renderer.id]=selected;}}
return selection;};PlotCanvasView.prototype.update_selection=function(selection){var ds,j,len,ref,ref1,renderer,results;ref=this.model.plot.renderers;results=[];for(j=0,len=ref.length;j<len;j++){renderer=ref[j];if(!(renderer instanceof glyph_renderer_1.GlyphRenderer)){continue;}
ds=renderer.data_source;if(selection!=null){if(ref1=renderer.id,indexOf.call(selection,ref1)>=0){results.push(ds.selected=selection[renderer.id]);}
else{results.push(void 0);}}
else{results.push(ds.selection_manager.clear());}}
return results;};PlotCanvasView.prototype.reset_selection=function(){return this.update_selection(null);};PlotCanvasView.prototype._update_ranges_together=function(range_info_iter){var j,l,len,len1,range_info,ref,ref1,results,rng,weight;weight=1.0;for(j=0,len=range_info_iter.length;j<len;j++){ref=range_info_iter[j],rng=ref[0],range_info=ref[1];weight=Math.min(weight,this._get_weight_to_constrain_interval(rng,range_info));}
if(weight<1){results=[];for(l=0,len1=range_info_iter.length;l<len1;l++){ref1=range_info_iter[l],rng=ref1[0],range_info=ref1[1];range_info['start']=weight*range_info['start']+(1-weight)*rng.start;results.push(range_info['end']=weight*range_info['end']+(1-weight)*rng.end);}
return results;}};PlotCanvasView.prototype._update_ranges_individually=function(range_info_iter,is_panning,is_scrolling){var hit_bound,j,l,len,len1,max,min,new_interval,range_info,ref,ref1,results,reversed,rng,weight;hit_bound=false;for(j=0,len=range_info_iter.length;j<len;j++){ref=range_info_iter[j],rng=ref[0],range_info=ref[1];reversed=rng.start>rng.end;if(!is_scrolling){weight=this._get_weight_to_constrain_interval(rng,range_info);if(weight<1){range_info['start']=weight*range_info['start']+(1-weight)*rng.start;range_info['end']=weight*range_info['end']+(1-weight)*rng.end;}}
if(rng.bounds!=null){min=rng.bounds[0];max=rng.bounds[1];new_interval=Math.abs(range_info['end']-range_info['start']);if(reversed){if(min!=null){if(min>=range_info['end']){hit_bound=true;range_info['end']=min;if((is_panning!=null)||(is_scrolling!=null)){range_info['start']=min+new_interval;}}}
if(max!=null){if(max<=range_info['start']){hit_bound=true;range_info['start']=max;if((is_panning!=null)||(is_scrolling!=null)){range_info['end']=max-new_interval;}}}}
else{if(min!=null){if(min>=range_info['start']){hit_bound=true;range_info['start']=min;if((is_panning!=null)||(is_scrolling!=null)){range_info['end']=min+new_interval;}}}
if(max!=null){if(max<=range_info['end']){hit_bound=true;range_info['end']=max;if((is_panning!=null)||(is_scrolling!=null)){range_info['start']=max-new_interval;}}}}}}
if(is_scrolling&&hit_bound){return;}
results=[];for(l=0,len1=range_info_iter.length;l<len1;l++){ref1=range_info_iter[l],rng=ref1[0],range_info=ref1[1];rng.have_updated_interactively=true;if(rng.start!==range_info['start']||rng.end!==range_info['end']){results.push(rng.setv(range_info));}
else{results.push(void 0);}}
return results;};PlotCanvasView.prototype._get_weight_to_constrain_interval=function(rng,range_info){var max,max_interval,max_interval2,min,min_interval,new_interval,old_interval,ref,weight;min_interval=rng.min_interval;max_interval=rng.max_interval;weight=1.0;if(rng.bounds!=null){ref=rng.bounds,min=ref[0],max=ref[1];if((min!=null)&&(max!=null)){max_interval2=Math.abs(max-min);max_interval=max_interval!=null?Math.min(max_interval,max_interval2):max_interval2;}}
if((min_interval!=null)||(max_interval!=null)){old_interval=Math.abs(rng.end-rng.start);new_interval=Math.abs(range_info['end']-range_info['start']);if(min_interval>0&&new_interval<min_interval){weight=(old_interval-min_interval)/(old_interval-new_interval);}
if(max_interval>0&&new_interval>max_interval){weight=(max_interval-old_interval)/(new_interval-old_interval);}
weight=Math.max(0.0,Math.min(1.0,weight));}
return weight;};PlotCanvasView.prototype.update_range=function(range_info,is_panning,is_scrolling){var name,range_info_iter,ref,ref1,ref2,ref3,rng;this.pause;if(range_info==null){ref=this.frame.x_ranges;for(name in ref){rng=ref[name];rng.reset();}
ref1=this.frame.y_ranges;for(name in ref1){rng=ref1[name];rng.reset();}
this.update_dataranges();}
else{range_info_iter=[];ref2=this.frame.x_ranges;for(name in ref2){rng=ref2[name];range_info_iter.push([rng,range_info.xrs[name]]);}
ref3=this.frame.y_ranges;for(name in ref3){rng=ref3[name];range_info_iter.push([rng,range_info.yrs[name]]);}
if(is_scrolling){this._update_ranges_together(range_info_iter);}
this._update_ranges_individually(range_info_iter,is_panning,is_scrolling);}
return this.unpause();};PlotCanvasView.prototype.reset_range=function(){return this.update_range(null);};PlotCanvasView.prototype.build_levels=function(){var id_,j,l,len,len1,model,new_renderer_views,old_renderers,renderer_models,renderers_to_remove,view;renderer_models=this.model.plot.all_renderers;old_renderers=Object.keys(this.renderer_views);new_renderer_views=build_views_1.build_views(this.renderer_views,renderer_models,this.view_options());renderers_to_remove=array_1.difference(old_renderers,(function(){var j,len,results;results=[];for(j=0,len=renderer_models.length;j<len;j++){model=renderer_models[j];results.push(model.id);}
return results;})());for(j=0,len=renderers_to_remove.length;j<len;j++){id_=renderers_to_remove[j];delete this.levels.glyph[id_];}
for(l=0,len1=new_renderer_views.length;l<len1;l++){view=new_renderer_views[l];this.levels[view.model.level][view.model.id]=view;view.bind_bokeh_events();}
return this;};PlotCanvasView.prototype.get_renderer_views=function(){var j,len,r,ref,results;ref=this.model.plot.renderers;results=[];for(j=0,len=ref.length;j<len;j++){r=ref[j];results.push(this.levels[r.level][r.id]);}
return results;};PlotCanvasView.prototype.build_tools=function(){var j,len,new_tool_views,results,tool_models,tool_view;tool_models=this.model.plot.toolbar.tools;new_tool_views=build_views_1.build_views(this.tool_views,tool_models,this.view_options());results=[];for(j=0,len=new_tool_views.length;j<len;j++){tool_view=new_tool_views[j];tool_view.bind_bokeh_events();results.push(this.ui_event_bus.register_tool(tool_view));}
return results;};PlotCanvasView.prototype.bind_bokeh_events=function(){var name,ref,ref1,rng;ref=this.model.frame.x_ranges;for(name in ref){rng=ref[name];this.listenTo(rng,'change',this.request_render);}
ref1=this.model.frame.y_ranges;for(name in ref1){rng=ref1[name];this.listenTo(rng,'change',this.request_render);}
this.listenTo(this.model.plot,'change:renderers',(function(_this){return function(){return _this.build_levels();};})(this));this.listenTo(this.model.plot.toolbar,'change:tools',(function(_this){return function(){_this.build_levels();return _this.build_tools();};})(this));this.listenTo(this.model.plot,'change',this.request_render);this.listenTo(this.model.plot,'destroy',(function(_this){return function(){return _this.remove();};})(this));this.listenTo(this.model.plot.document.solver(),'layout_update',(function(_this){return function(){return _this.request_render();};})(this));this.listenTo(this.model.plot.document.solver(),'layout_update',(function(_this){return function(){return _this.model.plot.setv({inner_width:Math.round(_this.frame.width),inner_height:Math.round(_this.frame.height),layout_width:Math.round(_this.canvas.width),layout_height:Math.round(_this.canvas.height)});};})(this));this.listenTo(this.model.plot.document.solver(),'resize',(function(_this){return function(){return _this.resize();};})(this));return this.listenTo(this.canvas,'change:pixel_ratio',(function(_this){return function(){return _this.request_render();};})(this));};PlotCanvasView.prototype.set_initial_range=function(){var good_vals,name,ref,ref1,rng,xrs,yrs;good_vals=true;xrs={};ref=this.frame.x_ranges;for(name in ref){rng=ref[name];if((rng.start==null)||(rng.end==null)||types_1.isStrictNaN(rng.start+rng.end)){good_vals=false;break;}
xrs[name]={start:rng.start,end:rng.end};}
if(good_vals){yrs={};ref1=this.frame.y_ranges;for(name in ref1){rng=ref1[name];if((rng.start==null)||(rng.end==null)||types_1.isStrictNaN(rng.start+rng.end)){good_vals=false;break;}
yrs[name]={start:rng.start,end:rng.end};}}
if(good_vals){this._initial_state_info.range=this.initial_range_info={xrs:xrs,yrs:yrs};return logging_1.logger.debug("initial ranges set");}
else{return logging_1.logger.warn('could not set initial ranges');}};PlotCanvasView.prototype.render=function(force_canvas){var ctx,event,frame_box,k,lod_timeout,ratio,ref,v;if(force_canvas==null){force_canvas=false;}
logging_1.logger.trace("PlotCanvas.render(force_canvas="+force_canvas+") for "+this.model.id);if(this.model.document==null){return;}
if(Date.now()-this.interactive_timestamp<this.model.plot.lod_interval){if(!this.lod_started){this.model.plot.trigger_event(new bokeh_events_1.LODStart({}));this.lod_started=true;}
this.interactive=true;lod_timeout=this.model.plot.lod_timeout;setTimeout((function(_this){return function(){if(_this.interactive&&(Date.now()-_this.interactive_timestamp)>lod_timeout){_this.interactive=false;}
return _this.request_render();};})(this),lod_timeout);}
else{this.interactive=false;if(this.lod_started){this.model.plot.trigger_event(new bokeh_events_1.LODEnd({}));this.lod_started=false;}}
ref=this.renderer_views;for(k in ref){v=ref[k];if((this.range_update_timestamp==null)||v.set_data_timestamp>this.range_update_timestamp){this.update_dataranges();break;}}
this.update_constraints();this.model.frame._update_mappers();ctx=this.canvas_view.ctx;ctx.pixel_ratio=ratio=this.canvas_view.pixel_ratio;ctx.save();ctx.scale(ratio,ratio);ctx.translate(0.5,0.5);frame_box=[this.canvas.vx_to_sx(this.frame.left),this.canvas.vy_to_sy(this.frame.top),this.frame.width,this.frame.height];this._map_hook(ctx,frame_box);this._paint_empty(ctx,frame_box);this.prepare_webgl(ratio,frame_box);ctx.save();if(this.visuals.outline_line.doit){this.visuals.outline_line.set_value(ctx);ctx.strokeRect.apply(ctx,frame_box);}
ctx.restore();this._render_levels(ctx,['image','underlay','glyph'],frame_box);this.blit_webgl(ratio);this._render_levels(ctx,['annotation'],frame_box);this._render_levels(ctx,['overlay']);if(this.initial_range_info==null){this.set_initial_range();}
ctx.restore();if(this.model.document._unrendered_plots!=null){delete this.model.document._unrendered_plots[this.id];if(object_1.isEmpty(this.model.document._unrendered_plots)){this.model.document._unrendered_plots=null;callback_1.defer(this.model.document.resize.bind(this.model.document));}}
event=new Event("bokeh:rendered",{detail:this});return window.dispatchEvent(event);};PlotCanvasView.prototype.resize=function(){var height,width;width=this.model._width._value;height=this.model._height._value;this.canvas_view.set_dims([width,height],true);this.canvas_view.prepare_canvas();this.update_constraints();this.el.style.position='absolute';this.el.style.left=this.model._dom_left._value+"px";this.el.style.top=this.model._dom_top._value+"px";this.el.style.width=this.model._width._value+"px";return this.el.style.height=this.model._height._value+"px";};PlotCanvasView.prototype.update_constraints=function(){var model_id,ref,s,view;s=this.model.document.solver();s.suggest_value(this.frame._width,this.canvas.width-1);s.suggest_value(this.frame._height,this.canvas.height-1);ref=this.renderer_views;for(model_id in ref){view=ref[model_id];if(view.model.panel!=null){side_panel_1.update_constraints(view);}}
return s.update_variables(false);};PlotCanvasView.prototype._render_levels=function(ctx,levels,clip_region){var i,indices,j,l,len,len1,len2,level,m,ref,renderer,renderer_view,renderer_views,sortKey;ctx.save();if(clip_region!=null){ctx.beginPath();ctx.rect.apply(ctx,clip_region);ctx.clip();ctx.beginPath();}
indices={};ref=this.model.plot.renderers;for(i=j=0,len=ref.length;j<len;i=++j){renderer=ref[i];indices[renderer.id]=i;}
sortKey=function(renderer_view){return indices[renderer_view.model.id];};for(l=0,len1=levels.length;l<len1;l++){level=levels[l];renderer_views=array_1.sortBy(object_1.values(this.levels[level]),sortKey);for(m=0,len2=renderer_views.length;m<len2;m++){renderer_view=renderer_views[m];renderer_view.render();}}
return ctx.restore();};PlotCanvasView.prototype._map_hook=function(ctx,frame_box){};PlotCanvasView.prototype._paint_empty=function(ctx,frame_box){ctx.clearRect(0,0,this.canvas_view.model.width,this.canvas_view.model.height);if(this.visuals.border_fill.doit){this.visuals.border_fill.set_value(ctx);ctx.fillRect(0,0,this.canvas_view.model.width,this.canvas_view.model.height);ctx.clearRect.apply(ctx,frame_box);}
if(this.visuals.background_fill.doit){this.visuals.background_fill.set_value(ctx);return ctx.fillRect.apply(ctx,frame_box);}};PlotCanvasView.prototype.save=function(name){var blob,canvas,link;canvas=this.get_canvas_element();if(canvas.msToBlob!=null){blob=canvas.msToBlob();return window.navigator.msSaveBlob(blob,name);}
else{link=document.createElement('a');link.href=canvas.toDataURL('image/png');link.download=name;link.target="_blank";return link.dispatchEvent(new MouseEvent('click'));}};return PlotCanvasView;})(bokeh_view_1.BokehView);exports.PlotCanvas=(function(superClass){extend1(PlotCanvas,superClass);function PlotCanvas(){return PlotCanvas.__super__.constructor.apply(this,arguments);}
PlotCanvas.prototype.type='PlotCanvas';PlotCanvas.prototype.default_view=exports.PlotCanvasView;PlotCanvas.prototype.initialize=function(attrs,options){var ref;PlotCanvas.__super__.initialize.call(this,attrs,options);this.canvas=new canvas_1.Canvas({map:(ref=this.use_map)!=null?ref:false,initial_width:this.plot.plot_width,initial_height:this.plot.plot_height,use_hidpi:this.plot.hidpi});this.frame=new cartesian_frame_1.CartesianFrame({x_range:this.plot.x_range,extra_x_ranges:this.plot.extra_x_ranges,x_mapper_type:this.plot.x_mapper_type,y_range:this.plot.y_range,extra_y_ranges:this.plot.extra_y_ranges,y_mapper_type:this.plot.y_mapper_type});this.above_panel=new layout_canvas_1.LayoutCanvas();this.below_panel=new layout_canvas_1.LayoutCanvas();this.left_panel=new layout_canvas_1.LayoutCanvas();this.right_panel=new layout_canvas_1.LayoutCanvas();return logging_1.logger.debug("PlotCanvas initialized");};PlotCanvas.prototype.add_renderer_to_canvas_side=function(renderer,side){if(side!=='center'){return renderer.add_panel(side);}};PlotCanvas.prototype._doc_attached=function(){this.canvas.attach_document(this.document);this.frame.attach_document(this.document);this.above_panel.attach_document(this.document);this.below_panel.attach_document(this.document);this.left_panel.attach_document(this.document);this.right_panel.attach_document(this.document);return logging_1.logger.debug("PlotCanvas attached to document");};PlotCanvas.override({sizing_mode:'stretch_both'});PlotCanvas.internal({plot:[p.Instance],toolbar:[p.Instance],canvas:[p.Instance],frame:[p.Instance]});PlotCanvas.prototype.get_layoutable_children=function(){var children,collect_panels;children=[this.above_panel,this.below_panel,this.left_panel,this.right_panel,this.canvas,this.frame];collect_panels=function(layout_renderers){var j,len,r,results;results=[];for(j=0,len=layout_renderers.length;j<len;j++){r=layout_renderers[j];if(r.panel!=null){results.push(children.push(r.panel));}
else{results.push(void 0);}}
return results;};collect_panels(this.plot.above);collect_panels(this.plot.below);collect_panels(this.plot.left);collect_panels(this.plot.right);return children;};PlotCanvas.prototype.get_edit_variables=function(){var child,edit_variables,j,len,ref;edit_variables=[];ref=this.get_layoutable_children();for(j=0,len=ref.length;j<len;j++){child=ref[j];edit_variables=edit_variables.concat(child.get_edit_variables());}
return edit_variables;};PlotCanvas.prototype.get_constraints=function(){var child,constraints,j,len,ref;constraints=PlotCanvas.__super__.get_constraints.call(this);constraints=constraints.concat(this._get_constant_constraints());constraints=constraints.concat(this._get_side_constraints());ref=this.get_layoutable_children();for(j=0,len=ref.length;j<len;j++){child=ref[j];constraints=constraints.concat(child.get_constraints());}
return constraints;};PlotCanvas.prototype._get_constant_constraints=function(){var constraints,min_border_bottom,min_border_left,min_border_right,min_border_top;min_border_top=this.plot.min_border_top;min_border_bottom=this.plot.min_border_bottom;min_border_left=this.plot.min_border_left;min_border_right=this.plot.min_border_right;constraints=[];constraints.push(solver_1.GE(this.above_panel._height,-min_border_top));constraints.push(solver_1.GE(this.below_panel._height,-min_border_bottom));constraints.push(solver_1.GE(this.left_panel._width,-min_border_left));constraints.push(solver_1.GE(this.right_panel._width,-min_border_right));constraints.push(solver_1.EQ(this.above_panel._top,[-1,this.canvas._top]));constraints.push(solver_1.EQ(this.above_panel._bottom,[-1,this.frame._top]));constraints.push(solver_1.EQ(this.below_panel._bottom,[-1,this.canvas._bottom]));constraints.push(solver_1.EQ(this.below_panel._top,[-1,this.frame._bottom]));constraints.push(solver_1.EQ(this.left_panel._left,[-1,this.canvas._left]));constraints.push(solver_1.EQ(this.left_panel._right,[-1,this.frame._left]));constraints.push(solver_1.EQ(this.right_panel._right,[-1,this.canvas._right]));constraints.push(solver_1.EQ(this.right_panel._left,[-1,this.frame._right]));constraints.push(solver_1.EQ(this.above_panel._height,[-1,this._top]));constraints.push(solver_1.EQ(this.above_panel._height,[-1,this.canvas._top],this.frame._top));constraints.push(solver_1.EQ(this.below_panel._height,[-1,this._height],this._bottom));constraints.push(solver_1.EQ(this.below_panel._height,[-1,this.frame._bottom]));constraints.push(solver_1.EQ(this.left_panel._width,[-1,this._left]));constraints.push(solver_1.EQ(this.left_panel._width,[-1,this.frame._left]));constraints.push(solver_1.EQ(this.right_panel._width,[-1,this._width],this._right));constraints.push(solver_1.EQ(this.right_panel._width,[-1,this.canvas._right],this.frame._right));return constraints;};PlotCanvas.prototype._get_side_constraints=function(){var constraint,constraints,j,l,last,layout_renderers,len,len1,r,ref,side,sides;constraints=[];sides=[['above',this.plot.above],['below',this.plot.below],['left',this.plot.left],['right',this.plot.right]];for(j=0,len=sides.length;j<len;j++){ref=sides[j],side=ref[0],layout_renderers=ref[1];last=this.frame;for(l=0,len1=layout_renderers.length;l<len1;l++){r=layout_renderers[l];constraint=(function(){switch(side){case"above":return solver_1.EQ(last.panel._top,[-1,r.panel._bottom]);case"below":return solver_1.EQ(last.panel._bottom,[-1,r.panel._top]);case"left":return solver_1.EQ(last.panel._left,[-1,r.panel._right]);case"right":return solver_1.EQ(last.panel._right,[-1,r.panel._left]);}})();constraints.push(constraint);last=r;}
if(layout_renderers.length!==0){constraint=(function(){switch(side){case"above":return solver_1.EQ(last.panel._top,[-1,this.above_panel._top]);case"below":return solver_1.EQ(last.panel._bottom,[-1,this.below_panel._bottom]);case"left":return solver_1.EQ(last.panel._left,[-1,this.left_panel._left]);case"right":return solver_1.EQ(last.panel._right,[-1,this.right_panel._right]);}}).call(this);constraints.push(constraint);}}
return constraints;};PlotCanvas.prototype.plot_canvas=function(){return this;};return PlotCanvas;})(layout_dom_1.LayoutDOM);},{"../canvas/canvas":"models/canvas/canvas","../canvas/cartesian_frame":"models/canvas/cartesian_frame","../layouts/layout_dom":"models/layouts/layout_dom","../ranges/data_range1d":"models/ranges/data_range1d","../renderers/glyph_renderer":"models/renderers/glyph_renderer","core/bokeh_events":"core/bokeh_events","core/bokeh_view":"core/bokeh_view","core/build_views":"core/build_views","core/enums":"core/enums","core/layout/layout_canvas":"core/layout/layout_canvas","core/layout/side_panel":"core/layout/side_panel","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties","core/ui_events":"core/ui_events","core/util/array":"core/util/array","core/util/callback":"core/util/callback","core/util/object":"core/util/object","core/util/throttle":"core/util/throttle","core/util/types":"core/util/types","core/visuals":"core/visuals"}],"models/ranges/data_range":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var range_1=require("./range");var p=require("core/properties");exports.DataRange=(function(superClass){extend(DataRange,superClass);function DataRange(){return DataRange.__super__.constructor.apply(this,arguments);}
DataRange.prototype.type='DataRange';DataRange.define({names:[p.Array,[]],renderers:[p.Array,[]]});return DataRange;})(range_1.Range);},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/ranges/data_range1d":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var data_range_1=require("./data_range");var glyph_renderer_1=require("../renderers/glyph_renderer");var logging_1=require("core/logging");var p=require("core/properties");var bbox=require("core/util/bbox");exports.DataRange1d=(function(superClass){extend(DataRange1d,superClass);function DataRange1d(){return DataRange1d.__super__.constructor.apply(this,arguments);}
DataRange1d.prototype.type='DataRange1d';DataRange1d.define({start:[p.Number],end:[p.Number],range_padding:[p.Number,0.1],flipped:[p.Bool,false],follow:[p.String],follow_interval:[p.Number],default_span:[p.Number,2],bounds:[p.Any],min_interval:[p.Any],max_interval:[p.Any]});DataRange1d.internal({mapper_hint:[p.String,'auto']});DataRange1d.prototype.initialize=function(attrs,options){DataRange1d.__super__.initialize.call(this,attrs,options);this.plot_bounds={};this.have_updated_interactively=false;this._initial_start=this.start;this._initial_end=this.end;this._initial_range_padding=this.range_padding;this._initial_follow=this.follow;this._initial_follow_interval=this.follow_interval;return this._initial_default_span=this.default_span;};DataRange1d.getters({min:function(){return Math.min(this.start,this.end);},max:function(){return Math.max(this.start,this.end);}});DataRange1d.prototype.computed_renderers=function(){var all_renderers,i,j,len,len1,names,plot,r,ref,renderers,rs;names=this.names;renderers=this.renderers;if(renderers.length===0){ref=this.plots;for(i=0,len=ref.length;i<len;i++){plot=ref[i];all_renderers=plot.renderers;rs=(function(){var j,len1,results;results=[];for(j=0,len1=all_renderers.length;j<len1;j++){r=all_renderers[j];if(r instanceof glyph_renderer_1.GlyphRenderer){results.push(r);}}
return results;})();renderers=renderers.concat(rs);}}
if(names.length>0){renderers=(function(){var j,len1,results;results=[];for(j=0,len1=renderers.length;j<len1;j++){r=renderers[j];if(names.indexOf(r.name)>=0){results.push(r);}}
return results;})();}
logging_1.logger.debug("computed "+renderers.length+" renderers for DataRange1d "+this.id);for(j=0,len1=renderers.length;j<len1;j++){r=renderers[j];logging_1.logger.trace(" - "+r.type+" "+r.id);}
return renderers;};DataRange1d.prototype._compute_plot_bounds=function(renderers,bounds){var i,len,r,result;result=bbox.empty();for(i=0,len=renderers.length;i<len;i++){r=renderers[i];if(bounds[r.id]!=null){result=bbox.union(result,bounds[r.id]);}}
return result;};DataRange1d.prototype._compute_min_max=function(plot_bounds,dimension){var k,max,min,overall,ref,ref1,v;overall=bbox.empty();for(k in plot_bounds){v=plot_bounds[k];overall=bbox.union(overall,v);}
if(dimension===0){ref=[overall.minX,overall.maxX],min=ref[0],max=ref[1];}
else{ref1=[overall.minY,overall.maxY],min=ref1[0],max=ref1[1];}
return[min,max];};DataRange1d.prototype._compute_range=function(min,max){var center,end,follow_interval,follow_sign,log_max,log_min,range_padding,ref,ref1,ref2,ref3,span,start;range_padding=this.range_padding;if((range_padding!=null)&&range_padding>0){if(this.mapper_hint==="log"){if(isNaN(min)||!isFinite(min)||min<=0){if(isNaN(max)||!isFinite(max)||max<=0){min=0.1;}
else{min=max/100;}
logging_1.logger.warn("could not determine minimum data value for log axis, DataRange1d using value "+min);}
if(isNaN(max)||!isFinite(max)||max<=0){if(isNaN(min)||!isFinite(min)||min<=0){max=10;}
else{max=min*100;}
logging_1.logger.warn("could not determine maximum data value for log axis, DataRange1d using value "+max);}
log_min=Math.log(min)/Math.log(10);log_max=Math.log(max)/Math.log(10);if(max===min){span=this.default_span+0.001;}
else{span=(log_max-log_min)*(1+range_padding);}
center=(log_min+log_max)/2.0;ref=[Math.pow(10,center-span/2.0),Math.pow(10,center+span/2.0)],start=ref[0],end=ref[1];}
else{if(max===min){span=this.default_span;}
else{span=(max-min)*(1+range_padding);}
center=(max+min)/2.0;ref1=[center-span/2.0,center+span/2.0],start=ref1[0],end=ref1[1];}}
else{ref2=[min,max],start=ref2[0],end=ref2[1];}
follow_sign=+1;if(this.flipped){ref3=[end,start],start=ref3[0],end=ref3[1];follow_sign=-1;}
follow_interval=this.follow_interval;if((follow_interval!=null)&&Math.abs(start-end)>follow_interval){if(this.follow==='start'){end=start+follow_sign*follow_interval;}
else if(this.follow==='end'){start=end-follow_sign*follow_interval;}}
return[start,end];};DataRange1d.prototype.update=function(bounds,dimension,bounds_id){var _end,_start,end,max,min,new_range,ref,ref1,ref2,renderers,start;if(this.have_updated_interactively){return;}
renderers=this.computed_renderers();this.plot_bounds[bounds_id]=this._compute_plot_bounds(renderers,bounds);ref=this._compute_min_max(this.plot_bounds,dimension),min=ref[0],max=ref[1];ref1=this._compute_range(min,max),start=ref1[0],end=ref1[1];if(this._initial_start!=null){if(this.mapper_hint==="log"){if(this._initial_start>0){start=this._initial_start;}}
else{start=this._initial_start;}}
if(this._initial_end!=null){if(this.mapper_hint==="log"){if(this._initial_end>0){end=this._initial_end;}}
else{end=this._initial_end;}}
ref2=[this.start,this.end],_start=ref2[0],_end=ref2[1];if(start!==_start||end!==_end){new_range={};if(start!==_start){new_range.start=start;}
if(end!==_end){new_range.end=end;}
this.setv(new_range);}
if(this.bounds==='auto'){this.setv({bounds:[start,end]},{silent:true});}
return this.trigger('change');};DataRange1d.prototype.reset=function(){this.have_updated_interactively=false;this.setv({range_padding:this._initial_range_padding,follow:this._initial_follow,follow_interval:this._initial_follow_interval,default_span:this._initial_default_span},{silent:true});return this.trigger('change');};return DataRange1d;})(data_range_1.DataRange);},{"../renderers/glyph_renderer":"models/renderers/glyph_renderer","./data_range":"models/ranges/data_range","core/logging":"core/logging","core/properties":"core/properties","core/util/bbox":"core/util/bbox"}],"models/ranges/factor_range":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var range_1=require("./range");var p=require("core/properties");exports.FactorRange=(function(superClass){extend(FactorRange,superClass);function FactorRange(){return FactorRange.__super__.constructor.apply(this,arguments);}
FactorRange.prototype.type='FactorRange';FactorRange.define({offset:[p.Number,0],factors:[p.Array,[]],bounds:[p.Any],min_interval:[p.Any],max_interval:[p.Any]});FactorRange.internal({_bounds_as_factors:[p.Any],start:[p.Number],end:[p.Number]});FactorRange.prototype.initialize=function(attrs,options){FactorRange.__super__.initialize.call(this,attrs,options);if((this.bounds!=null)&&this.bounds!=='auto'){this.setv({_bounds_as_factors:this.bounds},{silent:true});}
else{this.setv({_bounds_as_factors:this.factors},{silent:true});}
this._init();this.listenTo(this,'change:factors',this._update_factors);return this.listenTo(this,'change:offset',this._init);};FactorRange.getters({min:function(){return this.start;},max:function(){return this.end;}});FactorRange.prototype.reset=function(){this._init();return this.trigger('change');};FactorRange.prototype._update_factors=function(){this.setv('_bounds_as_factors',this.factors,{silent:true});return this._init();};FactorRange.prototype._init=function(){var end,factors,start;factors=this.factors;if((this.bounds!=null)&&this.bounds!=='auto'){factors=this._bounds_as_factors;this.setv({factors:factors},{silent:true});}
start=0.5+this.offset;end=factors.length+start;this.setv({start:start,end:end},{silent:true});if(this.bounds!=null){return this.setv({bounds:[start,end]},{silent:true});}};return FactorRange;})(range_1.Range);},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/ranges/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var data_range_1=require("./data_range");exports.DataRange=data_range_1.DataRange;var data_range1d_1=require("./data_range1d");exports.DataRange1d=data_range1d_1.DataRange1d;var factor_range_1=require("./factor_range");exports.FactorRange=factor_range_1.FactorRange;var range_1=require("./range");exports.Range=range_1.Range;var range1d_1=require("./range1d");exports.Range1d=range1d_1.Range1d;},{"./data_range":"models/ranges/data_range","./data_range1d":"models/ranges/data_range1d","./factor_range":"models/ranges/factor_range","./range":"models/ranges/range","./range1d":"models/ranges/range1d"}],"models/ranges/range":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var p=require("core/properties");exports.Range=(function(superClass){extend(Range,superClass);function Range(){return Range.__super__.constructor.apply(this,arguments);}
Range.prototype.type='Range';Range.prototype.initialize=function(options){Range.__super__.initialize.call(this,options);return this.listenTo(this,'change',function(){var ref;return(ref=this.callback)!=null?ref.execute(this):void 0;});};Range.define({callback:[p.Instance]});Range.internal({plots:[p.Array,[]]});Range.prototype.reset=function(){"This method should be reimplemented by subclasses and ensure that\nthe callback, if exists, is executed at completion.";return this.trigger('change');};return Range;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/ranges/range1d":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var range_1=require("./range");var p=require("core/properties");exports.Range1d=(function(superClass){extend(Range1d,superClass);Range1d.prototype.type='Range1d';Range1d.define({start:[p.Number,0],end:[p.Number,1],bounds:[p.Any],min_interval:[p.Any],max_interval:[p.Any]});Range1d.prototype._set_auto_bounds=function(){var max,min;if(this.bounds==='auto'){min=Math.min(this._initial_start,this._initial_end);max=Math.max(this._initial_start,this._initial_end);return this.setv({bounds:[min,max]},{silent:true});}};function Range1d(){var end,start;if(this instanceof Range1d){return Range1d.__super__.constructor.apply(this,arguments);}
else{start=arguments[0],end=arguments[1];return new Range1d({start:start,end:end});}}
Range1d.prototype.initialize=function(attrs,options){Range1d.__super__.initialize.call(this,attrs,options);this._initial_start=this.start;this._initial_end=this.end;return this._set_auto_bounds();};Range1d.getters({min:function(){return Math.min(this.start,this.end);},max:function(){return Math.max(this.start,this.end);}});Range1d.prototype.reset=function(){this._set_auto_bounds();if(this.start!==this._initial_start||this.end!==this._initial_end){return this.setv({start:this._initial_start,end:this._initial_end});}
else{return this.trigger('change');}};return Range1d;})(range_1.Range);},{"./range":"models/ranges/range","core/properties":"core/properties"}],"models/renderers/glyph_renderer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var renderer_1=require("./renderer");var remote_data_source_1=require("../sources/remote_data_source");var logging_1=require("core/logging");var p=require("core/properties");var array_1=require("core/util/array");var object_1=require("core/util/object");exports.GlyphRendererView=(function(superClass){extend1(GlyphRendererView,superClass);function GlyphRendererView(){return GlyphRendererView.__super__.constructor.apply(this,arguments);}
GlyphRendererView.prototype.initialize=function(options){var base_glyph,decimated_glyph,glyph_attrs,has_fill,has_line,hover_glyph,mk_glyph,muted_glyph,nonselection_glyph,selection_glyph;GlyphRendererView.__super__.initialize.call(this,options);base_glyph=this.model.glyph;has_fill=indexOf.call(base_glyph.mixins,"fill")>=0;has_line=indexOf.call(base_glyph.mixins,"line")>=0;glyph_attrs=object_1.clone(base_glyph.attributes);delete glyph_attrs.id;mk_glyph=function(defaults){var attrs;attrs=object_1.clone(glyph_attrs);if(has_fill){object_1.extend(attrs,defaults.fill);}
if(has_line){object_1.extend(attrs,defaults.line);}
return new base_glyph.constructor(attrs);};this.glyph=this.build_glyph_view(base_glyph);selection_glyph=this.model.selection_glyph;if(selection_glyph==null){selection_glyph=mk_glyph({fill:{},line:{}});}
else if(selection_glyph==="auto"){selection_glyph=mk_glyph(this.model.selection_defaults);}
this.selection_glyph=this.build_glyph_view(selection_glyph);nonselection_glyph=this.model.nonselection_glyph;if(nonselection_glyph==null){nonselection_glyph=mk_glyph({fill:{},line:{}});}
else if(nonselection_glyph==="auto"){nonselection_glyph=mk_glyph(this.model.nonselection_defaults);}
this.nonselection_glyph=this.build_glyph_view(nonselection_glyph);hover_glyph=this.model.hover_glyph;if(hover_glyph!=null){this.hover_glyph=this.build_glyph_view(hover_glyph);}
muted_glyph=this.model.muted_glyph;if(muted_glyph!=null){this.muted_glyph=this.build_glyph_view(muted_glyph);}
decimated_glyph=mk_glyph(this.model.decimated_defaults);this.decimated_glyph=this.build_glyph_view(decimated_glyph);this.xmapper=this.plot_view.frame.x_mappers[this.model.x_range_name];this.ymapper=this.plot_view.frame.y_mappers[this.model.y_range_name];this.set_data(false);if(this.model.data_source instanceof remote_data_source_1.RemoteDataSource){return this.model.data_source.setup(this.plot_view,this.glyph);}};GlyphRendererView.prototype.build_glyph_view=function(model){return new model.default_view({model:model,renderer:this,plot_view:this.plot_view});};GlyphRendererView.prototype.bind_bokeh_events=function(){this.listenTo(this.model,'change',this.request_render);this.listenTo(this.model.data_source,'change',this.set_data);this.listenTo(this.model.data_source,'patch',this.set_data);this.listenTo(this.model.data_source,'stream',this.set_data);this.listenTo(this.model.data_source,'select',this.request_render);if(this.hover_glyph!=null){this.listenTo(this.model.data_source,'inspect',this.request_render);}
this.listenTo(this.model.glyph,'transformchange',function(){return this.set_data();});return this.listenTo(this.model.glyph,'propchange',function(){this.glyph.set_visuals(this.model.data_source);return this.request_render();});};GlyphRendererView.prototype.have_selection_glyphs=function(){return(this.selection_glyph!=null)&&(this.nonselection_glyph!=null);};GlyphRendererView.prototype.set_data=function(request_render,arg){var dt,i,j,k,length,lod_factor,ref,results,source,t0;if(request_render==null){request_render=true;}
t0=Date.now();source=this.model.data_source;this.glyph.model.setv({x_range_name:this.model.x_range_name,y_range_name:this.model.y_range_name},{silent:true});this.glyph.set_data(source,arg);this.glyph.set_visuals(source);this.decimated_glyph.set_visuals(source);if(this.have_selection_glyphs()){this.selection_glyph.set_visuals(source);this.nonselection_glyph.set_visuals(source);}
if(this.hover_glyph!=null){this.hover_glyph.set_visuals(source);}
if(this.muted_glyph!=null){this.muted_glyph.set_visuals(source);}
length=source.get_length();if(length==null){length=1;}
this.all_indices=(function(){results=[];for(var j=0;0<=length?j<length:j>length;0<=length?j++:j--){results.push(j);}
return results;}).apply(this);lod_factor=this.plot_model.plot.lod_factor;this.decimated=[];for(i=k=0,ref=Math.floor(this.all_indices.length/lod_factor);0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){this.decimated.push(this.all_indices[i*lod_factor]);}
dt=Date.now()-t0;logging_1.logger.debug(this.glyph.model.type+" GlyphRenderer ("+this.model.id+"): set_data finished in "+dt+"ms");this.set_data_timestamp=Date.now();if(request_render){return this.request_render();}};GlyphRendererView.prototype.render=function(){var ctx,dtmap,dtmask,dtrender,dtselect,dttot,glsupport,glyph,i,indices,inspected,j,k,len,len1,lod_threshold,nonselected,nonselection_glyph,selected,selected_mask,selection_glyph,t0,tmap,tmask,trender,tselect;if(!this.model.visible){return;}
t0=Date.now();glsupport=this.glyph.glglyph;tmap=Date.now();this.glyph.map_data();dtmap=Date.now()-t0;tmask=Date.now();indices=this.glyph.mask_data(this.all_indices);dtmask=Date.now()-tmask;ctx=this.plot_view.canvas_view.ctx;ctx.save();selected=this.model.data_source.selected;if(!selected||selected.length===0){selected=[];}
else{if(selected['0d'].glyph){selected=indices;}
else if(selected['1d'].indices.length>0){selected=selected['1d'].indices;}
else{selected=[];}}
inspected=this.model.data_source.inspected;if(!inspected||inspected.length===0){inspected=[];}
else{if(inspected['0d'].glyph){inspected=indices;}
else if(inspected['1d'].indices.length>0){inspected=inspected['1d'].indices;}
else{inspected=[];}}
lod_threshold=this.plot_model.plot.lod_threshold;if(this.plot_view.interactive&&!glsupport&&(lod_threshold!=null)&&this.all_indices.length>lod_threshold){indices=this.decimated;glyph=this.decimated_glyph;nonselection_glyph=this.decimated_glyph;selection_glyph=this.selection_glyph;}
else{glyph=this.model.muted&&(this.muted_glyph!=null)?this.muted_glyph:this.glyph;nonselection_glyph=this.nonselection_glyph;selection_glyph=this.selection_glyph;}
if((this.hover_glyph!=null)&&inspected.length){indices=array_1.difference(indices,inspected);}
if(!(selected.length&&this.have_selection_glyphs())){trender=Date.now();glyph.render(ctx,indices,this.glyph);if(this.hover_glyph&&inspected.length){this.hover_glyph.render(ctx,inspected,this.glyph);}
dtrender=Date.now()-trender;}
else{tselect=Date.now();selected_mask={};for(j=0,len=selected.length;j<len;j++){i=selected[j];selected_mask[i]=true;}
selected=new Array();nonselected=new Array();for(k=0,len1=indices.length;k<len1;k++){i=indices[k];if(selected_mask[i]!=null){selected.push(i);}
else{nonselected.push(i);}}
dtselect=Date.now()-tselect;trender=Date.now();nonselection_glyph.render(ctx,nonselected,this.glyph);selection_glyph.render(ctx,selected,this.glyph);if(this.hover_glyph!=null){this.hover_glyph.render(ctx,inspected,this.glyph);}
dtrender=Date.now()-trender;}
this.last_dtrender=dtrender;dttot=Date.now()-t0;logging_1.logger.debug(this.glyph.model.type+" GlyphRenderer ("+this.model.id+"): render finished in "+dttot+"ms");logging_1.logger.trace(" - map_data finished in       : "+dtmap+"ms");if(dtmask!=null){logging_1.logger.trace(" - mask_data finished in      : "+dtmask+"ms");}
if(dtselect!=null){logging_1.logger.trace(" - selection mask finished in : "+dtselect+"ms");}
logging_1.logger.trace(" - glyph renders finished in  : "+dtrender+"ms");return ctx.restore();};GlyphRendererView.prototype.map_to_screen=function(x,y){return this.plot_view.map_to_screen(x,y,this.model.x_range_name,this.model.y_range_name);};GlyphRendererView.prototype.draw_legend=function(ctx,x0,x1,y0,y1,field,label){var index;index=this.model.get_reference_point(field,label);return this.glyph.draw_legend_for_index(ctx,x0,x1,y0,y1,index);};GlyphRendererView.prototype.hit_test=function(geometry){return this.glyph.hit_test(geometry);};return GlyphRendererView;})(renderer_1.RendererView);exports.GlyphRenderer=(function(superClass){extend1(GlyphRenderer,superClass);function GlyphRenderer(){return GlyphRenderer.__super__.constructor.apply(this,arguments);}
GlyphRenderer.prototype.default_view=exports.GlyphRendererView;GlyphRenderer.prototype.type='GlyphRenderer';GlyphRenderer.prototype.get_reference_point=function(field,value){var data,i,index;index=0;if((field!=null)&&(this.data_source.get_column!=null)){data=this.data_source.get_column(field);if(data){i=data.indexOf(value);if(i>0){index=i;}}}
return index;};GlyphRenderer.define({x_range_name:[p.String,'default'],y_range_name:[p.String,'default'],data_source:[p.Instance],glyph:[p.Instance],hover_glyph:[p.Instance],nonselection_glyph:[p.Any,'auto'],selection_glyph:[p.Any,'auto'],muted_glyph:[p.Instance],muted:[p.Bool,false]});GlyphRenderer.override({level:'glyph'});GlyphRenderer.prototype.selection_defaults={fill:{},line:{}};GlyphRenderer.prototype.decimated_defaults={fill:{fill_alpha:0.3,fill_color:"grey"},line:{line_alpha:0.3,line_color:"grey"}};GlyphRenderer.prototype.nonselection_defaults={fill:{fill_alpha:0.2,line_alpha:0.2},line:{}};return GlyphRenderer;})(renderer_1.Renderer);},{"../sources/remote_data_source":"models/sources/remote_data_source","./renderer":"models/renderers/renderer","core/logging":"core/logging","core/properties":"core/properties","core/util/array":"core/util/array","core/util/object":"core/util/object"}],"models/renderers/guide_renderer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var renderer_1=require("./renderer");var p=require("core/properties");exports.GuideRenderer=(function(superClass){extend(GuideRenderer,superClass);function GuideRenderer(){return GuideRenderer.__super__.constructor.apply(this,arguments);}
GuideRenderer.prototype.type='GuideRenderer';GuideRenderer.define({plot:[p.Instance]});GuideRenderer.override({level:'overlay'});return GuideRenderer;})(renderer_1.Renderer);},{"./renderer":"models/renderers/renderer","core/properties":"core/properties"}],"models/renderers/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var glyph_renderer_1=require("./glyph_renderer");exports.GlyphRenderer=glyph_renderer_1.GlyphRenderer;var guide_renderer_1=require("./guide_renderer");exports.GuideRenderer=guide_renderer_1.GuideRenderer;var renderer_1=require("./renderer");exports.Renderer=renderer_1.Renderer;},{"./glyph_renderer":"models/renderers/glyph_renderer","./guide_renderer":"models/renderers/guide_renderer","./renderer":"models/renderers/renderer"}],"models/renderers/renderer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var bokeh_view_1=require("core/bokeh_view");var visuals_1=require("core/visuals");var p=require("core/properties");var proj=require("core/util/projections");var object_1=require("core/util/object");var model_1=require("../../model");exports.RendererView=(function(superClass){extend1(RendererView,superClass);function RendererView(){return RendererView.__super__.constructor.apply(this,arguments);}
RendererView.prototype.initialize=function(options){RendererView.__super__.initialize.call(this,options);this.plot_view=options.plot_view;return this.visuals=new visuals_1.Visuals(this.model);};RendererView.getters({plot_model:function(){return this.plot_view.model;}});RendererView.prototype.request_render=function(){return this.plot_view.request_render();};RendererView.prototype.set_data=function(source){var data,ref,ref1;data=this.model.materialize_dataspecs(source);object_1.extend(this,data);if(this.plot_model.use_map){if(this._x!=null){ref=proj.project_xy(this._x,this._y),this._x=ref[0],this._y=ref[1];}
if(this._xs!=null){return ref1=proj.project_xsys(this._xs,this._ys),this._xs=ref1[0],this._ys=ref1[1],ref1;}}};RendererView.prototype.map_to_screen=function(x,y){return this.plot_view.map_to_screen(x,y,this.model.x_range_name,this.model.y_range_name);};return RendererView;})(bokeh_view_1.BokehView);exports.Renderer=(function(superClass){extend1(Renderer,superClass);function Renderer(){return Renderer.__super__.constructor.apply(this,arguments);}
Renderer.prototype.type="Renderer";Renderer.define({level:[p.RenderLevel,null],visible:[p.Bool,true]});return Renderer;})(model_1.Model);},{"../../model":"model","core/bokeh_view":"core/bokeh_view","core/properties":"core/properties","core/util/object":"core/util/object","core/util/projections":"core/util/projections","core/visuals":"core/visuals"}],"models/sources/ajax_data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var remote_data_source_1=require("./remote_data_source");var logging_1=require("core/logging");var p=require("core/properties");exports.AjaxDataSource=(function(superClass){extend(AjaxDataSource,superClass);function AjaxDataSource(){this.get_data=bind(this.get_data,this);this.setup=bind(this.setup,this);this.destroy=bind(this.destroy,this);return AjaxDataSource.__super__.constructor.apply(this,arguments);}
AjaxDataSource.prototype.type='AjaxDataSource';AjaxDataSource.define({mode:[p.String,'replace'],content_type:[p.String,'application/json'],http_headers:[p.Any,{}],max_size:[p.Number],method:[p.String,'POST'],if_modified:[p.Bool,false]});AjaxDataSource.prototype.destroy=function(){if(this.interval!=null){return clearInterval(this.interval);}};AjaxDataSource.prototype.setup=function(plot_view,glyph){this.pv=plot_view;this.get_data(this.mode);if(this.polling_interval){return this.interval=setInterval(this.get_data,this.polling_interval,this.mode,this.max_size,this.if_modified);}};AjaxDataSource.prototype.get_data=function(mode,max_size,if_modified){var name,ref,value,xhr;if(max_size==null){max_size=0;}
if(if_modified==null){if_modified=false;}
xhr=new XMLHttpRequest();xhr.open(this.method,this.data_url,true);xhr.withCredentials=false;xhr.setRequestHeader("Content-Type",this.content_type);ref=this.http_headers;for(name in ref){value=ref[name];xhr.setRequestHeader(name,value);}
xhr.addEventListener("load",(function(_this){return function(){var column,data,i,len,original_data,ref1;if(xhr.status===200){data=JSON.parse(xhr.responseText);switch(mode){case'replace':return _this.data=data;case'append':original_data=_this.data;ref1=_this.columns();for(i=0,len=ref1.length;i<len;i++){column=ref1[i];data[column]=original_data[column].concat(data[column]).slice(-max_size);}
return _this.data=data;}}};})(this));xhr.addEventListener("error",(function(_this){return function(){return logging_1.logger.error("Failed to fetch JSON from "+_this.data_url+" with code "+xhr.status);};})(this));xhr.send();return null;};return AjaxDataSource;})(remote_data_source_1.RemoteDataSource);},{"./remote_data_source":"models/sources/remote_data_source","core/logging":"core/logging","core/properties":"core/properties"}],"models/sources/column_data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var columnar_data_source_1=require("./columnar_data_source");var has_props_1=require("core/has_props");var p=require("core/properties");var serialization=require("core/util/serialization");var types_1=require("core/util/types");exports.concat_typed_arrays=function(a,b){var c;c=new a.constructor(a.length+b.length);c.set(a,0);c.set(b,a.length);return c;};exports.stream_to_column=function(col,new_col,rollover){var end,i,j,l,ref,ref1,ref2,start,tmp,total_len;if(col.concat!=null){col=col.concat(new_col);if(col.length>rollover){col=col.slice(-rollover);}
return col;}
total_len=col.length+new_col.length;if((rollover!=null)&&total_len>rollover){start=total_len-rollover;end=col.length;if(col.length<rollover){tmp=new col.constructor(rollover);tmp.set(col,0);col=tmp;}
for(i=j=ref=start,ref1=end;ref<=ref1?j<ref1:j>ref1;i=ref<=ref1?++j:--j){col[i-start]=col[i];}
for(i=l=0,ref2=new_col.length;0<=ref2?l<ref2:l>ref2;i=0<=ref2?++l:--l){col[i+(end-start)]=new_col[i];}
return col;}
tmp=new col.constructor(new_col);return exports.concat_typed_arrays(col,tmp);};exports.patch_to_column=function(col,patch){var i,ind,j,ref,ref1,results,value;results=[];for(i=j=0,ref=patch.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ref1=patch[i],ind=ref1[0],value=ref1[1];results.push(col[ind]=value);}
return results;};exports.ColumnDataSource=(function(superClass){extend(ColumnDataSource,superClass);function ColumnDataSource(){return ColumnDataSource.__super__.constructor.apply(this,arguments);}
ColumnDataSource.prototype.type='ColumnDataSource';ColumnDataSource.prototype.initialize=function(options){var ref;ColumnDataSource.__super__.initialize.call(this,options);return ref=serialization.decode_column_data(this.data),this.data=ref[0],this._shapes=ref[1],ref;};ColumnDataSource.define({data:[p.Any,{}]});ColumnDataSource.prototype.attributes_as_json=function(include_defaults,value_to_json){var attrs,key,ref,value;if(include_defaults==null){include_defaults=true;}
if(value_to_json==null){value_to_json=ColumnDataSource._value_to_json;}
attrs={};ref=this.serializable_attributes();for(key in ref){if(!hasProp.call(ref,key))
continue;value=ref[key];if(key==='data'){value=serialization.encode_column_data(value,this._shapes);}
if(include_defaults){attrs[key]=value;}
else if(key in this._set_after_defaults){attrs[key]=value;}}
return value_to_json("attributes",attrs,this);};ColumnDataSource._value_to_json=function(key,value,optional_parent_object){if(types_1.isObject(value)&&key==='data'){return serialization.encode_column_data(value,optional_parent_object._shapes);}
else{return has_props_1.HasProps._value_to_json(key,value,optional_parent_object);}};ColumnDataSource.prototype.stream=function(new_data,rollover){var data,k,v;data=this.data;for(k in new_data){v=new_data[k];data[k]=exports.stream_to_column(data[k],new_data[k],rollover);}
this.setv('data',data,{silent:true});return this.trigger('stream');};ColumnDataSource.prototype.patch=function(patches){var data,k,patch;data=this.data;for(k in patches){patch=patches[k];exports.patch_to_column(data[k],patch);}
this.setv('data',data,{silent:true});return this.trigger('patch');};return ColumnDataSource;})(columnar_data_source_1.ColumnarDataSource);},{"./columnar_data_source":"models/sources/columnar_data_source","core/has_props":"core/has_props","core/properties":"core/properties","core/util/serialization":"core/util/serialization","core/util/types":"core/util/types"}],"models/sources/columnar_data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var data_source_1=require("./data_source");var logging_1=require("core/logging");var selection_manager_1=require("core/selection_manager");var p=require("core/properties");var array_1=require("core/util/array");exports.ColumnarDataSource=(function(superClass){extend(ColumnarDataSource,superClass);function ColumnarDataSource(){return ColumnarDataSource.__super__.constructor.apply(this,arguments);}
ColumnarDataSource.prototype.type='ColumnarDataSource';ColumnarDataSource.define({column_names:[p.Array,[]]});ColumnarDataSource.internal({selection_manager:[p.Instance,function(self){return new selection_manager_1.SelectionManager({source:self});}],inspected:[p.Any],_shapes:[p.Any,{}]});ColumnarDataSource.prototype.get_column=function(colname){var ref;return(ref=this.data[colname])!=null?ref:null;};ColumnarDataSource.prototype.columns=function(){return Object.keys(this.data);};ColumnarDataSource.prototype.get_length=function(soft){var _key,lengths,msg,val;if(soft==null){soft=true;}
lengths=array_1.uniq((function(){var ref,results;ref=this.data;results=[];for(_key in ref){val=ref[_key];results.push(val.length);}
return results;}).call(this));switch(lengths.length){case 0:return null;case 1:return lengths[0];default:msg="data source has columns of inconsistent lengths";if(soft){logging_1.logger.warn(msg);return lengths.sort()[0];}
else{throw new Error(msg);}}};return ColumnarDataSource;})(data_source_1.DataSource);},{"./data_source":"models/sources/data_source","core/logging":"core/logging","core/properties":"core/properties","core/selection_manager":"core/selection_manager","core/util/array":"core/util/array"}],"models/sources/data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var hittest=require("core/hittest");var p=require("core/properties");var types_1=require("core/util/types");exports.DataSource=(function(superClass){extend(DataSource,superClass);function DataSource(){return DataSource.__super__.constructor.apply(this,arguments);}
DataSource.prototype.type='DataSource';DataSource.define({selected:[p.Any,hittest.create_hit_test_result()],callback:[p.Any]});DataSource.prototype.initialize=function(options){DataSource.__super__.initialize.call(this,options);return this.listenTo(this,'change:selected',(function(_this){return function(){var callback;callback=_this.callback;if(callback!=null){if(types_1.isFunction(callback)){return callback(_this);}
else{return callback.execute(_this);}}};})(this));};return DataSource;})(model_1.Model);},{"../../model":"model","core/hittest":"core/hittest","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/sources/geojson_data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var columnar_data_source_1=require("./columnar_data_source");var logging_1=require("core/logging");var p=require("core/properties");exports.GeoJSONDataSource=(function(superClass){extend(GeoJSONDataSource,superClass);function GeoJSONDataSource(){return GeoJSONDataSource.__super__.constructor.apply(this,arguments);}
GeoJSONDataSource.prototype.type='GeoJSONDataSource';GeoJSONDataSource.define({geojson:[p.Any]});GeoJSONDataSource.internal({data:[p.Any,{}]});GeoJSONDataSource.prototype.initialize=function(options){GeoJSONDataSource.__super__.initialize.call(this,options);this._update_data();return this.listenTo(this,'change:geojson',(function(_this){return function(){return _this._update_data();};})(this));};GeoJSONDataSource.prototype._update_data=function(){return this.data=this.geojson_to_column_data();};GeoJSONDataSource.prototype._get_new_list_array=function(length){var i,k,ref,results;results=[];for(i=k=0,ref=length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){results.push([]);}
return results;};GeoJSONDataSource.prototype._get_new_nan_array=function(length){var i,k,ref,results;results=[];for(i=k=0,ref=length;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){results.push(0/0);}
return results;};GeoJSONDataSource.prototype._flatten_function=function(accumulator,currentItem){return accumulator.concat([[0/0,0/0,0/0]]).concat(currentItem);};GeoJSONDataSource.prototype._add_properties=function(item,data,i,item_count){var property,results;results=[];for(property in item.properties){if(!data.hasOwnProperty(property)){data[property]=this._get_new_nan_array(item_count);}
results.push(data[property][i]=item.properties[property]);}
return results;};GeoJSONDataSource.prototype._add_geometry=function(geometry,data,i){var coord_list,coords,exterior_ring,exterior_rings,flattened_coord_list,j,k,l,len,len1,len2,len3,len4,m,n,o,polygon,ref,ref1,ref2,ref3,ref4,ref5,results,results1,results2,results3;switch(geometry.type){case"Point":coords=geometry.coordinates;data.x[i]=coords[0];data.y[i]=coords[1];return data.z[i]=(ref=coords[2])!=null?ref:0/0;case"LineString":coord_list=geometry.coordinates;results=[];for(j=k=0,len=coord_list.length;k<len;j=++k){coords=coord_list[j];data.xs[i][j]=coords[0];data.ys[i][j]=coords[1];results.push(data.zs[i][j]=(ref1=coords[2])!=null?ref1:0/0);}
return results;break;case"Polygon":if(geometry.coordinates.length>1){logging_1.logger.warn('Bokeh does not support Polygons with holes in, only exterior ring used.');}
exterior_ring=geometry.coordinates[0];results1=[];for(j=l=0,len1=exterior_ring.length;l<len1;j=++l){coords=exterior_ring[j];data.xs[i][j]=coords[0];data.ys[i][j]=coords[1];results1.push(data.zs[i][j]=(ref2=coords[2])!=null?ref2:0/0);}
return results1;break;case"MultiPoint":return logging_1.logger.warn('MultiPoint not supported in Bokeh');case"MultiLineString":flattened_coord_list=geometry.coordinates.reduce(this._flatten_function);results2=[];for(j=m=0,len2=flattened_coord_list.length;m<len2;j=++m){coords=flattened_coord_list[j];data.xs[i][j]=coords[0];data.ys[i][j]=coords[1];results2.push(data.zs[i][j]=(ref3=coords[2])!=null?ref3:0/0);}
return results2;break;case"MultiPolygon":exterior_rings=[];ref4=geometry.coordinates;for(n=0,len3=ref4.length;n<len3;n++){polygon=ref4[n];if(polygon.length>1){logging_1.logger.warn('Bokeh does not support Polygons with holes in, only exterior ring used.');}
exterior_rings.push(polygon[0]);}
flattened_coord_list=exterior_rings.reduce(this._flatten_function);results3=[];for(j=o=0,len4=flattened_coord_list.length;o<len4;j=++o){coords=flattened_coord_list[j];data.xs[i][j]=coords[0];data.ys[i][j]=coords[1];results3.push(data.zs[i][j]=(ref5=coords[2])!=null?ref5:0/0);}
return results3;break;default:throw new Error('Invalid type '+geometry.type);}};GeoJSONDataSource.prototype._get_items_length=function(items){var count,g,geometry,i,item,j,k,l,len,len1,ref;count=0;for(i=k=0,len=items.length;k<len;i=++k){item=items[i];geometry=item.type==='Feature'?item.geometry:item;if(geometry.type==='GeometryCollection'){ref=geometry.geometries;for(j=l=0,len1=ref.length;l<len1;j=++l){g=ref[j];count+=1;}}
else{count+=1;}}
return count;};GeoJSONDataSource.prototype.geojson_to_column_data=function(){var arr_index,data,g,geojson,geometry,i,item,item_count,items,j,k,l,len,len1,ref,ref1;geojson=JSON.parse(this.geojson);if((ref=geojson.type)!=='GeometryCollection'&&ref!=='FeatureCollection'){throw new Error('Bokeh only supports type GeometryCollection and FeatureCollection at top level');}
if(geojson.type==='GeometryCollection'){if(geojson.geometries==null){throw new Error('No geometries found in GeometryCollection');}
if(geojson.geometries.length===0){throw new Error('geojson.geometries must have one or more items');}
items=geojson.geometries;}
if(geojson.type==='FeatureCollection'){if(geojson.features==null){throw new Error('No features found in FeaturesCollection');}
if(geojson.features.length===0){throw new Error('geojson.features must have one or more items');}
items=geojson.features;}
item_count=this._get_items_length(items);data={'x':this._get_new_nan_array(item_count),'y':this._get_new_nan_array(item_count),'z':this._get_new_nan_array(item_count),'xs':this._get_new_list_array(item_count),'ys':this._get_new_list_array(item_count),'zs':this._get_new_list_array(item_count)};arr_index=0;for(i=k=0,len=items.length;k<len;i=++k){item=items[i];geometry=item.type==='Feature'?item.geometry:item;if(geometry.type==='GeometryCollection'){ref1=geometry.geometries;for(j=l=0,len1=ref1.length;l<len1;j=++l){g=ref1[j];this._add_geometry(g,data,arr_index);if(item.type==='Feature'){this._add_properties(item,data,arr_index,item_count);}
arr_index+=1;}}
else{this._add_geometry(geometry,data,arr_index);if(item.type==='Feature'){this._add_properties(item,data,arr_index,item_count);}
arr_index+=1;}}
return data;};return GeoJSONDataSource;})(columnar_data_source_1.ColumnarDataSource);},{"./columnar_data_source":"models/sources/columnar_data_source","core/logging":"core/logging","core/properties":"core/properties"}],"models/sources/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ajax_data_source_1=require("./ajax_data_source");exports.AjaxDataSource=ajax_data_source_1.AjaxDataSource;var column_data_source_1=require("./column_data_source");exports.ColumnDataSource=column_data_source_1.ColumnDataSource;var columnar_data_source_1=require("./columnar_data_source");exports.ColumnarDataSource=columnar_data_source_1.ColumnarDataSource;var data_source_1=require("./data_source");exports.DataSource=data_source_1.DataSource;var geojson_data_source_1=require("./geojson_data_source");exports.GeoJSONDataSource=geojson_data_source_1.GeoJSONDataSource;var remote_data_source_1=require("./remote_data_source");exports.RemoteDataSource=remote_data_source_1.RemoteDataSource;},{"./ajax_data_source":"models/sources/ajax_data_source","./column_data_source":"models/sources/column_data_source","./columnar_data_source":"models/sources/columnar_data_source","./data_source":"models/sources/data_source","./geojson_data_source":"models/sources/geojson_data_source","./remote_data_source":"models/sources/remote_data_source"}],"models/sources/remote_data_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var column_data_source_1=require("./column_data_source");var p=require("core/properties");exports.RemoteDataSource=(function(superClass){extend(RemoteDataSource,superClass);function RemoteDataSource(){return RemoteDataSource.__super__.constructor.apply(this,arguments);}
RemoteDataSource.prototype.type='RemoteDataSource';RemoteDataSource.define({data_url:[p.String],polling_interval:[p.Number]});return RemoteDataSource;})(column_data_source_1.ColumnDataSource);},{"./column_data_source":"models/sources/column_data_source","core/properties":"core/properties"}],"models/tickers/adaptive_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var clamp,log,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var continuous_ticker_1=require("./continuous_ticker");var p=require("core/properties");var array_1=require("core/util/array");clamp=function(x,min_val,max_val){return Math.max(min_val,Math.min(max_val,x));};log=function(x,base){if(base==null){base=Math.E;}
return Math.log(x)/Math.log(base);};exports.AdaptiveTicker=(function(superClass){extend(AdaptiveTicker,superClass);function AdaptiveTicker(){return AdaptiveTicker.__super__.constructor.apply(this,arguments);}
AdaptiveTicker.prototype.type='AdaptiveTicker';AdaptiveTicker.define({base:[p.Number,10.0],mantissas:[p.Array,[1,2,5]],min_interval:[p.Number,0.0],max_interval:[p.Number]});AdaptiveTicker.prototype.initialize=function(attrs,options){var prefix_mantissa,suffix_mantissa;AdaptiveTicker.__super__.initialize.call(this,attrs,options);prefix_mantissa=array_1.nth(this.mantissas,-1)/this.base;suffix_mantissa=array_1.nth(this.mantissas,0)*this.base;this.extended_mantissas=[prefix_mantissa].concat(slice.call(this.mantissas),[suffix_mantissa]);return this.base_factor=this.get_min_interval()===0.0?1.0:this.get_min_interval();};AdaptiveTicker.prototype.get_interval=function(data_low,data_high,desired_n_ticks){var best_mantissa,candidate_mantissas,data_range,errors,ideal_interval,ideal_magnitude,ideal_mantissa,interval,interval_exponent;data_range=data_high-data_low;ideal_interval=this.get_ideal_interval(data_low,data_high,desired_n_ticks);interval_exponent=Math.floor(log(ideal_interval/this.base_factor,this.base));ideal_magnitude=Math.pow(this.base,interval_exponent)*this.base_factor;ideal_mantissa=ideal_interval/ideal_magnitude;candidate_mantissas=this.extended_mantissas;errors=candidate_mantissas.map(function(mantissa){return Math.abs(desired_n_ticks-(data_range/(mantissa*ideal_magnitude)));});best_mantissa=candidate_mantissas[array_1.argmin(errors)];interval=best_mantissa*ideal_magnitude;return clamp(interval,this.get_min_interval(),this.get_max_interval());};return AdaptiveTicker;})(continuous_ticker_1.ContinuousTicker);},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/basic_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var adaptive_ticker_1=require("./adaptive_ticker");exports.BasicTicker=(function(superClass){extend(BasicTicker,superClass);function BasicTicker(){return BasicTicker.__super__.constructor.apply(this,arguments);}
BasicTicker.prototype.type='BasicTicker';return BasicTicker;})(adaptive_ticker_1.AdaptiveTicker);},{"./adaptive_ticker":"models/tickers/adaptive_ticker"}],"models/tickers/categorical_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var ticker_1=require("./ticker");exports.CategoricalTicker=(function(superClass){extend(CategoricalTicker,superClass);function CategoricalTicker(){return CategoricalTicker.__super__.constructor.apply(this,arguments);}
CategoricalTicker.prototype.type='CategoricalTicker';CategoricalTicker.prototype.get_ticks=function(start,end,range,cross_loc,arg){var desired_n_ticks,factors,i,ii,j,majors,ref;desired_n_ticks=arg.desired_n_ticks;majors=[];factors=range.factors;for(i=j=0,ref=factors.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){ii=i+range.offset;if((ii+1)>start&&(ii+1)<end){majors.push(factors[i]);}}
return{"major":majors,"minor":[]};};return CategoricalTicker;})(ticker_1.Ticker);},{"./ticker":"models/tickers/ticker"}],"models/tickers/composite_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var continuous_ticker_1=require("./continuous_ticker");var p=require("core/properties");var array_1=require("core/util/array");exports.CompositeTicker=(function(superClass){extend(CompositeTicker,superClass);function CompositeTicker(){return CompositeTicker.__super__.constructor.apply(this,arguments);}
CompositeTicker.prototype.type='CompositeTicker';CompositeTicker.define({tickers:[p.Array,[]]});CompositeTicker.getters({min_intervals:function(){var i,len,ref,results,ticker;ref=this.tickers;results=[];for(i=0,len=ref.length;i<len;i++){ticker=ref[i];results.push(ticker.get_min_interval());}
return results;},max_intervals:function(){var i,len,ref,results,ticker;ref=this.tickers;results=[];for(i=0,len=ref.length;i<len;i++){ticker=ref[i];results.push(ticker.get_max_interval());}
return results;},min_interval:function(){return this.min_intervals[0];},max_interval:function(){return this.max_intervals[0];}});CompositeTicker.prototype.get_best_ticker=function(data_low,data_high,desired_n_ticks){var best_index,best_ticker,best_ticker_ndx,data_range,errors,ideal_interval,intervals,ticker_ndxs;data_range=data_high-data_low;ideal_interval=this.get_ideal_interval(data_low,data_high,desired_n_ticks);ticker_ndxs=[array_1.sortedIndex(this.min_intervals,ideal_interval)-1,array_1.sortedIndex(this.max_intervals,ideal_interval)];intervals=[this.min_intervals[ticker_ndxs[0]],this.max_intervals[ticker_ndxs[1]]];errors=intervals.map(function(interval){return Math.abs(desired_n_ticks-(data_range/interval));});best_index=array_1.argmin(errors);if(best_index===2e308){return this.tickers[0];}
best_ticker_ndx=ticker_ndxs[best_index];best_ticker=this.tickers[best_ticker_ndx];return best_ticker;};CompositeTicker.prototype.get_interval=function(data_low,data_high,desired_n_ticks){var best_ticker;best_ticker=this.get_best_ticker(data_low,data_high,desired_n_ticks);return best_ticker.get_interval(data_low,data_high,desired_n_ticks);};CompositeTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var best_ticker,ticks;best_ticker=this.get_best_ticker(data_low,data_high,desired_n_ticks);ticks=best_ticker.get_ticks_no_defaults(data_low,data_high,cross_loc,desired_n_ticks);return ticks;};return CompositeTicker;})(continuous_ticker_1.ContinuousTicker);},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/continuous_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var ticker_1=require("./ticker");var p=require("core/properties");exports.ContinuousTicker=(function(superClass){extend(ContinuousTicker,superClass);function ContinuousTicker(){return ContinuousTicker.__super__.constructor.apply(this,arguments);}
ContinuousTicker.prototype.type='ContinuousTicker';ContinuousTicker.define({num_minor_ticks:[p.Number,5],desired_num_ticks:[p.Number,6]});ContinuousTicker.prototype.get_interval=void 0;ContinuousTicker.prototype.get_min_interval=function(){return this.min_interval;};ContinuousTicker.prototype.get_max_interval=function(){var ref;return(ref=this.max_interval)!=null?ref:2e308;};ContinuousTicker.prototype.get_ideal_interval=function(data_low,data_high,desired_n_ticks){var data_range;data_range=data_high-data_low;return data_range/desired_n_ticks;};return ContinuousTicker;})(ticker_1.Ticker);},{"./ticker":"models/tickers/ticker","core/properties":"core/properties"}],"models/tickers/datetime_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ONE_HOUR,ONE_MILLI,ONE_MINUTE,ONE_MONTH,ONE_SECOND,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var array_1=require("core/util/array");var adaptive_ticker_1=require("./adaptive_ticker");var composite_ticker_1=require("./composite_ticker");var days_ticker_1=require("./days_ticker");var months_ticker_1=require("./months_ticker");var years_ticker_1=require("./years_ticker");var util=require("./util");ONE_MILLI=util.ONE_MILLI;ONE_SECOND=util.ONE_SECOND;ONE_MINUTE=util.ONE_MINUTE;ONE_HOUR=util.ONE_HOUR;ONE_MONTH=util.ONE_MONTH;exports.DatetimeTicker=(function(superClass){extend(DatetimeTicker,superClass);function DatetimeTicker(){return DatetimeTicker.__super__.constructor.apply(this,arguments);}
DatetimeTicker.prototype.type='DatetimeTicker';DatetimeTicker.override({num_minor_ticks:0,tickers:function(){return[new adaptive_ticker_1.AdaptiveTicker({mantissas:[1,2,5],base:10,min_interval:0,max_interval:500*ONE_MILLI,num_minor_ticks:0}),new adaptive_ticker_1.AdaptiveTicker({mantissas:[1,2,5,10,15,20,30],base:60,min_interval:ONE_SECOND,max_interval:30*ONE_MINUTE,num_minor_ticks:0}),new adaptive_ticker_1.AdaptiveTicker({mantissas:[1,2,4,6,8,12],base:24.0,min_interval:ONE_HOUR,max_interval:12*ONE_HOUR,num_minor_ticks:0}),new days_ticker_1.DaysTicker({days:array_1.range(1,32)}),new days_ticker_1.DaysTicker({days:array_1.range(1,31,3)}),new days_ticker_1.DaysTicker({days:[1,8,15,22]}),new days_ticker_1.DaysTicker({days:[1,15]}),new months_ticker_1.MonthsTicker({months:array_1.range(0,12,1)}),new months_ticker_1.MonthsTicker({months:array_1.range(0,12,2)}),new months_ticker_1.MonthsTicker({months:array_1.range(0,12,4)}),new months_ticker_1.MonthsTicker({months:array_1.range(0,12,6)}),new years_ticker_1.YearsTicker({})];}});return DatetimeTicker;})(composite_ticker_1.CompositeTicker);},{"./adaptive_ticker":"models/tickers/adaptive_ticker","./composite_ticker":"models/tickers/composite_ticker","./days_ticker":"models/tickers/days_ticker","./months_ticker":"models/tickers/months_ticker","./util":"models/tickers/util","./years_ticker":"models/tickers/years_ticker","core/util/array":"core/util/array"}],"models/tickers/days_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ONE_DAY,copy_date,date_range_by_month,last_month_no_later_than,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var single_interval_ticker_1=require("./single_interval_ticker");var util=require("./util");var p=require("core/properties");var array_1=require("core/util/array");copy_date=util.copy_date;last_month_no_later_than=util.last_month_no_later_than;ONE_DAY=util.ONE_DAY;date_range_by_month=function(start_time,end_time){var date,dates,end_date,prev_end_date,start_date;start_date=last_month_no_later_than(new Date(start_time));end_date=last_month_no_later_than(new Date(end_time));prev_end_date=copy_date(end_date);end_date.setUTCMonth(end_date.getUTCMonth()+1);dates=[];date=start_date;while(true){dates.push(copy_date(date));date.setUTCMonth(date.getUTCMonth()+1);if(date>end_date){break;}}
return dates;};exports.DaysTicker=(function(superClass){extend(DaysTicker,superClass);function DaysTicker(){return DaysTicker.__super__.constructor.apply(this,arguments);}
DaysTicker.prototype.type='DaysTicker';DaysTicker.define({days:[p.Array,[]]});DaysTicker.prototype.initialize=function(attrs,options){var days,interval;attrs.num_minor_ticks=0;DaysTicker.__super__.initialize.call(this,attrs,options);days=this.days;interval=days.length>1?(days[1]-days[0])*ONE_DAY:31*ONE_DAY;return this.interval=interval;};DaysTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var all_ticks,date,day_date,day_dates,days,days_of_month,interval,month_dates,ticks_in_range;month_dates=date_range_by_month(data_low,data_high);days=this.days;days_of_month=(function(_this){return function(month_date,interval){var dates,day,day_date,future_date,i,len;dates=[];for(i=0,len=days.length;i<len;i++){day=days[i];day_date=copy_date(month_date);day_date.setUTCDate(day);future_date=new Date(day_date.getTime()+(interval/2));if(future_date.getUTCMonth()===month_date.getUTCMonth()){dates.push(day_date);}}
return dates;};})(this);interval=this.interval;day_dates=array_1.concat((function(){var i,len,results;results=[];for(i=0,len=month_dates.length;i<len;i++){date=month_dates[i];results.push(days_of_month(date,interval));}
return results;})());all_ticks=(function(){var i,len,results;results=[];for(i=0,len=day_dates.length;i<len;i++){day_date=day_dates[i];results.push(day_date.getTime());}
return results;})();ticks_in_range=all_ticks.filter(function(tick){return(data_low<=tick&&tick<=data_high);});return{"major":ticks_in_range,"minor":[]};};return DaysTicker;})(single_interval_ticker_1.SingleIntervalTicker);},{"./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/fixed_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var continuous_ticker_1=require("./continuous_ticker");var p=require("core/properties");exports.FixedTicker=(function(superClass){extend(FixedTicker,superClass);function FixedTicker(){return FixedTicker.__super__.constructor.apply(this,arguments);}
FixedTicker.prototype.type='FixedTicker';FixedTicker.define({ticks:[p.Array,[]]});FixedTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){return{major:this.ticks,minor:[]};};return FixedTicker;})(continuous_ticker_1.ContinuousTicker);},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties"}],"models/tickers/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var adaptive_ticker_1=require("./adaptive_ticker");exports.AdaptiveTicker=adaptive_ticker_1.AdaptiveTicker;var basic_ticker_1=require("./basic_ticker");exports.BasicTicker=basic_ticker_1.BasicTicker;var categorical_ticker_1=require("./categorical_ticker");exports.CategoricalTicker=categorical_ticker_1.CategoricalTicker;var composite_ticker_1=require("./composite_ticker");exports.CompositeTicker=composite_ticker_1.CompositeTicker;var continuous_ticker_1=require("./continuous_ticker");exports.ContinuousTicker=continuous_ticker_1.ContinuousTicker;var datetime_ticker_1=require("./datetime_ticker");exports.DatetimeTicker=datetime_ticker_1.DatetimeTicker;var days_ticker_1=require("./days_ticker");exports.DaysTicker=days_ticker_1.DaysTicker;var fixed_ticker_1=require("./fixed_ticker");exports.FixedTicker=fixed_ticker_1.FixedTicker;var log_ticker_1=require("./log_ticker");exports.LogTicker=log_ticker_1.LogTicker;var mercator_ticker_1=require("./mercator_ticker");exports.MercatorTicker=mercator_ticker_1.MercatorTicker;var months_ticker_1=require("./months_ticker");exports.MonthsTicker=months_ticker_1.MonthsTicker;var single_interval_ticker_1=require("./single_interval_ticker");exports.SingleIntervalTicker=single_interval_ticker_1.SingleIntervalTicker;var ticker_1=require("./ticker");exports.Ticker=ticker_1.Ticker;var years_ticker_1=require("./years_ticker");exports.YearsTicker=years_ticker_1.YearsTicker;},{"./adaptive_ticker":"models/tickers/adaptive_ticker","./basic_ticker":"models/tickers/basic_ticker","./categorical_ticker":"models/tickers/categorical_ticker","./composite_ticker":"models/tickers/composite_ticker","./continuous_ticker":"models/tickers/continuous_ticker","./datetime_ticker":"models/tickers/datetime_ticker","./days_ticker":"models/tickers/days_ticker","./fixed_ticker":"models/tickers/fixed_ticker","./log_ticker":"models/tickers/log_ticker","./mercator_ticker":"models/tickers/mercator_ticker","./months_ticker":"models/tickers/months_ticker","./single_interval_ticker":"models/tickers/single_interval_ticker","./ticker":"models/tickers/ticker","./years_ticker":"models/tickers/years_ticker"}],"models/tickers/log_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var array_1=require("core/util/array");var types_1=require("core/util/types");var adaptive_ticker_1=require("./adaptive_ticker");exports.LogTicker=(function(superClass){extend(LogTicker,superClass);function LogTicker(){return LogTicker.__super__.constructor.apply(this,arguments);}
LogTicker.prototype.type='LogTicker';LogTicker.override({mantissas:[1,5]});LogTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var base,end_factor,endlog,factor,factors,i,interval,j,k,l,len,len1,len2,len3,len4,len5,log_high,log_interval,log_low,m,minor_interval,minor_offsets,minor_ticks,n,num_minor_ticks,o,start_factor,startlog,tick,ticks,x;num_minor_ticks=this.num_minor_ticks;minor_ticks=[];base=this.base;log_low=Math.log(data_low)/Math.log(base);log_high=Math.log(data_high)/Math.log(base);log_interval=log_high-log_low;if(log_interval<2){interval=this.get_interval(data_low,data_high,desired_n_ticks);start_factor=Math.floor(data_low/interval);end_factor=Math.ceil(data_high/interval);if(types_1.isStrictNaN(start_factor)||types_1.isStrictNaN(end_factor)){factors=[];}
else{factors=array_1.range(start_factor,end_factor+1);}
ticks=(function(){var j,len,results;results=[];for(j=0,len=factors.length;j<len;j++){factor=factors[j];if(factor!==0){results.push(factor*interval);}}
return results;})();if(num_minor_ticks>1){minor_interval=interval/num_minor_ticks;minor_offsets=(function(){var j,ref,results;results=[];for(i=j=1,ref=num_minor_ticks;1<=ref?j<=ref:j>=ref;i=1<=ref?++j:--j){results.push(i*minor_interval);}
return results;})();for(j=0,len=minor_offsets.length;j<len;j++){x=minor_offsets[j];minor_ticks.push(ticks[0]-x);}
for(k=0,len1=ticks.length;k<len1;k++){tick=ticks[k];for(l=0,len2=minor_offsets.length;l<len2;l++){x=minor_offsets[l];minor_ticks.push(tick+x);}}}}
else{startlog=Math.ceil(log_low);endlog=Math.floor(log_high);interval=Math.ceil((endlog-startlog)/9.0);ticks=array_1.range(startlog,endlog,interval);if((endlog-startlog)%interval===0){ticks=ticks.concat([endlog]);}
ticks=ticks.map(function(i){return Math.pow(base,i);});if(num_minor_ticks>1){minor_interval=Math.pow(base,interval)/num_minor_ticks;minor_offsets=(function(){var m,ref,results;results=[];for(i=m=1,ref=num_minor_ticks;1<=ref?m<=ref:m>=ref;i=1<=ref?++m:--m){results.push(i*minor_interval);}
return results;})();for(m=0,len3=minor_offsets.length;m<len3;m++){x=minor_offsets[m];minor_ticks.push(ticks[0]/x);}
for(n=0,len4=ticks.length;n<len4;n++){tick=ticks[n];for(o=0,len5=minor_offsets.length;o<len5;o++){x=minor_offsets[o];minor_ticks.push(tick*x);}}}}
return{major:ticks,minor:minor_ticks};};return LogTicker;})(adaptive_ticker_1.AdaptiveTicker);},{"./adaptive_ticker":"models/tickers/adaptive_ticker","core/util/array":"core/util/array","core/util/types":"core/util/types"}],"models/tickers/mercator_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var basic_ticker_1=require("./basic_ticker");var p=require("core/properties");var proj4_1=require("core/util/proj4");exports.MercatorTicker=(function(superClass){extend(MercatorTicker,superClass);function MercatorTicker(){return MercatorTicker.__super__.constructor.apply(this,arguments);}
MercatorTicker.prototype.type='MercatorTicker';MercatorTicker.define({dimension:[p.LatLon]});MercatorTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var _,i,j,k,l,lat,len,len1,len2,len3,lon,proj_cross_loc,proj_high,proj_low,proj_ticks,ref,ref1,ref10,ref11,ref2,ref3,ref4,ref5,ref6,ref7,ref8,ref9,tick,ticks;if(this.dimension==null){throw new Error("MercatorTicker.dimension not configured");}
if(this.dimension==="lon"){ref=proj4_1.proj4(proj4_1.mercator).inverse([data_low,cross_loc]),proj_low=ref[0],proj_cross_loc=ref[1];ref1=proj4_1.proj4(proj4_1.mercator).inverse([data_high,cross_loc]),proj_high=ref1[0],proj_cross_loc=ref1[1];}
else{ref2=proj4_1.proj4(proj4_1.mercator).inverse([cross_loc,data_low]),proj_cross_loc=ref2[0],proj_low=ref2[1];ref3=proj4_1.proj4(proj4_1.mercator).inverse([cross_loc,data_high]),proj_cross_loc=ref3[0],proj_high=ref3[1];}
proj_ticks=MercatorTicker.__super__.get_ticks_no_defaults.call(this,proj_low,proj_high,cross_loc,desired_n_ticks);ticks={major:[],minor:[]};if(this.dimension==="lon"){ref4=proj_ticks.major;for(i=0,len=ref4.length;i<len;i++){tick=ref4[i];ref5=proj4_1.proj4(proj4_1.mercator).forward([tick,proj_cross_loc]),lon=ref5[0],_=ref5[1];ticks.major.push(lon);}
ref6=proj_ticks.minor;for(j=0,len1=ref6.length;j<len1;j++){tick=ref6[j];ref7=proj4_1.proj4(proj4_1.mercator).forward([tick,proj_cross_loc]),lon=ref7[0],_=ref7[1];ticks.minor.push(lon);}}
else{ref8=proj_ticks.major;for(k=0,len2=ref8.length;k<len2;k++){tick=ref8[k];ref9=proj4_1.proj4(proj4_1.mercator).forward([proj_cross_loc,tick]),_=ref9[0],lat=ref9[1];ticks.major.push(lat);}
ref10=proj_ticks.minor;for(l=0,len3=ref10.length;l<len3;l++){tick=ref10[l];ref11=proj4_1.proj4(proj4_1.mercator).forward([proj_cross_loc,tick]),_=ref11[0],lat=ref11[1];ticks.minor.push(lat);}}
return ticks;};return MercatorTicker;})(basic_ticker_1.BasicTicker);},{"./basic_ticker":"models/tickers/basic_ticker","core/properties":"core/properties","core/util/proj4":"core/util/proj4"}],"models/tickers/months_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ONE_MONTH,copy_date,date_range_by_year,last_year_no_later_than,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var single_interval_ticker_1=require("./single_interval_ticker");var util=require("./util");var p=require("core/properties");var array_1=require("core/util/array");copy_date=util.copy_date;last_year_no_later_than=util.last_year_no_later_than;ONE_MONTH=util.ONE_MONTH;date_range_by_year=function(start_time,end_time){var date,dates,end_date,start_date;start_date=last_year_no_later_than(new Date(start_time));end_date=last_year_no_later_than(new Date(end_time));end_date.setUTCFullYear(end_date.getUTCFullYear()+1);dates=[];date=start_date;while(true){dates.push(copy_date(date));date.setUTCFullYear(date.getUTCFullYear()+1);if(date>end_date){break;}}
return dates;};exports.MonthsTicker=(function(superClass){extend(MonthsTicker,superClass);function MonthsTicker(){return MonthsTicker.__super__.constructor.apply(this,arguments);}
MonthsTicker.prototype.type='MonthsTicker';MonthsTicker.define({months:[p.Array,[]]});MonthsTicker.prototype.initialize=function(attrs,options){var interval,months;MonthsTicker.__super__.initialize.call(this,attrs,options);months=this.months;interval=months.length>1?(months[1]-months[0])*ONE_MONTH:12*ONE_MONTH;return this.interval=interval;};MonthsTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var all_ticks,date,month_date,month_dates,months,months_of_year,ticks_in_range,year_dates;year_dates=date_range_by_year(data_low,data_high);months=this.months;months_of_year=function(year_date){return months.map(function(month){var month_date;month_date=copy_date(year_date);month_date.setUTCMonth(month);return month_date;});};month_dates=array_1.concat((function(){var i,len,results;results=[];for(i=0,len=year_dates.length;i<len;i++){date=year_dates[i];results.push(months_of_year(date));}
return results;})());all_ticks=(function(){var i,len,results;results=[];for(i=0,len=month_dates.length;i<len;i++){month_date=month_dates[i];results.push(month_date.getTime());}
return results;})();ticks_in_range=all_ticks.filter(function(tick){return(data_low<=tick&&tick<=data_high);});return{"major":ticks_in_range,"minor":[]};};return MonthsTicker;})(single_interval_ticker_1.SingleIntervalTicker);},{"./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tickers/single_interval_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var continuous_ticker_1=require("./continuous_ticker");var p=require("core/properties");exports.SingleIntervalTicker=(function(superClass){extend(SingleIntervalTicker,superClass);function SingleIntervalTicker(){return SingleIntervalTicker.__super__.constructor.apply(this,arguments);}
SingleIntervalTicker.prototype.type='SingleIntervalTicker';SingleIntervalTicker.define({interval:[p.Number]});SingleIntervalTicker.getters({min_interval:function(){return this.interval;},max_interval:function(){return this.interval;}});SingleIntervalTicker.prototype.get_interval=function(data_low,data_high,n_desired_ticks){return this.interval;};return SingleIntervalTicker;})(continuous_ticker_1.ContinuousTicker);},{"./continuous_ticker":"models/tickers/continuous_ticker","core/properties":"core/properties"}],"models/tickers/ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var array_1=require("core/util/array");var types_1=require("core/util/types");exports.Ticker=(function(superClass){extend(Ticker,superClass);function Ticker(){return Ticker.__super__.constructor.apply(this,arguments);}
Ticker.prototype.type='Ticker';Ticker.prototype.get_ticks=function(data_low,data_high,range,cross_loc,arg){var desired_n_ticks;desired_n_ticks=arg.desired_n_ticks;return this.get_ticks_no_defaults(data_low,data_high,cross_loc,this.desired_num_ticks);};Ticker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var end_factor,factor,factors,i,interval,j,k,l,len,len1,len2,minor_interval,minor_offsets,minor_ticks,num_minor_ticks,start_factor,tick,ticks,x;interval=this.get_interval(data_low,data_high,desired_n_ticks);start_factor=Math.floor(data_low/interval);end_factor=Math.ceil(data_high/interval);if(types_1.isStrictNaN(start_factor)||types_1.isStrictNaN(end_factor)){factors=[];}
else{factors=array_1.range(start_factor,end_factor+1);}
ticks=(function(){var j,len,results;results=[];for(j=0,len=factors.length;j<len;j++){factor=factors[j];results.push(factor*interval);}
return results;})();num_minor_ticks=this.num_minor_ticks;minor_ticks=[];if(num_minor_ticks>1){minor_interval=interval/num_minor_ticks;minor_offsets=(function(){var j,ref,results;results=[];for(i=j=1,ref=num_minor_ticks;1<=ref?j<=ref:j>=ref;i=1<=ref?++j:--j){results.push(i*minor_interval);}
return results;})();for(j=0,len=minor_offsets.length;j<len;j++){x=minor_offsets[j];minor_ticks.push(ticks[0]-x);}
for(k=0,len1=ticks.length;k<len1;k++){tick=ticks[k];for(l=0,len2=minor_offsets.length;l<len2;l++){x=minor_offsets[l];minor_ticks.push(tick+x);}}}
return{"major":ticks,"minor":minor_ticks};};return Ticker;})(model_1.Model);},{"../../model":"model","core/util/array":"core/util/array","core/util/types":"core/util/types"}],"models/tickers/util":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ONE_MILLI=1.0;exports.ONE_SECOND=1000.0;exports.ONE_MINUTE=60.0*exports.ONE_SECOND;exports.ONE_HOUR=60*exports.ONE_MINUTE;exports.ONE_DAY=24*exports.ONE_HOUR;exports.ONE_MONTH=30*exports.ONE_DAY;exports.ONE_YEAR=365*exports.ONE_DAY;exports.copy_date=function(date){return new Date(date.getTime());};exports.last_month_no_later_than=function(date){date=exports.copy_date(date);date.setUTCDate(1);date.setUTCHours(0);date.setUTCMinutes(0);date.setUTCSeconds(0);date.setUTCMilliseconds(0);return date;};exports.last_year_no_later_than=function(date){date=exports.last_month_no_later_than(date);date.setUTCMonth(0);return date;};},{}],"models/tickers/years_ticker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ONE_YEAR,last_year_no_later_than,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var basic_ticker_1=require("./basic_ticker");var single_interval_ticker_1=require("./single_interval_ticker");var util=require("./util");last_year_no_later_than=util.last_year_no_later_than;ONE_YEAR=util.ONE_YEAR;exports.YearsTicker=(function(superClass){extend(YearsTicker,superClass);function YearsTicker(){return YearsTicker.__super__.constructor.apply(this,arguments);}
YearsTicker.prototype.type='YearsTicker';YearsTicker.prototype.initialize=function(attrs,options){YearsTicker.__super__.initialize.call(this,attrs,options);this.interval=ONE_YEAR;return this.basic_ticker=new basic_ticker_1.BasicTicker({num_minor_ticks:0});};YearsTicker.prototype.get_ticks_no_defaults=function(data_low,data_high,cross_loc,desired_n_ticks){var all_ticks,end_year,start_year,ticks_in_range,year,years;start_year=last_year_no_later_than(new Date(data_low)).getUTCFullYear();end_year=last_year_no_later_than(new Date(data_high)).getUTCFullYear();years=this.basic_ticker.get_ticks_no_defaults(start_year,end_year,cross_loc,desired_n_ticks).major;all_ticks=(function(){var i,len,results;results=[];for(i=0,len=years.length;i<len;i++){year=years[i];results.push(Date.UTC(year,0,1));}
return results;})();ticks_in_range=all_ticks.filter(function(tick){return(data_low<=tick&&tick<=data_high);});return{major:ticks_in_range,minor:[]};};return YearsTicker;})(single_interval_ticker_1.SingleIntervalTicker);},{"./basic_ticker":"models/tickers/basic_ticker","./single_interval_ticker":"models/tickers/single_interval_ticker","./util":"models/tickers/util"}],"models/tiles/bbox_tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var mercator_tile_source_1=require("./mercator_tile_source");var p=require("core/properties");exports.BBoxTileSource=(function(superClass){extend(BBoxTileSource,superClass);function BBoxTileSource(){return BBoxTileSource.__super__.constructor.apply(this,arguments);}
BBoxTileSource.prototype.type='BBoxTileSource';BBoxTileSource.define({use_latlon:[p.Bool,false]});BBoxTileSource.prototype.get_image_url=function(x,y,z){var image_url,ref,ref1,xmax,xmin,ymax,ymin;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);if(this.use_latlon){ref=this.get_tile_geographic_bounds(x,y,z),xmin=ref[0],ymin=ref[1],xmax=ref[2],ymax=ref[3];}
else{ref1=this.get_tile_meter_bounds(x,y,z),xmin=ref1[0],ymin=ref1[1],xmax=ref1[2],ymax=ref1[3];}
return image_url.replace("{XMIN}",xmin).replace("{YMIN}",ymin).replace("{XMAX}",xmax).replace("{YMAX}",ymax);};return BBoxTileSource;})(mercator_tile_source_1.MercatorTileSource);},{"./mercator_tile_source":"models/tiles/mercator_tile_source","core/properties":"core/properties"}],"models/tiles/dynamic_image_renderer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var renderer_1=require("../renderers/renderer");var logging_1=require("core/logging");var p=require("core/properties");exports.DynamicImageView=(function(superClass){extend(DynamicImageView,superClass);function DynamicImageView(){this._on_image_error=bind(this._on_image_error,this);this._on_image_load=bind(this._on_image_load,this);return DynamicImageView.__super__.constructor.apply(this,arguments);}
DynamicImageView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change',this.request_render);};DynamicImageView.prototype.get_extent=function(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end];};DynamicImageView.prototype._set_data=function(){this.map_plot=this.plot_view.model.plot;this.map_canvas=this.plot_view.canvas_view.ctx;this.map_frame=this.plot_view.frame;this.x_range=this.map_plot.x_range;this.x_mapper=this.map_frame.x_mappers['default'];this.y_range=this.map_plot.y_range;this.y_mapper=this.map_frame.y_mappers['default'];this.lastImage=void 0;return this.extent=this.get_extent();};DynamicImageView.prototype._map_data=function(){return this.initial_extent=this.get_extent();};DynamicImageView.prototype._on_image_load=function(e){var image_data;image_data=e.target.image_data;image_data.img=e.target;image_data.loaded=true;this.lastImage=image_data;if(this.get_extent().join(':')===image_data.cache_key){return this.request_render();}};DynamicImageView.prototype._on_image_error=function(e){var image_data;logging_1.logger.error('Error loading image: #{e.target.src}');image_data=e.target.image_data;return this.model.image_source.remove_image(image_data);};DynamicImageView.prototype._create_image=function(bounds){var image;image=new Image();image.onload=this._on_image_load;image.onerror=this._on_image_error;image.alt='';image.image_data={bounds:bounds,loaded:false,cache_key:bounds.join(':')};this.model.image_source.add_image(image.image_data);image.src=this.model.image_source.get_image_url(bounds[0],bounds[1],bounds[2],bounds[3],Math.ceil(this.map_frame.height),Math.ceil(this.map_frame.width));return image;};DynamicImageView.prototype.render=function(ctx,indices,args){var extent,image_obj;if(this.map_initialized==null){this._set_data();this._map_data();this.map_initialized=true;}
extent=this.get_extent();if(this.render_timer){clearTimeout(this.render_timer);}
image_obj=this.model.image_source.images[extent.join(':')];if((image_obj!=null)&&image_obj.loaded){this._draw_image(extent.join(':'));return;}
if(this.lastImage!=null){this._draw_image(this.lastImage.cache_key);}
if(image_obj==null){return this.render_timer=setTimeout(((function(_this){return function(){return _this._create_image(extent);};})(this)),125);}};DynamicImageView.prototype._draw_image=function(image_key){var image_obj,ref,ref1,sh,sw,sx,sxmax,sxmin,sy,symax,symin;image_obj=this.model.image_source.images[image_key];if(image_obj!=null){this.map_canvas.save();this._set_rect();this.map_canvas.globalAlpha=this.model.alpha;ref=this.plot_view.frame.map_to_screen([image_obj.bounds[0]],[image_obj.bounds[3]],this.plot_view.canvas),sxmin=ref[0],symin=ref[1];ref1=this.plot_view.frame.map_to_screen([image_obj.bounds[2]],[image_obj.bounds[1]],this.plot_view.canvas),sxmax=ref1[0],symax=ref1[1];sxmin=sxmin[0];symin=symin[0];sxmax=sxmax[0];symax=symax[0];sw=sxmax-sxmin;sh=symax-symin;sx=sxmin;sy=symin;this.map_canvas.drawImage(image_obj.img,sx,sy,sw,sh);return this.map_canvas.restore();}};DynamicImageView.prototype._set_rect=function(){var h,l,outline_width,t,w;outline_width=this.plot_model.plot.properties.outline_line_width.value();l=this.plot_view.canvas.vx_to_sx(this.map_frame.left)+(outline_width/2);t=this.plot_view.canvas.vy_to_sy(this.map_frame.top)+(outline_width/2);w=this.map_frame.width-outline_width;h=this.map_frame.height-outline_width;this.map_canvas.rect(l,t,w,h);return this.map_canvas.clip();};return DynamicImageView;})(renderer_1.RendererView);exports.DynamicImageRenderer=(function(superClass){extend(DynamicImageRenderer,superClass);function DynamicImageRenderer(){return DynamicImageRenderer.__super__.constructor.apply(this,arguments);}
DynamicImageRenderer.prototype.default_view=exports.DynamicImageView;DynamicImageRenderer.prototype.type='DynamicImageRenderer';DynamicImageRenderer.define({alpha:[p.Number,1.0],image_source:[p.Instance],render_parents:[p.Bool,true]});DynamicImageRenderer.override({level:'underlay'});return DynamicImageRenderer;})(renderer_1.Renderer);},{"../renderers/renderer":"models/renderers/renderer","core/logging":"core/logging","core/properties":"core/properties"}],"models/tiles/image_pool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImagePool=(function(){function ImagePool(){this.images=[];}
ImagePool.prototype.pop=function(){var img;img=this.images.pop();if(img!=null){return img;}
else{return new Image();}};ImagePool.prototype.push=function(img){if(this.images.length>50){return;}
if(img.constructor===Array){return Array.prototype.push.apply(this.images,img);}
else{return this.images.push(img);}};return ImagePool;})();},{}],"models/tiles/image_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var model_1=require("../../model");exports.ImageSource=(function(superClass){extend(ImageSource,superClass);ImageSource.prototype.type='ImageSource';ImageSource.define({url:[p.String,''],extra_url_vars:[p.Any,{}]});function ImageSource(options){if(options==null){options={};}
ImageSource.__super__.constructor.apply(this,arguments);this.images={};this.normalize_case();}
ImageSource.prototype.normalize_case=function(){'Note: should probably be refactored into subclasses.';var url;url=this.url;url=url.replace('{xmin}','{XMIN}');url=url.replace('{ymin}','{YMIN}');url=url.replace('{xmax}','{XMAX}');url=url.replace('{ymax}','{YMAX}');url=url.replace('{height}','{HEIGHT}');url=url.replace('{width}','{WIDTH}');return this.url=url;};ImageSource.prototype.string_lookup_replace=function(str,lookup){var key,result_str,value;result_str=str;for(key in lookup){value=lookup[key];result_str=result_str.replace('{'+key+'}',value.toString());}
return result_str;};ImageSource.prototype.add_image=function(image_obj){return this.images[image_obj.cache_key]=image_obj;};ImageSource.prototype.remove_image=function(image_obj){return delete this.images[image_obj.cache_key];};ImageSource.prototype.get_image_url=function(xmin,ymin,xmax,ymax,height,width){var image_url;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);return image_url.replace("{XMIN}",xmin).replace("{YMIN}",ymin).replace("{XMAX}",xmax).replace("{YMAX}",ymax).replace("{WIDTH}",width).replace("{HEIGHT}",height);};return ImageSource;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/tiles/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bbox_tile_source_1=require("./bbox_tile_source");exports.BBoxTileSource=bbox_tile_source_1.BBoxTileSource;var dynamic_image_renderer_1=require("./dynamic_image_renderer");exports.DynamicImageRenderer=dynamic_image_renderer_1.DynamicImageRenderer;var image_source_1=require("./image_source");exports.ImageSource=image_source_1.ImageSource;var mercator_tile_source_1=require("./mercator_tile_source");exports.MercatorTileSource=mercator_tile_source_1.MercatorTileSource;var quadkey_tile_source_1=require("./quadkey_tile_source");exports.QUADKEYTileSource=quadkey_tile_source_1.QUADKEYTileSource;var tile_renderer_1=require("./tile_renderer");exports.TileRenderer=tile_renderer_1.TileRenderer;var tile_source_1=require("./tile_source");exports.TileSource=tile_source_1.TileSource;var tms_tile_source_1=require("./tms_tile_source");exports.TMSTileSource=tms_tile_source_1.TMSTileSource;var wmts_tile_source_1=require("./wmts_tile_source");exports.WMTSTileSource=wmts_tile_source_1.WMTSTileSource;},{"./bbox_tile_source":"models/tiles/bbox_tile_source","./dynamic_image_renderer":"models/tiles/dynamic_image_renderer","./image_source":"models/tiles/image_source","./mercator_tile_source":"models/tiles/mercator_tile_source","./quadkey_tile_source":"models/tiles/quadkey_tile_source","./tile_renderer":"models/tiles/tile_renderer","./tile_source":"models/tiles/tile_source","./tms_tile_source":"models/tiles/tms_tile_source","./wmts_tile_source":"models/tiles/wmts_tile_source"}],"models/tiles/mercator_tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var tile_source_1=require("./tile_source");var p=require("core/properties");exports.MercatorTileSource=(function(superClass){extend(MercatorTileSource,superClass);function MercatorTileSource(){return MercatorTileSource.__super__.constructor.apply(this,arguments);}
MercatorTileSource.prototype.type='MercatorTileSource';MercatorTileSource.define({wrap_around:[p.Bool,true]});MercatorTileSource.override({x_origin_offset:20037508.34,y_origin_offset:20037508.34,initial_resolution:156543.03392804097});MercatorTileSource.prototype.initialize=function(options){var z;MercatorTileSource.__super__.initialize.call(this,options);return this._resolutions=(function(){var j,results;results=[];for(z=j=0;j<=30;z=++j){results.push(this.get_resolution(z));}
return results;}).call(this);};MercatorTileSource.prototype._computed_initial_resolution=function(){if(this.initial_resolution!=null){return this.initial_resolution;}
else{return 2*Math.PI*6378137/this.tile_size;}};MercatorTileSource.prototype.is_valid_tile=function(x,y,z){if(!this.wrap_around){if(x<0||x>=Math.pow(2,z)){return false;}}
if(y<0||y>=Math.pow(2,z)){return false;}
return true;};MercatorTileSource.prototype.retain_children=function(reference_tile){var key,max_zoom,min_zoom,quadkey,ref,results,tile;quadkey=reference_tile.quadkey;min_zoom=quadkey.length;max_zoom=min_zoom+3;ref=this.tiles;results=[];for(key in ref){tile=ref[key];if(tile.quadkey.indexOf(quadkey)===0&&tile.quadkey.length>min_zoom&&tile.quadkey.length<=max_zoom){results.push(tile.retain=true);}
else{results.push(void 0);}}
return results;};MercatorTileSource.prototype.retain_neighbors=function(reference_tile){var key,neighbor_radius,neighbor_x,neighbor_y,ref,ref1,ref2,ref3,results,tile,tx,ty,tz,x,y;neighbor_radius=4;ref=reference_tile.tile_coords,tx=ref[0],ty=ref[1],tz=ref[2];neighbor_x=(function(){var j,ref1,ref2,results;results=[];for(x=j=ref1=tx-neighbor_radius,ref2=tx+neighbor_radius;ref1<=ref2?j<=ref2:j>=ref2;x=ref1<=ref2?++j:--j){results.push(x);}
return results;})();neighbor_y=(function(){var j,ref1,ref2,results;results=[];for(y=j=ref1=ty-neighbor_radius,ref2=ty+neighbor_radius;ref1<=ref2?j<=ref2:j>=ref2;y=ref1<=ref2?++j:--j){results.push(y);}
return results;})();ref1=this.tiles;results=[];for(key in ref1){tile=ref1[key];if(tile.tile_coords[2]===tz&&(ref2=tile.tile_coords[0],indexOf.call(neighbor_x,ref2)>=0)&&(ref3=tile.tile_coords[1],indexOf.call(neighbor_y,ref3)>=0)){results.push(tile.retain=true);}
else{results.push(void 0);}}
return results;};MercatorTileSource.prototype.retain_parents=function(reference_tile){var key,quadkey,ref,results,tile;quadkey=reference_tile.quadkey;ref=this.tiles;results=[];for(key in ref){tile=ref[key];results.push(tile.retain=quadkey.indexOf(tile.quadkey)===0);}
return results;};MercatorTileSource.prototype.children_by_tile_xyz=function(x,y,z){var b,child_tile_xyz,i,j,quad_key,ref,ref1,ref2,world_x;world_x=this.calculate_world_x_by_tile_xyz(x,y,z);if(world_x!==0){ref=this.normalize_xyz(x,y,z),x=ref[0],y=ref[1],z=ref[2];}
quad_key=this.tile_xyz_to_quadkey(x,y,z);child_tile_xyz=[];for(i=j=0;j<=3;i=j+=1){ref1=this.quadkey_to_tile_xyz(quad_key+i.toString()),x=ref1[0],y=ref1[1],z=ref1[2];if(world_x!==0){ref2=this.denormalize_xyz(x,y,z,world_x),x=ref2[0],y=ref2[1],z=ref2[2];}
b=this.get_tile_meter_bounds(x,y,z);if(b!=null){child_tile_xyz.push([x,y,z,b]);}}
return child_tile_xyz;};MercatorTileSource.prototype.parent_by_tile_xyz=function(x,y,z){var parent_quad_key,quad_key;quad_key=this.tile_xyz_to_quadkey(x,y,z);parent_quad_key=quad_key.substring(0,quad_key.length-1);return this.quadkey_to_tile_xyz(parent_quad_key);};MercatorTileSource.prototype.get_resolution=function(level){return this._computed_initial_resolution()/Math.pow(2,level);};MercatorTileSource.prototype.get_resolution_by_extent=function(extent,height,width){var x_rs,y_rs;x_rs=(extent[2]-extent[0])/width;y_rs=(extent[3]-extent[1])/height;return[x_rs,y_rs];};MercatorTileSource.prototype.get_level_by_extent=function(extent,height,width){var i,j,len,r,ref,resolution,x_rs,y_rs;x_rs=(extent[2]-extent[0])/width;y_rs=(extent[3]-extent[1])/height;resolution=Math.max(x_rs,y_rs);i=0;ref=this._resolutions;for(j=0,len=ref.length;j<len;j++){r=ref[j];if(resolution>r){if(i===0){return 0;}
if(i>0){return i-1;}}
i+=1;}};MercatorTileSource.prototype.get_closest_level_by_extent=function(extent,height,width){var closest,resolution,ress,x_rs,y_rs;x_rs=(extent[2]-extent[0])/width;y_rs=(extent[3]-extent[1])/height;resolution=Math.max(x_rs,y_rs);ress=this._resolutions;closest=this._resolutions.reduce(function(previous,current){if(Math.abs(current-resolution)<Math.abs(previous-resolution)){return current;}
return previous;});return this._resolutions.indexOf(closest);};MercatorTileSource.prototype.snap_to_zoom=function(extent,height,width,level){var desired_res,desired_x_delta,desired_y_delta,x_adjust,xmax,xmin,y_adjust,ymax,ymin;desired_res=this._resolutions[level];desired_x_delta=width*desired_res;desired_y_delta=height*desired_res;xmin=extent[0],ymin=extent[1],xmax=extent[2],ymax=extent[3];x_adjust=(desired_x_delta-(xmax-xmin))/2;y_adjust=(desired_y_delta-(ymax-ymin))/2;return[xmin-x_adjust,ymin-y_adjust,xmax+x_adjust,ymax+y_adjust];};MercatorTileSource.prototype.tms_to_wmts=function(x,y,z){'Note this works both ways';return[x,Math.pow(2,z)-1-y,z];};MercatorTileSource.prototype.wmts_to_tms=function(x,y,z){'Note this works both ways';return[x,Math.pow(2,z)-1-y,z];};MercatorTileSource.prototype.pixels_to_meters=function(px,py,level){var mx,my,res;res=this.get_resolution(level);mx=px*res-this.x_origin_offset;my=py*res-this.y_origin_offset;return[mx,my];};MercatorTileSource.prototype.meters_to_pixels=function(mx,my,level){var px,py,res;res=this.get_resolution(level);px=(mx+this.x_origin_offset)/res;py=(my+this.y_origin_offset)/res;return[px,py];};MercatorTileSource.prototype.pixels_to_tile=function(px,py){var tx,ty;tx=Math.ceil(px/parseFloat(this.tile_size));tx=tx===0?tx:tx-1;ty=Math.max(Math.ceil(py/parseFloat(this.tile_size))-1,0);return[tx,ty];};MercatorTileSource.prototype.pixels_to_raster=function(px,py,level){var mapSize;mapSize=this.tile_size<<level;return[px,mapSize-py];};MercatorTileSource.prototype.meters_to_tile=function(mx,my,level){var px,py,ref;ref=this.meters_to_pixels(mx,my,level),px=ref[0],py=ref[1];return this.pixels_to_tile(px,py);};MercatorTileSource.prototype.get_tile_meter_bounds=function(tx,ty,level){var ref,ref1,xmax,xmin,ymax,ymin;ref=this.pixels_to_meters(tx*this.tile_size,ty*this.tile_size,level),xmin=ref[0],ymin=ref[1];ref1=this.pixels_to_meters((tx+1)*this.tile_size,(ty+1)*this.tile_size,level),xmax=ref1[0],ymax=ref1[1];if((xmin!=null)&&(ymin!=null)&&(xmax!=null)&&(ymax!=null)){return[xmin,ymin,xmax,ymax];}
else{return void 0;}};MercatorTileSource.prototype.get_tile_geographic_bounds=function(tx,ty,level){var bounds,maxLat,maxLon,minLat,minLon,ref;bounds=this.get_tile_meter_bounds(tx,ty,level);ref=this.utils.meters_extent_to_geographic(bounds),minLon=ref[0],minLat=ref[1],maxLon=ref[2],maxLat=ref[3];return[minLon,minLat,maxLon,maxLat];};MercatorTileSource.prototype.get_tiles_by_extent=function(extent,level,tile_border){var j,k,ref,ref1,ref2,ref3,ref4,ref5,tiles,tx,txmax,txmin,ty,tymax,tymin,xmax,xmin,ymax,ymin;if(tile_border==null){tile_border=1;}
xmin=extent[0],ymin=extent[1],xmax=extent[2],ymax=extent[3];ref=this.meters_to_tile(xmin,ymin,level),txmin=ref[0],tymin=ref[1];ref1=this.meters_to_tile(xmax,ymax,level),txmax=ref1[0],tymax=ref1[1];txmin-=tile_border;tymin-=tile_border;txmax+=tile_border;tymax+=tile_border;tiles=[];for(ty=j=ref2=tymax,ref3=tymin;j>=ref3;ty=j+=-1){for(tx=k=ref4=txmin,ref5=txmax;k<=ref5;tx=k+=1){if(this.is_valid_tile(tx,ty,level)){tiles.push([tx,ty,level,this.get_tile_meter_bounds(tx,ty,level)]);}}}
tiles=this.sort_tiles_from_center(tiles,[txmin,tymin,txmax,tymax]);return tiles;};MercatorTileSource.prototype.quadkey_to_tile_xyz=function(quadKey){'Computes tile x, y and z values based on quadKey.';var i,j,mask,ref,tileX,tileY,tileZ,value;tileX=0;tileY=0;tileZ=quadKey.length;for(i=j=ref=tileZ;j>0;i=j+=-1){value=quadKey.charAt(tileZ-i);mask=1<<(i-1);switch(value){case'0':continue;case'1':tileX|=mask;break;case'2':tileY|=mask;break;case'3':tileX|=mask;tileY|=mask;break;default:throw new TypeError("Invalid Quadkey: "+quadKey);}}
return[tileX,tileY,tileZ];};MercatorTileSource.prototype.tile_xyz_to_quadkey=function(x,y,z){'Computes quadkey value based on tile x, y and z values.';var digit,i,j,mask,quadKey,ref;quadKey='';for(i=j=ref=z;j>0;i=j+=-1){digit=0;mask=1<<(i-1);if((x&mask)!==0){digit+=1;}
if((y&mask)!==0){digit+=2;}
quadKey+=digit.toString();}
return quadKey;};MercatorTileSource.prototype.children_by_tile_xyz=function(x,y,z){var b,child_tile_xyz,i,j,quad_key,ref;quad_key=this.tile_xyz_to_quadkey(x,y,z);child_tile_xyz=[];for(i=j=0;j<=3;i=j+=1){ref=this.quadkey_to_tile_xyz(quad_key+i.toString()),x=ref[0],y=ref[1],z=ref[2];b=this.get_tile_meter_bounds(x,y,z);if(b!=null){child_tile_xyz.push([x,y,z,b]);}}
return child_tile_xyz;};MercatorTileSource.prototype.parent_by_tile_xyz=function(x,y,z){var parent_quad_key,quad_key;quad_key=this.tile_xyz_to_quadkey(x,y,z);parent_quad_key=quad_key.substring(0,quad_key.length-1);return this.quadkey_to_tile_xyz(parent_quad_key);};MercatorTileSource.prototype.get_closest_parent_by_tile_xyz=function(x,y,z){var quad_key,ref,ref1,ref2,world_x;world_x=this.calculate_world_x_by_tile_xyz(x,y,z);ref=this.normalize_xyz(x,y,z),x=ref[0],y=ref[1],z=ref[2];quad_key=this.tile_xyz_to_quadkey(x,y,z);while(quad_key.length>0){quad_key=quad_key.substring(0,quad_key.length-1);ref1=this.quadkey_to_tile_xyz(quad_key),x=ref1[0],y=ref1[1],z=ref1[2];ref2=this.denormalize_xyz(x,y,z,world_x),x=ref2[0],y=ref2[1],z=ref2[2];if(this.tile_xyz_to_key(x,y,z)in this.tiles){return[x,y,z];}}
return[0,0,0];};MercatorTileSource.prototype.normalize_xyz=function(x,y,z){var tile_count;if(this.wrap_around){tile_count=Math.pow(2,z);return[((x%tile_count)+tile_count)%tile_count,y,z];}
else{return[x,y,z];}};MercatorTileSource.prototype.denormalize_xyz=function(x,y,z,world_x){return[x+world_x*Math.pow(2,z),y,z];};MercatorTileSource.prototype.denormalize_meters=function(meters_x,meters_y,level,world_x){return[meters_x+world_x*2*Math.PI*6378137,meters_y];};MercatorTileSource.prototype.calculate_world_x_by_tile_xyz=function(x,y,z){return Math.floor(x/Math.pow(2,z));};return MercatorTileSource;})(tile_source_1.TileSource);},{"./tile_source":"models/tiles/tile_source","core/properties":"core/properties"}],"models/tiles/quadkey_tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var mercator_tile_source_1=require("./mercator_tile_source");exports.QUADKEYTileSource=(function(superClass){extend(QUADKEYTileSource,superClass);function QUADKEYTileSource(){return QUADKEYTileSource.__super__.constructor.apply(this,arguments);}
QUADKEYTileSource.prototype.type='QUADKEYTileSource';QUADKEYTileSource.prototype.get_image_url=function(x,y,z){var image_url,quadKey,ref;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);ref=this.tms_to_wmts(x,y,z),x=ref[0],y=ref[1],z=ref[2];quadKey=this.tile_xyz_to_quadkey(x,y,z);return image_url.replace("{Q}",quadKey);};return QUADKEYTileSource;})(mercator_tile_source_1.MercatorTileSource);},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tiles/tile_renderer":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var image_pool_1=require("./image_pool");var wmts_tile_source_1=require("./wmts_tile_source");var renderer_1=require("../renderers/renderer");var dom_1=require("core/dom");var p=require("core/properties");var types_1=require("core/util/types");exports.TileRendererView=(function(superClass){extend(TileRendererView,superClass);function TileRendererView(){this._update=bind(this._update,this);this._prefetch_tiles=bind(this._prefetch_tiles,this);this._on_tile_error=bind(this._on_tile_error,this);this._on_tile_cache_load=bind(this._on_tile_cache_load,this);this._on_tile_load=bind(this._on_tile_load,this);this._add_attribution=bind(this._add_attribution,this);return TileRendererView.__super__.constructor.apply(this,arguments);}
TileRendererView.prototype.initialize=function(options){this.attributionEl=null;return TileRendererView.__super__.initialize.apply(this,arguments);};TileRendererView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change',this.request_render);};TileRendererView.prototype.get_extent=function(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end];};TileRendererView.prototype._set_data=function(){this.pool=new image_pool_1.ImagePool();this.map_plot=this.plot_model.plot;this.map_canvas=this.plot_view.canvas_view.ctx;this.map_frame=this.plot_model.frame;this.x_range=this.map_plot.x_range;this.x_mapper=this.map_frame.x_mappers['default'];this.y_range=this.map_plot.y_range;this.y_mapper=this.map_frame.y_mappers['default'];this.extent=this.get_extent();this._last_height=void 0;return this._last_width=void 0;};TileRendererView.prototype._add_attribution=function(){var attribution,border_width,bottom_offset,max_width,overlays,right_offset;attribution=this.model.tile_source.attribution;if(types_1.isString(attribution)&&attribution.length>0){if(this.attributionEl==null){border_width=this.map_plot.outline_line_width;bottom_offset=this.map_plot.min_border_bottom+border_width;right_offset=this.map_frame.right-this.map_frame.width;max_width=this.map_frame.width-border_width;this.attributionEl=dom_1.div({"class":'bk-tile-attribution',style:{position:'absolute',bottom:bottom_offset+"px",right:right_offset+"px",'max-width':max_width+"px",'background-color':'rgba(255,255,255,0.8)','font-size':'9pt','font-family':'sans-serif'}});overlays=this.plot_view.el.querySelector('div.bk-canvas-events');overlays.appendChild(this.attributionEl);}
return this.attributionEl.innerHTML=attribution;}};TileRendererView.prototype._map_data=function(){var new_extent,zoom_level;this.initial_extent=this.get_extent();zoom_level=this.model.tile_source.get_level_by_extent(this.initial_extent,this.map_frame.height,this.map_frame.width);new_extent=this.model.tile_source.snap_to_zoom(this.initial_extent,this.map_frame.height,this.map_frame.width,zoom_level);this.x_range.start=new_extent[0];this.y_range.start=new_extent[1];this.x_range.end=new_extent[2];this.y_range.end=new_extent[3];return this._add_attribution();};TileRendererView.prototype._on_tile_load=function(e){var tile_data;tile_data=e.target.tile_data;tile_data.img=e.target;tile_data.current=true;tile_data.loaded=true;return this.request_render();};TileRendererView.prototype._on_tile_cache_load=function(e){var tile_data;tile_data=e.target.tile_data;tile_data.img=e.target;return tile_data.loaded=true;};TileRendererView.prototype._on_tile_error=function(e){return'';};TileRendererView.prototype._create_tile=function(x,y,z,bounds,cache_only){var normalized_coords,ref,tile;if(cache_only==null){cache_only=false;}
normalized_coords=this.model.tile_source.normalize_xyz(x,y,z);tile=this.pool.pop();if(cache_only){tile.onload=this._on_tile_cache_load;}
else{tile.onload=this._on_tile_load;}
tile.onerror=this._on_tile_error;tile.alt='';tile.tile_data={tile_coords:[x,y,z],normalized_coords:normalized_coords,quadkey:this.model.tile_source.tile_xyz_to_quadkey(x,y,z),cache_key:this.model.tile_source.tile_xyz_to_key(x,y,z),bounds:bounds,loaded:false,x_coord:bounds[0],y_coord:bounds[3]};this.model.tile_source.tiles[tile.tile_data.cache_key]=tile.tile_data;tile.src=(ref=this.model.tile_source).get_image_url.apply(ref,normalized_coords);return tile;};TileRendererView.prototype._enforce_aspect_ratio=function(){var extent,new_extent,zoom_level;if(this._last_height!==this.map_frame.height||this._last_width!==this.map_frame.width){extent=this.get_extent();zoom_level=this.model.tile_source.get_level_by_extent(extent,this.map_frame.height,this.map_frame.width);new_extent=this.model.tile_source.snap_to_zoom(extent,this.map_frame.height,this.map_frame.width,zoom_level);this.x_range.setv({start:new_extent[0],end:new_extent[2]});this.y_range.setv({start:new_extent[1],end:new_extent[3]});this.extent=new_extent;this._last_height=this.map_frame.height;this._last_width=this.map_frame.width;return true;}
return false;};TileRendererView.prototype.render=function(ctx,indices,args){if(this.map_initialized==null){this._set_data();this._map_data();this.map_initialized=true;}
if(this._enforce_aspect_ratio()){return;}
this._update();if(this.prefetch_timer!=null){clearTimeout(this.prefetch_timer);}
return this.prefetch_timer=setTimeout(this._prefetch_tiles,500);};TileRendererView.prototype._draw_tile=function(tile_key){var ref,ref1,sh,sw,sx,sxmax,sxmin,sy,symax,symin,tile_obj;tile_obj=this.model.tile_source.tiles[tile_key];if(tile_obj!=null){ref=this.plot_view.frame.map_to_screen([tile_obj.bounds[0]],[tile_obj.bounds[3]],this.plot_view.canvas),sxmin=ref[0],symin=ref[1];ref1=this.plot_view.frame.map_to_screen([tile_obj.bounds[2]],[tile_obj.bounds[1]],this.plot_view.canvas),sxmax=ref1[0],symax=ref1[1];sxmin=sxmin[0];symin=symin[0];sxmax=sxmax[0];symax=symax[0];sw=sxmax-sxmin;sh=symax-symin;sx=sxmin;sy=symin;return this.map_canvas.drawImage(tile_obj.img,sx,sy,sw,sh);}};TileRendererView.prototype._set_rect=function(){var h,l,outline_width,t,w;outline_width=this.plot_model.plot.properties.outline_line_width.value();l=this.plot_view.canvas.vx_to_sx(this.map_frame.left)+(outline_width/2);t=this.plot_view.canvas.vy_to_sy(this.map_frame.top)+(outline_width/2);w=this.map_frame.width-outline_width;h=this.map_frame.height-outline_width;this.map_canvas.rect(l,t,w,h);return this.map_canvas.clip();};TileRendererView.prototype._render_tiles=function(tile_keys){var i,len,tile_key;this.map_canvas.save();this._set_rect();this.map_canvas.globalAlpha=this.model.alpha;for(i=0,len=tile_keys.length;i<len;i++){tile_key=tile_keys[i];this._draw_tile(tile_key);}
return this.map_canvas.restore();};TileRendererView.prototype._prefetch_tiles=function(){var bounds,c,cbounds,children,cx,cy,cz,extent,h,i,ref,results,t,tile_source,tiles,w,x,y,z,zoom_level;tile_source=this.model.tile_source;extent=this.get_extent();h=this.map_frame.height;w=this.map_frame.width;zoom_level=this.model.tile_source.get_level_by_extent(extent,h,w);tiles=this.model.tile_source.get_tiles_by_extent(extent,zoom_level);results=[];for(t=i=0,ref=Math.min(10,tiles.length);i<=ref;t=i+=1){x=t[0],y=t[1],z=t[2],bounds=t[3];children=this.model.tile_source.children_by_tile_xyz(x,y,z);results.push((function(){var j,len,results1;results1=[];for(j=0,len=children.length;j<len;j++){c=children[j];cx=c[0],cy=c[1],cz=c[2],cbounds=c[3];if(tile_source.tile_xyz_to_key(cx,cy,cz)in tile_source.tiles){continue;}
else{results1.push(this._create_tile(cx,cy,cz,cbounds,true));}}
return results1;}).call(this));}
return results;};TileRendererView.prototype._fetch_tiles=function(tiles){var bounds,i,len,results,t,x,y,z;results=[];for(i=0,len=tiles.length;i<len;i++){t=tiles[i];x=t[0],y=t[1],z=t[2],bounds=t[3];results.push(this._create_tile(x,y,z,bounds));}
return results;};TileRendererView.prototype._update=function(){var bounds,c,cached,cbounds,child_key,children,cx,cy,cz,extent,h,i,j,k,key,len,len1,len2,max_zoom,min_zoom,need_load,parent_key,parent_tile,parents,px,py,pz,ref,snap_back,t,tile,tile_source,tiles,w,x,y,z,zoom_level,zooming_out;tile_source=this.model.tile_source;min_zoom=tile_source.min_zoom;max_zoom=tile_source.max_zoom;tile_source.update();extent=this.get_extent();zooming_out=this.extent[2]-this.extent[0]<extent[2]-extent[0];h=this.map_frame.height;w=this.map_frame.width;zoom_level=tile_source.get_level_by_extent(extent,h,w);snap_back=false;if(zoom_level<min_zoom){extent=this.extent;zoom_level=min_zoom;snap_back=true;}
else if(zoom_level>max_zoom){extent=this.extent;zoom_level=max_zoom;snap_back=true;}
if(snap_back){this.x_range.setv({x_range:{start:extent[0],end:extent[2]}});this.y_range.setv({start:extent[1],end:extent[3]});this.extent=extent;}
this.extent=extent;tiles=tile_source.get_tiles_by_extent(extent,zoom_level);parents=[];need_load=[];cached=[];children=[];for(i=0,len=tiles.length;i<len;i++){t=tiles[i];x=t[0],y=t[1],z=t[2],bounds=t[3];key=tile_source.tile_xyz_to_key(x,y,z);tile=tile_source.tiles[key];if((tile!=null)&&tile.loaded===true){cached.push(key);}
else{if(this.model.render_parents){ref=tile_source.get_closest_parent_by_tile_xyz(x,y,z),px=ref[0],py=ref[1],pz=ref[2];parent_key=tile_source.tile_xyz_to_key(px,py,pz);parent_tile=tile_source.tiles[parent_key];if((parent_tile!=null)&&parent_tile.loaded&&indexOf.call(parents,parent_key)<0){parents.push(parent_key);}
if(zooming_out){children=tile_source.children_by_tile_xyz(x,y,z);for(j=0,len1=children.length;j<len1;j++){c=children[j];cx=c[0],cy=c[1],cz=c[2],cbounds=c[3];child_key=tile_source.tile_xyz_to_key(cx,cy,cz);if(child_key in tile_source.tiles){children.push(child_key);}}}}}
if(tile==null){need_load.push(t);}}
this._render_tiles(parents);this._render_tiles(children);this._render_tiles(cached);for(k=0,len2=cached.length;k<len2;k++){t=cached[k];tile_source.tiles[t].current=true;}
if(this.render_timer!=null){clearTimeout(this.render_timer);}
return this.render_timer=setTimeout(((function(_this){return function(){return _this._fetch_tiles(need_load);};})(this)),65);};return TileRendererView;})(renderer_1.RendererView);exports.TileRenderer=(function(superClass){extend(TileRenderer,superClass);function TileRenderer(){return TileRenderer.__super__.constructor.apply(this,arguments);}
TileRenderer.prototype.default_view=exports.TileRendererView;TileRenderer.prototype.type='TileRenderer';TileRenderer.define({alpha:[p.Number,1.0],x_range_name:[p.String,"default"],y_range_name:[p.String,"default"],tile_source:[p.Instance,function(){return new wmts_tile_source_1.WMTSTileSource();}],render_parents:[p.Bool,true]});TileRenderer.override({level:'underlay'});return TileRenderer;})(renderer_1.Renderer);},{"../renderers/renderer":"models/renderers/renderer","./image_pool":"models/tiles/image_pool","./wmts_tile_source":"models/tiles/wmts_tile_source","core/dom":"core/dom","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/tiles/tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var image_pool_1=require("./image_pool");var tile_utils_1=require("./tile_utils");var logging_1=require("core/logging");var p=require("core/properties");var model_1=require("../../model");exports.TileSource=(function(superClass){extend(TileSource,superClass);TileSource.prototype.type='TileSource';TileSource.define({url:[p.String,''],tile_size:[p.Number,256],max_zoom:[p.Number,30],min_zoom:[p.Number,0],extra_url_vars:[p.Any,{}],attribution:[p.String,''],x_origin_offset:[p.Number],y_origin_offset:[p.Number],initial_resolution:[p.Number]});TileSource.prototype.initialize=function(options){TileSource.__super__.initialize.call(this,options);return this.normalize_case();};function TileSource(options){if(options==null){options={};}
TileSource.__super__.constructor.apply(this,arguments);this.utils=new tile_utils_1.ProjectionUtils();this.pool=new image_pool_1.ImagePool();this.tiles={};this.normalize_case();}
TileSource.prototype.string_lookup_replace=function(str,lookup){var key,result_str,value;result_str=str;for(key in lookup){value=lookup[key];result_str=result_str.replace('{'+key+'}',value.toString());}
return result_str;};TileSource.prototype.normalize_case=function(){'Note: should probably be refactored into subclasses.';var url;url=this.url;url=url.replace('{x}','{X}');url=url.replace('{y}','{Y}');url=url.replace('{z}','{Z}');url=url.replace('{q}','{Q}');url=url.replace('{xmin}','{XMIN}');url=url.replace('{ymin}','{YMIN}');url=url.replace('{xmax}','{XMAX}');url=url.replace('{ymax}','{YMAX}');return this.url=url;};TileSource.prototype.update=function(){var key,ref,results,tile;logging_1.logger.debug("TileSource: tile cache count: "+(Object.keys(this.tiles).length));ref=this.tiles;results=[];for(key in ref){tile=ref[key];tile.current=false;results.push(tile.retain=false);}
return results;};TileSource.prototype.tile_xyz_to_key=function(x,y,z){var key;key=x+":"+y+":"+z;return key;};TileSource.prototype.key_to_tile_xyz=function(key){var c;return(function(){var i,len,ref,results;ref=key.split(':');results=[];for(i=0,len=ref.length;i<len;i++){c=ref[i];results.push(parseInt(c));}
return results;})();};TileSource.prototype.sort_tiles_from_center=function(tiles,tile_extent){var center_x,center_y,txmax,txmin,tymax,tymin;txmin=tile_extent[0],tymin=tile_extent[1],txmax=tile_extent[2],tymax=tile_extent[3];center_x=(txmax-txmin)/2+txmin;center_y=(tymax-tymin)/2+tymin;tiles.sort(function(a,b){var a_distance,b_distance;a_distance=Math.sqrt(Math.pow(center_x-a[0],2)+Math.pow(center_y-a[1],2));b_distance=Math.sqrt(Math.pow(center_x-b[0],2)+Math.pow(center_y-b[1],2));return a_distance-b_distance;});return tiles;};TileSource.prototype.prune_tiles=function(){var key,ref,ref1,results,tile;ref=this.tiles;for(key in ref){tile=ref[key];tile.retain=tile.current||tile.tile_coords[2]<3;if(tile.current){this.retain_neighbors(tile);this.retain_children(tile);this.retain_parents(tile);}}
ref1=this.tiles;results=[];for(key in ref1){tile=ref1[key];if(!tile.retain){results.push(this.remove_tile(key));}
else{results.push(void 0);}}
return results;};TileSource.prototype.remove_tile=function(key){var tile;tile=this.tiles[key];if(tile!=null){this.pool.push(tile.img);return delete this.tiles[key];}};TileSource.prototype.get_image_url=function(x,y,z){var image_url;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);return image_url.replace("{X}",x).replace('{Y}',y).replace("{Z}",z);};TileSource.prototype.retain_neighbors=function(reference_tile){throw new Error("Not Implemented");};TileSource.prototype.retain_parents=function(reference_tile){throw new Error("Not Implemented");};TileSource.prototype.retain_children=function(reference_tile){throw new Error("Not Implemented");};TileSource.prototype.tile_xyz_to_quadkey=function(x,y,z){throw new Error("Not Implemented");};TileSource.prototype.quadkey_to_tile_xyz=function(quadkey){throw new Error("Not Implemented");};return TileSource;})(model_1.Model);},{"../../model":"model","./image_pool":"models/tiles/image_pool","./tile_utils":"models/tiles/tile_utils","core/logging":"core/logging","core/properties":"core/properties"}],"models/tiles/tile_utils":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var proj4_1=require("core/util/proj4");exports.ProjectionUtils=(function(){function ProjectionUtils(){this.origin_shift=2*Math.PI*6378137/2.0;}
ProjectionUtils.prototype.geographic_to_meters=function(xLon,yLat){return proj4_1.proj4(proj4_1.wgs84,proj4_1.mercator,[xLon,yLat]);};ProjectionUtils.prototype.meters_to_geographic=function(mx,my){return proj4_1.proj4(proj4_1.mercator,proj4_1.wgs84,[mx,my]);};ProjectionUtils.prototype.geographic_extent_to_meters=function(extent){var ref,ref1,xmax,xmin,ymax,ymin;xmin=extent[0],ymin=extent[1],xmax=extent[2],ymax=extent[3];ref=this.geographic_to_meters(xmin,ymin),xmin=ref[0],ymin=ref[1];ref1=this.geographic_to_meters(xmax,ymax),xmax=ref1[0],ymax=ref1[1];return[xmin,ymin,xmax,ymax];};ProjectionUtils.prototype.meters_extent_to_geographic=function(extent){var ref,ref1,xmax,xmin,ymax,ymin;xmin=extent[0],ymin=extent[1],xmax=extent[2],ymax=extent[3];ref=this.meters_to_geographic(xmin,ymin),xmin=ref[0],ymin=ref[1];ref1=this.meters_to_geographic(xmax,ymax),xmax=ref1[0],ymax=ref1[1];return[xmin,ymin,xmax,ymax];};return ProjectionUtils;})();},{"core/util/proj4":"core/util/proj4"}],"models/tiles/tms_tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var mercator_tile_source_1=require("./mercator_tile_source");exports.TMSTileSource=(function(superClass){extend(TMSTileSource,superClass);function TMSTileSource(){return TMSTileSource.__super__.constructor.apply(this,arguments);}
TMSTileSource.prototype.type='TMSTileSource';TMSTileSource.prototype.get_image_url=function(x,y,z){var image_url;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);return image_url.replace("{X}",x).replace('{Y}',y).replace("{Z}",z);};return TMSTileSource;})(mercator_tile_source_1.MercatorTileSource);},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tiles/wmts_tile_source":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var mercator_tile_source_1=require("./mercator_tile_source");exports.WMTSTileSource=(function(superClass){extend(WMTSTileSource,superClass);function WMTSTileSource(){return WMTSTileSource.__super__.constructor.apply(this,arguments);}
WMTSTileSource.prototype.type='WMTSTileSource';WMTSTileSource.prototype.get_image_url=function(x,y,z){var image_url,ref;image_url=this.string_lookup_replace(this.url,this.extra_url_vars);ref=this.tms_to_wmts(x,y,z),x=ref[0],y=ref[1],z=ref[2];return image_url.replace("{X}",x).replace('{Y}',y).replace("{Z}",z);};return WMTSTileSource;})(mercator_tile_source_1.MercatorTileSource);},{"./mercator_tile_source":"models/tiles/mercator_tile_source"}],"models/tools/actions/action_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var button_tool_1=require("../button_tool");exports.ActionToolButtonView=(function(superClass){extend(ActionToolButtonView,superClass);function ActionToolButtonView(){return ActionToolButtonView.__super__.constructor.apply(this,arguments);}
ActionToolButtonView.prototype._clicked=function(){return this.model.trigger('do');};return ActionToolButtonView;})(button_tool_1.ButtonToolButtonView);exports.ActionToolView=(function(superClass){extend(ActionToolView,superClass);function ActionToolView(){return ActionToolView.__super__.constructor.apply(this,arguments);}
ActionToolView.prototype.initialize=function(options){ActionToolView.__super__.initialize.call(this,options);return this.listenTo(this.model,'do',this["do"]);};return ActionToolView;})(button_tool_1.ButtonToolView);exports.ActionTool=(function(superClass){extend(ActionTool,superClass);function ActionTool(){return ActionTool.__super__.constructor.apply(this,arguments);}
return ActionTool;})(button_tool_1.ButtonTool);},{"../button_tool":"models/tools/button_tool"}],"models/tools/actions/help_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");var p=require("core/properties");exports.HelpToolView=(function(superClass){extend(HelpToolView,superClass);function HelpToolView(){return HelpToolView.__super__.constructor.apply(this,arguments);}
HelpToolView.prototype["do"]=function(){return window.open(this.model.redirect);};return HelpToolView;})(action_tool_1.ActionToolView);exports.HelpTool=(function(superClass){extend(HelpTool,superClass);function HelpTool(){return HelpTool.__super__.constructor.apply(this,arguments);}
HelpTool.prototype.default_view=exports.HelpToolView;HelpTool.prototype.type="HelpTool";HelpTool.prototype.tool_name="Help";HelpTool.prototype.icon="bk-tool-icon-help";HelpTool.define({help_tooltip:[p.String,'Click the question mark to learn more about Bokeh plot tools.'],redirect:[p.String,'http://bokeh.pydata.org/en/latest/docs/user_guide/tools.html']});HelpTool.getters({tooltip:function(){return this.help_tooltip;}});return HelpTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties"}],"models/tools/actions/redo_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");exports.RedoToolView=(function(superClass){extend(RedoToolView,superClass);function RedoToolView(){return RedoToolView.__super__.constructor.apply(this,arguments);}
RedoToolView.prototype.initialize=function(options){RedoToolView.__super__.initialize.call(this,options);return this.listenTo(this.plot_view,"state_changed",(function(_this){return function(){return _this.model.disabled=!_this.plot_view.can_redo();};})(this));};RedoToolView.prototype["do"]=function(){return this.plot_view.redo();};return RedoToolView;})(action_tool_1.ActionToolView);exports.RedoTool=(function(superClass){extend(RedoTool,superClass);function RedoTool(){return RedoTool.__super__.constructor.apply(this,arguments);}
RedoTool.prototype.default_view=exports.RedoToolView;RedoTool.prototype.type="RedoTool";RedoTool.prototype.tool_name="Redo";RedoTool.prototype.icon="bk-tool-icon-redo";RedoTool.override({disabled:true});return RedoTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/reset_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");var p=require("core/properties");exports.ResetToolView=(function(superClass){extend(ResetToolView,superClass);function ResetToolView(){return ResetToolView.__super__.constructor.apply(this,arguments);}
ResetToolView.prototype["do"]=function(){this.plot_view.clear_state();this.plot_view.reset_range();this.plot_view.reset_selection();if(this.model.reset_size){return this.plot_view.reset_dimensions();}};return ResetToolView;})(action_tool_1.ActionToolView);exports.ResetTool=(function(superClass){extend(ResetTool,superClass);function ResetTool(){return ResetTool.__super__.constructor.apply(this,arguments);}
ResetTool.prototype.default_view=exports.ResetToolView;ResetTool.prototype.type="ResetTool";ResetTool.prototype.tool_name="Reset";ResetTool.prototype.icon="bk-tool-icon-reset";ResetTool.define({reset_size:[p.Bool,true]});return ResetTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties"}],"models/tools/actions/save_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");exports.SaveToolView=(function(superClass){extend(SaveToolView,superClass);function SaveToolView(){return SaveToolView.__super__.constructor.apply(this,arguments);}
SaveToolView.prototype["do"]=function(){return this.plot_view.save("bokeh_plot.png");};return SaveToolView;})(action_tool_1.ActionToolView);exports.SaveTool=(function(superClass){extend(SaveTool,superClass);function SaveTool(){return SaveTool.__super__.constructor.apply(this,arguments);}
SaveTool.prototype.default_view=exports.SaveToolView;SaveTool.prototype.type="SaveTool";SaveTool.prototype.tool_name="Save";SaveTool.prototype.icon="bk-tool-icon-save";return SaveTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/undo_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");exports.UndoToolView=(function(superClass){extend(UndoToolView,superClass);function UndoToolView(){return UndoToolView.__super__.constructor.apply(this,arguments);}
UndoToolView.prototype.initialize=function(options){UndoToolView.__super__.initialize.call(this,options);return this.listenTo(this.plot_view,"state_changed",(function(_this){return function(){return _this.model.disabled=!_this.plot_view.can_undo();};})(this));};UndoToolView.prototype["do"]=function(){return this.plot_view.undo();};return UndoToolView;})(action_tool_1.ActionToolView);exports.UndoTool=(function(superClass){extend(UndoTool,superClass);function UndoTool(){return UndoTool.__super__.constructor.apply(this,arguments);}
UndoTool.prototype.default_view=exports.UndoToolView;UndoTool.prototype.type="UndoTool";UndoTool.prototype.tool_name="Undo";UndoTool.prototype.icon="bk-tool-icon-undo";UndoTool.override({disabled:true});return UndoTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool"}],"models/tools/actions/zoom_in_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");var zoom_1=require("core/util/zoom");var p=require("core/properties");exports.ZoomInToolView=(function(superClass){extend(ZoomInToolView,superClass);function ZoomInToolView(){return ZoomInToolView.__super__.constructor.apply(this,arguments);}
ZoomInToolView.prototype["do"]=function(){var dims,frame,h_axis,v_axis,zoom_info;frame=this.plot_model.frame;dims=this.model.dimensions;h_axis=dims==='width'||dims==='both';v_axis=dims==='height'||dims==='both';zoom_info=zoom_1.scale_range(frame,this.model.factor,h_axis,v_axis);this.plot_view.push_state('zoom_out',{range:zoom_info});this.plot_view.update_range(zoom_info,false,true);this.plot_view.interactive_timestamp=Date.now();return null;};return ZoomInToolView;})(action_tool_1.ActionToolView);exports.ZoomInTool=(function(superClass){extend(ZoomInTool,superClass);function ZoomInTool(){return ZoomInTool.__super__.constructor.apply(this,arguments);}
ZoomInTool.prototype.default_view=exports.ZoomInToolView;ZoomInTool.prototype.type="ZoomInTool";ZoomInTool.prototype.tool_name="Zoom In";ZoomInTool.prototype.icon="bk-tool-icon-zoom-in";ZoomInTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions);}});ZoomInTool.define({factor:[p.Percent,0.1],dimensions:[p.Dimensions,"both"]});return ZoomInTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/actions/zoom_out_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var action_tool_1=require("./action_tool");var zoom_1=require("core/util/zoom");var p=require("core/properties");exports.ZoomOutToolView=(function(superClass){extend(ZoomOutToolView,superClass);function ZoomOutToolView(){return ZoomOutToolView.__super__.constructor.apply(this,arguments);}
ZoomOutToolView.prototype["do"]=function(){var dims,frame,h_axis,v_axis,zoom_info;frame=this.plot_model.frame;dims=this.model.dimensions;h_axis=dims==='width'||dims==='both';v_axis=dims==='height'||dims==='both';zoom_info=zoom_1.scale_range(frame,-this.model.factor,h_axis,v_axis);this.plot_view.push_state('zoom_out',{range:zoom_info});this.plot_view.update_range(zoom_info,false,true);this.plot_view.interactive_timestamp=Date.now();return null;};return ZoomOutToolView;})(action_tool_1.ActionToolView);exports.ZoomOutTool=(function(superClass){extend(ZoomOutTool,superClass);function ZoomOutTool(){return ZoomOutTool.__super__.constructor.apply(this,arguments);}
ZoomOutTool.prototype.default_view=exports.ZoomOutToolView;ZoomOutTool.prototype.type="ZoomOutTool";ZoomOutTool.prototype.tool_name="Zoom Out";ZoomOutTool.prototype.icon="bk-tool-icon-zoom-out";ZoomOutTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions);}});ZoomOutTool.define({factor:[p.Percent,0.1],dimensions:[p.Dimensions,"both"]});return ZoomOutTool;})(action_tool_1.ActionTool);},{"./action_tool":"models/tools/actions/action_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/button_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var bokeh_view_1=require("core/bokeh_view");var tool_1=require("./tool");var dom_1=require("core/dom");var p=require("core/properties");exports.ButtonToolButtonView=(function(superClass){extend(ButtonToolButtonView,superClass);function ButtonToolButtonView(){return ButtonToolButtonView.__super__.constructor.apply(this,arguments);}
ButtonToolButtonView.prototype.className="bk-toolbar-button";ButtonToolButtonView.prototype.initialize=function(options){ButtonToolButtonView.__super__.initialize.call(this,options);this.listenTo(this.model,'change',(function(_this){return function(){return _this.render();};})(this));this.el.addEventListener("click",(function(_this){return function(e){return _this._clicked(e);};})(this));return this.render();};ButtonToolButtonView.prototype.render=function(){var icon,tip;dom_1.empty(this.el);this.el.disabled=this.model.disabled;icon=dom_1.div({"class":['bk-btn-icon',this.model.icon]});tip=dom_1.span({"class":'bk-tip'},this.model.tooltip);this.el.appendChild(icon);return this.el.appendChild(tip);};ButtonToolButtonView.prototype._clicked=function(e){};return ButtonToolButtonView;})(bokeh_view_1.BokehView);exports.ButtonToolView=(function(superClass){extend(ButtonToolView,superClass);function ButtonToolView(){return ButtonToolView.__super__.constructor.apply(this,arguments);}
return ButtonToolView;})(tool_1.ToolView);exports.ButtonTool=(function(superClass){extend(ButtonTool,superClass);function ButtonTool(){return ButtonTool.__super__.constructor.apply(this,arguments);}
ButtonTool.prototype.icon=null;ButtonTool.getters({tooltip:function(){return this.tool_name;}});ButtonTool.internal({disabled:[p.Boolean,false]});return ButtonTool;})(tool_1.Tool);},{"./tool":"models/tools/tool","core/bokeh_view":"core/bokeh_view","core/dom":"core/dom","core/properties":"core/properties"}],"models/tools/gestures/box_select_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DEFAULT_BOX_OVERLAY,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var select_tool_1=require("./select_tool");var box_annotation_1=require("../../annotations/box_annotation");var p=require("core/properties");exports.BoxSelectToolView=(function(superClass){extend(BoxSelectToolView,superClass);function BoxSelectToolView(){return BoxSelectToolView.__super__.constructor.apply(this,arguments);}
BoxSelectToolView.prototype._pan_start=function(e){var canvas;canvas=this.plot_view.canvas;this._baseboint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];return null;};BoxSelectToolView.prototype._pan=function(e){var append,canvas,curpoint,dims,frame,ref,ref1,vxlim,vylim;canvas=this.plot_view.canvas;curpoint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];frame=this.plot_model.frame;dims=this.model.dimensions;ref=this.model._get_dim_limits(this._baseboint,curpoint,frame,dims),vxlim=ref[0],vylim=ref[1];this.model.overlay.update({left:vxlim[0],right:vxlim[1],top:vylim[1],bottom:vylim[0]});if(this.model.select_every_mousemove){append=(ref1=e.srcEvent.shiftKey)!=null?ref1:false;this._select(vxlim,vylim,false,append);}
return null;};BoxSelectToolView.prototype._pan_end=function(e){var append,canvas,curpoint,dims,frame,ref,ref1,vxlim,vylim;canvas=this.plot_view.canvas;curpoint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];frame=this.plot_model.frame;dims=this.model.dimensions;ref=this.model._get_dim_limits(this._baseboint,curpoint,frame,dims),vxlim=ref[0],vylim=ref[1];append=(ref1=e.srcEvent.shiftKey)!=null?ref1:false;this._select(vxlim,vylim,true,append);this.model.overlay.update({left:null,right:null,top:null,bottom:null});this._baseboint=null;this.plot_view.push_state('box_select',{selection:this.plot_view.get_selection()});return null;};BoxSelectToolView.prototype._select=function(arg,arg1,final,append){var ds,geometry,i,len,r,ref,sm,vx0,vx1,vy0,vy1;vx0=arg[0],vx1=arg[1];vy0=arg1[0],vy1=arg1[1];if(append==null){append=false;}
geometry={type:'rect',vx0:vx0,vx1:vx1,vy0:vy0,vy1:vy1};ref=this.model.computed_renderers;for(i=0,len=ref.length;i<len;i++){r=ref[i];ds=r.data_source;sm=ds.selection_manager;sm.select(this,this.plot_view.renderer_views[r.id],geometry,final,append);}
if(this.model.callback!=null){this._emit_callback(geometry);}
this._save_geometry(geometry,final,append);return null;};BoxSelectToolView.prototype._emit_callback=function(geometry){var canvas,frame,r,xmapper,ymapper;r=this.model.computed_renderers[0];canvas=this.plot_model.canvas;frame=this.plot_model.frame;geometry['sx0']=canvas.vx_to_sx(geometry.vx0);geometry['sx1']=canvas.vx_to_sx(geometry.vx1);geometry['sy0']=canvas.vy_to_sy(geometry.vy0);geometry['sy1']=canvas.vy_to_sy(geometry.vy1);xmapper=frame.x_mappers[r.x_range_name];ymapper=frame.y_mappers[r.y_range_name];geometry['x0']=xmapper.map_from_target(geometry.vx0);geometry['x1']=xmapper.map_from_target(geometry.vx1);geometry['y0']=ymapper.map_from_target(geometry.vy0);geometry['y1']=ymapper.map_from_target(geometry.vy1);this.model.callback.execute(this.model,{geometry:geometry});};return BoxSelectToolView;})(select_tool_1.SelectToolView);DEFAULT_BOX_OVERLAY=function(){return new box_annotation_1.BoxAnnotation({level:"overlay",render_mode:"css",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:0.5,line_color:"black",line_alpha:1.0,line_width:2,line_dash:[4,4]});};exports.BoxSelectTool=(function(superClass){extend(BoxSelectTool,superClass);function BoxSelectTool(){return BoxSelectTool.__super__.constructor.apply(this,arguments);}
BoxSelectTool.prototype.default_view=exports.BoxSelectToolView;BoxSelectTool.prototype.type="BoxSelectTool";BoxSelectTool.prototype.tool_name="Box Select";BoxSelectTool.prototype.icon="bk-tool-icon-box-select";BoxSelectTool.prototype.event_type="pan";BoxSelectTool.prototype.default_order=30;BoxSelectTool.define({dimensions:[p.Dimensions,"both"],select_every_mousemove:[p.Bool,false],callback:[p.Instance],overlay:[p.Instance,DEFAULT_BOX_OVERLAY]});BoxSelectTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions);}});return BoxSelectTool;})(select_tool_1.SelectTool);},{"../../annotations/box_annotation":"models/annotations/box_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties"}],"models/tools/gestures/box_zoom_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DEFAULT_BOX_OVERLAY,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var box_annotation_1=require("../../annotations/box_annotation");var p=require("core/properties");exports.BoxZoomToolView=(function(superClass){extend(BoxZoomToolView,superClass);function BoxZoomToolView(){return BoxZoomToolView.__super__.constructor.apply(this,arguments);}
BoxZoomToolView.prototype._match_aspect=function(basepoint,curpoint,frame){var a,bottom,h,hend,hstart,left,ref,ref1,right,top,va,vend,vh,vstart,vw,w,xmod,ymod;hend=frame.h_range.end;hstart=frame.h_range.start;vend=frame.v_range.end;vstart=frame.v_range.start;w=hend-hstart;h=vend-vstart;a=w/h;vw=Math.abs(basepoint[0]-curpoint[0]);vh=Math.abs(basepoint[1]-curpoint[1]);if(vh===0){va=0;}
else{va=vw/vh;}
if(va>=a){ref=[1,va/a],xmod=ref[0],ymod=ref[1];}
else{ref1=[a/va,1],xmod=ref1[0],ymod=ref1[1];}
if(basepoint[0]<=curpoint[0]){left=basepoint[0];right=basepoint[0]+vw*xmod;if(right>hend){right=hend;}}
else{right=basepoint[0];left=basepoint[0]-vw*xmod;if(left<hstart){left=hstart;}}
vw=Math.abs(right-left);if(basepoint[1]<=curpoint[1]){bottom=basepoint[1];top=basepoint[1]+vw/a;if(top>vend){top=vend;}}
else{top=basepoint[1];bottom=basepoint[1]-vw/a;if(bottom<vstart){bottom=vstart;}}
vh=Math.abs(top-bottom);if(basepoint[0]<=curpoint[0]){right=basepoint[0]+a*vh;}
else{left=basepoint[0]-a*vh;}
return[[left,right],[bottom,top]];};BoxZoomToolView.prototype._pan_start=function(e){var canvas;canvas=this.plot_view.canvas;this._baseboint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];return null;};BoxZoomToolView.prototype._pan=function(e){var canvas,curpoint,dims,frame,ref,ref1,vx,vy;canvas=this.plot_view.canvas;curpoint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];frame=this.plot_model.frame;dims=this.model.dimensions;if(this.model.match_aspect&&dims==='both'){ref=this._match_aspect(this._baseboint,curpoint,frame),vx=ref[0],vy=ref[1];}
else{ref1=this.model._get_dim_limits(this._baseboint,curpoint,frame,dims),vx=ref1[0],vy=ref1[1];}
this.model.overlay.update({left:vx[0],right:vx[1],top:vy[1],bottom:vy[0]});return null;};BoxZoomToolView.prototype._pan_end=function(e){var canvas,curpoint,dims,frame,ref,ref1,vx,vy;canvas=this.plot_view.canvas;curpoint=[canvas.sx_to_vx(e.bokeh.sx),canvas.sy_to_vy(e.bokeh.sy)];frame=this.plot_model.frame;dims=this.model.dimensions;if(this.model.match_aspect&&dims==='both'){ref=this._match_aspect(this._baseboint,curpoint,frame),vx=ref[0],vy=ref[1];}
else{ref1=this.model._get_dim_limits(this._baseboint,curpoint,frame,dims),vx=ref1[0],vy=ref1[1];}
this._update(vx,vy);this.model.overlay.update({left:null,right:null,top:null,bottom:null});this._baseboint=null;return null;};BoxZoomToolView.prototype._update=function(vx,vy){var end,mapper,name,ref,ref1,ref2,ref3,start,xrs,yrs,zoom_info;if(Math.abs(vx[1]-vx[0])<=5||Math.abs(vy[1]-vy[0])<=5){return;}
xrs={};ref=this.plot_view.frame.x_mappers;for(name in ref){mapper=ref[name];ref1=mapper.v_map_from_target(vx,true),start=ref1[0],end=ref1[1];xrs[name]={start:start,end:end};}
yrs={};ref2=this.plot_view.frame.y_mappers;for(name in ref2){mapper=ref2[name];ref3=mapper.v_map_from_target(vy,true),start=ref3[0],end=ref3[1];yrs[name]={start:start,end:end};}
zoom_info={xrs:xrs,yrs:yrs};this.plot_view.push_state('box_zoom',{range:zoom_info});return this.plot_view.update_range(zoom_info);};return BoxZoomToolView;})(gesture_tool_1.GestureToolView);DEFAULT_BOX_OVERLAY=function(){return new box_annotation_1.BoxAnnotation({level:"overlay",render_mode:"css",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:0.5,line_color:"black",line_alpha:1.0,line_width:2,line_dash:[4,4]});};exports.BoxZoomTool=(function(superClass){extend(BoxZoomTool,superClass);function BoxZoomTool(){return BoxZoomTool.__super__.constructor.apply(this,arguments);}
BoxZoomTool.prototype.default_view=exports.BoxZoomToolView;BoxZoomTool.prototype.type="BoxZoomTool";BoxZoomTool.prototype.tool_name="Box Zoom";BoxZoomTool.prototype.icon="bk-tool-icon-box-zoom";BoxZoomTool.prototype.event_type="pan";BoxZoomTool.prototype.default_order=20;BoxZoomTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions);}});BoxZoomTool.define({dimensions:[p.Dimensions,"both"],overlay:[p.Instance,DEFAULT_BOX_OVERLAY],match_aspect:[p.Bool,false]});return BoxZoomTool;})(gesture_tool_1.GestureTool);},{"../../annotations/box_annotation":"models/annotations/box_annotation","./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/gesture_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var button_tool_1=require("../button_tool");exports.GestureToolView=(function(superClass){extend(GestureToolView,superClass);function GestureToolView(){return GestureToolView.__super__.constructor.apply(this,arguments);}
return GestureToolView;})(button_tool_1.ButtonToolView);exports.GestureTool=(function(superClass){extend(GestureTool,superClass);function GestureTool(){return GestureTool.__super__.constructor.apply(this,arguments);}
GestureTool.prototype.event_type=null;GestureTool.prototype.default_order=null;return GestureTool;})(button_tool_1.ButtonTool);},{"../button_tool":"models/tools/button_tool"}],"models/tools/gestures/lasso_select_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DEFAULT_POLY_OVERLAY,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var select_tool_1=require("./select_tool");var poly_annotation_1=require("../../annotations/poly_annotation");var p=require("core/properties");exports.LassoSelectToolView=(function(superClass){extend(LassoSelectToolView,superClass);function LassoSelectToolView(){return LassoSelectToolView.__super__.constructor.apply(this,arguments);}
LassoSelectToolView.prototype.initialize=function(options){LassoSelectToolView.__super__.initialize.call(this,options);this.listenTo(this.model,'change:active',this._active_change);return this.data=null;};LassoSelectToolView.prototype._active_change=function(){if(!this.model.active){return this._clear_overlay();}};LassoSelectToolView.prototype._keyup=function(e){if(e.keyCode===13){return this._clear_overlay();}};LassoSelectToolView.prototype._pan_start=function(e){var canvas,vx,vy;canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);this.data={vx:[vx],vy:[vy]};return null;};LassoSelectToolView.prototype._pan=function(e){var append,canvas,h_range,overlay,ref,v_range,vx,vy;canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);h_range=this.plot_model.frame.h_range;v_range=this.plot_model.frame.v_range;if(vx>h_range.end){vx=h_range.end;}
if(vx<h_range.start){vx=h_range.start;}
if(vy>v_range.end){vy=v_range.end;}
if(vy<v_range.start){vy=v_range.start;}
this.data.vx.push(vx);this.data.vy.push(vy);overlay=this.model.overlay;overlay.update({xs:this.data.vx,ys:this.data.vy});if(this.model.select_every_mousemove){append=(ref=e.srcEvent.shiftKey)!=null?ref:false;return this._select(this.data.vx,this.data.vy,false,append);}};LassoSelectToolView.prototype._pan_end=function(e){var append,ref;this._clear_overlay();append=(ref=e.srcEvent.shiftKey)!=null?ref:false;this._select(this.data.vx,this.data.vy,true,append);return this.plot_view.push_state('lasso_select',{selection:this.plot_view.get_selection()});};LassoSelectToolView.prototype._clear_overlay=function(){return this.model.overlay.update({xs:[],ys:[]});};LassoSelectToolView.prototype._select=function(vx,vy,final,append){var ds,geometry,i,len,r,ref,sm;geometry={type:'poly',vx:vx,vy:vy};ref=this.model.computed_renderers;for(i=0,len=ref.length;i<len;i++){r=ref[i];ds=r.data_source;sm=ds.selection_manager;sm.select(this,this.plot_view.renderer_views[r.id],geometry,final,append);}
if(this.model.callback!=null){this._emit_callback(geometry);}
this._save_geometry(geometry,final,append);return null;};LassoSelectToolView.prototype._emit_callback=function(geometry){var canvas,frame,r,xmapper,ymapper;r=this.model.computed_renderers[0];canvas=this.plot_model.canvas;frame=this.plot_model.frame;geometry['sx']=canvas.v_vx_to_sx(geometry.vx);geometry['sy']=canvas.v_vy_to_sy(geometry.vy);xmapper=frame.x_mappers[r.x_range_name];ymapper=frame.y_mappers[r.y_range_name];geometry['x']=xmapper.v_map_from_target(geometry.vx);geometry['y']=ymapper.v_map_from_target(geometry.vy);this.model.callback.execute(this.model,{geometry:geometry});};return LassoSelectToolView;})(select_tool_1.SelectToolView);DEFAULT_POLY_OVERLAY=function(){return new poly_annotation_1.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:"lightgrey",fill_alpha:0.5,line_color:"black",line_alpha:1.0,line_width:2,line_dash:[4,4]});};exports.LassoSelectTool=(function(superClass){extend(LassoSelectTool,superClass);function LassoSelectTool(){return LassoSelectTool.__super__.constructor.apply(this,arguments);}
LassoSelectTool.prototype.default_view=exports.LassoSelectToolView;LassoSelectTool.prototype.type="LassoSelectTool";LassoSelectTool.prototype.tool_name="Lasso Select";LassoSelectTool.prototype.icon="bk-tool-icon-lasso-select";LassoSelectTool.prototype.event_type="pan";LassoSelectTool.prototype.default_order=12;LassoSelectTool.define({select_every_mousemove:[p.Bool,true],callback:[p.Instance],overlay:[p.Instance,DEFAULT_POLY_OVERLAY]});return LassoSelectTool;})(select_tool_1.SelectTool);},{"../../annotations/poly_annotation":"models/annotations/poly_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties"}],"models/tools/gestures/pan_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var p=require("core/properties");exports.PanToolView=(function(superClass){extend(PanToolView,superClass);function PanToolView(){return PanToolView.__super__.constructor.apply(this,arguments);}
PanToolView.prototype._pan_start=function(e){var canvas,frame,hr,vr,vx,vy;this.last_dx=0;this.last_dy=0;canvas=this.plot_view.canvas;frame=this.plot_view.frame;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);if(!frame.contains(vx,vy)){hr=frame.h_range;vr=frame.v_range;if(vx<hr.start||vx>hr.end){this.v_axis_only=true;}
if(vy<vr.start||vy>vr.end){this.h_axis_only=true;}}
return this.plot_view.interactive_timestamp=Date.now();};PanToolView.prototype._pan=function(e){this._update(e.deltaX,-e.deltaY);return this.plot_view.interactive_timestamp=Date.now();};PanToolView.prototype._pan_end=function(e){this.h_axis_only=false;this.v_axis_only=false;if(this.pan_info!=null){return this.plot_view.push_state('pan',{range:this.pan_info});}};PanToolView.prototype._update=function(dx,dy){var dims,end,frame,hr,is_panning,mapper,name,new_dx,new_dy,ref,ref1,ref2,ref3,sdx,sdy,start,sx0,sx1,sx_high,sx_low,sy0,sy1,sy_high,sy_low,vr,xrs,yrs;frame=this.plot_view.frame;new_dx=dx-this.last_dx;new_dy=dy-this.last_dy;hr=frame.h_range;sx_low=hr.start-new_dx;sx_high=hr.end-new_dx;vr=frame.v_range;sy_low=vr.start-new_dy;sy_high=vr.end-new_dy;dims=this.model.dimensions;if((dims==='width'||dims==='both')&&!this.v_axis_only){sx0=sx_low;sx1=sx_high;sdx=-new_dx;}
else{sx0=hr.start;sx1=hr.end;sdx=0;}
if((dims==='height'||dims==='both')&&!this.h_axis_only){sy0=sy_low;sy1=sy_high;sdy=new_dy;}
else{sy0=vr.start;sy1=vr.end;sdy=0;}
this.last_dx=dx;this.last_dy=dy;xrs={};ref=frame.x_mappers;for(name in ref){mapper=ref[name];ref1=mapper.v_map_from_target([sx0,sx1],true),start=ref1[0],end=ref1[1];xrs[name]={start:start,end:end};}
yrs={};ref2=frame.y_mappers;for(name in ref2){mapper=ref2[name];ref3=mapper.v_map_from_target([sy0,sy1],true),start=ref3[0],end=ref3[1];yrs[name]={start:start,end:end};}
this.pan_info={xrs:xrs,yrs:yrs,sdx:sdx,sdy:sdy};this.plot_view.update_range(this.pan_info,is_panning=true);return null;};return PanToolView;})(gesture_tool_1.GestureToolView);exports.PanTool=(function(superClass){extend(PanTool,superClass);function PanTool(){return PanTool.__super__.constructor.apply(this,arguments);}
PanTool.prototype.default_view=exports.PanToolView;PanTool.prototype.type="PanTool";PanTool.prototype.tool_name="Pan";PanTool.prototype.event_type="pan";PanTool.prototype.default_order=10;PanTool.define({dimensions:[p.Dimensions,"both"]});PanTool.getters({tooltip:function(){return this._get_dim_tooltip("Pan",this.dimensions);},icon:function(){var suffix;suffix=(function(){switch(this.dimensions){case"both":return"pan";case"width":return"xpan";case"height":return"ypan";}}).call(this);return"bk-tool-icon-"+suffix;}});return PanTool;})(gesture_tool_1.GestureTool);},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/poly_select_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DEFAULT_POLY_OVERLAY,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var select_tool_1=require("./select_tool");var poly_annotation_1=require("../../annotations/poly_annotation");var p=require("core/properties");var array_1=require("core/util/array");exports.PolySelectToolView=(function(superClass){extend(PolySelectToolView,superClass);function PolySelectToolView(){return PolySelectToolView.__super__.constructor.apply(this,arguments);}
PolySelectToolView.prototype.initialize=function(options){PolySelectToolView.__super__.initialize.call(this,options);this.listenTo(this.model,'change:active',this._active_change);return this.data={vx:[],vy:[]};};PolySelectToolView.prototype._active_change=function(){if(!this.model.active){return this._clear_data();}};PolySelectToolView.prototype._keyup=function(e){if(e.keyCode===13){return this._clear_data();}};PolySelectToolView.prototype._doubletap=function(e){var append,ref;append=(ref=e.srcEvent.shiftKey)!=null?ref:false;this._select(this.data.vx,this.data.vy,true,append);return this._clear_data();};PolySelectToolView.prototype._clear_data=function(){this.data={vx:[],vy:[]};return this.model.overlay.update({xs:[],ys:[]});};PolySelectToolView.prototype._tap=function(e){var canvas,vx,vy;canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);this.data.vx.push(vx);this.data.vy.push(vy);return this.model.overlay.update({xs:array_1.copy(this.data.vx),ys:array_1.copy(this.data.vy)});};PolySelectToolView.prototype._select=function(vx,vy,final,append){var ds,geometry,i,len,r,ref,sm;geometry={type:'poly',vx:vx,vy:vy};ref=this.model.computed_renderers;for(i=0,len=ref.length;i<len;i++){r=ref[i];ds=r.data_source;sm=ds.selection_manager;sm.select(this,this.plot_view.renderer_views[r.id],geometry,final,append);}
this._save_geometry(geometry,final,append);this.plot_view.push_state('poly_select',{selection:this.plot_view.get_selection()});return null;};return PolySelectToolView;})(select_tool_1.SelectToolView);DEFAULT_POLY_OVERLAY=function(){return new poly_annotation_1.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:"lightgrey",fill_alpha:0.5,line_color:"black",line_alpha:1.0,line_width:2,line_dash:[4,4]});};exports.PolySelectTool=(function(superClass){extend(PolySelectTool,superClass);function PolySelectTool(){return PolySelectTool.__super__.constructor.apply(this,arguments);}
PolySelectTool.prototype.default_view=exports.PolySelectToolView;PolySelectTool.prototype.type="PolySelectTool";PolySelectTool.prototype.tool_name="Poly Select";PolySelectTool.prototype.icon="bk-tool-icon-polygon-select";PolySelectTool.prototype.event_type="tap";PolySelectTool.prototype.default_order=11;PolySelectTool.define({overlay:[p.Instance,DEFAULT_POLY_OVERLAY]});return PolySelectTool;})(select_tool_1.SelectTool);},{"../../annotations/poly_annotation":"models/annotations/poly_annotation","./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/gestures/resize_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var dom_1=require("core/dom");exports.ResizeToolView=(function(superClass){extend(ResizeToolView,superClass);function ResizeToolView(){return ResizeToolView.__super__.constructor.apply(this,arguments);}
ResizeToolView.prototype.className="bk-resize-popup";ResizeToolView.prototype.initialize=function(options){var wrapper;ResizeToolView.__super__.initialize.call(this,options);wrapper=this.plot_view.el.querySelector('div.bk-canvas-wrapper');wrapper.appendChild(this.el);dom_1.hide(this.el);this.active=false;return null;};ResizeToolView.prototype.activate=function(){this.active=true;this.render();return null;};ResizeToolView.prototype.deactivate=function(){this.active=false;this.render();return null;};ResizeToolView.prototype.render=function(ctx){var canvas,frame,left,top;if(this.active){canvas=this.plot_view.canvas;frame=this.plot_view.frame;left=canvas.vx_to_sx(frame.h_range.end-40);top=canvas.vy_to_sy(frame.v_range.start+40);this.el.style.position="absolute";this.el.style.top=top+"px";this.el.style.left=left+"px";dom_1.show(this.el);}
else{dom_1.hide(this.el);}
return this;};ResizeToolView.prototype._pan_start=function(e){var canvas;canvas=this.plot_view.canvas;this.ch=canvas.height;this.cw=canvas.width;this.plot_view.interactive_timestamp=Date.now();return null;};ResizeToolView.prototype._pan=function(e){this._update(e.deltaX,e.deltaY);this.plot_view.interactive_timestamp=Date.now();return null;};ResizeToolView.prototype._pan_end=function(e){return this.plot_view.push_state("resize",{dimensions:{width:this.plot_view.canvas.width,height:this.plot_view.canvas.height}});};ResizeToolView.prototype._update=function(dx,dy){var new_height,new_width;new_width=this.cw+dx;new_height=this.ch+dy;if(new_width<100||new_height<100){return;}
this.plot_view.update_dimensions(new_width,new_height);};return ResizeToolView;})(gesture_tool_1.GestureToolView);exports.ResizeTool=(function(superClass){extend(ResizeTool,superClass);function ResizeTool(){return ResizeTool.__super__.constructor.apply(this,arguments);}
ResizeTool.prototype.default_view=exports.ResizeToolView;ResizeTool.prototype.type="ResizeTool";ResizeTool.prototype.tool_name="Resize";ResizeTool.prototype.icon="bk-tool-icon-resize";ResizeTool.prototype.event_type="pan";ResizeTool.prototype.default_order=40;return ResizeTool;})(gesture_tool_1.GestureTool);},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/dom":"core/dom"}],"models/tools/gestures/select_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var glyph_renderer_1=require("../../renderers/glyph_renderer");var logging_1=require("core/logging");var p=require("core/properties");var object_1=require("core/util/object");exports.SelectToolView=(function(superClass){extend(SelectToolView,superClass);function SelectToolView(){return SelectToolView.__super__.constructor.apply(this,arguments);}
SelectToolView.prototype._keyup=function(e){var ds,j,len,r,ref,results,sm;if(e.keyCode===27){ref=this.model.computed_renderers;results=[];for(j=0,len=ref.length;j<len;j++){r=ref[j];ds=r.data_source;sm=ds.selection_manager;results.push(sm.clear());}
return results;}};SelectToolView.prototype._save_geometry=function(geometry,final,append){var g,geoms,i,j,ref,tool_events,xm,ym;g=object_1.clone(geometry);xm=this.plot_view.frame.x_mappers['default'];ym=this.plot_view.frame.y_mappers['default'];switch(g.type){case'point':g.x=xm.map_from_target(g.vx);g.y=ym.map_from_target(g.vy);break;case'rect':g.x0=xm.map_from_target(g.vx0);g.y0=ym.map_from_target(g.vy0);g.x1=xm.map_from_target(g.vx1);g.y1=ym.map_from_target(g.vy1);break;case'poly':g.x=new Array(g.vx.length);g.y=new Array(g.vy.length);for(i=j=0,ref=g.vx.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){g.x[i]=xm.map_from_target(g.vx[i]);g.y[i]=ym.map_from_target(g.vy[i]);}
break;default:logging_1.logger.debug("Unrecognized selection geometry type: '"+g.type+"'");}
if(final){tool_events=this.plot_model.plot.tool_events;if(append){geoms=tool_events.geometries;geoms.push(g);}
else{geoms=[g];}
tool_events.geometries=geoms;}
return null;};return SelectToolView;})(gesture_tool_1.GestureToolView);exports.SelectTool=(function(superClass){extend(SelectTool,superClass);function SelectTool(){return SelectTool.__super__.constructor.apply(this,arguments);}
SelectTool.define({renderers:[p.Array,[]],names:[p.Array,[]]});SelectTool.internal({multi_select_modifier:[p.String,"shift"]});SelectTool.prototype.initialize=function(attrs,options){SelectTool.__super__.initialize.call(this,attrs,options);this.define_computed_property('computed_renderers',function(){var all_renderers,names,r,renderers;renderers=this.renderers;names=this.names;if(renderers.length===0){all_renderers=this.plot.renderers;renderers=(function(){var j,len,results;results=[];for(j=0,len=all_renderers.length;j<len;j++){r=all_renderers[j];if(r instanceof glyph_renderer_1.GlyphRenderer){results.push(r);}}
return results;})();}
if(names.length>0){renderers=(function(){var j,len,results;results=[];for(j=0,len=renderers.length;j<len;j++){r=renderers[j];if(names.indexOf(r.name)>=0){results.push(r);}}
return results;})();}
return renderers;},true);this.add_dependencies('computed_renderers',this,['renderers','names','plot']);return this.add_dependencies('computed_renderers',this.plot,['renderers']);};SelectTool.getters({computed_renderers:function(){return this._get_computed('computed_renderers');}});return SelectTool;})(gesture_tool_1.GestureTool);},{"../../renderers/glyph_renderer":"models/renderers/glyph_renderer","./gesture_tool":"models/tools/gestures/gesture_tool","core/logging":"core/logging","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/tools/gestures/tap_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var select_tool_1=require("./select_tool");var p=require("core/properties");var types_1=require("core/util/types");exports.TapToolView=(function(superClass){extend(TapToolView,superClass);function TapToolView(){return TapToolView.__super__.constructor.apply(this,arguments);}
TapToolView.prototype._tap=function(e){var append,canvas,ref,vx,vy;canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);append=(ref=e.srcEvent.shiftKey)!=null?ref:false;return this._select(vx,vy,true,append);};TapToolView.prototype._select=function(vx,vy,final,append){var callback,cb_data,did_hit,ds,geometry,i,len,r,ref,sm,view;geometry={type:'point',vx:vx,vy:vy};callback=this.model.callback;this._save_geometry(geometry,final,append);cb_data={geometries:this.plot_model.plot.tool_events.geometries};ref=this.model.computed_renderers;for(i=0,len=ref.length;i<len;i++){r=ref[i];ds=r.data_source;sm=ds.selection_manager;view=this.plot_view.renderer_views[r.id];if(this.model.behavior==="select"){did_hit=sm.select(this,view,geometry,final,append);}
else{did_hit=sm.inspect(this,view,geometry,{geometry:geometry});}
if(did_hit&&(callback!=null)){if(types_1.isFunction(callback)){callback(ds,cb_data);}
else{callback.execute(ds,cb_data);}}}
if(this.model.behavior==="select"){this.plot_view.push_state('tap',{selection:this.plot_view.get_selection()});}
return null;};return TapToolView;})(select_tool_1.SelectToolView);exports.TapTool=(function(superClass){extend(TapTool,superClass);function TapTool(){return TapTool.__super__.constructor.apply(this,arguments);}
TapTool.prototype.default_view=exports.TapToolView;TapTool.prototype.type="TapTool";TapTool.prototype.tool_name="Tap";TapTool.prototype.icon="bk-tool-icon-tap-select";TapTool.prototype.event_type="tap";TapTool.prototype.default_order=10;TapTool.define({behavior:[p.String,"select"],callback:[p.Any]});return TapTool;})(select_tool_1.SelectTool);},{"./select_tool":"models/tools/gestures/select_tool","core/properties":"core/properties","core/util/types":"core/util/types"}],"models/tools/gestures/wheel_pan_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var p=require("core/properties");exports.WheelPanToolView=(function(superClass){extend(WheelPanToolView,superClass);function WheelPanToolView(){return WheelPanToolView.__super__.constructor.apply(this,arguments);}
WheelPanToolView.prototype._scroll=function(e){var factor;factor=this.model.speed*e.bokeh.delta;if(factor>0.9){factor=0.9;}
else if(factor<-0.9){factor=-0.9;}
return this._update_ranges(factor);};WheelPanToolView.prototype._update_ranges=function(factor){var end,frame,hr,mapper,name,pan_info,ref,ref1,ref2,ref3,ref4,ref5,start,sx0,sx1,sy0,sy1,vr,vx_high,vx_low,vx_range,vy_high,vy_low,vy_range,xrs,yrs;frame=this.plot_model.frame;hr=frame.h_range;vr=frame.v_range;ref=[hr.start,hr.end],vx_low=ref[0],vx_high=ref[1];ref1=[vr.start,vr.end],vy_low=ref1[0],vy_high=ref1[1];switch(this.model.dimension){case"height":vy_range=Math.abs(vy_high-vy_low);sx0=vx_low;sx1=vx_high;sy0=vy_low+vy_range*factor;sy1=vy_high+vy_range*factor;break;case"width":vx_range=Math.abs(vx_high-vx_low);sx0=vx_low-vx_range*factor;sx1=vx_high-vx_range*factor;sy0=vy_low;sy1=vy_high;}
xrs={};ref2=frame.x_mappers;for(name in ref2){mapper=ref2[name];ref3=mapper.v_map_from_target([sx0,sx1],true),start=ref3[0],end=ref3[1];xrs[name]={start:start,end:end};}
yrs={};ref4=frame.y_mappers;for(name in ref4){mapper=ref4[name];ref5=mapper.v_map_from_target([sy0,sy1],true),start=ref5[0],end=ref5[1];yrs[name]={start:start,end:end};}
pan_info={xrs:xrs,yrs:yrs,factor:factor};this.plot_view.push_state('wheel_pan',{range:pan_info});this.plot_view.update_range(pan_info,false,true);this.plot_view.interactive_timestamp=Date.now();return null;};return WheelPanToolView;})(gesture_tool_1.GestureToolView);exports.WheelPanTool=(function(superClass){extend(WheelPanTool,superClass);function WheelPanTool(){return WheelPanTool.__super__.constructor.apply(this,arguments);}
WheelPanTool.prototype.type='WheelPanTool';WheelPanTool.prototype.default_view=exports.WheelPanToolView;WheelPanTool.prototype.tool_name="Wheel Pan";WheelPanTool.prototype.icon="bk-tool-icon-wheel-pan";WheelPanTool.prototype.event_type='scroll';WheelPanTool.prototype.default_order=12;WheelPanTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimension);}});WheelPanTool.define({dimension:[p.Dimension,"width"]});WheelPanTool.internal({speed:[p.Number,1/1000]});return WheelPanTool;})(gesture_tool_1.GestureTool);},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties"}],"models/tools/gestures/wheel_zoom_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var document,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gesture_tool_1=require("./gesture_tool");var zoom_1=require("core/util/zoom");var p=require("core/properties");if(typeof document==="undefined"||document===null){document={};}
exports.WheelZoomToolView=(function(superClass){extend(WheelZoomToolView,superClass);function WheelZoomToolView(){return WheelZoomToolView.__super__.constructor.apply(this,arguments);}
WheelZoomToolView.prototype._pinch=function(e){var delta;if(e.scale>=1){delta=(e.scale-1)*20.0;}
else{delta=-20.0/e.scale;}
e.bokeh.delta=delta;return this._scroll(e);};WheelZoomToolView.prototype._scroll=function(e){var dims,factor,frame,h_axis,hr,v_axis,vr,vx,vy,zoom_info;frame=this.plot_model.frame;hr=frame.h_range;vr=frame.v_range;vx=this.plot_view.canvas.sx_to_vx(e.bokeh.sx);vy=this.plot_view.canvas.sy_to_vy(e.bokeh.sy);dims=this.model.dimensions;h_axis=(dims==='width'||dims==='both')&&(hr.min<vx&&vx<hr.max);v_axis=(dims==='height'||dims==='both')&&(vr.min<vy&&vy<vr.max);factor=this.model.speed*e.bokeh.delta;zoom_info=zoom_1.scale_range(frame,factor,h_axis,v_axis,{x:vx,y:vy});this.plot_view.push_state('wheel_zoom',{range:zoom_info});this.plot_view.update_range(zoom_info,false,true);this.plot_view.interactive_timestamp=Date.now();return null;};return WheelZoomToolView;})(gesture_tool_1.GestureToolView);exports.WheelZoomTool=(function(superClass){extend(WheelZoomTool,superClass);function WheelZoomTool(){return WheelZoomTool.__super__.constructor.apply(this,arguments);}
WheelZoomTool.prototype.default_view=exports.WheelZoomToolView;WheelZoomTool.prototype.type="WheelZoomTool";WheelZoomTool.prototype.tool_name="Wheel Zoom";WheelZoomTool.prototype.icon="bk-tool-icon-wheel-zoom";WheelZoomTool.prototype.event_type='ontouchstart'in window||navigator.maxTouchPoints>0?'pinch':'scroll';WheelZoomTool.prototype.default_order=10;WheelZoomTool.getters({tooltip:function(){return this._get_dim_tooltip(this.tool_name,this.dimensions);}});WheelZoomTool.define({dimensions:[p.Dimensions,"both"]});WheelZoomTool.internal({speed:[p.Number,1/600]});return WheelZoomTool;})(gesture_tool_1.GestureTool);},{"./gesture_tool":"models/tools/gestures/gesture_tool","core/properties":"core/properties","core/util/zoom":"core/util/zoom"}],"models/tools/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var action_tool_1=require("./actions/action_tool");exports.ActionTool=action_tool_1.ActionTool;var help_tool_1=require("./actions/help_tool");exports.HelpTool=help_tool_1.HelpTool;var redo_tool_1=require("./actions/redo_tool");exports.RedoTool=redo_tool_1.RedoTool;var reset_tool_1=require("./actions/reset_tool");exports.ResetTool=reset_tool_1.ResetTool;var save_tool_1=require("./actions/save_tool");exports.SaveTool=save_tool_1.SaveTool;var undo_tool_1=require("./actions/undo_tool");exports.UndoTool=undo_tool_1.UndoTool;var zoom_in_tool_1=require("./actions/zoom_in_tool");exports.ZoomInTool=zoom_in_tool_1.ZoomInTool;var zoom_out_tool_1=require("./actions/zoom_out_tool");exports.ZoomOutTool=zoom_out_tool_1.ZoomOutTool;var button_tool_1=require("./button_tool");exports.ButtonTool=button_tool_1.ButtonTool;var box_select_tool_1=require("./gestures/box_select_tool");exports.BoxSelectTool=box_select_tool_1.BoxSelectTool;var box_zoom_tool_1=require("./gestures/box_zoom_tool");exports.BoxZoomTool=box_zoom_tool_1.BoxZoomTool;var gesture_tool_1=require("./gestures/gesture_tool");exports.GestureTool=gesture_tool_1.GestureTool;var lasso_select_tool_1=require("./gestures/lasso_select_tool");exports.LassoSelectTool=lasso_select_tool_1.LassoSelectTool;var pan_tool_1=require("./gestures/pan_tool");exports.PanTool=pan_tool_1.PanTool;var poly_select_tool_1=require("./gestures/poly_select_tool");exports.PolySelectTool=poly_select_tool_1.PolySelectTool;var resize_tool_1=require("./gestures/resize_tool");exports.ResizeTool=resize_tool_1.ResizeTool;var select_tool_1=require("./gestures/select_tool");exports.SelectTool=select_tool_1.SelectTool;var tap_tool_1=require("./gestures/tap_tool");exports.TapTool=tap_tool_1.TapTool;var wheel_pan_tool_1=require("./gestures/wheel_pan_tool");exports.WheelPanTool=wheel_pan_tool_1.WheelPanTool;var wheel_zoom_tool_1=require("./gestures/wheel_zoom_tool");exports.WheelZoomTool=wheel_zoom_tool_1.WheelZoomTool;var crosshair_tool_1=require("./inspectors/crosshair_tool");exports.CrosshairTool=crosshair_tool_1.CrosshairTool;var hover_tool_1=require("./inspectors/hover_tool");exports.HoverTool=hover_tool_1.HoverTool;var inspect_tool_1=require("./inspectors/inspect_tool");exports.InspectTool=inspect_tool_1.InspectTool;var tool_1=require("./tool");exports.Tool=tool_1.Tool;var tool_events_1=require("./tool_events");exports.ToolEvents=tool_events_1.ToolEvents;var tool_proxy_1=require("./tool_proxy");exports.ToolProxy=tool_proxy_1.ToolProxy;var toolbar_1=require("./toolbar");exports.Toolbar=toolbar_1.Toolbar;var toolbar_base_1=require("./toolbar_base");exports.ToolbarBase=toolbar_base_1.ToolbarBase;var toolbar_box_1=require("./toolbar_box");exports.ToolbarBoxToolbar=toolbar_box_1.ToolbarBoxToolbar;var toolbar_box_2=require("./toolbar_box");exports.ToolbarBox=toolbar_box_2.ToolbarBox;},{"./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./actions/redo_tool":"models/tools/actions/redo_tool","./actions/reset_tool":"models/tools/actions/reset_tool","./actions/save_tool":"models/tools/actions/save_tool","./actions/undo_tool":"models/tools/actions/undo_tool","./actions/zoom_in_tool":"models/tools/actions/zoom_in_tool","./actions/zoom_out_tool":"models/tools/actions/zoom_out_tool","./button_tool":"models/tools/button_tool","./gestures/box_select_tool":"models/tools/gestures/box_select_tool","./gestures/box_zoom_tool":"models/tools/gestures/box_zoom_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./gestures/lasso_select_tool":"models/tools/gestures/lasso_select_tool","./gestures/pan_tool":"models/tools/gestures/pan_tool","./gestures/poly_select_tool":"models/tools/gestures/poly_select_tool","./gestures/resize_tool":"models/tools/gestures/resize_tool","./gestures/select_tool":"models/tools/gestures/select_tool","./gestures/tap_tool":"models/tools/gestures/tap_tool","./gestures/wheel_pan_tool":"models/tools/gestures/wheel_pan_tool","./gestures/wheel_zoom_tool":"models/tools/gestures/wheel_zoom_tool","./inspectors/crosshair_tool":"models/tools/inspectors/crosshair_tool","./inspectors/hover_tool":"models/tools/inspectors/hover_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./tool":"models/tools/tool","./tool_events":"models/tools/tool_events","./tool_proxy":"models/tools/tool_proxy","./toolbar":"models/tools/toolbar","./toolbar_base":"models/tools/toolbar_base","./toolbar_box":"models/tools/toolbar_box"}],"models/tools/inspectors/crosshair_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var inspect_tool_1=require("./inspect_tool");var span_1=require("../../annotations/span");var p=require("core/properties");var object_1=require("core/util/object");exports.CrosshairToolView=(function(superClass){extend(CrosshairToolView,superClass);function CrosshairToolView(){return CrosshairToolView.__super__.constructor.apply(this,arguments);}
CrosshairToolView.prototype._move=function(e){var canvas,frame,vx,vy;if(!this.model.active){return;}
frame=this.plot_model.frame;canvas=this.plot_model.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);if(!frame.contains(vx,vy)){vx=vy=null;}
return this._update_spans(vx,vy);};CrosshairToolView.prototype._move_exit=function(e){return this._update_spans(null,null);};CrosshairToolView.prototype._update_spans=function(x,y){var dims;dims=this.model.dimensions;if(dims==='width'||dims==='both'){this.model.spans.width.computed_location=y;}
if(dims==='height'||dims==='both'){return this.model.spans.height.computed_location=x;}};return CrosshairToolView;})(inspect_tool_1.InspectToolView);exports.CrosshairTool=(function(superClass){extend(CrosshairTool,superClass);function CrosshairTool(){return CrosshairTool.__super__.constructor.apply(this,arguments);}
CrosshairTool.prototype.default_view=exports.CrosshairToolView;CrosshairTool.prototype.type="CrosshairTool";CrosshairTool.prototype.tool_name="Crosshair";CrosshairTool.prototype.icon="bk-tool-icon-crosshair";CrosshairTool.define({dimensions:[p.Dimensions,"both"],line_color:[p.Color,'black'],line_width:[p.Number,1],line_alpha:[p.Number,1.0]});CrosshairTool.internal({location_units:[p.SpatialUnits,"screen"],render_mode:[p.RenderMode,"css"],spans:[p.Any]});CrosshairTool.getters({tooltip:function(){return this._get_dim_tooltip("Crosshair",this.dimensions);},synthetic_renderers:function(){return object_1.values(this.spans);}});CrosshairTool.prototype.initialize=function(attrs,options){CrosshairTool.__super__.initialize.call(this,attrs,options);return this.spans={width:new span_1.Span({for_hover:true,dimension:"width",render_mode:this.render_mode,location_units:this.location_units,line_color:this.line_color,line_width:this.line_width,line_alpha:this.line_alpha}),height:new span_1.Span({for_hover:true,dimension:"height",render_mode:this.render_mode,location_units:this.location_units,line_color:this.line_color,line_width:this.line_width,line_alpha:this.line_alpha})};};return CrosshairTool;})(inspect_tool_1.InspectTool);},{"../../annotations/span":"models/annotations/span","./inspect_tool":"models/tools/inspectors/inspect_tool","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/tools/inspectors/hover_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _color_to_hex,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var inspect_tool_1=require("./inspect_tool");var tooltip_1=require("../../annotations/tooltip");var glyph_renderer_1=require("../../renderers/glyph_renderer");var hittest=require("core/hittest");var templating_1=require("core/util/templating");var dom_1=require("core/dom");var p=require("core/properties");var object_1=require("core/util/object");var types_1=require("core/util/types");_color_to_hex=function(color){var blue,digits,green,red,rgb;if(color.substr(0,1)==='#'){return color;}
digits=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color);red=parseInt(digits[2]);green=parseInt(digits[3]);blue=parseInt(digits[4]);rgb=blue|(green<<8)|(red<<16);return digits[1]+'#'+rgb.toString(16);};exports.HoverToolView=(function(superClass){extend(HoverToolView,superClass);function HoverToolView(){return HoverToolView.__super__.constructor.apply(this,arguments);}
HoverToolView.prototype.bind_bokeh_events=function(){var k,len,r,ref;ref=this.model.computed_renderers;for(k=0,len=ref.length;k<len;k++){r=ref[k];this.listenTo(r.data_source,'inspect',this._update);}
return this.plot_view.canvas_view.el.style.cursor="crosshair";};HoverToolView.prototype._clear=function(){var ref,results,rid,tt;this._inspect(2e308,2e308);ref=this.model.ttmodels;results=[];for(rid in ref){tt=ref[rid];results.push(tt.clear());}
return results;};HoverToolView.prototype._move=function(e){var canvas,vx,vy;if(!this.model.active){return;}
canvas=this.plot_view.canvas;vx=canvas.sx_to_vx(e.bokeh.sx);vy=canvas.sy_to_vy(e.bokeh.sy);if(!this.plot_view.frame.contains(vx,vy)){return this._clear();}
else{return this._inspect(vx,vy);}};HoverToolView.prototype._move_exit=function(){return this._clear();};HoverToolView.prototype._inspect=function(vx,vy,e){var geometry,hovered_indexes,hovered_renderers,k,len,r,ref,sm;geometry={type:'point',vx:vx,vy:vy};if(this.model.mode==='mouse'){geometry['type']='point';}
else{geometry['type']='span';if(this.model.mode==='vline'){geometry.direction='h';}
else{geometry.direction='v';}}
hovered_indexes=[];hovered_renderers=[];ref=this.model.computed_renderers;for(k=0,len=ref.length;k<len;k++){r=ref[k];sm=r.data_source.selection_manager;sm.inspect(this,this.plot_view.renderer_views[r.id],geometry,{"geometry":geometry});}
if(this.model.callback!=null){this._emit_callback(geometry);}};HoverToolView.prototype._update=function(indices,tool,renderer,ds,arg){var canvas,d1x,d1y,d2x,d2y,data_x,data_y,dist1,dist2,frame,geometry,i,j,k,l,len,len1,pt,ref,ref1,ref10,ref11,ref12,ref13,ref2,ref3,ref4,ref5,ref6,ref7,ref8,ref9,rx,ry,sdatax,sdatay,sx,sy,tooltip,vars,vx,vy,x,xmapper,y,ymapper;geometry=arg.geometry;tooltip=(ref=this.model.ttmodels[renderer.model.id])!=null?ref:null;if(tooltip==null){return;}
tooltip.clear();if(indices['0d'].glyph===null&&indices['1d'].indices.length===0){return;}
vx=geometry.vx;vy=geometry.vy;canvas=this.plot_model.canvas;frame=this.plot_model.frame;sx=canvas.vx_to_sx(vx);sy=canvas.vy_to_sy(vy);xmapper=frame.x_mappers[renderer.model.x_range_name];ymapper=frame.y_mappers[renderer.model.y_range_name];x=xmapper.map_from_target(vx);y=ymapper.map_from_target(vy);ref1=indices['0d'].indices;for(k=0,len=ref1.length;k<len;k++){i=ref1[k];data_x=renderer.glyph._x[i+1];data_y=renderer.glyph._y[i+1];switch(this.model.line_policy){case"interp":ref2=renderer.glyph.get_interpolation_hit(i,geometry),data_x=ref2[0],data_y=ref2[1];rx=xmapper.map_to_target(data_x);ry=ymapper.map_to_target(data_y);break;case"prev":rx=canvas.sx_to_vx(renderer.glyph.sx[i]);ry=canvas.sy_to_vy(renderer.glyph.sy[i]);break;case"next":rx=canvas.sx_to_vx(renderer.glyph.sx[i+1]);ry=canvas.sy_to_vy(renderer.glyph.sy[i+1]);break;case"nearest":d1x=renderer.glyph.sx[i];d1y=renderer.glyph.sy[i];dist1=hittest.dist_2_pts(d1x,d1y,sx,sy);d2x=renderer.glyph.sx[i+1];d2y=renderer.glyph.sy[i+1];dist2=hittest.dist_2_pts(d2x,d2y,sx,sy);if(dist1<dist2){ref3=[d1x,d1y],sdatax=ref3[0],sdatay=ref3[1];}
else{ref4=[d2x,d2y],sdatax=ref4[0],sdatay=ref4[1];i=i+1;}
data_x=renderer.glyph._x[i];data_y=renderer.glyph._y[i];rx=canvas.sx_to_vx(sdatax);ry=canvas.sy_to_vy(sdatay);break;default:ref5=[vx,vy],rx=ref5[0],ry=ref5[1];}
vars={index:i,x:x,y:y,vx:vx,vy:vy,sx:sx,sy:sy,data_x:data_x,data_y:data_y,rx:rx,ry:ry};tooltip.add(rx,ry,this._render_tooltips(ds,i,vars));}
ref6=indices['1d'].indices;for(l=0,len1=ref6.length;l<len1;l++){i=ref6[l];if(!object_1.isEmpty(indices['2d'].indices)){ref7=indices['2d'].indices;for(i in ref7){j=ref7[i][0];data_x=renderer.glyph._xs[i][j];data_y=renderer.glyph._ys[i][j];switch(this.model.line_policy){case"interp":ref8=renderer.glyph.get_interpolation_hit(i,j,geometry),data_x=ref8[0],data_y=ref8[1];rx=xmapper.map_to_target(data_x);ry=ymapper.map_to_target(data_y);break;case"prev":rx=canvas.sx_to_vx(renderer.glyph.sxs[i][j]);ry=canvas.sy_to_vy(renderer.glyph.sys[i][j]);break;case"next":rx=canvas.sx_to_vx(renderer.glyph.sxs[i][j+1]);ry=canvas.sy_to_vy(renderer.glyph.sys[i][j+1]);break;case"nearest":d1x=renderer.glyph.sx[i][j];d1y=renderer.glyph.sy[i][j];dist1=hittest.dist_2_pts(d1x,d1y,sx,sy);d2x=renderer.glyph.sx[i][j+1];d2y=renderer.glyph.sy[i][j+1];dist2=hittest.dist_2_pts(d2x,d2y,sx,sy);if(dist1<dist2){ref9=[d1x,d1y],sdatax=ref9[0],sdatay=ref9[1];}
else{ref10=[d2x,d2y],sdatax=ref10[0],sdatay=ref10[1];j=j+1;}
data_x=renderer.glyph._x[i][j];data_y=renderer.glyph._y[i][j];rx=canvas.sx_to_vx(sdatax);ry=canvas.sy_to_vy(sdatay);}
vars={index:i,segment_index:j,x:x,y:y,vx:vx,vy:vy,sx:sx,sy:sy,data_x:data_x,data_y:data_y};tooltip.add(rx,ry,this._render_tooltips(ds,i,vars));}}
else{data_x=(ref11=renderer.glyph._x)!=null?ref11[i]:void 0;data_y=(ref12=renderer.glyph._y)!=null?ref12[i]:void 0;if(this.model.point_policy==='snap_to_data'){pt=renderer.glyph.get_anchor_point(this.model.anchor,i,[sx,sy]);if(pt==null){pt=renderer.glyph.get_anchor_point("center",i,[sx,sy]);}
rx=canvas.sx_to_vx(pt.x);ry=canvas.sy_to_vy(pt.y);}
else{ref13=[vx,vy],rx=ref13[0],ry=ref13[1];}
vars={index:i,x:x,y:y,vx:vx,vy:vy,sx:sx,sy:sy,data_x:data_x,data_y:data_y};tooltip.add(rx,ry,this._render_tooltips(ds,i,vars));}}
return null;};HoverToolView.prototype._emit_callback=function(geometry){var callback,canvas,data,frame,indices,obj,r,ref,xmapper,ymapper;r=this.model.computed_renderers[0];indices=this.plot_view.renderer_views[r.id].hit_test(geometry);canvas=this.plot_model.canvas;frame=this.plot_model.frame;geometry['sx']=canvas.vx_to_sx(geometry.vx);geometry['sy']=canvas.vy_to_sy(geometry.vy);xmapper=frame.x_mappers[r.x_range_name];ymapper=frame.y_mappers[r.y_range_name];geometry['x']=xmapper.map_from_target(geometry.vx);geometry['y']=ymapper.map_from_target(geometry.vy);callback=this.model.callback;ref=[callback,{index:indices,geometry:geometry}],obj=ref[0],data=ref[1];if(types_1.isFunction(callback)){callback(obj,data);}
else{callback.execute(obj,data);}};HoverToolView.prototype._render_tooltips=function(ds,i,vars){var cell,colname,color,column,el,hex,k,label,len,match,opts,ref,ref1,row,rows,swatch,tooltips,value;tooltips=this.model.tooltips;if(types_1.isString(tooltips)){el=dom_1.div();el.innerHTML=templating_1.replace_placeholders(tooltips,ds,i,vars);return el;}
else if(types_1.isFunction(tooltips)){return tooltips(ds,vars);}
else{rows=dom_1.div({style:{display:"table",borderSpacing:"2px"}});for(k=0,len=tooltips.length;k<len;k++){ref=tooltips[k],label=ref[0],value=ref[1];row=dom_1.div({style:{display:"table-row"}});rows.appendChild(row);cell=dom_1.div({style:{display:"table-cell"},"class":'bk-tooltip-row-label'},label+": ");row.appendChild(cell);cell=dom_1.div({style:{display:"table-cell"},"class":'bk-tooltip-row-value'});row.appendChild(cell);if(value.indexOf("$color")>=0){ref1=value.match(/\$color(\[.*\])?:(\w*)/),match=ref1[0],opts=ref1[1],colname=ref1[2];column=ds.get_column(colname);if(column==null){el=dom_1.span({},colname+" unknown");cell.appendChild(el);continue;}
hex=(opts!=null?opts.indexOf("hex"):void 0)>=0;swatch=(opts!=null?opts.indexOf("swatch"):void 0)>=0;color=column[i];if(color==null){el=dom_1.span({},"(null)");cell.appendChild(el);continue;}
if(hex){color=_color_to_hex(color);}
el=dom_1.span({},color);cell.appendChild(el);if(swatch){el=dom_1.span({"class":'bk-tooltip-color-block',style:{backgroundColor:color}}," ");cell.appendChild(el);}}
else{value=value.replace("$~","$data_");el=dom_1.span();el.innerHTML=templating_1.replace_placeholders(value,ds,i,vars);cell.appendChild(el);}}
return rows;}};return HoverToolView;})(inspect_tool_1.InspectToolView);exports.HoverTool=(function(superClass){extend(HoverTool,superClass);function HoverTool(){return HoverTool.__super__.constructor.apply(this,arguments);}
HoverTool.prototype.default_view=exports.HoverToolView;HoverTool.prototype.type="HoverTool";HoverTool.prototype.tool_name="Hover";HoverTool.prototype.icon="bk-tool-icon-hover";HoverTool.define({tooltips:[p.Any,[["index","$index"],["data (x, y)","($x, $y)"],["canvas (x, y)","($sx, $sy)"]]],renderers:[p.Array,[]],names:[p.Array,[]],mode:[p.String,'mouse'],point_policy:[p.String,'snap_to_data'],line_policy:[p.String,'nearest'],show_arrow:[p.Boolean,true],anchor:[p.String,'center'],attachment:[p.String,'horizontal'],callback:[p.Any]});HoverTool.prototype.initialize=function(attrs,options){HoverTool.__super__.initialize.call(this,attrs,options);this.define_computed_property('computed_renderers',function(){var all_renderers,names,r,renderers;renderers=this.renderers;names=this.names;if(renderers.length===0){all_renderers=this.plot.renderers;renderers=(function(){var k,len,results;results=[];for(k=0,len=all_renderers.length;k<len;k++){r=all_renderers[k];if(r instanceof glyph_renderer_1.GlyphRenderer){results.push(r);}}
return results;})();}
if(names.length>0){renderers=(function(){var k,len,results;results=[];for(k=0,len=renderers.length;k<len;k++){r=renderers[k];if(names.indexOf(r.name)>=0){results.push(r);}}
return results;})();}
return renderers;},true);this.add_dependencies('computed_renderers',this,['renderers','names','plot']);this.add_dependencies('computed_renderers',this.plot,['renderers']);this.define_computed_property('ttmodels',function(){var k,len,r,ref,tooltip,tooltips,ttmodels;ttmodels={};tooltips=this.tooltips;if(tooltips!=null){ref=this.computed_renderers;for(k=0,len=ref.length;k<len;k++){r=ref[k];tooltip=new tooltip_1.Tooltip({custom:types_1.isString(tooltips)||types_1.isFunction(tooltips),attachment:this.attachment,show_arrow:this.show_arrow});ttmodels[r.id]=tooltip;}}
return ttmodels;});return this.add_dependencies('ttmodels',this,['computed_renderers','tooltips']);};HoverTool.getters({computed_renderers:function(){return this._get_computed('computed_renderers');},ttmodels:function(){return this._get_computed('ttmodels');},synthetic_renderers:function(){return object_1.values(this.ttmodels);}});return HoverTool;})(inspect_tool_1.InspectTool);},{"../../annotations/tooltip":"models/annotations/tooltip","../../renderers/glyph_renderer":"models/renderers/glyph_renderer","./inspect_tool":"models/tools/inspectors/inspect_tool","core/dom":"core/dom","core/hittest":"core/hittest","core/properties":"core/properties","core/util/object":"core/util/object","core/util/templating":"core/util/templating","core/util/types":"core/util/types"}],"models/tools/inspectors/inspect_tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var button_tool_1=require("../button_tool");exports.InspectToolView=(function(superClass){extend(InspectToolView,superClass);function InspectToolView(){return InspectToolView.__super__.constructor.apply(this,arguments);}
return InspectToolView;})(button_tool_1.ButtonToolView);exports.InspectTool=(function(superClass){extend(InspectTool,superClass);function InspectTool(){return InspectTool.__super__.constructor.apply(this,arguments);}
InspectTool.prototype.event_type="move";InspectTool.override({active:true});return InspectTool;})(button_tool_1.ButtonTool);},{"../button_tool":"models/tools/button_tool"}],"models/tools/on_off_button":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var button_tool_1=require("./button_tool");exports.OnOffButtonView=(function(superClass){extend(OnOffButtonView,superClass);function OnOffButtonView(){return OnOffButtonView.__super__.constructor.apply(this,arguments);}
OnOffButtonView.prototype.render=function(){OnOffButtonView.__super__.render.call(this);if(this.model.active){return this.el.classList.add('bk-active');}
else{return this.el.classList.remove('bk-active');}};OnOffButtonView.prototype._clicked=function(){var active;active=this.model.active;return this.model.active=!active;};return OnOffButtonView;})(button_tool_1.ButtonToolButtonView);},{"./button_tool":"models/tools/button_tool"}],"models/tools/tool":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var bokeh_view_1=require("core/bokeh_view");var array_1=require("core/util/array");var model_1=require("../../model");exports.ToolView=(function(superClass){extend(ToolView,superClass);function ToolView(){return ToolView.__super__.constructor.apply(this,arguments);}
ToolView.prototype.initialize=function(options){ToolView.__super__.initialize.call(this,options);return this.plot_view=options.plot_view;};ToolView.getters({plot_model:function(){return this.plot_view.model;}});ToolView.prototype.bind_bokeh_events=function(){return this.listenTo(this.model,'change:active',(function(_this){return function(){if(_this.model.active){return _this.activate();}
else{return _this.deactivate();}};})(this));};ToolView.prototype.activate=function(){};ToolView.prototype.deactivate=function(){};return ToolView;})(bokeh_view_1.BokehView);exports.Tool=(function(superClass){extend(Tool,superClass);function Tool(){return Tool.__super__.constructor.apply(this,arguments);}
Tool.getters({synthetic_renderers:function(){return[];}});Tool.define({plot:[p.Instance]});Tool.internal({active:[p.Boolean,false]});Tool.prototype._get_dim_tooltip=function(name,dims){switch(dims){case'width':return name+" (x-axis)";case'height':return name+" (y-axis)";case'both':return name;}};Tool.prototype._get_dim_limits=function(arg,arg1,frame,dims){var hr,vr,vx0,vx1,vxlim,vy0,vy1,vylim;vx0=arg[0],vy0=arg[1];vx1=arg1[0],vy1=arg1[1];hr=frame.h_range;if(dims==='width'||dims==='both'){vxlim=[array_1.min([vx0,vx1]),array_1.max([vx0,vx1])];vxlim=[array_1.max([vxlim[0],hr.min]),array_1.min([vxlim[1],hr.max])];}
else{vxlim=[hr.min,hr.max];}
vr=frame.v_range;if(dims==='height'||dims==='both'){vylim=[array_1.min([vy0,vy1]),array_1.max([vy0,vy1])];vylim=[array_1.max([vylim[0],vr.min]),array_1.min([vylim[1],vr.max])];}
else{vylim=[vr.min,vr.max];}
return[vxlim,vylim];};return Tool;})(model_1.Model);},{"../../model":"model","core/bokeh_view":"core/bokeh_view","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/tool_events":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");var p=require("core/properties");exports.ToolEvents=(function(superClass){extend(ToolEvents,superClass);function ToolEvents(){return ToolEvents.__super__.constructor.apply(this,arguments);}
ToolEvents.prototype.type='ToolEvents';ToolEvents.define({geometries:[p.Array,[]]});return ToolEvents;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/tools/tool_proxy":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var model_1=require("../../model");exports.ToolProxy=(function(superClass){extend(ToolProxy,superClass);function ToolProxy(){return ToolProxy.__super__.constructor.apply(this,arguments);}
ToolProxy.prototype.initialize=function(options){ToolProxy.__super__.initialize.call(this,options);this.listenTo(this,'do',this["do"]);return this.listenTo(this,'change:active',this.set_active);};ToolProxy.prototype["do"]=function(){var i,len,ref,tool;ref=this.tools;for(i=0,len=ref.length;i<len;i++){tool=ref[i];tool.trigger('do');}
return null;};ToolProxy.prototype.set_active=function(){var i,len,ref,tool;ref=this.tools;for(i=0,len=ref.length;i<len;i++){tool=ref[i];tool.active=this.active;}
return null;};ToolProxy.define({tools:[p.Array,[]],active:[p.Bool,false],tooltip:[p.String],tool_name:[p.String],disabled:[p.Bool,false],event_type:[p.String],icon:[p.String]});ToolProxy.prototype._clicked=function(){var active;active=this.model.active;return this.model.active=!active;};return ToolProxy;})(model_1.Model);},{"../../model":"model","core/properties":"core/properties"}],"models/tools/toolbar":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var array_1=require("core/util/array");var action_tool_1=require("./actions/action_tool");var help_tool_1=require("./actions/help_tool");var gesture_tool_1=require("./gestures/gesture_tool");var inspect_tool_1=require("./inspectors/inspect_tool");var toolbar_base_1=require("./toolbar_base");exports.Toolbar=(function(superClass){extend(Toolbar,superClass);function Toolbar(){return Toolbar.__super__.constructor.apply(this,arguments);}
Toolbar.prototype.type='Toolbar';Toolbar.prototype.default_view=toolbar_base_1.ToolbarBaseView;Toolbar.prototype.initialize=function(attrs,options){Toolbar.__super__.initialize.call(this,attrs,options);this.listenTo(this,'change:tools',this._init_tools);return this._init_tools();};Toolbar.prototype._init_tools=function(){var et,i,len,ref,results,tool,tools;ref=this.tools;for(i=0,len=ref.length;i<len;i++){tool=ref[i];if(tool instanceof inspect_tool_1.InspectTool){if(!array_1.any(this.inspectors,(function(_this){return function(t){return t.id===tool.id;};})(this))){this.inspectors=this.inspectors.concat([tool]);}}
else if(tool instanceof help_tool_1.HelpTool){if(!array_1.any(this.help,(function(_this){return function(t){return t.id===tool.id;};})(this))){this.help=this.help.concat([tool]);}}
else if(tool instanceof action_tool_1.ActionTool){if(!array_1.any(this.actions,(function(_this){return function(t){return t.id===tool.id;};})(this))){this.actions=this.actions.concat([tool]);}}
else if(tool instanceof gesture_tool_1.GestureTool){et=tool.event_type;if(!(et in this.gestures)){logger.warn("Toolbar: unknown event type '"+et+"' for tool: "+tool.type+" ("+tool.id+")");continue;}
if(!array_1.any(this.gestures[et].tools,(function(_this){return function(t){return t.id===tool.id;};})(this))){this.gestures[et].tools=this.gestures[et].tools.concat([tool]);}
this.listenTo(tool,'change:active',this._active_change.bind(tool));}}
results=[];for(et in this.gestures){tools=this.gestures[et].tools;if(tools.length===0){continue;}
this.gestures[et].tools=array_1.sortBy(tools,function(tool){return tool.default_order;});if(et==='tap'){if(this.active_tap===null){continue;}
if(this.active_tap==='auto'){this.gestures[et].tools[0].active=true;}
else{this.active_tap.active=true;}}
if(et==='pan'){if(this.active_drag===null){continue;}
if(this.active_drag==='auto'){this.gestures[et].tools[0].active=true;}
else{this.active_drag.active=true;}}
if(et==='pinch'||et==='scroll'){if(this.active_scroll===null||this.active_scroll==='auto'){continue;}
results.push(this.active_scroll.active=true);}
else{results.push(void 0);}}
return results;};Toolbar.define({active_drag:[p.Any,'auto'],active_scroll:[p.Any,'auto'],active_tap:[p.Any,'auto']});return Toolbar;})(toolbar_base_1.ToolbarBase);},{"./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./toolbar_base":"models/tools/toolbar_base","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/toolbar_base":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,bind=function(fn,me){return function(){return fn.apply(me,arguments);};};var logging_1=require("core/logging");var solver_1=require("core/layout/solver");var dom_1=require("core/dom");var p=require("core/properties");var layout_dom_1=require("../layouts/layout_dom");var action_tool_1=require("./actions/action_tool");var on_off_button_1=require("./on_off_button");var toolbar_template_1=require("./toolbar_template");exports.ToolbarBaseView=(function(superClass){extend(ToolbarBaseView,superClass);function ToolbarBaseView(){return ToolbarBaseView.__super__.constructor.apply(this,arguments);}
ToolbarBaseView.prototype.className="bk-toolbar-wrapper";ToolbarBaseView.prototype.template=toolbar_template_1.default;ToolbarBaseView.prototype.render=function(){var buttons,et,gestures,i,j,k,l,len,len1,len2,len3,obj,ref,ref1,ref2,ref3;dom_1.empty(this.el);if(this.model.sizing_mode!=='fixed'){this.el.style.left=this.model._dom_left._value+"px";this.el.style.top=this.model._dom_top._value+"px";this.el.style.width=this.model._width._value+"px";this.el.style.height=this.model._height._value+"px";}
this.el.appendChild(this.template({logo:this.model.logo,location:this.model.toolbar_location,sticky:this.model.toolbar_sticky?'sticky':'not-sticky'}));buttons=this.el.querySelector(".bk-button-bar-list[type='inspectors']");ref=this.model.inspectors;for(i=0,len=ref.length;i<len;i++){obj=ref[i];buttons.appendChild(new on_off_button_1.OnOffButtonView({model:obj}).el);}
buttons=this.el.querySelector(".bk-button-bar-list[type='help']");ref1=this.model.help;for(j=0,len1=ref1.length;j<len1;j++){obj=ref1[j];buttons.appendChild(new action_tool_1.ActionToolButtonView({model:obj}).el);}
buttons=this.el.querySelector(".bk-button-bar-list[type='actions']");ref2=this.model.actions;for(k=0,len2=ref2.length;k<len2;k++){obj=ref2[k];buttons.appendChild(new action_tool_1.ActionToolButtonView({model:obj}).el);}
gestures=this.model.gestures;for(et in gestures){buttons=this.el.querySelector(".bk-button-bar-list[type='"+et+"']");ref3=gestures[et].tools;for(l=0,len3=ref3.length;l<len3;l++){obj=ref3[l];buttons.appendChild(new on_off_button_1.OnOffButtonView({model:obj}).el);}}
return this;};return ToolbarBaseView;})(layout_dom_1.LayoutDOMView);exports.ToolbarBase=(function(superClass){extend(ToolbarBase,superClass);function ToolbarBase(){this._active_change=bind(this._active_change,this);return ToolbarBase.__super__.constructor.apply(this,arguments);}
ToolbarBase.prototype.type='ToolbarBase';ToolbarBase.prototype.default_view=exports.ToolbarBaseView;ToolbarBase.prototype._active_change=function(tool){var currently_active_tool,event_type,gestures;event_type=tool.event_type;gestures=this.gestures;currently_active_tool=gestures[event_type].active;if((currently_active_tool!=null)&&currently_active_tool!==tool){logging_1.logger.debug("Toolbar: deactivating tool: "+currently_active_tool.type+" ("+currently_active_tool.id+") for event type '"+event_type+"'");currently_active_tool.active=false;}
gestures[event_type].active=tool;this.gestures=gestures;logging_1.logger.debug("Toolbar: activating tool: "+tool.type+" ("+tool.id+") for event type '"+event_type+"'");return null;};ToolbarBase.prototype.get_constraints=function(){var constraints;constraints=ToolbarBase.__super__.get_constraints.call(this);constraints.push(solver_1.EQ(this._sizeable,-30));return constraints;};ToolbarBase.define({tools:[p.Array,[]],logo:[p.String,'normal']});ToolbarBase.internal({gestures:[p.Any,function(){return{pan:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},press:{tools:[],active:null},rotate:{tools:[],active:null}};}],actions:[p.Array,[]],inspectors:[p.Array,[]],help:[p.Array,[]],toolbar_location:[p.Location,'right'],toolbar_sticky:[p.Bool]});ToolbarBase.override({sizing_mode:null});return ToolbarBase;})(layout_dom_1.LayoutDOM);},{"../layouts/layout_dom":"models/layouts/layout_dom","./actions/action_tool":"models/tools/actions/action_tool","./on_off_button":"models/tools/on_off_button","./toolbar_template":"models/tools/toolbar_template","core/dom":"core/dom","core/layout/solver":"core/layout/solver","core/logging":"core/logging","core/properties":"core/properties"}],"models/tools/toolbar_box":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var p=require("core/properties");var array_1=require("core/util/array");var action_tool_1=require("./actions/action_tool");var help_tool_1=require("./actions/help_tool");var gesture_tool_1=require("./gestures/gesture_tool");var inspect_tool_1=require("./inspectors/inspect_tool");var toolbar_base_1=require("./toolbar_base");var tool_proxy_1=require("./tool_proxy");var box_1=require("../layouts/box");exports.ToolbarBoxToolbar=(function(superClass){extend(ToolbarBoxToolbar,superClass);function ToolbarBoxToolbar(){return ToolbarBoxToolbar.__super__.constructor.apply(this,arguments);}
ToolbarBoxToolbar.prototype.type='ToolbarBoxToolbar';ToolbarBoxToolbar.prototype.default_view=toolbar_base_1.ToolbarBaseView;ToolbarBoxToolbar.prototype.initialize=function(options){ToolbarBoxToolbar.__super__.initialize.call(this,options);this._init_tools();if(this.merge_tools===true){return this._merge_tools();}};ToolbarBoxToolbar.define({merge_tools:[p.Bool,true]});ToolbarBoxToolbar.prototype._init_tools=function(){var et,i,len,ref,results,tool;ref=this.tools;results=[];for(i=0,len=ref.length;i<len;i++){tool=ref[i];if(tool instanceof inspect_tool_1.InspectTool){if(!array_1.any(this.inspectors,(function(_this){return function(t){return t.id===tool.id;};})(this))){results.push(this.inspectors=this.inspectors.concat([tool]));}
else{results.push(void 0);}}
else if(tool instanceof help_tool_1.HelpTool){if(!array_1.any(this.help,(function(_this){return function(t){return t.id===tool.id;};})(this))){results.push(this.help=this.help.concat([tool]));}
else{results.push(void 0);}}
else if(tool instanceof action_tool_1.ActionTool){if(!array_1.any(this.actions,(function(_this){return function(t){return t.id===tool.id;};})(this))){results.push(this.actions=this.actions.concat([tool]));}
else{results.push(void 0);}}
else if(tool instanceof gesture_tool_1.GestureTool){et=tool.event_type;if(!array_1.any(this.gestures[et].tools,(function(_this){return function(t){return t.id===tool.id;};})(this))){results.push(this.gestures[et].tools=this.gestures[et].tools.concat([tool]));}
else{results.push(void 0);}}
else{results.push(void 0);}}
return results;};ToolbarBoxToolbar.prototype._merge_tools=function(){var actions,active,et,event_type,gestures,helptool,i,info,inspectors,j,k,l,len,len1,len2,len3,make_proxy,new_help_tools,new_help_urls,proxy,ref,ref1,ref2,ref3,ref4,ref5,ref6,results,tool,tool_type,tools;inspectors={};actions={};gestures={};new_help_tools=[];new_help_urls=[];ref=this.help;for(i=0,len=ref.length;i<len;i++){helptool=ref[i];if(ref1=helptool.redirect,indexOf.call(new_help_urls,ref1)<0){new_help_tools.push(helptool);new_help_urls.push(helptool.redirect);}}
this.help=new_help_tools;ref2=this.gestures;for(event_type in ref2){info=ref2[event_type];if(!(event_type in gestures)){gestures[event_type]={};}
ref3=info.tools;for(j=0,len1=ref3.length;j<len1;j++){tool=ref3[j];if(!(tool.type in gestures[event_type])){gestures[event_type][tool.type]=[];}
gestures[event_type][tool.type].push(tool);}}
ref4=this.inspectors;for(k=0,len2=ref4.length;k<len2;k++){tool=ref4[k];if(!(tool.type in inspectors)){inspectors[tool.type]=[];}
inspectors[tool.type].push(tool);}
ref5=this.actions;for(l=0,len3=ref5.length;l<len3;l++){tool=ref5[l];if(!(tool.type in actions)){actions[tool.type]=[];}
actions[tool.type].push(tool);}
make_proxy=function(tools,active){if(active==null){active=false;}
return new tool_proxy_1.ToolProxy({tools:tools,event_type:tools[0].event_type,tooltip:tools[0].tool_name,tool_name:tools[0].tool_name,icon:tools[0].icon,active:active});};for(event_type in gestures){this.gestures[event_type].tools=[];ref6=gestures[event_type];for(tool_type in ref6){tools=ref6[tool_type];if(tools.length>0){proxy=make_proxy(tools);this.gestures[event_type].tools.push(proxy);this.listenTo(proxy,'change:active',this._active_change.bind(proxy));}}}
this.actions=[];for(tool_type in actions){tools=actions[tool_type];if(tools.length>0){this.actions.push(make_proxy(tools));}}
this.inspectors=[];for(tool_type in inspectors){tools=inspectors[tool_type];if(tools.length>0){this.inspectors.push(make_proxy(tools,active=true));}}
results=[];for(et in this.gestures){tools=this.gestures[et].tools;if(tools.length===0){continue;}
this.gestures[et].tools=array_1.sortBy(tools,function(tool){return tool.default_order;});if(et!=='pinch'&&et!=='scroll'){results.push(this.gestures[et].tools[0].active=true);}
else{results.push(void 0);}}
return results;};return ToolbarBoxToolbar;})(toolbar_base_1.ToolbarBase);exports.ToolbarBoxView=(function(superClass){extend(ToolbarBoxView,superClass);function ToolbarBoxView(){return ToolbarBoxView.__super__.constructor.apply(this,arguments);}
ToolbarBoxView.prototype.className='bk-toolbar-box';ToolbarBoxView.prototype.get_width=function(){if(this.model._horizontal===true){return 30;}
else{return null;}};ToolbarBoxView.prototype.get_height=function(){return 30;};return ToolbarBoxView;})(box_1.BoxView);exports.ToolbarBox=(function(superClass){extend(ToolbarBox,superClass);function ToolbarBox(){return ToolbarBox.__super__.constructor.apply(this,arguments);}
ToolbarBox.prototype.type='ToolbarBox';ToolbarBox.prototype.default_view=exports.ToolbarBoxView;ToolbarBox.prototype.initialize=function(options){var ref;ToolbarBox.__super__.initialize.call(this,options);this._toolbar=new exports.ToolbarBoxToolbar(options);if((ref=this.toolbar_location)==='left'||ref==='right'){this._horizontal=true;return this._toolbar._sizeable=this._toolbar._width;}
else{this._horizontal=false;return this._toolbar._sizeable=this._toolbar._height;}};ToolbarBox.prototype._doc_attached=function(){return this._toolbar.attach_document(this.document);};ToolbarBox.prototype.get_layoutable_children=function(){return[this._toolbar];};ToolbarBox.define({toolbar_location:[p.Location,"right"],merge_tools:[p.Bool,true],tools:[p.Any,[]],logo:[p.String,"normal"]});return ToolbarBox;})(box_1.Box);},{"../layouts/box":"models/layouts/box","./actions/action_tool":"models/tools/actions/action_tool","./actions/help_tool":"models/tools/actions/help_tool","./gestures/gesture_tool":"models/tools/gestures/gesture_tool","./inspectors/inspect_tool":"models/tools/inspectors/inspect_tool","./tool_proxy":"models/tools/tool_proxy","./toolbar_base":"models/tools/toolbar_base","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/tools/toolbar_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){var logo;if(props.logo!=null){var cls=props.logo==="grey"?"bk-grey":null;logo=DOM.createElement("a",{href:"http://bokeh.pydata.org/",target:"_blank",class:["bk-logo","bk-logo-small",cls]});}
return(DOM.createElement("div",{class:["bk-toolbar-"+props.location,"bk-toolbar-"+props.sticky]},logo,DOM.createElement("div",{class:'bk-button-bar'},DOM.createElement("div",{class:'bk-button-bar-list',type:"pan"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"scroll"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"pinch"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"tap"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"press"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"rotate"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"actions"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"inspectors"}),DOM.createElement("div",{class:'bk-button-bar-list',type:"help"}))));};},{"core/dom":"core/dom"}],"models/transforms/customjs_transform":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,slice=[].slice;var transform_1=require("./transform");var p=require("core/properties");var object_1=require("core/util/object");exports.CustomJSTransform=(function(superClass){extend(CustomJSTransform,superClass);function CustomJSTransform(){return CustomJSTransform.__super__.constructor.apply(this,arguments);}
CustomJSTransform.prototype.type='CustomJSTransform';CustomJSTransform.define({args:[p.Any,{}],func:[p.String,""],v_func:[p.String,""]});CustomJSTransform.getters({values:function(){return this._make_values();},scalar_transform:function(){return this._make_transform("x",this.func);},vector_transform:function(){return this._make_transform("xs",this.v_func);}});CustomJSTransform.prototype.compute=function(x){return this.scalar_transform.apply(this,slice.call(this.values).concat([x],[require],[exports]));};CustomJSTransform.prototype.v_compute=function(xs){return this.vector_transform.apply(this,slice.call(this.values).concat([xs],[require],[exports]));};CustomJSTransform.prototype._make_transform=function(val,fn){return(function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child;})(Function,slice.call(Object.keys(this.args)).concat([val],["require"],["exports"],[fn]),function(){});};CustomJSTransform.prototype._make_values=function(){return object_1.values(this.args);};return CustomJSTransform;})(transform_1.Transform);},{"./transform":"models/transforms/transform","core/properties":"core/properties","core/util/object":"core/util/object"}],"models/transforms/index":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var customjs_transform_1=require("./customjs_transform");exports.CustomJSTransform=customjs_transform_1.CustomJSTransform;var interpolator_1=require("./interpolator");exports.Interpolator=interpolator_1.Interpolator;var jitter_1=require("./jitter");exports.Jitter=jitter_1.Jitter;var linear_interpolator_1=require("./linear_interpolator");exports.LinearInterpolator=linear_interpolator_1.LinearInterpolator;var step_interpolator_1=require("./step_interpolator");exports.StepInterpolator=step_interpolator_1.StepInterpolator;var transform_1=require("./transform");exports.Transform=transform_1.Transform;},{"./customjs_transform":"models/transforms/customjs_transform","./interpolator":"models/transforms/interpolator","./jitter":"models/transforms/jitter","./linear_interpolator":"models/transforms/linear_interpolator","./step_interpolator":"models/transforms/step_interpolator","./transform":"models/transforms/transform"}],"models/transforms/interpolator":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var transform_1=require("./transform");var p=require("core/properties");exports.Interpolator=(function(superClass){extend(Interpolator,superClass);function Interpolator(){return Interpolator.__super__.constructor.apply(this,arguments);}
Interpolator.prototype.initialize=function(attrs,options){Interpolator.__super__.initialize.call(this,attrs,options);this._x_sorted=[];this._y_sorted=[];this._sorted_dirty=true;return this.on('change',function(){return this._sorted_dirty=true;});};Interpolator.define({x:[p.Any],y:[p.Any],data:[p.Any],clip:[p.Bool,true]});Interpolator.prototype.sort=function(descending){var column_names,data,i,j,k,list,ref,ref1,ref2,tsx,tsy;if(descending==null){descending=false;}
if(typeof this.x!==typeof this.y){throw new Error('The parameters for x and y must be of the same type, either both strings which define a column in the data source or both arrays of the same length');return;}
else{if(typeof this.x==='string'&&this.data===null){throw new Error('If the x and y parameters are not specified as an array, the data parameter is reqired.');return;}}
if(this._sorted_dirty===false){return;}
tsx=[];tsy=[];if(typeof this.x==='string'){data=this.data;column_names=data.columns();if(ref=this.x,indexOf.call(column_names,ref)<0){throw new Error('The x parameter does not correspond to a valid column name defined in the data parameter');}
if(ref1=this.y,indexOf.call(column_names,ref1)<0){throw new Error('The x parameter does not correspond to a valid column name defined in the data parameter');}
tsx=data.get_column(this.x);tsy=data.get_column(this.y);}
else{tsx=this.x;tsy=this.y;}
if(tsx.length!==tsy.length){throw new Error('The length for x and y do not match');}
if(tsx.length<2){throw new Error('x and y must have at least two elements to support interpolation');}
list=[];for(j in tsx){list.push({'x':tsx[j],'y':tsy[j]});}
if(descending===true){list.sort(function(a,b){var ref2,ref3;return(ref2=a.x<b.x)!=null?ref2:-{1:(ref3=a.x===b.x)!=null?ref3:{0:1}};});}
else{list.sort(function(a,b){var ref2,ref3;return(ref2=a.x>b.x)!=null?ref2:-{1:(ref3=a.x===b.x)!=null?ref3:{0:1}};});}
for(k=i=0,ref2=list.length;0<=ref2?i<ref2:i>ref2;k=0<=ref2?++i:--i){this._x_sorted[k]=list[k].x;this._y_sorted[k]=list[k].y;}
return this._sorted_dirty=false;};return Interpolator;})(transform_1.Transform);},{"./transform":"models/transforms/transform","core/properties":"core/properties"}],"models/transforms/jitter":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var transform_1=require("./transform");var p=require("core/properties");var bokeh_math=require("core/util/math");exports.Jitter=(function(superClass){extend(Jitter,superClass);function Jitter(){return Jitter.__super__.constructor.apply(this,arguments);}
Jitter.define({mean:[p.Number,0],width:[p.Number,1],distribution:[p.Distribution,'uniform']});Jitter.prototype.compute=function(x){if(this.distribution==='uniform'){return x+this.mean+((bokeh_math.random()-0.5)*this.width);}
if(this.distribution==='normal'){return x+bokeh_math.rnorm(this.mean,this.width);}};Jitter.prototype.v_compute=function(xs){var i,idx,len,result,x;result=new Float64Array(xs.length);for(idx=i=0,len=xs.length;i<len;idx=++i){x=xs[idx];result[idx]=this.compute(x);}
return result;};return Jitter;})(transform_1.Transform);},{"./transform":"models/transforms/transform","core/properties":"core/properties","core/util/math":"core/util/math"}],"models/transforms/linear_interpolator":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var array_1=require("core/util/array");var interpolator_1=require("./interpolator");exports.LinearInterpolator=(function(superClass){extend(LinearInterpolator,superClass);function LinearInterpolator(){return LinearInterpolator.__super__.constructor.apply(this,arguments);}
LinearInterpolator.prototype.compute=function(x){var descending,ind,ret,x1,x2,y1,y2;this.sort(descending=false);if(this.clip===true){if(x<this._x_sorted[0]||x>this._x_sorted[this._x_sorted.length-1]){return null;}}
else{if(x<this._x_sorted[0]){return this._y_sorted[0];}
if(x>this._x_sorted[this._x_sorted.length-1]){return this._y_sorted[this._y_sorted.length-1];}}
if(x===this._x_sorted[0]){return this._y_sorted[0];}
ind=array_1.findLastIndex(this._x_sorted,function(num){return num<x;});x1=this._x_sorted[ind];x2=this._x_sorted[ind+1];y1=this._y_sorted[ind];y2=this._y_sorted[ind+1];ret=y1+(((x-x1)/(x2-x1))*(y2-y1));return ret;};LinearInterpolator.prototype.v_compute=function(xs){var i,idx,len,result,x;result=new Float64Array(xs.length);for(idx=i=0,len=xs.length;i<len;idx=++i){x=xs[idx];result[idx]=this.compute(x);}
return result;};return LinearInterpolator;})(interpolator_1.Interpolator);},{"./interpolator":"models/transforms/interpolator","core/util/array":"core/util/array"}],"models/transforms/step_interpolator":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var interpolator_1=require("./interpolator");var p=require("core/properties");var array_1=require("core/util/array");exports.StepInterpolator=(function(superClass){extend(StepInterpolator,superClass);function StepInterpolator(){return StepInterpolator.__super__.constructor.apply(this,arguments);}
StepInterpolator.define({mode:[p.TransformStepMode,"after"]});StepInterpolator.prototype.compute=function(x){var descending,diffs,ind,mdiff,ret,tx;this.sort(descending=false);if(this.clip===true){if(x<this._x_sorted[0]||x>this._x_sorted[this._x_sorted.length-1]){return null;}}
else{if(x<this._x_sorted[0]){return this._y_sorted[0];}
if(x>this._x_sorted[this._x_sorted.length-1]){return this._y_sorted[this._y_sorted.length-1];}}
ind=-1;if(this.mode==="after"){ind=array_1.findLastIndex(this._x_sorted,function(num){return x>=num;});}
if(this.mode==="before"){ind=array_1.findIndex(this._x_sorted,function(num){return x<=num;});}
if(this.mode==="center"){diffs=(function(){var i,len,ref,results;ref=this._x_sorted;results=[];for(i=0,len=ref.length;i<len;i++){tx=ref[i];results.push(Math.abs(tx-x));}
return results;}).call(this);mdiff=array_1.min(diffs);ind=array_1.findIndex(diffs,function(num){return mdiff===num;});}
if(ind!==-1){ret=this._y_sorted[ind];}
else{ret=null;}
return ret;};StepInterpolator.prototype.v_compute=function(xs){var i,idx,len,result,x;result=new Float64Array(xs.length);for(idx=i=0,len=xs.length;i<len;idx=++i){x=xs[idx];result[idx]=this.compute(x);}
return result;};return StepInterpolator;})(interpolator_1.Interpolator);},{"./interpolator":"models/transforms/interpolator","core/properties":"core/properties","core/util/array":"core/util/array"}],"models/transforms/transform":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var model_1=require("../../model");exports.Transform=(function(superClass){extend(Transform,superClass);function Transform(){return Transform.__super__.constructor.apply(this,arguments);}
return Transform;})(model_1.Model);},{"../../model":"model"}],"safely":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _burst_into_flames;_burst_into_flames=function(error){var body,box,button,message,ref,title;box=document.createElement("div");box.style["background-color"]="#f2dede";box.style["border"]="1px solid #a94442";box.style["border-radius"]="4px";box.style["display"]="inline-block";box.style["font-family"]="sans-serif";box.style["margin-top"]="5px";box.style["min-width"]="200px";box.style["padding"]="5px 5px 5px 10px";button=document.createElement("span");button.style["background-color"]="#a94442";button.style["border-radius"]="0px 4px 0px 0px";button.style["color"]="white";button.style["cursor"]="pointer";button.style["float"]="right";button.style["font-size"]="0.8em";button.style["margin"]="-6px -6px 0px 0px";button.style["padding"]="2px 5px 4px 5px";button.title="close";button.setAttribute("aria-label","close");button.appendChild(document.createTextNode("x"));button.addEventListener("click",function(){return body.removeChild(box);});title=document.createElement("h3");title.style["color"]="#a94442";title.style["margin"]="8px 0px 0px 0px";title.style["padding"]="0px";title.appendChild(document.createTextNode("Bokeh Error"));message=document.createElement("pre");message.style["white-space"]="unset";message.style["overflow-x"]="auto";message.appendChild(document.createTextNode((ref=error.message)!=null?ref:error));box.appendChild(button);box.appendChild(title);box.appendChild(message);body=document.getElementsByTagName("body")[0];return body.insertBefore(box,body.firstChild);};exports.safely=function(fn,silent){var error;if(silent==null){silent=false;}
try{return fn();}
catch(error1){error=error1;_burst_into_flames(error);if(!silent){throw error;}}};},{}],"version":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.version='0.12.5';},{}],"es6-promise":[function(require,module,exports){(function(process,global){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */
(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==='function'||(typeof x==='object'&&x!==null);}
function lib$es6$promise$utils$$isFunction(x){return typeof x==='function';}
function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==='object'&&x!==null;}
var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}else{lib$es6$promise$utils$$_isArray=Array.isArray;}
var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$toString={}.toString;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);}else{lib$es6$promise$asap$$scheduleFlush();}}}
function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn;}
function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn;}
var lib$es6$promise$asap$$browserWindow=(typeof window!=='undefined')?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof process!=='undefined'&&{}.toString.call(process)==='[object process]';var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode('');observer.observe(node,{characterData:true});return function(){node.data=(iterations=++iterations%2);};}
function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel();channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0);};}
function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1);};}
var lib$es6$promise$asap$$queue=new Array(1000);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined;}
lib$es6$promise$asap$$len=0;}
function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r('vertx');lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer();}catch(e){return lib$es6$promise$asap$$useSetTimeout();}}
var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick();}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver();}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel();}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==='function'){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx();}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout();}
function lib$es6$promise$$internal$$noop(){}
var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself");}
function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError('A promises callback cannot return that same promise.');}
function lib$es6$promise$$internal$$getThen(promise){try{return promise.then;}catch(error){lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR;}}
function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler);}catch(e){return e;}}
function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return;}
sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value);}else{lib$es6$promise$$internal$$fulfill(promise,value);}},function(reason){if(sealed){return;}
sealed=true;lib$es6$promise$$internal$$reject(promise,reason);},'Settle: '+(promise._label||' unknown promise'));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error);}},promise);}
function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result);}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result);}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value);},function(reason){lib$es6$promise$$internal$$reject(promise,reason);});}}
function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);}else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error);}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then);}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}}}
function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment());}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value);}else{lib$es6$promise$$internal$$fulfill(promise,value);}}
function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result);}
lib$es6$promise$$internal$$publish(promise);}
function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise);}}
function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise);}
function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent);}}
function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return;}
var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail);}else{callback(detail);}}
promise._subscribers.length=0;}
function lib$es6$promise$$internal$$ErrorObject(){this.error=null;}
var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail);}catch(e){lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR;}}
function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null;}else{succeeded=true;}
if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return;}}else{value=detail;succeeded=true;}
if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value);}else if(failed){lib$es6$promise$$internal$$reject(promise,error);}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value);}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}}
function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value);},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason);});}catch(e){lib$es6$promise$$internal$$reject(promise,e);}}
function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor;enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop);if(enumerator._validateInput(input)){enumerator._input=input;enumerator.length=input.length;enumerator._remaining=input.length;enumerator._init();if(enumerator.length===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result);}else{enumerator.length=enumerator.length||0;enumerator._enumerate();if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result);}}}else{lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError());}}
lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input);};lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error('Array Methods must be provided an Array');};lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length);};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var enumerator=this;var length=enumerator.length;var promise=enumerator.promise;var input=enumerator._input;for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){enumerator._eachEntry(input[i],i);}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this;var c=enumerator._instanceConstructor;if(lib$es6$promise$utils$$isMaybeThenable(entry)){if(entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING){entry._onerror=null;enumerator._settledAt(entry._state,i,entry._result);}else{enumerator._willSettleAt(c.resolve(entry),i);}}else{enumerator._remaining--;enumerator._result[i]=entry;}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this;var promise=enumerator.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){enumerator._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}else{enumerator._result[i]=value;}}
if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(promise,enumerator._result);}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value);},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason);});};function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise;}
var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries)){lib$es6$promise$$internal$$reject(promise,new TypeError('You must pass an array to race.'));return promise;}
var length=entries.length;function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value);}
function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason);}
for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),undefined,onFulfillment,onRejection);}
return promise;}
var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==='object'&&object.constructor===Constructor){return object;}
var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise;}
var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise;}
var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;var lib$es6$promise$promise$$counter=0;function lib$es6$promise$promise$$needsResolver(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}
function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}
var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++;this._state=undefined;this._result=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){if(!lib$es6$promise$utils$$isFunction(resolver)){lib$es6$promise$promise$$needsResolver();}
if(!(this instanceof lib$es6$promise$promise$$Promise)){lib$es6$promise$promise$$needsNew();}
lib$es6$promise$$internal$$initializePromise(this,resolver);}}
lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this;var state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection){return this;}
var child=new this.constructor(lib$es6$promise$$internal$$noop);var result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result);});}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);}
return child;},'catch':function(onRejection){return this.then(null,onRejection);}};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=='undefined'){local=global;}else if(typeof self!=='undefined'){local=self;}else{try{local=Function('return this')();}catch(e){throw new Error('polyfill failed because global object is unavailable in this environment');}}
var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==='[object Promise]'&&!P.cast){return;}
local.Promise=lib$es6$promise$promise$$default;}
var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;var lib$es6$promise$umd$$ES6Promise={'Promise':lib$es6$promise$promise$$default,'polyfill':lib$es6$promise$polyfill$$default};if(typeof define==='function'&&define['amd']){define(function(){return lib$es6$promise$umd$$ES6Promise;});}else if(typeof module!=='undefined'&&module['exports']){module['exports']=lib$es6$promise$umd$$ES6Promise;}else if(typeof this!=='undefined'){this['ES6Promise']=lib$es6$promise$umd$$ES6Promise;}
lib$es6$promise$polyfill$$default();}).call(this);}).call(this,require('_process'),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"_process":"_process"}],"hammerjs":[function(require,module,exports){/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\n'+message+' AT \n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}
return method.apply(this,arguments);};}
var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};}else{assign=Object.assign;}
var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;},'extend','Use `assign`.');var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument||element;return(doc.defaultView||doc.parentWindow||window);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=(abs(overallVelocity.x)>abs(overallVelocity.y))?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:((input.pointers.length>session.prevInput.maxPointers)?input.pointers.length:session.prevInput.maxPointers);computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y<0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[];}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return;}
if(isTouch){recordTouches.call(this,inputEvent,inputData);}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData);}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData);}}
function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1);}};setTimeout(removeLastTouch,DEDUP_TIMEOUT);}}
function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true;}}
return false;}
var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';var TOUCH_ACTION_MAP=getTouchActionProps();function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}
if(hasPanX&&hasPanY){return;}
if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false;}
var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(val){touchMap[val]=cssSupports?window.CSS.supports('touch-action',val):true;});return touchMap;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}
if(state<STATE_ENDED){emit(self.options.event+stateStr(state));}
emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent);}
if(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}
this._super.emit.call(this,input);}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}
return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}
Hammer.VERSION='2.0.7';Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){assign(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}
return this;},on:function(events,handler){if(events===undefined){return;}
if(handler===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){if(events===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}
var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value;}else{element.style[prop]=manager.oldCssProps[prop]||'';}});if(!add){manager.oldCssProps={};}}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=(typeof window!=='undefined'?window:(typeof self!=='undefined'?self:{}));freeGlobal.Hammer=Hammer;if(typeof define==='function'&&define.amd){define(function(){return Hammer;});}else if(typeof module!='undefined'&&module.exports){module.exports=Hammer;}else{window[exportName]=Hammer;}})(window,document,'Hammer');},{}],"kiwi":[function(require,module,exports){var __extends=(this&&this.__extends)||(function(){var extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return function(d,b){extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};})();var kiwi;(function(kiwi){var Operator;(function(Operator){Operator[Operator["Le"]=0]="Le";Operator[Operator["Ge"]=1]="Ge";Operator[Operator["Eq"]=2]="Eq";})(Operator=kiwi.Operator||(kiwi.Operator={}));var Constraint=(function(){function Constraint(expression,operator,strength){if(strength===void 0){strength=kiwi.Strength.required;}
this._id=CnId++;this._operator=operator;this._expression=expression;this._strength=kiwi.Strength.clip(strength);}
Constraint.Compare=function(a,b){return a.id()-b.id();};Constraint.prototype.id=function(){return this._id;};Constraint.prototype.expression=function(){return this._expression;};Constraint.prototype.op=function(){return this._operator;};Constraint.prototype.strength=function(){return this._strength;};return Constraint;}());kiwi.Constraint=Constraint;var CnId=0;})(kiwi||(kiwi={}));var kiwi;(function(kiwi){var Expression=(function(){function Expression(){var parsed=parseArgs(arguments);this._terms=parsed.terms;this._constant=parsed.constant;}
Expression.prototype.terms=function(){return this._terms;};Expression.prototype.constant=function(){return this._constant;};Expression.prototype.value=function(){var result=this._constant;tsu.forEach(this._terms,function(pair){result+=pair.first.value()*pair.second;});return result;};return Expression;}());kiwi.Expression=Expression;function parseArgs(args){var constant=0.0;var factory=function(){return 0.0;};var terms=kiwi.createMap(kiwi.Variable.Compare);for(var i=0,n=args.length;i<n;++i){var item=args[i];if(typeof item==="number"){constant+=item;}
else if(item instanceof kiwi.Variable){terms.setDefault(item,factory).second+=1.0;}
else if(item instanceof Array){if(item.length!==2){throw new Error("array must have length 2");}
var value=item[0];var variable=item[1];if(typeof value!=="number"){throw new Error("array item 0 must be a number");}
if(!(variable instanceof kiwi.Variable)){throw new Error("array item 1 must be a variable");}
terms.setDefault(variable,factory).second+=value;}
else{throw new Error("invalid Expression argument: "+item);}}
return{terms:terms,constant:constant};}})(kiwi||(kiwi={}));var kiwi;(function(kiwi){function createMap(compare){return new tsu.AssociativeArray(compare);}
kiwi.createMap=createMap;})(kiwi||(kiwi={}));var kiwi;(function(kiwi){var Solver=(function(){function Solver(){this._cnMap=createCnMap();this._rowMap=createRowMap();this._varMap=createVarMap();this._editMap=createEditMap();this._infeasibleRows=[];this._objective=new Row();this._artificial=null;this._idTick=0;}
Solver.prototype.addConstraint=function(constraint){var cnPair=this._cnMap.find(constraint);if(cnPair!==undefined){throw new Error("duplicate constraint");}
var data=this._createRow(constraint);var row=data.row;var tag=data.tag;var subject=this._chooseSubject(row,tag);if(subject.type()===SymbolType.Invalid&&row.allDummies()){if(!nearZero(row.constant())){var names=[];for(var _i=0,_a=constraint.expression().terms()._array;_i<_a.length;_i++){var item=_a[_i];names.push(item.first.name());}
var op=['LE','GE','EQ'][constraint.op()];throw new Error("unsatisfiable constraint ["+names.join(",")+"] operator: "+op);}
else{subject=tag.marker;}}
if(subject.type()===SymbolType.Invalid){if(!this._addWithArtificialVariable(row)){throw new Error("unsatisfiable constraint");}}
else{row.solveFor(subject);this._substitute(subject,row);this._rowMap.insert(subject,row);}
this._cnMap.insert(constraint,tag);this._optimize(this._objective);};Solver.prototype.removeConstraint=function(constraint,silent){if(silent===void 0){silent=false;}
var cnPair=this._cnMap.erase(constraint);if(cnPair===undefined){if(silent)
return;else
throw new Error("unknown constraint");}
this._removeConstraintEffects(constraint,cnPair.second);var marker=cnPair.second.marker;var rowPair=this._rowMap.erase(marker);if(rowPair===undefined){var leaving=this._getMarkerLeavingSymbol(marker);if(leaving.type()===SymbolType.Invalid){throw new Error("failed to find leaving row");}
rowPair=this._rowMap.erase(leaving);rowPair.second.solveForEx(leaving,marker);this._substitute(marker,rowPair.second);}
this._optimize(this._objective);};Solver.prototype.hasConstraint=function(constraint){return this._cnMap.contains(constraint);};Solver.prototype.addEditVariable=function(variable,strength){var editPair=this._editMap.find(variable);if(editPair!==undefined){throw new Error("duplicate edit variable: "+variable.name());}
strength=kiwi.Strength.clip(strength);if(strength===kiwi.Strength.required){throw new Error("bad required strength");}
var expr=new kiwi.Expression(variable);var cn=new kiwi.Constraint(expr,kiwi.Operator.Eq,strength);this.addConstraint(cn);var tag=this._cnMap.find(cn).second;var info={tag:tag,constraint:cn,constant:0.0};this._editMap.insert(variable,info);};Solver.prototype.removeEditVariable=function(variable,silent){if(silent===void 0){silent=false;}
var editPair=this._editMap.erase(variable);if(editPair===undefined){if(silent)
return;else
throw new Error("unknown edit variable: "+variable.name());}
this.removeConstraint(editPair.second.constraint,silent);};Solver.prototype.hasEditVariable=function(variable){return this._editMap.contains(variable);};Solver.prototype.suggestValue=function(variable,value){var editPair=this._editMap.find(variable);if(editPair===undefined){throw new Error("unknown edit variable: "+variable.name());}
var rows=this._rowMap;var info=editPair.second;var delta=value-info.constant;info.constant=value;var marker=info.tag.marker;var rowPair=rows.find(marker);if(rowPair!==undefined){if(rowPair.second.add(-delta)<0.0){this._infeasibleRows.push(marker);}
this._dualOptimize();return;}
var other=info.tag.other;var rowPair=rows.find(other);if(rowPair!==undefined){if(rowPair.second.add(delta)<0.0){this._infeasibleRows.push(other);}
this._dualOptimize();return;}
for(var i=0,n=rows.size();i<n;++i){var rowPair=rows.itemAt(i);var row=rowPair.second;var coeff=row.coefficientFor(marker);if(coeff!==0.0&&row.add(delta*coeff)<0.0&&rowPair.first.type()!==SymbolType.External){this._infeasibleRows.push(rowPair.first);}}
this._dualOptimize();};Solver.prototype.updateVariables=function(){var vars=this._varMap;var rows=this._rowMap;for(var i=0,n=vars.size();i<n;++i){var pair=vars.itemAt(i);var rowPair=rows.find(pair.second);if(rowPair!==undefined){pair.first.setValue(rowPair.second.constant());}
else{pair.first.setValue(0.0);}}};Solver.prototype._getVarSymbol=function(variable){var _this=this;var factory=function(){return _this._makeSymbol(SymbolType.External);};return this._varMap.setDefault(variable,factory).second;};Solver.prototype._createRow=function(constraint){var expr=constraint.expression();var row=new Row(expr.constant());var terms=expr.terms();for(var i=0,n=terms.size();i<n;++i){var termPair=terms.itemAt(i);if(!nearZero(termPair.second)){var symbol=this._getVarSymbol(termPair.first);var basicPair=this._rowMap.find(symbol);if(basicPair!==undefined){row.insertRow(basicPair.second,termPair.second);}
else{row.insertSymbol(symbol,termPair.second);}}}
var objective=this._objective;var strength=constraint.strength();var tag={marker:INVALID_SYMBOL,other:INVALID_SYMBOL};switch(constraint.op()){case kiwi.Operator.Le:case kiwi.Operator.Ge:{var coeff=constraint.op()===kiwi.Operator.Le?1.0:-1.0;var slack=this._makeSymbol(SymbolType.Slack);tag.marker=slack;row.insertSymbol(slack,coeff);if(strength<kiwi.Strength.required){var error=this._makeSymbol(SymbolType.Error);tag.other=error;row.insertSymbol(error,-coeff);objective.insertSymbol(error,strength);}
break;}
case kiwi.Operator.Eq:{if(strength<kiwi.Strength.required){var errplus=this._makeSymbol(SymbolType.Error);var errminus=this._makeSymbol(SymbolType.Error);tag.marker=errplus;tag.other=errminus;row.insertSymbol(errplus,-1.0);row.insertSymbol(errminus,1.0);objective.insertSymbol(errplus,strength);objective.insertSymbol(errminus,strength);}
else{var dummy=this._makeSymbol(SymbolType.Dummy);tag.marker=dummy;row.insertSymbol(dummy);}
break;}}
if(row.constant()<0.0){row.reverseSign();}
return{row:row,tag:tag};};Solver.prototype._chooseSubject=function(row,tag){var cells=row.cells();for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);if(pair.first.type()===SymbolType.External){return pair.first;}}
var type=tag.marker.type();if(type===SymbolType.Slack||type===SymbolType.Error){if(row.coefficientFor(tag.marker)<0.0){return tag.marker;}}
type=tag.other.type();if(type===SymbolType.Slack||type===SymbolType.Error){if(row.coefficientFor(tag.other)<0.0){return tag.other;}}
return INVALID_SYMBOL;};Solver.prototype._addWithArtificialVariable=function(row){var art=this._makeSymbol(SymbolType.Slack);this._rowMap.insert(art,row.copy());this._artificial=row.copy();this._optimize(this._artificial);var success=nearZero(this._artificial.constant());this._artificial=null;var pair=this._rowMap.erase(art);if(pair!==undefined){var basicRow=pair.second;if(basicRow.isConstant()){return success;}
var entering=this._anyPivotableSymbol(basicRow);if(entering.type()===SymbolType.Invalid){return false;}
basicRow.solveForEx(art,entering);this._substitute(entering,basicRow);this._rowMap.insert(entering,basicRow);}
var rows=this._rowMap;for(var i=0,n=rows.size();i<n;++i){rows.itemAt(i).second.removeSymbol(art);}
this._objective.removeSymbol(art);return success;};Solver.prototype._substitute=function(symbol,row){var rows=this._rowMap;for(var i=0,n=rows.size();i<n;++i){var pair=rows.itemAt(i);pair.second.substitute(symbol,row);if(pair.second.constant()<0.0&&pair.first.type()!==SymbolType.External){this._infeasibleRows.push(pair.first);}}
this._objective.substitute(symbol,row);if(this._artificial){this._artificial.substitute(symbol,row);}};Solver.prototype._optimize=function(objective){while(true){var entering=this._getEnteringSymbol(objective);if(entering.type()===SymbolType.Invalid){return;}
var leaving=this._getLeavingSymbol(entering);if(leaving.type()===SymbolType.Invalid){throw new Error("the objective is unbounded");}
var row=this._rowMap.erase(leaving).second;row.solveForEx(leaving,entering);this._substitute(entering,row);this._rowMap.insert(entering,row);}};Solver.prototype._dualOptimize=function(){var rows=this._rowMap;var infeasible=this._infeasibleRows;while(infeasible.length!==0){var leaving=infeasible.pop();var pair=rows.find(leaving);if(pair!==undefined&&pair.second.constant()<0.0){var entering=this._getDualEnteringSymbol(pair.second);if(entering.type()===SymbolType.Invalid){throw new Error("dual optimize failed");}
var row=pair.second;rows.erase(leaving);row.solveForEx(leaving,entering);this._substitute(entering,row);rows.insert(entering,row);}}};Solver.prototype._getEnteringSymbol=function(objective){var cells=objective.cells();for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);var symbol=pair.first;if(pair.second<0.0&&symbol.type()!==SymbolType.Dummy){return symbol;}}
return INVALID_SYMBOL;};Solver.prototype._getDualEnteringSymbol=function(row){var ratio=Number.MAX_VALUE;var entering=INVALID_SYMBOL;var cells=row.cells();for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);var symbol=pair.first;var c=pair.second;if(c>0.0&&symbol.type()!==SymbolType.Dummy){var coeff=this._objective.coefficientFor(symbol);var r=coeff/c;if(r<ratio){ratio=r;entering=symbol;}}}
return entering;};Solver.prototype._getLeavingSymbol=function(entering){var ratio=Number.MAX_VALUE;var found=INVALID_SYMBOL;var rows=this._rowMap;for(var i=0,n=rows.size();i<n;++i){var pair=rows.itemAt(i);var symbol=pair.first;if(symbol.type()!==SymbolType.External){var row=pair.second;var temp=row.coefficientFor(entering);if(temp<0.0){var temp_ratio=-row.constant()/temp;if(temp_ratio<ratio){ratio=temp_ratio;found=symbol;}}}}
return found;};Solver.prototype._getMarkerLeavingSymbol=function(marker){var dmax=Number.MAX_VALUE;var r1=dmax;var r2=dmax;var invalid=INVALID_SYMBOL;var first=invalid;var second=invalid;var third=invalid;var rows=this._rowMap;for(var i=0,n=rows.size();i<n;++i){var pair=rows.itemAt(i);var row=pair.second;var c=row.coefficientFor(marker);if(c===0.0){continue;}
var symbol=pair.first;if(symbol.type()===SymbolType.External){third=symbol;}
else if(c<0.0){var r=-row.constant()/c;if(r<r1){r1=r;first=symbol;}}
else{var r=row.constant()/c;if(r<r2){r2=r;second=symbol;}}}
if(first!==invalid){return first;}
if(second!==invalid){return second;}
return third;};Solver.prototype._removeConstraintEffects=function(cn,tag){if(tag.marker.type()===SymbolType.Error){this._removeMarkerEffects(tag.marker,cn.strength());}
if(tag.other.type()===SymbolType.Error){this._removeMarkerEffects(tag.other,cn.strength());}};Solver.prototype._removeMarkerEffects=function(marker,strength){var pair=this._rowMap.find(marker);if(pair!==undefined){this._objective.insertRow(pair.second,-strength);}
else{this._objective.insertSymbol(marker,-strength);}};Solver.prototype._anyPivotableSymbol=function(row){var cells=row.cells();for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);var type=pair.first.type();if(type===SymbolType.Slack||type===SymbolType.Error){return pair.first;}}
return INVALID_SYMBOL;};Solver.prototype._makeSymbol=function(type){return new Symbol(type,this._idTick++);};return Solver;}());kiwi.Solver=Solver;function nearZero(value){var eps=1.0e-8;return value<0.0?-value<eps:value<eps;}
function createCnMap(){return kiwi.createMap(kiwi.Constraint.Compare);}
function createRowMap(){return kiwi.createMap(Symbol.Compare);}
function createVarMap(){return kiwi.createMap(kiwi.Variable.Compare);}
function createEditMap(){return kiwi.createMap(kiwi.Variable.Compare);}
var SymbolType;(function(SymbolType){SymbolType[SymbolType["Invalid"]=0]="Invalid";SymbolType[SymbolType["External"]=1]="External";SymbolType[SymbolType["Slack"]=2]="Slack";SymbolType[SymbolType["Error"]=3]="Error";SymbolType[SymbolType["Dummy"]=4]="Dummy";})(SymbolType||(SymbolType={}));var Symbol=(function(){function Symbol(type,id){this._id=id;this._type=type;}
Symbol.Compare=function(a,b){return a.id()-b.id();};Symbol.prototype.id=function(){return this._id;};Symbol.prototype.type=function(){return this._type;};return Symbol;}());var INVALID_SYMBOL=new Symbol(SymbolType.Invalid,-1);var Row=(function(){function Row(constant){if(constant===void 0){constant=0.0;}
this._cellMap=kiwi.createMap(Symbol.Compare);this._constant=constant;}
Row.prototype.cells=function(){return this._cellMap;};Row.prototype.constant=function(){return this._constant;};Row.prototype.isConstant=function(){return this._cellMap.empty();};Row.prototype.allDummies=function(){var cells=this._cellMap;for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);if(pair.first.type()!==SymbolType.Dummy){return false;}}
return true;};Row.prototype.copy=function(){var theCopy=new Row(this._constant);theCopy._cellMap=this._cellMap.copy();return theCopy;};Row.prototype.add=function(value){return this._constant+=value;};Row.prototype.insertSymbol=function(symbol,coefficient){if(coefficient===void 0){coefficient=1.0;}
var pair=this._cellMap.setDefault(symbol,function(){return 0.0;});if(nearZero(pair.second+=coefficient)){this._cellMap.erase(symbol);}};Row.prototype.insertRow=function(other,coefficient){if(coefficient===void 0){coefficient=1.0;}
this._constant+=other._constant*coefficient;var cells=other._cellMap;for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);this.insertSymbol(pair.first,pair.second*coefficient);}};Row.prototype.removeSymbol=function(symbol){this._cellMap.erase(symbol);};Row.prototype.reverseSign=function(){this._constant=-this._constant;var cells=this._cellMap;for(var i=0,n=cells.size();i<n;++i){var pair=cells.itemAt(i);pair.second=-pair.second;}};Row.prototype.solveFor=function(symbol){var cells=this._cellMap;var pair=cells.erase(symbol);var coeff=-1.0/pair.second;this._constant*=coeff;for(var i=0,n=cells.size();i<n;++i){cells.itemAt(i).second*=coeff;}};Row.prototype.solveForEx=function(lhs,rhs){this.insertSymbol(lhs,-1.0);this.solveFor(rhs);};Row.prototype.coefficientFor=function(symbol){var pair=this._cellMap.find(symbol);return pair!==undefined?pair.second:0.0;};Row.prototype.substitute=function(symbol,row){var pair=this._cellMap.erase(symbol);if(pair!==undefined){this.insertRow(row,pair.second);}};return Row;}());})(kiwi||(kiwi={}));var kiwi;(function(kiwi){var Strength;(function(Strength){function create(a,b,c,w){if(w===void 0){w=1.0;}
var result=0.0;result+=Math.max(0.0,Math.min(1000.0,a*w))*1000000.0;result+=Math.max(0.0,Math.min(1000.0,b*w))*1000.0;result+=Math.max(0.0,Math.min(1000.0,c*w));return result;}
Strength.create=create;Strength.required=create(1000.0,1000.0,1000.0);Strength.strong=create(1.0,0.0,0.0);Strength.medium=create(0.0,1.0,0.0);Strength.weak=create(0.0,0.0,1.0);function clip(value){return Math.max(0.0,Math.min(Strength.required,value));}
Strength.clip=clip;})(Strength=kiwi.Strength||(kiwi.Strength={}));})(kiwi||(kiwi={}));var kiwi;(function(kiwi){var Variable=(function(){function Variable(name){if(name===void 0){name="";}
this._value=0.0;this._context=null;this._id=VarId++;this._name=name;}
Variable.Compare=function(a,b){return a.id()-b.id();};Variable.prototype.id=function(){return this._id;};Variable.prototype.name=function(){return this._name;};Variable.prototype.setName=function(name){this._name=name;};Variable.prototype.context=function(){return this._context;};Variable.prototype.setContext=function(context){this._context=context;};Variable.prototype.value=function(){return this._value;};Variable.prototype.setValue=function(value){this._value=value;};return Variable;}());kiwi.Variable=Variable;var VarId=0;})(kiwi||(kiwi={}));var tsu;(function(tsu){function lowerBound(array,value,compare){var begin=0;var n=array.length;var half;var middle;while(n>0){half=n>>1;middle=begin+half;if(compare(array[middle],value)<0){begin=middle+1;n-=half+1;}
else{n=half;}}
return begin;}
tsu.lowerBound=lowerBound;function binarySearch(array,value,compare){var index=lowerBound(array,value,compare);if(index===array.length){return-1;}
var item=array[index];if(compare(item,value)!==0){return-1;}
return index;}
tsu.binarySearch=binarySearch;function binaryFind(array,value,compare){var index=lowerBound(array,value,compare);if(index===array.length){return undefined;}
var item=array[index];if(compare(item,value)!==0){return undefined;}
return item;}
tsu.binaryFind=binaryFind;function asSet(items,compare){var array=tsu.asArray(items);var n=array.length;if(n<=1){return array;}
array.sort(compare);var result=[array[0]];for(var i=1,j=0;i<n;++i){var item=array[i];if(compare(result[j],item)!==0){result.push(item);++j;}}
return result;}
tsu.asSet=asSet;function setIsDisjoint(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;while(i<len1&&j<len2){var v=compare(first[i],second[j]);if(v<0){++i;}
else if(v>0){++j;}
else{return false;}}
return true;}
tsu.setIsDisjoint=setIsDisjoint;function setIsSubset(first,second,compare){var len1=first.length;var len2=second.length;if(len1>len2){return false;}
var i=0,j=0;while(i<len1&&j<len2){var v=compare(first[i],second[j]);if(v<0){return false;}
else if(v>0){++j;}
else{++i;++j;}}
if(i<len1){return false;}
return true;}
tsu.setIsSubset=setIsSubset;function setUnion(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;var merged=[];while(i<len1&&j<len2){var a=first[i];var b=second[j];var v=compare(a,b);if(v<0){merged.push(a);++i;}
else if(v>0){merged.push(b);++j;}
else{merged.push(a);++i;++j;}}
while(i<len1){merged.push(first[i]);++i;}
while(j<len2){merged.push(second[j]);++j;}
return merged;}
tsu.setUnion=setUnion;function setIntersection(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;var merged=[];while(i<len1&&j<len2){var a=first[i];var b=second[j];var v=compare(a,b);if(v<0){++i;}
else if(v>0){++j;}
else{merged.push(a);++i;++j;}}
return merged;}
tsu.setIntersection=setIntersection;function setDifference(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;var merged=[];while(i<len1&&j<len2){var a=first[i];var b=second[j];var v=compare(a,b);if(v<0){merged.push(a);++i;}
else if(v>0){++j;}
else{++i;++j;}}
while(i<len1){merged.push(first[i]);++i;}
return merged;}
tsu.setDifference=setDifference;function setSymmetricDifference(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;var merged=[];while(i<len1&&j<len2){var a=first[i];var b=second[j];var v=compare(a,b);if(v<0){merged.push(a);++i;}
else if(v>0){merged.push(b);++j;}
else{++i;++j;}}
while(i<len1){merged.push(first[i]);++i;}
while(j<len2){merged.push(second[j]);++j;}
return merged;}
tsu.setSymmetricDifference=setSymmetricDifference;})(tsu||(tsu={}));var tsu;(function(tsu){var ArrayBase=(function(){function ArrayBase(){this._array=[];}
ArrayBase.prototype.size=function(){return this._array.length;};ArrayBase.prototype.empty=function(){return this._array.length===0;};ArrayBase.prototype.itemAt=function(index){return this._array[index];};ArrayBase.prototype.takeAt=function(index){return this._array.splice(index,1)[0];};ArrayBase.prototype.clear=function(){this._array=[];};ArrayBase.prototype.swap=function(other){var array=this._array;this._array=other._array;other._array=array;};ArrayBase.prototype.__iter__=function(){return tsu.iter(this._array);};ArrayBase.prototype.__reversed__=function(){return tsu.reversed(this._array);};return ArrayBase;}());tsu.ArrayBase=ArrayBase;})(tsu||(tsu={}));var tsu;(function(tsu){var AssociativeArray=(function(_super){__extends(AssociativeArray,_super);function AssociativeArray(compare){var _this=_super.call(this)||this;_this._compare=compare;_this._wrapped=wrapCompare(compare);return _this;}
AssociativeArray.prototype.comparitor=function(){return this._compare;};AssociativeArray.prototype.indexOf=function(key){return tsu.binarySearch(this._array,key,this._wrapped);};AssociativeArray.prototype.contains=function(key){return tsu.binarySearch(this._array,key,this._wrapped)>=0;};AssociativeArray.prototype.find=function(key){return tsu.binaryFind(this._array,key,this._wrapped);};AssociativeArray.prototype.setDefault=function(key,factory){var array=this._array;var index=tsu.lowerBound(array,key,this._wrapped);if(index===array.length){var pair=new tsu.Pair(key,factory());array.push(pair);return pair;}
var currPair=array[index];if(this._compare(currPair.first,key)!==0){var pair=new tsu.Pair(key,factory());array.splice(index,0,pair);return pair;}
return currPair;};AssociativeArray.prototype.insert=function(key,value){var array=this._array;var index=tsu.lowerBound(array,key,this._wrapped);if(index===array.length){var pair=new tsu.Pair(key,value);array.push(pair);return pair;}
var currPair=array[index];if(this._compare(currPair.first,key)!==0){var pair=new tsu.Pair(key,value);array.splice(index,0,pair);return pair;}
currPair.second=value;return currPair;};AssociativeArray.prototype.update=function(object){var _this=this;if(object instanceof AssociativeArray){this._array=merge(this._array,object._array,this._compare);}
else{tsu.forEach(object,function(pair){_this.insert(pair.first,pair.second);});}};AssociativeArray.prototype.erase=function(key){var array=this._array;var index=tsu.binarySearch(array,key,this._wrapped);if(index<0){return undefined;}
return array.splice(index,1)[0];};AssociativeArray.prototype.copy=function(){var theCopy=new AssociativeArray(this._compare);var copyArray=theCopy._array;var thisArray=this._array;for(var i=0,n=thisArray.length;i<n;++i){copyArray.push(thisArray[i].copy());}
return theCopy;};return AssociativeArray;}(tsu.ArrayBase));tsu.AssociativeArray=AssociativeArray;function wrapCompare(cmp){return function(pair,value){return cmp(pair.first,value);};}
function merge(first,second,compare){var i=0,j=0;var len1=first.length;var len2=second.length;var merged=[];while(i<len1&&j<len2){var a=first[i];var b=second[j];var v=compare(a.first,b.first);if(v<0){merged.push(a.copy());++i;}
else if(v>0){merged.push(b.copy());++j;}
else{merged.push(b.copy());++i;++j;}}
while(i<len1){merged.push(first[i].copy());++i;}
while(j<len2){merged.push(second[j].copy());++j;}
return merged;}})(tsu||(tsu={}));var tsu;(function(tsu){var ArrayIterator=(function(){function ArrayIterator(array,index){if(typeof index==="undefined"){index=0;}
this._array=array;this._index=Math.max(0,Math.min(index,array.length));}
ArrayIterator.prototype.__next__=function(){return this._array[this._index++];};ArrayIterator.prototype.__iter__=function(){return this;};return ArrayIterator;}());tsu.ArrayIterator=ArrayIterator;var ReverseArrayIterator=(function(){function ReverseArrayIterator(array,index){if(typeof index==="undefined"){index=array.length;}
this._array=array;this._index=Math.max(0,Math.min(index,array.length));}
ReverseArrayIterator.prototype.__next__=function(){return this._array[--this._index];};ReverseArrayIterator.prototype.__iter__=function(){return this;};return ReverseArrayIterator;}());tsu.ReverseArrayIterator=ReverseArrayIterator;function iter(object){if(object instanceof Array){return new ArrayIterator(object);}
return object.__iter__();}
tsu.iter=iter;function reversed(object){if(object instanceof Array){return new ReverseArrayIterator(object);}
return object.__reversed__();}
tsu.reversed=reversed;function next(iterator){return iterator.__next__();}
tsu.next=next;function asArray(object){if(object instanceof Array){return object.slice();}
var value;var array=[];var it=object.__iter__();while((value=it.__next__())!==undefined){array.push(value);}
return array;}
tsu.asArray=asArray;function forEach(object,callback){if(object instanceof Array){for(var i=0,n=object.length;i<n;++i){if(callback(object[i])===false){return;}}}
else{var value;var it=object.__iter__();while((value=it.__next__())!==undefined){if(callback(value)===false){return;}}}}
tsu.forEach=forEach;function map(object,callback){var result=[];if(object instanceof Array){for(var i=0,n=object.length;i<n;++i){result.push(callback(object[i]));}}
else{var value;var it=object.__iter__();while((value=it.__next__())!==undefined){result.push(callback(value));}}
return result;}
tsu.map=map;function filter(object,callback){var value;var result=[];if(object instanceof Array){for(var i=0,n=object.length;i<n;++i){value=object[i];if(callback(value)){result.push(value);}}}
else{var it=object.__iter__();while((value=it.__next__())!==undefined){if(callback(value)){result.push(value);}}}
return result;}
tsu.filter=filter;})(tsu||(tsu={}));var tsu;(function(tsu){var Pair=(function(){function Pair(first,second){this.first=first;this.second=second;}
Pair.prototype.copy=function(){return new Pair(this.first,this.second);};return Pair;}());tsu.Pair=Pair;})(tsu||(tsu={}));module.exports=kiwi;},{}],"numbro":[function(require,module,exports){/*!
 * numbro.js
 * version : 1.6.2
 * author : Företagsplatsen AB
 * license : MIT
 * http://www.foretagsplatsen.se
 */
var numbro,VERSION='1.6.2',cultures={},languages=cultures,currentCulture='en-US',zeroFormat=null,defaultFormat='0,0',defaultCurrencyFormat='0$',hasModule=(typeof module!=='undefined'&&module.exports),enUS={delimiters:{thousands:',',decimal:'.'},abbreviations:{thousand:'k',million:'m',billion:'b',trillion:'t'},ordinal:function(number){var b=number%10;return(~~(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';},currency:{symbol:'$',position:'prefix'},defaults:{currencyFormat:',0000 a'},formats:{fourDigits:'0000 a',fullWithTwoDecimals:'$ ,0.00',fullWithTwoDecimalsNoCurrency:',0.00'}};function Numbro(number){this._value=number;}
function zeroes(count){var i,ret='';for(i=0;i<count;i++){ret+='0';}
return ret;}
function toFixedLarge(value,precision){var mantissa,beforeDec,afterDec,exponent,str;str=value.toString();mantissa=str.split('e')[0];exponent=str.split('e')[1];beforeDec=mantissa.split('.')[0];afterDec=mantissa.split('.')[1]||'';str=beforeDec+afterDec+zeroes(exponent-afterDec.length);if(precision>0){str+='.'+zeroes(precision);}
return str;}
function toFixed(value,precision,roundingFunction,optionals){var power=Math.pow(10,precision),optionalsRegExp,output;if(value.toFixed(0).search('e')>-1){output=toFixedLarge(value,precision);}
else{output=(roundingFunction(value*power)/power).toFixed(precision);}
if(optionals){optionalsRegExp=new RegExp('0{1,'+optionals+'}$');output=output.replace(optionalsRegExp,'');}
return output;}
function formatNumbro(value,format,roundingFunction){var output;if(format.indexOf('$')>-1){output=formatCurrency(value,format,roundingFunction);}else if(format.indexOf('%')>-1){output=formatPercentage(value,format,roundingFunction);}else if(format.indexOf(':')>-1){output=formatTime(value);}else{output=formatNumber(value,format,roundingFunction);}
return output;}
function formatCurrency(value,originalFormat,roundingFunction){var format=originalFormat,symbolIndex=format.indexOf('$'),openParenIndex=format.indexOf('('),plusSignIndex=format.indexOf('+'),minusSignIndex=format.indexOf('-'),space='',decimalSeparator='',spliceIndex,output;if(format.indexOf('$')===-1){if(cultures[currentCulture].currency.position==='infix'){decimalSeparator=cultures[currentCulture].currency.symbol;if(cultures[currentCulture].currency.spaceSeparated){decimalSeparator=' '+decimalSeparator+' ';}}else if(cultures[currentCulture].currency.spaceSeparated){space=' ';}}else{if(format.indexOf(' $')>-1){space=' ';format=format.replace(' $','');}else if(format.indexOf('$ ')>-1){space=' ';format=format.replace('$ ','');}else{format=format.replace('$','');}}
output=formatNumber(value,format,roundingFunction,decimalSeparator);if(originalFormat.indexOf('$')===-1){switch(cultures[currentCulture].currency.position){case'postfix':if(output.indexOf(')')>-1){output=output.split('');output.splice(-1,0,space+cultures[currentCulture].currency.symbol);output=output.join('');}else{output=output+space+cultures[currentCulture].currency.symbol;}
break;case'infix':break;case'prefix':if(output.indexOf('(')>-1||output.indexOf('-')>-1){output=output.split('');spliceIndex=Math.max(openParenIndex,minusSignIndex)+1;output.splice(spliceIndex,0,cultures[currentCulture].currency.symbol+space);output=output.join('');}else{output=cultures[currentCulture].currency.symbol+space+output;}
break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]');}}else{if(symbolIndex<=1){if(output.indexOf('(')>-1||output.indexOf('+')>-1||output.indexOf('-')>-1){output=output.split('');spliceIndex=1;if(symbolIndex<openParenIndex||symbolIndex<plusSignIndex||symbolIndex<minusSignIndex){spliceIndex=0;}
output.splice(spliceIndex,0,cultures[currentCulture].currency.symbol+space);output=output.join('');}else{output=cultures[currentCulture].currency.symbol+space+output;}}else{if(output.indexOf(')')>-1){output=output.split('');output.splice(-1,0,space+cultures[currentCulture].currency.symbol);output=output.join('');}else{output=output+space+cultures[currentCulture].currency.symbol;}}}
return output;}
function formatPercentage(value,format,roundingFunction){var space='',output;value=value*100;if(format.indexOf(' %')>-1){space=' ';format=format.replace(' %','');}else{format=format.replace('%','');}
output=formatNumber(value,format,roundingFunction);if(output.indexOf(')')>-1){output=output.split('');output.splice(-1,0,space+'%');output=output.join('');}else{output=output+space+'%';}
return output;}
function formatTime(value){var hours=Math.floor(value/60/60),minutes=Math.floor((value-(hours*60*60))/60),seconds=Math.round(value-(hours*60*60)-(minutes*60));return hours+':'+
((minutes<10)?'0'+minutes:minutes)+':'+
((seconds<10)?'0'+seconds:seconds);}
function formatNumber(value,format,roundingFunction,sep){var negP=false,signed=false,optDec=false,abbr='',i,abbrK=false,abbrM=false,abbrB=false,abbrT=false,abbrForce=false,bytes='',ord='',abs=Math.abs(value),binarySuffixes=['B','KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'],decimalSuffixes=['B','KB','MB','GB','TB','PB','EB','ZB','YB'],min,max,power,totalLength,length,minimumPrecision,pow,w,intPrecision,precision,prefix,postfix,thousands,d='',forcedNeg=false,neg=false,indexOpenP,size,indexMinus,paren='',minlen;if(value===0&&zeroFormat!==null){return zeroFormat;}
if(!isFinite(value)){return''+value;}
if(format.indexOf('{')===0){var end=format.indexOf('}');if(end===-1){throw Error('Format should also contain a "}"');}
prefix=format.slice(1,end);format=format.slice(end+1);}else{prefix='';}
if(format.indexOf('}')===format.length-1){var start=format.indexOf('{');if(start===-1){throw Error('Format should also contain a "{"');}
postfix=format.slice(start+1,-1);format=format.slice(0,start+1);}else{postfix='';}
var info;if(format.indexOf('.')===-1){info=format.match(/([0-9]+).*/);}else{info=format.match(/([0-9]+)\..*/);}
minlen=info===null?-1:info[1].length;if(format.indexOf('-')!==-1){forcedNeg=true;}
if(format.indexOf('(')>-1){negP=true;format=format.slice(1,-1);}else if(format.indexOf('+')>-1){signed=true;format=format.replace(/\+/g,'');}
if(format.indexOf('a')>-1){intPrecision=format.split('.')[0].match(/[0-9]+/g)||['0'];intPrecision=parseInt(intPrecision[0],10);abbrK=format.indexOf('aK')>=0;abbrM=format.indexOf('aM')>=0;abbrB=format.indexOf('aB')>=0;abbrT=format.indexOf('aT')>=0;abbrForce=abbrK||abbrM||abbrB||abbrT;if(format.indexOf(' a')>-1){abbr=' ';format=format.replace(' a','');}else{format=format.replace('a','');}
totalLength=Math.floor(Math.log(abs)/Math.LN10)+1;minimumPrecision=totalLength%3;minimumPrecision=minimumPrecision===0?3:minimumPrecision;if(intPrecision&&abs!==0){length=Math.floor(Math.log(abs)/Math.LN10)+1-intPrecision;pow=3*~~((Math.min(intPrecision,totalLength)-minimumPrecision)/3);abs=abs/Math.pow(10,pow);if(format.indexOf('.')===-1&&intPrecision>3){format+='[.]';size=length===0?0:3*~~(length/3)-length;size=size<0?size+3:size;for(i=0;i<size;i++){format+='0';}}}
if(Math.floor(Math.log(Math.abs(value))/Math.LN10)+1!==intPrecision){if(abs>=Math.pow(10,12)&&!abbrForce||abbrT){abbr=abbr+cultures[currentCulture].abbreviations.trillion;value=value/Math.pow(10,12);}else if(abs<Math.pow(10,12)&&abs>=Math.pow(10,9)&&!abbrForce||abbrB){abbr=abbr+cultures[currentCulture].abbreviations.billion;value=value/Math.pow(10,9);}else if(abs<Math.pow(10,9)&&abs>=Math.pow(10,6)&&!abbrForce||abbrM){abbr=abbr+cultures[currentCulture].abbreviations.million;value=value/Math.pow(10,6);}else if(abs<Math.pow(10,6)&&abs>=Math.pow(10,3)&&!abbrForce||abbrK){abbr=abbr+cultures[currentCulture].abbreviations.thousand;value=value/Math.pow(10,3);}}}
if(format.indexOf('b')>-1){if(format.indexOf(' b')>-1){bytes=' ';format=format.replace(' b','');}else{format=format.replace('b','');}
for(power=0;power<=binarySuffixes.length;power++){min=Math.pow(1024,power);max=Math.pow(1024,power+1);if(value>=min&&value<max){bytes=bytes+binarySuffixes[power];if(min>0){value=value/min;}
break;}}}
if(format.indexOf('d')>-1){if(format.indexOf(' d')>-1){bytes=' ';format=format.replace(' d','');}else{format=format.replace('d','');}
for(power=0;power<=decimalSuffixes.length;power++){min=Math.pow(1000,power);max=Math.pow(1000,power+1);if(value>=min&&value<max){bytes=bytes+decimalSuffixes[power];if(min>0){value=value/min;}
break;}}}
if(format.indexOf('o')>-1){if(format.indexOf(' o')>-1){ord=' ';format=format.replace(' o','');}else{format=format.replace('o','');}
if(cultures[currentCulture].ordinal){ord=ord+cultures[currentCulture].ordinal(value);}}
if(format.indexOf('[.]')>-1){optDec=true;format=format.replace('[.]','.');}
w=value.toString().split('.')[0];precision=format.split('.')[1];thousands=format.indexOf(',');if(precision){if(precision.indexOf('*')!==-1){d=toFixed(value,value.toString().split('.')[1].length,roundingFunction);}else{if(precision.indexOf('[')>-1){precision=precision.replace(']','');precision=precision.split('[');d=toFixed(value,(precision[0].length+precision[1].length),roundingFunction,precision[1].length);}else{d=toFixed(value,precision.length,roundingFunction);}}
w=d.split('.')[0];if(d.split('.')[1].length){var p=sep?abbr+sep:cultures[currentCulture].delimiters.decimal;d=p+d.split('.')[1];}else{d='';}
if(optDec&&Number(d.slice(1))===0){d='';}}else{w=toFixed(value,null,roundingFunction);}
if(w.indexOf('-')>-1){w=w.slice(1);neg=true;}
if(w.length<minlen){w=new Array(minlen-w.length+1).join('0')+w;}
if(thousands>-1){w=w.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1'+
cultures[currentCulture].delimiters.thousands);}
if(format.indexOf('.')===0){w='';}
indexOpenP=format.indexOf('(');indexMinus=format.indexOf('-');if(indexOpenP<indexMinus){paren=((negP&&neg)?'(':'')+(((forcedNeg&&neg)||(!negP&&neg))?'-':'');}else{paren=(((forcedNeg&&neg)||(!negP&&neg))?'-':'')+((negP&&neg)?'(':'');}
return prefix+
paren+((!neg&&signed&&value!==0)?'+':'')+
w+d+
((ord)?ord:'')+
((abbr&&!sep)?abbr:'')+
((bytes)?bytes:'')+
((negP&&neg)?')':'')+
postfix;}
numbro=function(input){if(numbro.isNumbro(input)){input=input.value();}else if(input===0||typeof input==='undefined'){input=0;}else if(!Number(input)){input=numbro.fn.unformat(input);}
return new Numbro(Number(input));};numbro.version=VERSION;numbro.isNumbro=function(obj){return obj instanceof Numbro;};numbro.setLanguage=function(newLanguage,fallbackLanguage){console.warn('`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead');var key=newLanguage,prefix=newLanguage.split('-')[0],matchingLanguage=null;if(!languages[key]){Object.keys(languages).forEach(function(language){if(!matchingLanguage&&language.split('-')[0]===prefix){matchingLanguage=language;}});key=matchingLanguage||fallbackLanguage||'en-US';}
chooseCulture(key);};numbro.setCulture=function(newCulture,fallbackCulture){var key=newCulture,suffix=newCulture.split('-')[1],matchingCulture=null;if(!cultures[key]){if(suffix){Object.keys(cultures).forEach(function(language){if(!matchingCulture&&language.split('-')[1]===suffix){matchingCulture=language;}});}
key=matchingCulture||fallbackCulture||'en-US';}
chooseCulture(key);};numbro.language=function(key,values){console.warn('`language` is deprecated since version 1.6.0. Use `culture` instead');if(!key){return currentCulture;}
if(key&&!values){if(!languages[key]){throw new Error('Unknown language : '+key);}
chooseCulture(key);}
if(values||!languages[key]){setCulture(key,values);}
return numbro;};numbro.culture=function(code,values){if(!code){return currentCulture;}
if(code&&!values){if(!cultures[code]){throw new Error('Unknown culture : '+code);}
chooseCulture(code);}
if(values||!cultures[code]){setCulture(code,values);}
return numbro;};numbro.languageData=function(key){console.warn('`languageData` is deprecated since version 1.6.0. Use `cultureData` instead');if(!key){return languages[currentCulture];}
if(!languages[key]){throw new Error('Unknown language : '+key);}
return languages[key];};numbro.cultureData=function(code){if(!code){return cultures[currentCulture];}
if(!cultures[code]){throw new Error('Unknown culture : '+code);}
return cultures[code];};numbro.culture('en-US',enUS);numbro.languages=function(){console.warn('`languages` is deprecated since version 1.6.0. Use `cultures` instead');return languages;};numbro.cultures=function(){return cultures;};numbro.zeroFormat=function(format){zeroFormat=typeof(format)==='string'?format:null;};numbro.defaultFormat=function(format){defaultFormat=typeof(format)==='string'?format:'0.0';};numbro.defaultCurrencyFormat=function(format){defaultCurrencyFormat=typeof(format)==='string'?format:'0$';};numbro.validate=function(val,culture){var _decimalSep,_thousandSep,_currSymbol,_valArray,_abbrObj,_thousandRegEx,cultureData,temp;if(typeof val!=='string'){val+='';if(console.warn){console.warn('Numbro.js: Value is not string. It has been co-erced to: ',val);}}
val=val.trim();if(!!val.match(/^\d+$/)){return true;}
if(val===''){return false;}
try{cultureData=numbro.cultureData(culture);}catch(e){cultureData=numbro.cultureData(numbro.culture());}
_currSymbol=cultureData.currency.symbol;_abbrObj=cultureData.abbreviations;_decimalSep=cultureData.delimiters.decimal;if(cultureData.delimiters.thousands==='.'){_thousandSep='\\.';}else{_thousandSep=cultureData.delimiters.thousands;}
temp=val.match(/^[^\d]+/);if(temp!==null){val=val.substr(1);if(temp[0]!==_currSymbol){return false;}}
temp=val.match(/[^\d]+$/);if(temp!==null){val=val.slice(0,-1);if(temp[0]!==_abbrObj.thousand&&temp[0]!==_abbrObj.million&&temp[0]!==_abbrObj.billion&&temp[0]!==_abbrObj.trillion){return false;}}
_thousandRegEx=new RegExp(_thousandSep+'{2}');if(!val.match(/[^\d.,]/g)){_valArray=val.split(_decimalSep);if(_valArray.length>2){return false;}else{if(_valArray.length<2){return(!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx));}else{if(_valArray[0].length===1){return(!!_valArray[0].match(/^\d+$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/));}else{return(!!_valArray[0].match(/^\d+.*\d$/)&&!_valArray[0].match(_thousandRegEx)&&!!_valArray[1].match(/^\d+$/));}}}}
return false;};function setCulture(code,values){cultures[code]=values;}
function chooseCulture(code){currentCulture=code;var defaults=cultures[code].defaults;if(defaults&&defaults.format){numbro.defaultFormat(defaults.format);}
if(defaults&&defaults.currencyFormat){numbro.defaultCurrencyFormat(defaults.currencyFormat);}}
function format(input,formatString,language,roundingFunction){if(language!=null&&language!==numbro.culture()){numbro.setCulture(language);}
return formatNumbro(Number(input),formatString!=null?formatString:defaultFormat,roundingFunction==null?Math.round:roundingFunction);}
module.exports={"format":format};},{}],"_process":[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}
function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}
(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}
try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}}())
function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0);}
if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}
try{return cachedSetTimeout(fun,0);}catch(e){try{return cachedSetTimeout.call(null,fun,0);}catch(e){return cachedSetTimeout.call(this,fun,0);}}}
function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker);}
if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}
try{return cachedClearTimeout(marker);}catch(e){try{return cachedClearTimeout.call(null,marker);}catch(e){return cachedClearTimeout.call(this,marker);}}}
var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}
draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}
if(queue.length){drainQueue();}}
function drainQueue(){if(draining){return;}
var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}
queueIndex=-1;len=queue.length;}
currentQueue=null;draining=false;runClearTimeout(timeout);}
process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}
queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};function Item(fun,array){this.fun=fun;this.array=array;}
Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}
process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return'/'};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};},{}],"proj4/lib/Proj":[function(require,module,exports){var parseCode=require('./parseCode');var extend=require('./extend');var projections=require('./projections');var deriveConstants=require('./deriveConstants');var Datum=require('./constants/Datum');var datum=require('./datum');function Projection(srsCode,callback){if(!(this instanceof Projection)){return new Projection(srsCode);}
callback=callback||function(error){if(error){throw error;}};var json=parseCode(srsCode);if(typeof json!=='object'){callback(srsCode);return;}
var ourProj=Projection.projections.get(json.projName);if(!ourProj){callback(srsCode);return;}
if(json.datumCode&&json.datumCode!=='none'){var datumDef=Datum[json.datumCode];if(datumDef){json.datum_params=datumDef.towgs84?datumDef.towgs84.split(','):null;json.ellps=datumDef.ellipse;json.datumName=datumDef.datumName?datumDef.datumName:json.datumCode;}}
json.k0=json.k0||1.0;json.axis=json.axis||'enu';var sphere=deriveConstants.sphere(json.a,json.b,json.rf,json.ellps,json.sphere);var ecc=deriveConstants.eccentricity(sphere.a,sphere.b,sphere.rf,json.R_A);var datumObj=json.datum||datum(json.datumCode,json.datum_params,sphere.a,sphere.b,ecc.es,ecc.ep2);extend(this,json);extend(this,ourProj);this.a=sphere.a;this.b=sphere.b;this.rf=sphere.rf;this.sphere=sphere.sphere;this.es=ecc.es;this.e=ecc.e;this.ep2=ecc.ep2;this.datum=datumObj;this.init();callback(null,this);}
Projection.projections=projections;Projection.projections.start();module.exports=Projection;},{"./constants/Datum":"proj4/lib/constants/Datum","./datum":"proj4/lib/datum","./deriveConstants":"proj4/lib/deriveConstants","./extend":"proj4/lib/extend","./parseCode":"proj4/lib/parseCode","./projections":"proj4/lib/projections"}],"proj4/lib/adjust_axis":[function(require,module,exports){module.exports=function(crs,denorm,point){var xin=point.x,yin=point.y,zin=point.z||0.0;var v,t,i;var out={};for(i=0;i<3;i++){if(denorm&&i===2&&point.z===undefined){continue;}
if(i===0){v=xin;t='x';}
else if(i===1){v=yin;t='y';}
else{v=zin;t='z';}
switch(crs.axis[i]){case'e':out[t]=v;break;case'w':out[t]=-v;break;case'n':out[t]=v;break;case's':out[t]=-v;break;case'u':if(point[t]!==undefined){out.z=v;}
break;case'd':if(point[t]!==undefined){out.z=-v;}
break;default:return null;}}
return out;};},{}],"proj4/lib/common/adjust_lon":[function(require,module,exports){var TWO_PI=Math.PI*2;var SPI=3.14159265359;var sign=require('./sign');module.exports=function(x){return(Math.abs(x)<=SPI)?x:(x-(sign(x)*TWO_PI));};},{"./sign":"proj4/lib/common/sign"}],"proj4/lib/common/msfnz":[function(require,module,exports){module.exports=function(eccent,sinphi,cosphi){var con=eccent*sinphi;return cosphi/(Math.sqrt(1-con*con));};},{}],"proj4/lib/common/phi2z":[function(require,module,exports){var HALF_PI=Math.PI/2;module.exports=function(eccent,ts){var eccnth=0.5*eccent;var con,dphi;var phi=HALF_PI-2*Math.atan(ts);for(var i=0;i<=15;i++){con=eccent*Math.sin(phi);dphi=HALF_PI-2*Math.atan(ts*(Math.pow(((1-con)/(1+con)),eccnth)))-phi;phi+=dphi;if(Math.abs(dphi)<=0.0000000001){return phi;}}
return-9999;};},{}],"proj4/lib/common/sign":[function(require,module,exports){module.exports=function(x){return x<0?-1:1;};},{}],"proj4/lib/common/toPoint":[function(require,module,exports){module.exports=function(array){var out={x:array[0],y:array[1]};if(array.length>2){out.z=array[2];}
if(array.length>3){out.m=array[3];}
return out;};},{}],"proj4/lib/common/tsfnz":[function(require,module,exports){var HALF_PI=Math.PI/2;module.exports=function(eccent,phi,sinphi){var con=eccent*sinphi;var com=0.5*eccent;con=Math.pow(((1-con)/(1+con)),com);return(Math.tan(0.5*(HALF_PI-phi))/con);};},{}],"proj4/lib/constants/Datum":[function(require,module,exports){exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:'bessel',datumName:'S-JTSK (Ferro)'};exports.beduaram={towgs84:'-106,-87,188',ellipse:'clrk80',datumName:'Beduaram'};exports.gunung_segara={towgs84:'-403,684,41',ellipse:'bessel',datumName:'Gunung Segara Jakarta'};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};},{}],"proj4/lib/constants/Ellipsoid":[function(require,module,exports){exports.MERIT={a:6378137.0,rf:298.257,ellipseName:"MERIT 1983"};exports.SGS85={a:6378136.0,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports.GRS80={a:6378137.0,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports.IAU76={a:6378140.0,rf:298.257,ellipseName:"IAU 1976"};exports.airy={a:6377563.396,b:6356256.910,ellipseName:"Airy 1830"};exports.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports.NWL9D={a:6378145.0,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};exports.andrae={a:6377104.43,rf:300.0,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports.aust_SA={a:6378160.0,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports.GRS67={a:6378160.0,rf:298.2471674270,ellipseName:"GRS 67(IUGG 1967)"};exports.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};exports.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};exports.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports.delmbr={a:6376428.0,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};exports.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};exports.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};exports.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};exports.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};exports.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports.fschr60={a:6378166.0,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports.fschr60m={a:6378155.0,rf:298.3,ellipseName:"Fischer 1960"};exports.fschr68={a:6378150.0,rf:298.3,ellipseName:"Fischer 1968"};exports.helmert={a:6378200.0,rf:298.3,ellipseName:"Helmert 1906"};exports.hough={a:6378270.0,rf:297.0,ellipseName:"Hough"};exports.intl={a:6378388.0,rf:297.0,ellipseName:"International 1909 (Hayford)"};exports.kaula={a:6378163.0,rf:298.24,ellipseName:"Kaula 1961"};exports.lerch={a:6378139.0,rf:298.257,ellipseName:"Lerch 1979"};exports.mprts={a:6397300.0,rf:191.0,ellipseName:"Maupertius 1738"};exports.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};exports.plessis={a:6376523.0,rf:6355863.0,ellipseName:"Plessis 1817 (France)"};exports.krass={a:6378245.0,rf:298.3,ellipseName:"Krassovsky, 1942"};exports.SEasia={a:6378155.0,b:6356773.3205,ellipseName:"Southeast Asia"};exports.walbeck={a:6376896.0,b:6355834.8467,ellipseName:"Walbeck"};exports.WGS60={a:6378165.0,rf:298.3,ellipseName:"WGS 60"};exports.WGS66={a:6378145.0,rf:298.25,ellipseName:"WGS 66"};exports.WGS7={a:6378135.0,rf:298.26,ellipseName:"WGS 72"};exports.WGS84={a:6378137.0,rf:298.257223563,ellipseName:"WGS 84"};exports.sphere={a:6370997.0,b:6370997.0,ellipseName:"Normal Sphere (r=6370997)"};},{}],"proj4/lib/constants/PrimeMeridian":[function(require,module,exports){exports.greenwich=0.0;exports.lisbon=-9.131906111111;exports.paris=2.337229166667;exports.bogota=-74.080916666667;exports.madrid=-3.687938888889;exports.rome=12.452333333333;exports.bern=7.439583333333;exports.jakarta=106.807719444444;exports.ferro=-17.666666666667;exports.brussels=4.367975;exports.stockholm=18.058277777778;exports.athens=23.7163375;exports.oslo=10.722916666667;},{}],"proj4/lib/constants/units":[function(require,module,exports){exports.ft={to_meter:0.3048};exports['us-ft']={to_meter:1200/3937};},{}],"proj4/lib/core":[function(require,module,exports){var proj=require('./Proj');var transform=require('./transform');var wgs84=proj('WGS84');function transformer(from,to,coords){var transformedArray;if(Array.isArray(coords)){transformedArray=transform(from,to,coords);if(coords.length===3){return[transformedArray.x,transformedArray.y,transformedArray.z];}
else{return[transformedArray.x,transformedArray.y];}}
else{return transform(from,to,coords);}}
function checkProj(item){if(item instanceof proj){return item;}
if(item.oProj){return item.oProj;}
return proj(item);}
function proj4(fromProj,toProj,coord){fromProj=checkProj(fromProj);var single=false;var obj;if(typeof toProj==='undefined'){toProj=fromProj;fromProj=wgs84;single=true;}
else if(typeof toProj.x!=='undefined'||Array.isArray(toProj)){coord=toProj;toProj=fromProj;fromProj=wgs84;single=true;}
toProj=checkProj(toProj);if(coord){return transformer(fromProj,toProj,coord);}
else{obj={forward:function(coords){return transformer(fromProj,toProj,coords);},inverse:function(coords){return transformer(toProj,fromProj,coords);}};if(single){obj.oProj=toProj;}
return obj;}}
module.exports=proj4;},{"./Proj":"proj4/lib/Proj","./transform":"proj4/lib/transform"}],"proj4/lib/datum":[function(require,module,exports){var PJD_3PARAM=1;var PJD_7PARAM=2;var PJD_WGS84=4;var PJD_NODATUM=5;var SEC_TO_RAD=4.84813681109535993589914102357e-6;function datum(datumCode,datum_params,a,b,es,ep2){var out={};out.datum_type=PJD_WGS84;if(datumCode&&datumCode==='none'){out.datum_type=PJD_NODATUM;}
if(datum_params){out.datum_params=datum_params.map(parseFloat);if(out.datum_params[0]!==0||out.datum_params[1]!==0||out.datum_params[2]!==0){out.datum_type=PJD_3PARAM;}
if(out.datum_params.length>3){if(out.datum_params[3]!==0||out.datum_params[4]!==0||out.datum_params[5]!==0||out.datum_params[6]!==0){out.datum_type=PJD_7PARAM;out.datum_params[3]*=SEC_TO_RAD;out.datum_params[4]*=SEC_TO_RAD;out.datum_params[5]*=SEC_TO_RAD;out.datum_params[6]=(out.datum_params[6]/1000000.0)+1.0;}}}
out.a=a;out.b=b;out.es=es;out.ep2=ep2;return out;}
module.exports=datum;},{}],"proj4/lib/datumUtils":[function(require,module,exports){'use strict';var PJD_3PARAM=1;var PJD_7PARAM=2;var HALF_PI=Math.PI/2;exports.compareDatums=function(source,dest){if(source.datum_type!==dest.datum_type){return false;}else if(source.a!==dest.a||Math.abs(this.es-dest.es)>0.000000000050){return false;}else if(source.datum_type===PJD_3PARAM){return(this.datum_params[0]===dest.datum_params[0]&&source.datum_params[1]===dest.datum_params[1]&&source.datum_params[2]===dest.datum_params[2]);}else if(source.datum_type===PJD_7PARAM){return(source.datum_params[0]===dest.datum_params[0]&&source.datum_params[1]===dest.datum_params[1]&&source.datum_params[2]===dest.datum_params[2]&&source.datum_params[3]===dest.datum_params[3]&&source.datum_params[4]===dest.datum_params[4]&&source.datum_params[5]===dest.datum_params[5]&&source.datum_params[6]===dest.datum_params[6]);}else{return true;}};exports.geodeticToGeocentric=function(p,es,a){var Longitude=p.x;var Latitude=p.y;var Height=p.z?p.z:0;var Rn;var Sin_Lat;var Sin2_Lat;var Cos_Lat;if(Latitude<-HALF_PI&&Latitude>-1.001*HALF_PI){Latitude=-HALF_PI;}else if(Latitude>HALF_PI&&Latitude<1.001*HALF_PI){Latitude=HALF_PI;}else if((Latitude<-HALF_PI)||(Latitude>HALF_PI)){return null;}
if(Longitude>Math.PI){Longitude-=(2*Math.PI);}
Sin_Lat=Math.sin(Latitude);Cos_Lat=Math.cos(Latitude);Sin2_Lat=Sin_Lat*Sin_Lat;Rn=a/(Math.sqrt(1.0e0-es*Sin2_Lat));return{x:(Rn+Height)*Cos_Lat*Math.cos(Longitude),y:(Rn+Height)*Cos_Lat*Math.sin(Longitude),z:((Rn*(1-es))+Height)*Sin_Lat};};exports.geocentricToGeodetic=function(p,es,a,b){var genau=1e-12;var genau2=(genau*genau);var maxiter=30;var P;var RR;var CT;var ST;var RX;var RK;var RN;var CPHI0;var SPHI0;var CPHI;var SPHI;var SDPHI;var iter;var X=p.x;var Y=p.y;var Z=p.z?p.z:0.0;var Longitude;var Latitude;var Height;P=Math.sqrt(X*X+Y*Y);RR=Math.sqrt(X*X+Y*Y+Z*Z);if(P/a<genau){Longitude=0.0;if(RR/a<genau){Latitude=HALF_PI;Height=-b;return{x:p.x,y:p.y,z:p.z};}}else{Longitude=Math.atan2(Y,X);}
CT=Z/RR;ST=P/RR;RX=1.0/Math.sqrt(1.0-es*(2.0-es)*ST*ST);CPHI0=ST*(1.0-es)*RX;SPHI0=CT*RX;iter=0;do{iter++;RN=a/Math.sqrt(1.0-es*SPHI0*SPHI0);Height=P*CPHI0+Z*SPHI0-RN*(1.0-es*SPHI0*SPHI0);RK=es*RN/(RN+Height);RX=1.0/Math.sqrt(1.0-RK*(2.0-RK)*ST*ST);CPHI=ST*(1.0-RK)*RX;SPHI=CT*RX;SDPHI=SPHI*CPHI0-CPHI*SPHI0;CPHI0=CPHI;SPHI0=SPHI;}
while(SDPHI*SDPHI>genau2&&iter<maxiter);Latitude=Math.atan(SPHI/Math.abs(CPHI));return{x:Longitude,y:Latitude,z:Height};};exports.geocentricToWgs84=function(p,datum_type,datum_params){if(datum_type===PJD_3PARAM){return{x:p.x+datum_params[0],y:p.y+datum_params[1],z:p.z+datum_params[2],};}else if(datum_type===PJD_7PARAM){var Dx_BF=datum_params[0];var Dy_BF=datum_params[1];var Dz_BF=datum_params[2];var Rx_BF=datum_params[3];var Ry_BF=datum_params[4];var Rz_BF=datum_params[5];var M_BF=datum_params[6];return{x:M_BF*(p.x-Rz_BF*p.y+Ry_BF*p.z)+Dx_BF,y:M_BF*(Rz_BF*p.x+p.y-Rx_BF*p.z)+Dy_BF,z:M_BF*(-Ry_BF*p.x+Rx_BF*p.y+p.z)+Dz_BF};}};exports.geocentricFromWgs84=function(p,datum_type,datum_params){if(datum_type===PJD_3PARAM){return{x:p.x-datum_params[0],y:p.y-datum_params[1],z:p.z-datum_params[2],};}else if(datum_type===PJD_7PARAM){var Dx_BF=datum_params[0];var Dy_BF=datum_params[1];var Dz_BF=datum_params[2];var Rx_BF=datum_params[3];var Ry_BF=datum_params[4];var Rz_BF=datum_params[5];var M_BF=datum_params[6];var x_tmp=(p.x-Dx_BF)/M_BF;var y_tmp=(p.y-Dy_BF)/M_BF;var z_tmp=(p.z-Dz_BF)/M_BF;return{x:x_tmp+Rz_BF*y_tmp-Ry_BF*z_tmp,y:-Rz_BF*x_tmp+y_tmp+Rx_BF*z_tmp,z:Ry_BF*x_tmp-Rx_BF*y_tmp+z_tmp};}};},{}],"proj4/lib/datum_transform":[function(require,module,exports){var PJD_3PARAM=1;var PJD_7PARAM=2;var PJD_NODATUM=5;var datum=require('./datumUtils');function checkParams(type){return(type===PJD_3PARAM||type===PJD_7PARAM);}
module.exports=function(source,dest,point){if(datum.compareDatums(source,dest)){return point;}
if(source.datum_type===PJD_NODATUM||dest.datum_type===PJD_NODATUM){return point;}
if(source.es===dest.es&&source.a===dest.a&&!checkParams(source.datum_type)&&!checkParams(dest.datum_type)){return point;}
point=datum.geodeticToGeocentric(point,source.es,source.a);if(checkParams(source.datum_type)){point=datum.geocentricToWgs84(point,source.datum_type,source.datum_params);}
if(checkParams(dest.datum_type)){point=datum.geocentricFromWgs84(point,dest.datum_type,dest.datum_params);}
return datum.geocentricToGeodetic(point,dest.es,dest.a,dest.b);};},{"./datumUtils":"proj4/lib/datumUtils"}],"proj4/lib/defs":[function(require,module,exports){var globals=require('./global');var parseProj=require('./projString');var wkt=require('./wkt');function defs(name){var that=this;if(arguments.length===2){var def=arguments[1];if(typeof def==='string'){if(def.charAt(0)==='+'){defs[name]=parseProj(arguments[1]);}
else{defs[name]=wkt(arguments[1]);}}else{defs[name]=def;}}
else if(arguments.length===1){if(Array.isArray(name)){return name.map(function(v){if(Array.isArray(v)){defs.apply(that,v);}
else{defs(v);}});}
else if(typeof name==='string'){if(name in defs){return defs[name];}}
else if('EPSG'in name){defs['EPSG:'+name.EPSG]=name;}
else if('ESRI'in name){defs['ESRI:'+name.ESRI]=name;}
else if('IAU2000'in name){defs['IAU2000:'+name.IAU2000]=name;}
else{console.log(name);}
return;}}
globals(defs);module.exports=defs;},{"./global":"proj4/lib/global","./projString":"proj4/lib/projString","./wkt":"proj4/lib/wkt"}],"proj4/lib/deriveConstants":[function(require,module,exports){var SIXTH=0.1666666666666666667;var RA4=0.04722222222222222222;var RA6=0.02215608465608465608;var EPSLN=1.0e-10;var Ellipsoid=require('./constants/Ellipsoid');exports.eccentricity=function(a,b,rf,R_A){var a2=a*a;var b2=b*b;var es=(a2-b2)/a2;var e=0;if(R_A){a*=1-es*(SIXTH+es*(RA4+es*RA6));a2=a*a;es=0;}else{e=Math.sqrt(es);}
var ep2=(a2-b2)/b2;return{es:es,e:e,ep2:ep2};};exports.sphere=function(a,b,rf,ellps,sphere){if(!a){var ellipse=Ellipsoid[ellps];if(!ellipse){ellipse=Ellipsoid.WGS84;}
a=ellipse.a;b=ellipse.b;rf=ellipse.rf;}
if(rf&&!b){b=(1.0-1.0/rf)*a;}
if(rf===0||Math.abs(a-b)<EPSLN){sphere=true;b=a;}
return{a:a,b:b,rf:rf,sphere:sphere};};},{"./constants/Ellipsoid":"proj4/lib/constants/Ellipsoid"}],"proj4/lib/extend":[function(require,module,exports){module.exports=function(destination,source){destination=destination||{};var value,property;if(!source){return destination;}
for(property in source){value=source[property];if(value!==undefined){destination[property]=value;}}
return destination;};},{}],"proj4/lib/global":[function(require,module,exports){module.exports=function(defs){defs('EPSG:4326',"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");defs('EPSG:4269',"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");defs('EPSG:3857',"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");defs.WGS84=defs['EPSG:4326'];defs['EPSG:3785']=defs['EPSG:3857'];defs.GOOGLE=defs['EPSG:3857'];defs['EPSG:900913']=defs['EPSG:3857'];defs['EPSG:102113']=defs['EPSG:3857'];};},{}],"proj4/lib/parseCode":[function(require,module,exports){var defs=require('./defs');var wkt=require('./wkt');var projStr=require('./projString');function testObj(code){return typeof code==='string';}
function testDef(code){return code in defs;}
var codeWords=['GEOGCS','GEOCCS','PROJCS','LOCAL_CS'];function testWKT(code){return codeWords.some(function(word){return code.indexOf(word)>-1;});}
function testProj(code){return code[0]==='+';}
function parse(code){if(testObj(code)){if(testDef(code)){return defs[code];}
if(testWKT(code)){return wkt(code);}
if(testProj(code)){return projStr(code);}}else{return code;}}
module.exports=parse;},{"./defs":"proj4/lib/defs","./projString":"proj4/lib/projString","./wkt":"proj4/lib/wkt"}],"proj4/lib/projString":[function(require,module,exports){var D2R=0.01745329251994329577;var PrimeMeridian=require('./constants/PrimeMeridian');var units=require('./constants/units');module.exports=function(defData){var self={};var paramObj=defData.split('+').map(function(v){return v.trim();}).filter(function(a){return a;}).reduce(function(p,a){var split=a.split('=');split.push(true);p[split[0].toLowerCase()]=split[1];return p;},{});var paramName,paramVal,paramOutname;var params={proj:'projName',datum:'datumCode',rf:function(v){self.rf=parseFloat(v);},lat_0:function(v){self.lat0=v*D2R;},lat_1:function(v){self.lat1=v*D2R;},lat_2:function(v){self.lat2=v*D2R;},lat_ts:function(v){self.lat_ts=v*D2R;},lon_0:function(v){self.long0=v*D2R;},lon_1:function(v){self.long1=v*D2R;},lon_2:function(v){self.long2=v*D2R;},alpha:function(v){self.alpha=parseFloat(v)*D2R;},lonc:function(v){self.longc=v*D2R;},x_0:function(v){self.x0=parseFloat(v);},y_0:function(v){self.y0=parseFloat(v);},k_0:function(v){self.k0=parseFloat(v);},k:function(v){self.k0=parseFloat(v);},a:function(v){self.a=parseFloat(v);},b:function(v){self.b=parseFloat(v);},r_a:function(){self.R_A=true;},zone:function(v){self.zone=parseInt(v,10);},south:function(){self.utmSouth=true;},towgs84:function(v){self.datum_params=v.split(",").map(function(a){return parseFloat(a);});},to_meter:function(v){self.to_meter=parseFloat(v);},units:function(v){self.units=v;if(units[v]){self.to_meter=units[v].to_meter;}},from_greenwich:function(v){self.from_greenwich=v*D2R;},pm:function(v){self.from_greenwich=(PrimeMeridian[v]?PrimeMeridian[v]:parseFloat(v))*D2R;},nadgrids:function(v){if(v==='@null'){self.datumCode='none';}
else{self.nadgrids=v;}},axis:function(v){var legalAxis="ewnsud";if(v.length===3&&legalAxis.indexOf(v.substr(0,1))!==-1&&legalAxis.indexOf(v.substr(1,1))!==-1&&legalAxis.indexOf(v.substr(2,1))!==-1){self.axis=v;}}};for(paramName in paramObj){paramVal=paramObj[paramName];if(paramName in params){paramOutname=params[paramName];if(typeof paramOutname==='function'){paramOutname(paramVal);}
else{self[paramOutname]=paramVal;}}
else{self[paramName]=paramVal;}}
if(typeof self.datumCode==='string'&&self.datumCode!=="WGS84"){self.datumCode=self.datumCode.toLowerCase();}
return self;};},{"./constants/PrimeMeridian":"proj4/lib/constants/PrimeMeridian","./constants/units":"proj4/lib/constants/units"}],"proj4/lib/projections":[function(require,module,exports){var projs=[require('./projections/merc'),require('./projections/longlat')];var names={};var projStore=[];function add(proj,i){var len=projStore.length;if(!proj.names){console.log(i);return true;}
projStore[len]=proj;proj.names.forEach(function(n){names[n.toLowerCase()]=len;});return this;}
exports.add=add;exports.get=function(name){if(!name){return false;}
var n=name.toLowerCase();if(typeof names[n]!=='undefined'&&projStore[names[n]]){return projStore[names[n]];}};exports.start=function(){projs.forEach(add);};},{"./projections/longlat":"proj4/lib/projections/longlat","./projections/merc":"proj4/lib/projections/merc"}],"proj4/lib/projections/longlat":[function(require,module,exports){exports.init=function(){};function identity(pt){return pt;}
exports.forward=identity;exports.inverse=identity;exports.names=["longlat","identity"];},{}],"proj4/lib/projections/merc":[function(require,module,exports){var msfnz=require('../common/msfnz');var HALF_PI=Math.PI/2;var EPSLN=1.0e-10;var R2D=57.29577951308232088;var adjust_lon=require('../common/adjust_lon');var FORTPI=Math.PI/4;var tsfnz=require('../common/tsfnz');var phi2z=require('../common/phi2z');exports.init=function(){var con=this.b/this.a;this.es=1-con*con;if(!('x0'in this)){this.x0=0;}
if(!('y0'in this)){this.y0=0;}
this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts);}
else{this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts));}}
else{if(!this.k0){if(this.k){this.k0=this.k;}
else{this.k0=1;}}}};exports.forward=function(p){var lon=p.x;var lat=p.y;if(lat*R2D>90&&lat*R2D<-90&&lon*R2D>180&&lon*R2D<-180){return null;}
var x,y;if(Math.abs(Math.abs(lat)-HALF_PI)<=EPSLN){return null;}
else{if(this.sphere){x=this.x0+this.a*this.k0*adjust_lon(lon-this.long0);y=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+0.5*lat));}
else{var sinphi=Math.sin(lat);var ts=tsfnz(this.e,lat,sinphi);x=this.x0+this.a*this.k0*adjust_lon(lon-this.long0);y=this.y0-this.a*this.k0*Math.log(ts);}
p.x=x;p.y=y;return p;}};exports.inverse=function(p){var x=p.x-this.x0;var y=p.y-this.y0;var lon,lat;if(this.sphere){lat=HALF_PI-2*Math.atan(Math.exp(-y/(this.a*this.k0)));}
else{var ts=Math.exp(-y/(this.a*this.k0));lat=phi2z(this.e,ts);if(lat===-9999){return null;}}
lon=adjust_lon(this.long0+x/(this.a*this.k0));p.x=lon;p.y=lat;return p;};exports.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];},{"../common/adjust_lon":"proj4/lib/common/adjust_lon","../common/msfnz":"proj4/lib/common/msfnz","../common/phi2z":"proj4/lib/common/phi2z","../common/tsfnz":"proj4/lib/common/tsfnz"}],"proj4/lib/transform":[function(require,module,exports){var D2R=0.01745329251994329577;var R2D=57.29577951308232088;var PJD_3PARAM=1;var PJD_7PARAM=2;var datum_transform=require('./datum_transform');var adjust_axis=require('./adjust_axis');var proj=require('./Proj');var toPoint=require('./common/toPoint');function checkNotWGS(source,dest){return((source.datum.datum_type===PJD_3PARAM||source.datum.datum_type===PJD_7PARAM)&&dest.datumCode!=='WGS84')||((dest.datum.datum_type===PJD_3PARAM||dest.datum.datum_type===PJD_7PARAM)&&source.datumCode!=='WGS84');}
module.exports=function transform(source,dest,point){var wgs84;if(Array.isArray(point)){point=toPoint(point);}
if(source.datum&&dest.datum&&checkNotWGS(source,dest)){wgs84=new proj('WGS84');point=transform(source,wgs84,point);source=wgs84;}
if(source.axis!=='enu'){point=adjust_axis(source,false,point);}
if(source.projName==='longlat'){point={x:point.x*D2R,y:point.y*D2R};}
else{if(source.to_meter){point={x:point.x*source.to_meter,y:point.y*source.to_meter};}
point=source.inverse(point);}
if(source.from_greenwich){point.x+=source.from_greenwich;}
point=datum_transform(source.datum,dest.datum,point);if(dest.from_greenwich){point={x:point.x-dest.grom_greenwich,y:point.y};}
if(dest.projName==='longlat'){point={x:point.x*R2D,y:point.y*R2D};}else{point=dest.forward(point);if(dest.to_meter){point={x:point.x/dest.to_meter,y:point.y/dest.to_meter};}}
if(dest.axis!=='enu'){return adjust_axis(dest,true,point);}
return point;};},{"./Proj":"proj4/lib/Proj","./adjust_axis":"proj4/lib/adjust_axis","./common/toPoint":"proj4/lib/common/toPoint","./datum_transform":"proj4/lib/datum_transform"}],"proj4/lib/wkt":[function(require,module,exports){var D2R=0.01745329251994329577;var extend=require('./extend');function mapit(obj,key,v){obj[key]=v.map(function(aa){var o={};sExpr(aa,o);return o;}).reduce(function(a,b){return extend(a,b);},{});}
function sExpr(v,obj){var key;if(!Array.isArray(v)){obj[v]=true;return;}
else{key=v.shift();if(key==='PARAMETER'){key=v.shift();}
if(v.length===1){if(Array.isArray(v[0])){obj[key]={};sExpr(v[0],obj[key]);}
else{obj[key]=v[0];}}
else if(!v.length){obj[key]=true;}
else if(key==='TOWGS84'){obj[key]=v;}
else{obj[key]={};if(['UNIT','PRIMEM','VERT_DATUM'].indexOf(key)>-1){obj[key]={name:v[0].toLowerCase(),convert:v[1]};if(v.length===3){obj[key].auth=v[2];}}
else if(key==='SPHEROID'){obj[key]={name:v[0],a:v[1],rf:v[2]};if(v.length===4){obj[key].auth=v[3];}}
else if(['GEOGCS','GEOCCS','DATUM','VERT_CS','COMPD_CS','LOCAL_CS','FITTED_CS','LOCAL_DATUM'].indexOf(key)>-1){v[0]=['name',v[0]];mapit(obj,key,v);}
else if(v.every(function(aa){return Array.isArray(aa);})){mapit(obj,key,v);}
else{sExpr(v,obj[key]);}}}}
function rename(obj,params){var outName=params[0];var inName=params[1];if(!(outName in obj)&&(inName in obj)){obj[outName]=obj[inName];if(params.length===3){obj[outName]=params[2](obj[outName]);}}}
function d2r(input){return input*D2R;}
function cleanWKT(wkt){if(wkt.type==='GEOGCS'){wkt.projName='longlat';}
else if(wkt.type==='LOCAL_CS'){wkt.projName='identity';wkt.local=true;}
else{if(typeof wkt.PROJECTION==="object"){wkt.projName=Object.keys(wkt.PROJECTION)[0];}
else{wkt.projName=wkt.PROJECTION;}}
if(wkt.UNIT){wkt.units=wkt.UNIT.name.toLowerCase();if(wkt.units==='metre'){wkt.units='meter';}
if(wkt.UNIT.convert){if(wkt.type==='GEOGCS'){if(wkt.DATUM&&wkt.DATUM.SPHEROID){wkt.to_meter=parseFloat(wkt.UNIT.convert,10)*wkt.DATUM.SPHEROID.a;}}else{wkt.to_meter=parseFloat(wkt.UNIT.convert,10);}}}
if(wkt.GEOGCS){if(wkt.GEOGCS.DATUM){wkt.datumCode=wkt.GEOGCS.DATUM.name.toLowerCase();}
else{wkt.datumCode=wkt.GEOGCS.name.toLowerCase();}
if(wkt.datumCode.slice(0,2)==='d_'){wkt.datumCode=wkt.datumCode.slice(2);}
if(wkt.datumCode==='new_zealand_geodetic_datum_1949'||wkt.datumCode==='new_zealand_1949'){wkt.datumCode='nzgd49';}
if(wkt.datumCode==="wgs_1984"){if(wkt.PROJECTION==='Mercator_Auxiliary_Sphere'){wkt.sphere=true;}
wkt.datumCode='wgs84';}
if(wkt.datumCode.slice(-6)==='_ferro'){wkt.datumCode=wkt.datumCode.slice(0,-6);}
if(wkt.datumCode.slice(-8)==='_jakarta'){wkt.datumCode=wkt.datumCode.slice(0,-8);}
if(~wkt.datumCode.indexOf('belge')){wkt.datumCode="rnb72";}
if(wkt.GEOGCS.DATUM&&wkt.GEOGCS.DATUM.SPHEROID){wkt.ellps=wkt.GEOGCS.DATUM.SPHEROID.name.replace('_19','').replace(/[Cc]larke\_18/,'clrk');if(wkt.ellps.toLowerCase().slice(0,13)==="international"){wkt.ellps='intl';}
wkt.a=wkt.GEOGCS.DATUM.SPHEROID.a;wkt.rf=parseFloat(wkt.GEOGCS.DATUM.SPHEROID.rf,10);}
if(~wkt.datumCode.indexOf('osgb_1936')){wkt.datumCode="osgb36";}}
if(wkt.b&&!isFinite(wkt.b)){wkt.b=wkt.a;}
function toMeter(input){var ratio=wkt.to_meter||1;return parseFloat(input,10)*ratio;}
var renamer=function(a){return rename(wkt,a);};var list=[['standard_parallel_1','Standard_Parallel_1'],['standard_parallel_2','Standard_Parallel_2'],['false_easting','False_Easting'],['false_northing','False_Northing'],['central_meridian','Central_Meridian'],['latitude_of_origin','Latitude_Of_Origin'],['latitude_of_origin','Central_Parallel'],['scale_factor','Scale_Factor'],['k0','scale_factor'],['latitude_of_center','Latitude_of_center'],['lat0','latitude_of_center',d2r],['longitude_of_center','Longitude_Of_Center'],['longc','longitude_of_center',d2r],['x0','false_easting',toMeter],['y0','false_northing',toMeter],['long0','central_meridian',d2r],['lat0','latitude_of_origin',d2r],['lat0','standard_parallel_1',d2r],['lat1','standard_parallel_1',d2r],['lat2','standard_parallel_2',d2r],['alpha','azimuth',d2r],['srsCode','name']];list.forEach(renamer);if(!wkt.long0&&wkt.longc&&(wkt.projName==='Albers_Conic_Equal_Area'||wkt.projName==="Lambert_Azimuthal_Equal_Area")){wkt.long0=wkt.longc;}
if(!wkt.lat_ts&&wkt.lat1&&(wkt.projName==='Stereographic_South_Pole'||wkt.projName==='Polar Stereographic (variant B)')){wkt.lat0=d2r(wkt.lat1>0?90:-90);wkt.lat_ts=wkt.lat1;}}
module.exports=function(wkt,self){var lisp=JSON.parse((","+wkt).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,''));var type=lisp.shift();var name=lisp.shift();lisp.unshift(['name',name]);lisp.unshift(['type',type]);lisp.unshift('output');var obj={};sExpr(lisp,obj);cleanWKT(obj.output);return extend(self,obj.output);};},{"./extend":"proj4/lib/extend"}],"quickselect/index":[function(require,module,exports){'use strict';module.exports=partialSort;function partialSort(arr,k,left,right,compare){left=left||0;right=right||(arr.length-1);compare=compare||defaultCompare;while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=0.5*Math.exp(2*z/3);var sd=0.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));partialSort(arr,k,newLeft,newRight,compare);}
var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0)i++;while(compare(arr[j],t)>0)j--;}
if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right);}
if(j<=k)left=j+1;if(k<=j)right=j-1;}}
function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp;}
function defaultCompare(a,b){return a<b?-1:a>b?1:0;}},{}],"rbush":[function(require,module,exports){'use strict';module.exports=rbush;var quickselect=require('quickselect');function rbush(maxEntries,format){if(!(this instanceof rbush))return new rbush(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));if(format){this._initFormat(format);}
this.clear();}
rbush.prototype={all:function(){return this._all(this.data,[]);},search:function(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child);}}
node=nodesToSearch.pop();}
return result;},collides:function(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return false;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child);}}
node=nodesToSearch.pop();}
return false;},load:function(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i]);}
return this;}
var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node;}else if(this.data.height===node.height){this._splitRoot(this.data,node);}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode;}
this._insert(node,this.data.height-node.height-1,true);}
return this;},insert:function(item){if(item)this._insert(item,this.data.height-1);return this;},clear:function(){this.data=createNode([]);return this;},remove:function(item,equalsFn){if(!item)return this;var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true;}
if(node.leaf){index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this;}}
if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0];}else if(parent){i++;node=parent.children[i];goingUp=false;}else node=null;}
return this;},toBBox:function(item){return item;},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data;},fromJSON:function(data){this.data=data;return this;},_all:function(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,node.children);else nodesToSearch.push.apply(nodesToSearch,node.children);node=nodesToSearch.pop();}
return result;},_build:function(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node;}
if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1));}
node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1));}}
calcBBox(node,this.toBBox);return node;},_chooseSubtree:function(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level)break;minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child);enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child;}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child;}}}
node=targetNode||node.children[0];}
return node;},_insert:function(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--;}else break;}
this._adjustParentBBoxes(bbox,insertPath,level);},_split:function(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode);},_splitRoot:function(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox);},_chooseSplitIndex:function(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea;}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i;}}}
return index;},_chooseSplitAxis:function(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX);},_allDistMargin:function(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox);}
for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(rightBBox);}
return margin;},_adjustParentBBoxes:function(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox);}},_condense:function(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1);}else this.clear();}else calcBBox(path[i],this.toBBox);}},_initFormat:function(format){var compareArr=['return a',' - b',';'];this.compareMinX=new Function('a','b',compareArr.join(format[0]));this.compareMinY=new Function('a','b',compareArr.join(format[1]));this.toBBox=new Function('a','return {minX: a'+format[0]+
', minY: a'+format[1]+
', maxX: a'+format[2]+
', maxY: a'+format[3]+'};');}};function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i;}
return-1;}
function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node);}
function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k,child;i<p;i++){child=node.children[i];extend(destNode,node.leaf?toBBox(child):child);}
return destNode;}
function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a;}
function compareNodeMinX(a,b){return a.minX-b.minX;}
function compareNodeMinY(a,b){return a.minY-b.minY;}
function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY);}
function bboxMargin(a){return(a.maxX-a.minX)+(a.maxY-a.minY);}
function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY));}
function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY);}
function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY;}
function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY;}
function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};}
function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right);}}},{"quickselect":"quickselect/index"}],"sprintf":[function(require,module,exports){var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase();}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('');}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0]);}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments);};str_format.object_stringify=function(obj,depth,maxdepth,seen){var str='';if(obj!=null){switch(typeof(obj)){case'function':return'[Function'+(obj.name?': '+obj.name:'')+']';break;case'object':if(obj instanceof Error){return'['+obj.toString()+']'};if(depth>=maxdepth)return'[Object]'
if(seen){seen=seen.slice(0)
seen.push(obj);}
if(obj.length!=null){str+='[';var arr=[]
for(var i in obj){if(seen&&seen.indexOf(obj[i])>=0)arr.push('[Circular]');else arr.push(str_format.object_stringify(obj[i],depth+1,maxdepth,seen));}
str+=arr.join(', ')+']';}else if('getMonth'in obj){return'Date('+obj+')';}else{str+='{';var arr=[]
for(var k in obj){if(obj.hasOwnProperty(k)){if(seen&&seen.indexOf(obj[k])>=0)arr.push(k+': [Circular]');else arr.push(k+': '+str_format.object_stringify(obj[k],depth+1,maxdepth,seen));}}
str+=arr.join(', ')+'}';}
return str;break;case'string':return'"'+obj+'"';break}}
return''+obj;}
str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i]);}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf('[sprintf] property "%s" does not exist',match[2][k]));}
arg=arg[match[2][k]];}}
else if(match[1]){arg=argv[match[1]];}
else{arg=argv[cursor++];}
if(/[^sO]/.test(match[8])&&(get_type(arg)!='number')){throw new Error(sprintf('[sprintf] expecting number but found %s "'+arg+'"',get_type(arg)));}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=parseInt(arg,10);break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'O':arg=str_format.object_stringify(arg,0,parseInt(match[7])||5);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break;}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg);}}
return output.join('');};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0]);}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%');}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else{throw new Error('[sprintf] '+replacement_field);}}}
else{throw new Error('[sprintf] '+replacement_field);}
match[2]=field_list;}
else{arg_names|=2;}
if(arg_names===3){throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');}
parse_tree.push(match);}
else{throw new Error('[sprintf] '+_fmt);}
_fmt=_fmt.substring(match[0].length);}
return parse_tree;};return str_format;})();var vsprintf=function(fmt,argv){var argvClone=argv.slice();argvClone.unshift(fmt);return sprintf.apply(null,argvClone);};module.exports=sprintf;sprintf.sprintf=sprintf;sprintf.vsprintf=vsprintf;},{}],"timezone/index":[function(require,module,exports){!function(definition){if(typeof module=="object"&&module.exports)module.exports=definition();else if(typeof define=="function")define(definition);else this.tz=definition();}(function(){function actualize(entry,rule,year){var actualized,date=rule.day[1];do{actualized=new Date(Date.UTC(year,rule.month,Math.abs(date++)));}while(rule.day[0]<7&&actualized.getUTCDay()!=rule.day[0])
actualized={clock:rule.clock,sort:actualized.getTime(),rule:rule,save:rule.save*6e4,offset:entry.offset};actualized[actualized.clock]=actualized.sort+rule.time*6e4;if(actualized.posix){actualized.wallclock=actualized[actualized.clock]+(entry.offset+rule.saved);}else{actualized.posix=actualized[actualized.clock]-(entry.offset+rule.saved);}
return actualized;}
function find(request,clock,time){var i,I,entry,found,zone=request[request.zone],actualized=[],abbrev,rules,j,year=new Date(time).getUTCFullYear(),off=1;for(i=1,I=zone.length;i<I;i++)if(zone[i][clock]<=time)break;entry=zone[i];if(entry.rules){rules=request[entry.rules];for(j=year+1;j>=year-off;--j)
for(i=0,I=rules.length;i<I;i++)
if(rules[i].from<=j&&j<=rules[i].to)actualized.push(actualize(entry,rules[i],j));else if(rules[i].to<j&&off==1)off=j-rules[i].to;actualized.sort(function(a,b){return a.sort-b.sort});for(i=0,I=actualized.length;i<I;i++){if(time>=actualized[i][clock]&&actualized[i][actualized[i].clock]>entry[actualized[i].clock])found=actualized[i];}}
if(found){if(abbrev=/^(.*)\/(.*)$/.exec(entry.format)){found.abbrev=abbrev[found.save?2:1];}else{found.abbrev=entry.format.replace(/%s/,found.rule.letter);}}
return found||entry;}
function convertToWallclock(request,posix){if(request.zone=="UTC")return posix;request.entry=find(request,"posix",posix);return posix+request.entry.offset+request.entry.save;}
function convertToPOSIX(request,wallclock){if(request.zone=="UTC")return wallclock;var entry,diff;request.entry=entry=find(request,"wallclock",wallclock);diff=wallclock-entry.wallclock;return 0<diff&&diff<entry.save?null:wallclock-entry.offset-entry.save;}
function adjust(request,posix,match){var increment=+(match[1]+1),offset=match[2]*increment,index=UNITS.indexOf(match[3].toLowerCase()),date;if(index>9){posix+=offset*TIME[index-10];}else{date=new Date(convertToWallclock(request,posix));if(index<7){while(offset){date.setUTCDate(date.getUTCDate()+increment);if(date.getUTCDay()==index)offset-=increment;}}else if(index==7){date.setUTCFullYear(date.getUTCFullYear()+offset);}else if(index==8){date.setUTCMonth(date.getUTCMonth()+offset);}else{date.setUTCDate(date.getUTCDate()+offset);}
if((posix=convertToPOSIX(request,date.getTime()))==null){posix=convertToPOSIX(request,date.getTime()+864e5*increment)-864e5*increment;}}
return posix;}
function convert(vargs){if(!vargs.length)return"1.0.6";var request=Object.create(this),adjustments=[],i,I,$,argument,date;for(i=0;i<vargs.length;i++){argument=vargs[i];if(Array.isArray(argument)){if(!i&&!isNaN(argument[1])){date=argument;}else{argument.splice.apply(vargs,[i--,1].concat(argument));}}else if(isNaN(argument)){$=typeof argument;if($=="string"){if(~argument.indexOf("%")){request.format=argument;}else if(!i&&argument=="*"){date=argument;}else if(!i&&($=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(argument))){date=[];date.push.apply(date,$.slice(1,8));if($[9]){date.push($[10]+1);date.push.apply(date,$[11].split(/:/));}else if($[8]){date.push(1);}}else if(/^\w{2,3}_\w{2}$/.test(argument)){request.locale=argument;}else if($=UNIT_RE.exec(argument)){adjustments.push($);}else{request.zone=argument;}}else if($=="function"){if($=argument.call(request))return $;}else if(/^\w{2,3}_\w{2}$/.test(argument.name)){request[argument.name]=argument;}else if(argument.zones){for($ in argument.zones)request[$]=argument.zones[$];for($ in argument.rules)request[$]=argument.rules[$];}}else if(!i){date=argument;}}
if(!request[request.locale])delete request.locale;if(!request[request.zone])delete request.zone;if(date!=null){if(date=="*"){date=request.clock();}else if(Array.isArray(date)){I=!date[7];for(i=0;i<11;i++)date[i]=+(date[i]||0);--date[1];date=Date.UTC.apply(Date.UTC,date.slice(0,8))+
-date[7]*(date[8]*36e5+date[9]*6e4+date[10]*1e3);}else{date=Math.floor(date);}
if(!isNaN(date)){if(I)date=convertToPOSIX(request,date);if(date==null)return date;for(i=0,I=adjustments.length;i<I;i++){date=adjust(request,date,adjustments[i]);}
if(!request.format)return date;$=new Date(convertToWallclock(request,date));return request.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(value,flag,colons,padding,specifier){var f,fill="0",pad;if(f=request[specifier]){value=String(f.call(request,$,date,flag,colons.length));if((flag||f.style)=="_")fill=" ";pad=flag=="-"?0:f.pad||0;while(value.length<pad)value=fill+value;pad=flag=="-"?0:padding||f.pad;while(value.length<pad)value=fill+value;if(specifier=="N"&&pad<value.length)value=value.slice(0,pad);if(flag=="^")value=value.toUpperCase();}
return value;});}}
return function(){return request.convert(arguments)};}
var context={clock:function(){return+(new Date())},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function(date,posix,flag,delimiters){var offset=this.entry.offset+this.entry.save,seconds=Math.abs(offset/1000),parts=[],part=3600,i,z;for(i=0;i<3;i++){parts.push(("0"+Math.floor(seconds/part)).slice(-2));seconds%=part;part/=60;}
if(flag=="^"&&!offset)return"Z";if(flag=="^")delimiters=3;if(delimiters==3){z=parts.join(":");z=z.replace(/:00$/,"");if(flag!="^")z=z.replace(/:00$/,"");}else if(delimiters){z=parts.slice(0,delimiters+1).join(":");if(flag=="^")z=z.replace(/:00$/,"");}else{z=parts.slice(0,2).join("");}
z=(offset<0?"-":"+")+z;z=z.replace(/([-+])(0)/,{"_":" $1","-":"$1"}[flag]||"$1$2");return z;},"%":function(date){return"%"},n:function(date){return"\n"},t:function(date){return"\t"},U:function(date){return weekOfYear(date,0)},W:function(date){return weekOfYear(date,1)},V:function(date){return isoWeek(date)[0]},G:function(date){return isoWeek(date)[1]},g:function(date){return isoWeek(date)[1]%100},j:function(date){return Math.floor((date.getTime()-Date.UTC(date.getUTCFullYear(),0))/864e5)+1},s:function(date){return Math.floor(date.getTime()/1000)},C:function(date){return Math.floor(date.getUTCFullYear()/100)},N:function(date){return date.getTime()%1000*1000000},m:function(date){return date.getUTCMonth()+1},Y:function(date){return date.getUTCFullYear()},y:function(date){return date.getUTCFullYear()%100},H:function(date){return date.getUTCHours()},M:function(date){return date.getUTCMinutes()},S:function(date){return date.getUTCSeconds()},e:function(date){return date.getUTCDate()},d:function(date){return date.getUTCDate()},u:function(date){return date.getUTCDay()||7},w:function(date){return date.getUTCDay()},l:function(date){return date.getUTCHours()%12||12},I:function(date){return date.getUTCHours()%12||12},k:function(date){return date.getUTCHours()},Z:function(date){return this.entry.abbrev},a:function(date){return this[this.locale].day.abbrev[date.getUTCDay()]},A:function(date){return this[this.locale].day.full[date.getUTCDay()]},h:function(date){return this[this.locale].month.abbrev[date.getUTCMonth()]},b:function(date){return this[this.locale].month.abbrev[date.getUTCMonth()]},B:function(date){return this[this.locale].month.full[date.getUTCMonth()]},P:function(date){return this[this.locale].meridiem[Math.floor(date.getUTCHours()/12)].toLowerCase()},p:function(date){return this[this.locale].meridiem[Math.floor(date.getUTCHours()/12)]},R:function(date,posix){return this.convert([posix,"%H:%M"])},T:function(date,posix){return this.convert([posix,"%H:%M:%S"])},D:function(date,posix){return this.convert([posix,"%m/%d/%y"])},F:function(date,posix){return this.convert([posix,"%Y-%m-%d"])},x:function(date,posix){return this.convert([posix,this[this.locale].date])},r:function(date,posix){return this.convert([posix,this[this.locale].time12||'%I:%M:%S'])},X:function(date,posix){return this.convert([posix,this[this.locale].time24])},c:function(date,posix){return this.convert([posix,this[this.locale].dateTime])},convert:convert,locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}};var UNITS="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",UNIT_RE=new RegExp("^\\s*([+-])(\\d+)\\s+("+UNITS+")s?\\s*$","i"),TIME=[36e5,6e4,1e3,1];UNITS=UNITS.toLowerCase().split("|");"delmHMSUWVgCIky".replace(/./g,function(e){context[e].pad=2});context.N.pad=9;context.j.pad=3;context.k.style="_";context.l.style="_";context.e.style="_";function weekOfYear(date,startOfWeek){var diff,nyd,weekStart;nyd=new Date(Date.UTC(date.getUTCFullYear(),0));diff=Math.floor((date.getTime()-nyd.getTime())/864e5);if(nyd.getUTCDay()==startOfWeek){weekStart=0;}else{weekStart=7-nyd.getUTCDay()+startOfWeek;if(weekStart==8){weekStart=1;}}
return diff>=weekStart?Math.floor((diff-weekStart)/7)+1:0;}
function isoWeek(date){var nyd,nyy,week;nyy=date.getUTCFullYear();nyd=new Date(Date.UTC(nyy,0)).getUTCDay();week=weekOfYear(date,1)+(nyd>1&&nyd<=4?1:0);if(!week){nyy=date.getUTCFullYear()-1;nyd=new Date(Date.UTC(nyy,0)).getUTCDay();week=nyd==4||(nyd==3&&new Date(nyy,1,29).getDate()==29)?53:52;return[week,date.getUTCFullYear()-1];}else if(week==53&&!(nyd==4||(nyd==3&&new Date(nyy,1,29).getDate()==29))){return[1,date.getUTCFullYear()+1];}else{return[week,date.getUTCFullYear()];}}
return function(){return context.convert(arguments)};});},{}]},{},["main"])})()
(function(){var define=undefined;return(function outer(modules,cache,entry){if(Bokeh!=null){for(var name in modules){Bokeh.require.modules[name]=modules[name];}
for(var i=0;i<entry.length;i++){var plugin=Bokeh.require(entry[0]);Bokeh.Models.register_models(plugin.models);for(var name in plugin){if(name!=="models"){Bokeh[name]=plugin[name];}}}}else{throw new Error("Cannot find Bokeh. You have to load it prior to loading plugins.");}})
({"models/glyphs/webgl/base":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var color_1=require("core/util/color");exports.BaseGLGlyph=(function(){BaseGLGlyph.prototype.GLYPH='';BaseGLGlyph.prototype.VERT='';BaseGLGlyph.prototype.FRAG='';function BaseGLGlyph(gl,glyph){this.gl=gl;this.glyph=glyph;this.nvertices=0;this.size_changed=false;this.data_changed=false;this.visuals_changed=false;this.init();}
BaseGLGlyph.prototype.set_data_changed=function(n){if(n!==this.nvertices){this.nvertices=n;this.size_changed=true;}
return this.data_changed=true;};BaseGLGlyph.prototype.set_visuals_changed=function(){return this.visuals_changed=true;};BaseGLGlyph.prototype.render=function(ctx,indices,mainglyph){var dx,dy,ref,ref1,ref2,sx,sy,trans,wx,wy;wx=wy=1;ref=this.glyph.renderer.map_to_screen([0*wx,1*wx,2*wx],[0*wy,1*wy,2*wy]),dx=ref[0],dy=ref[1];wx=100/Math.min(Math.max(Math.abs(dx[1]-dx[0]),1e-12),1e12);wy=100/Math.min(Math.max(Math.abs(dy[1]-dy[0]),1e-12),1e12);ref1=this.glyph.renderer.map_to_screen([0*wx,1*wx,2*wx],[0*wy,1*wy,2*wy]),dx=ref1[0],dy=ref1[1];if(Math.abs((dx[1]-dx[0])-(dx[2]-dx[1]))>1e-6||Math.abs((dy[1]-dy[0])-(dy[2]-dy[1]))>1e-6){return false;}
ref2=[(dx[1]-dx[0])/wx,(dy[1]-dy[0])/wy],sx=ref2[0],sy=ref2[1];trans={pixel_ratio:ctx.pixel_ratio,width:ctx.glcanvas.width,height:ctx.glcanvas.height,dx:dx[0]/sx,dy:dy[0]/sy,sx:sx,sy:sy};this.draw(indices,mainglyph,trans);return true;};return BaseGLGlyph;})();exports.line_width=function(width){if(width<2){width=Math.sqrt(width*2);}
return width;};exports.fill_array_with_float=function(n,val){var a,i,k,ref;a=new Float32Array(n);for(i=k=0,ref=n;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){a[i]=val;}
return a;};exports.fill_array_with_vec=function(n,m,val){var a,i,j,k,l,ref,ref1;a=new Float32Array(n*m);for(i=k=0,ref=n;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){for(j=l=0,ref1=m;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){a[i*m+j]=val[j];}}
return a;};exports.visual_prop_is_singular=function(visual,propname){return visual[propname].spec.value!==void 0;};exports.attach_float=function(prog,vbo,att_name,n,visual,name){var a;if(!visual.doit){vbo.used=false;return prog.set_attribute(att_name,'float',[0]);}
else if(exports.visual_prop_is_singular(visual,name)){vbo.used=false;return prog.set_attribute(att_name,'float',visual[name].value());}
else{vbo.used=true;a=new Float32Array(visual.cache[name+'_array']);vbo.set_size(n*4);vbo.set_data(0,a);return prog.set_attribute(att_name,'float',vbo);}};exports.attach_color=function(prog,vbo,att_name,n,visual,prefix){var a,alphaname,alphas,colorname,colors,i,j,k,l,m,ref,ref1,rgba;m=4;colorname=prefix+'_color';alphaname=prefix+'_alpha';if(!visual.doit){vbo.used=false;return prog.set_attribute(att_name,'vec4',[0,0,0,0]);}
else if(exports.visual_prop_is_singular(visual,colorname)&&exports.visual_prop_is_singular(visual,alphaname)){vbo.used=false;rgba=color_1.color2rgba(visual[colorname].value(),visual[alphaname].value());return prog.set_attribute(att_name,'vec4',rgba);}
else{vbo.used=true;if(exports.visual_prop_is_singular(visual,colorname)){colors=(function(){var k,ref,results;results=[];for(i=k=0,ref=n;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){results.push(visual[colorname].value());}
return results;})();}
else{colors=visual.cache[colorname+'_array'];}
if(exports.visual_prop_is_singular(visual,alphaname)){alphas=exports.fill_array_with_float(n,visual[alphaname].value());}
else{alphas=visual.cache[alphaname+'_array'];}
a=new Float32Array(n*m);for(i=k=0,ref=n;0<=ref?k<ref:k>ref;i=0<=ref?++k:--k){rgba=color_1.color2rgba(colors[i],alphas[i]);for(j=l=0,ref1=m;0<=ref1?l<ref1:l>ref1;j=0<=ref1?++l:--l){a[i*m+j]=rgba[j];}}
vbo.set_size(n*m*4);vbo.set_data(0,a);return prog.set_attribute(att_name,'vec4',vbo);}};},{"core/util/color":undefined}],"models/glyphs/webgl/index":[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}
Object.defineProperty(exports,"__esModule",{value:true});__export(require("./line"));__export(require("./markers"));},{"./line":"models/glyphs/webgl/line","./markers":"models/glyphs/webgl/markers"}],"models/glyphs/webgl/line":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DashAtlas,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gloo2=require("gloo2");var color_1=require("core/util/color");var base_1=require("./base");DashAtlas=(function(){function DashAtlas(gl){this._atlas={};this._index=0;this._width=256;this._height=256;this.tex=new gloo2.Texture2D(gl);this.tex.set_wrapping(gl.REPEAT,gl.REPEAT);this.tex.set_interpolation(gl.NEAREST,gl.NEAREST);this.tex.set_size([this._height,this._width],gl.RGBA);this.tex.set_data([0,0],[this._height,this._width],new Uint8Array(this._height*this._width*4));this.get_atlas_data([1]);}
DashAtlas.prototype.get_atlas_data=function(pattern){var data,findex_period,key,period,ref,x;key=pattern.join('-');findex_period=this._atlas[key];if(findex_period===void 0){ref=this.make_pattern(pattern),data=ref[0],period=ref[1];this.tex.set_data([this._index,0],[1,this._width],new Uint8Array((function(){var l,len,results;results=[];for(l=0,len=data.length;l<len;l++){x=data[l];results.push(x+10);}
return results;})()));this._atlas[key]=[this._index/this._height,period];this._index+=1;}
return this._atlas[key];};DashAtlas.prototype.make_pattern=function(pattern){var C,Z,a,b,c,dash_end,dash_start,dash_type,i,index,j,l,len,n,p,period,q,r,ref,ref1,ref2,v,val,val_at_index,x;if(pattern.length>1&&pattern.length%2){pattern=pattern.concat(pattern);}
period=0;for(l=0,len=pattern.length;l<len;l++){v=pattern[l];period+=v;}
C=[];c=0;for(i=p=0,ref=pattern.length+2;p<ref;i=p+=2){a=Math.max(0.0001,pattern[i%pattern.length]);b=Math.max(0.0001,pattern[(i+1)%pattern.length]);C.push.apply(C,[c,c+a]);c+=a+b;}
n=this._width;Z=new Float32Array(n*4);for(i=q=0,ref1=n;0<=ref1?q<ref1:q>ref1;i=0<=ref1?++q:--q){x=period*i/(n-1);index=0;val_at_index=1e16;for(j=r=0,ref2=C.length;0<=ref2?r<ref2:r>ref2;j=0<=ref2?++r:--r){val=Math.abs(C[j]-x);if(val<val_at_index){index=j;val_at_index=val;}}
if(index%2===0){dash_type=x<=C[index]?+1:0;dash_start=C[index];dash_end=C[index+1];}
else{dash_type=x>C[index]?-1:0;dash_start=C[index-1];dash_end=C[index];}
Z[i*4+0]=C[index];Z[i*4+1]=dash_type;Z[i*4+2]=dash_start;Z[i*4+3]=dash_end;}
return[Z,period];};return DashAtlas;})();exports.LineGLGlyph=(function(superClass){extend(LineGLGlyph,superClass);function LineGLGlyph(){return LineGLGlyph.__super__.constructor.apply(this,arguments);}
LineGLGlyph.prototype.GLYPH='line';LineGLGlyph.prototype.JOINS={'miter':0,'round':1,'bevel':2};LineGLGlyph.prototype.CAPS={'':0,'none':0,'.':0,'round':1,')':1,'(':1,'o':1,'triangle in':2,'<':2,'triangle out':3,'>':3,'square':4,'[':4,']':4,'=':4,'butt':5,'|':5};LineGLGlyph.prototype.VERT="precision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size, u_offset;\nuniform vec2 u_scale_aspect;\nuniform float u_scale_length;\n\nuniform vec4 u_color;\nuniform float u_antialias;\nuniform float u_length;\nuniform float u_linewidth;\nuniform float u_dash_index;\nuniform float u_closed;\n\nattribute vec2 a_position;\nattribute vec4 a_tangents;\nattribute vec2 a_segment;\nattribute vec2 a_angles;\nattribute vec2 a_texcoord;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\nfloat cross(in vec2 v1, in vec2 v2)\n{\n    return v1.x*v2.y - v1.y*v2.x;\n}\n\nfloat signed_distance(in vec2 v1, in vec2 v2, in vec2 v3)\n{\n    return cross(v2-v1,v1-v3) / length(v2-v1);\n}\n\nvoid rotate( in vec2 v, in float alpha, out vec2 result )\n{\n    float c = cos(alpha);\n    float s = sin(alpha);\n    result = vec2( c*v.x - s*v.y,\n                   s*v.x + c*v.y );\n}\n\nvoid main()\n{\n    bool closed = (u_closed > 0.0);\n\n    // Attributes and uniforms to varyings\n    v_color = u_color;\n    v_linewidth = u_linewidth;\n    v_segment = a_segment * u_scale_length;\n    v_length = u_length * u_scale_length;\n\n    // Scale to map to pixel coordinates. The original algorithm from the paper\n    // assumed isotropic scale. We obviously do not have this.\n    vec2 abs_scale_aspect = abs(u_scale_aspect);\n    vec2 abs_scale = u_scale_length * abs_scale_aspect;\n\n    // Correct angles for aspect ratio\n    vec2 av;\n    av = vec2(1.0, tan(a_angles.x)) / abs_scale_aspect;\n    v_angles.x = atan(av.y, av.x);\n    av = vec2(1.0, tan(a_angles.y)) / abs_scale_aspect;\n    v_angles.y = atan(av.y, av.x);\n\n    // Thickness below 1 pixel are represented using a 1 pixel thickness\n    // and a modified alpha\n    v_color.a = min(v_linewidth, v_color.a);\n    v_linewidth = max(v_linewidth, 1.0);\n\n    // If color is fully transparent we just will discard the fragment anyway\n    if( v_color.a <= 0.0 ) {\n        gl_Position = vec4(0.0,0.0,0.0,1.0);\n        return;\n    }\n\n    // This is the actual half width of the line\n    float w = ceil(u_antialias+v_linewidth)/2.0;\n\n    vec2 position = (a_position + u_offset) * abs_scale;\n\n    vec2 t1 = normalize(a_tangents.xy * abs_scale_aspect);  // note the scaling for aspect ratio here\n    vec2 t2 = normalize(a_tangents.zw * abs_scale_aspect);\n    float u = a_texcoord.x;\n    float v = a_texcoord.y;\n    vec2 o1 = vec2( +t1.y, -t1.x);\n    vec2 o2 = vec2( +t2.y, -t2.x);\n\n    // This is a join\n    // ----------------------------------------------------------------\n    if( t1 != t2 ) {\n        float angle = atan (t1.x*t2.y-t1.y*t2.x, t1.x*t2.x+t1.y*t2.y);  // Angle needs recalculation for some reason\n        vec2 t  = normalize(t1+t2);\n        vec2 o  = vec2( + t.y, - t.x);\n\n        if ( u_dash_index > 0.0 )\n        {\n            // Broken angle\n            // ----------------------------------------------------------------\n            if( (abs(angle) > THETA) ) {\n                position += v * w * o / cos(angle/2.0);\n                float s = sign(angle);\n                if( angle < 0.0 ) {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position -= 2.0 * w * t1 / sin(angle);\n                            u -= 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position += 2.0 * w * t2 / sin(angle);\n                            u += 2.0*w / sin(angle);\n                        }\n                    }\n                } else {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position += 2.0 * w * t1 / sin(angle);\n                            u += 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position -= 2.0 * w * t2 / sin(angle);\n                            u -= 2.0*w / sin(angle);\n                        }\n                    }\n                }\n                // Continuous angle\n                // ------------------------------------------------------------\n            } else {\n                position += v * w * o / cos(angle/2.0);\n                if( u == +1.0 ) u = v_segment.y;\n                else            u = v_segment.x;\n            }\n        }\n\n        // Solid line\n        // --------------------------------------------------------------------\n        else\n        {\n            position.xy += v * w * o / cos(angle/2.0);\n            if( angle < 0.0 ) {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            } else {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            }\n        }\n\n    // This is a line start or end (t1 == t2)\n    // ------------------------------------------------------------------------\n    } else {\n        position += v * w * o1;\n        if( u == -1.0 ) {\n            u = v_segment.x - w;\n            position -= w * t1;\n        } else {\n            u = v_segment.y + w;\n            position += w * t2;\n        }\n    }\n\n    // Miter distance\n    // ------------------------------------------------------------------------\n    vec2 t;\n    vec2 curr = a_position * abs_scale;\n    if( a_texcoord.x < 0.0 ) {\n        vec2 next = curr + t2*(v_segment.y-v_segment.x);\n\n        rotate( t1, +v_angles.x/2.0, t);\n        v_miter.x = signed_distance(curr, curr+t, position);\n\n        rotate( t2, +v_angles.y/2.0, t);\n        v_miter.y = signed_distance(next, next+t, position);\n    } else {\n        vec2 prev = curr - t1*(v_segment.y-v_segment.x);\n\n        rotate( t1, -v_angles.x/2.0,t);\n        v_miter.x = signed_distance(prev, prev+t, position);\n\n        rotate( t2, -v_angles.y/2.0,t);\n        v_miter.y = signed_distance(curr, curr+t, position);\n    }\n\n    if (!closed && v_segment.x <= 0.0) {\n        v_miter.x = 1e10;\n    }\n    if (!closed && v_segment.y >= v_length)\n    {\n        v_miter.y = 1e10;\n    }\n\n    v_texcoord = vec2( u, v*w );\n\n    // Calculate position in device coordinates. Note that we\n    // already scaled with abs scale above.\n    vec2 normpos = position * sign(u_scale_aspect);\n    normpos += 0.5;  // make up for Bokeh's offset\n    normpos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(normpos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n}\n";LineGLGlyph.prototype.FRAG_="// Fragment shader that can be convenient during debugging to show the line skeleton.\nprecision mediump float;\nuniform vec4  u_color;\nvoid main () {\n  gl_FragColor = u_color;\n}";LineGLGlyph.prototype.FRAG="precision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform sampler2D u_dash_atlas;\n\nuniform vec2 u_linecaps;\nuniform float u_miter_limit;\nuniform float u_linejoin;\nuniform float u_antialias;\nuniform float u_dash_phase;\nuniform float u_dash_period;\nuniform float u_dash_index;\nuniform vec2 u_dash_caps;\nuniform float u_closed;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\n// Compute distance to cap ----------------------------------------------------\nfloat cap( int type, float dx, float dy, float t, float linewidth )\n{\n    float d = 0.0;\n    dx = abs(dx);\n    dy = abs(dy);\n    if      (type == 0)  discard;  // None\n    else if (type == 1)  d = sqrt(dx*dx+dy*dy);  // Round\n    else if (type == 3)  d = (dx+abs(dy));  // Triangle in\n    else if (type == 2)  d = max(abs(dy),(t+dx-abs(dy)));  // Triangle out\n    else if (type == 4)  d = max(dx,dy);  // Square\n    else if (type == 5)  d = max(dx+t,dy);  // Butt\n    return d;\n}\n\n// Compute distance to join -------------------------------------------------\nfloat join( in int type, in float d, in vec2 segment, in vec2 texcoord, in vec2 miter,\n           in float linewidth )\n{\n    // texcoord.x is distance from start\n    // texcoord.y is distance from centerline\n    // segment.x and y indicate the limits (as for texcoord.x) for this segment\n\n    float dx = texcoord.x;\n\n    // Round join\n    if( type == 1 ) {\n        if (dx < segment.x) {\n            d = max(d,length( texcoord - vec2(segment.x,0.0)));\n            //d = length( texcoord - vec2(segment.x,0.0));\n        } else if (dx > segment.y) {\n            d = max(d,length( texcoord - vec2(segment.y,0.0)));\n            //d = length( texcoord - vec2(segment.y,0.0));\n        }\n    }\n    // Bevel join\n    else if ( type == 2 ) {\n        if (dx < segment.x) {\n            vec2 x = texcoord - vec2(segment.x,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n\n        } else if (dx > segment.y) {\n            vec2 x = texcoord - vec2(segment.y,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n        }\n        /*  Original code for bevel which does not work for us\n        if( (dx < segment.x) ||  (dx > segment.y) )\n            d = max(d, min(abs(x.x),abs(x.y)));\n        */\n    }\n\n    return d;\n}\n\nvoid main()\n{\n    // If color is fully transparent we just discard the fragment\n    if( v_color.a <= 0.0 ) {\n        discard;\n    }\n\n    // Test if dash pattern is the solid one (0)\n    bool solid =  (u_dash_index == 0.0);\n\n    // Test if path is closed\n    bool closed = (u_closed > 0.0);\n\n    vec4 color = v_color;\n    float dx = v_texcoord.x;\n    float dy = v_texcoord.y;\n    float t = v_linewidth/2.0-u_antialias;\n    float width = 1.0;  //v_linewidth; original code had dashes scale with line width, we do not\n    float d = 0.0;\n\n    vec2 linecaps = u_linecaps;\n    vec2 dash_caps = u_dash_caps;\n    float line_start = 0.0;\n    float line_stop = v_length;\n\n    // Apply miter limit; fragments too far into the miter are simply discarded\n    if( (dx < v_segment.x) || (dx > v_segment.y) ) {\n        float into_miter = max(v_segment.x - dx, dx - v_segment.y);\n        if (into_miter > u_miter_limit*v_linewidth/2.0)\n          discard;\n    }\n\n    // Solid line --------------------------------------------------------------\n    if( solid ) {\n        d = abs(dy);\n        if( (!closed) && (dx < line_start) ) {\n            d = cap( int(u_linecaps.x), abs(dx), abs(dy), t, v_linewidth );\n        }\n        else if( (!closed) &&  (dx > line_stop) ) {\n            d = cap( int(u_linecaps.y), abs(dx)-line_stop, abs(dy), t, v_linewidth );\n        }\n        else {\n            d = join( int(u_linejoin), abs(dy), v_segment, v_texcoord, v_miter, v_linewidth );\n        }\n\n    // Dash line --------------------------------------------------------------\n    } else {\n        float segment_start = v_segment.x;\n        float segment_stop  = v_segment.y;\n        float segment_center= (segment_start+segment_stop)/2.0;\n        float freq          = u_dash_period*width;\n        float u = mod( dx + u_dash_phase*width, freq);\n        vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n        float dash_center= tex.x * width;\n        float dash_type  = tex.y;\n        float _start = tex.z * width;\n        float _stop  = tex.a * width;\n        float dash_start = dx - u + _start;\n        float dash_stop  = dx - u + _stop;\n\n        // Compute extents of the first dash (the one relative to v_segment.x)\n        // Note: this could be computed in the vertex shader\n        if( (dash_stop < segment_start) && (dash_caps.x != 5.0) ) {\n            float u = mod(segment_start + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_start - u + _start;\n            dash_stop = segment_start - u + _stop;\n        }\n\n        // Compute extents of the last dash (the one relatives to v_segment.y)\n        // Note: This could be computed in the vertex shader\n        else if( (dash_start > segment_stop)  && (dash_caps.y != 5.0) ) {\n            float u = mod(segment_stop + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_stop - u + _start;\n            dash_stop  = segment_stop - u + _stop;\n        }\n\n        // This test if the we are dealing with a discontinuous angle\n        bool discontinuous = ((dx <  segment_center) && abs(v_angles.x) > THETA) ||\n                             ((dx >= segment_center) && abs(v_angles.y) > THETA);\n        //if( dx < line_start) discontinuous = false;\n        //if( dx > line_stop)  discontinuous = false;\n\n        float d_join = join( int(u_linejoin), abs(dy),\n                            v_segment, v_texcoord, v_miter, v_linewidth );\n\n        // When path is closed, we do not have room for linecaps, so we make room\n        // by shortening the total length\n        if (closed) {\n             line_start += v_linewidth/2.0;\n             line_stop  -= v_linewidth/2.0;\n        }\n\n        // We also need to take antialias area into account\n        //line_start += u_antialias;\n        //line_stop  -= u_antialias;\n\n        // Check is dash stop is before line start\n        if( dash_stop <= line_start ) {\n            discard;\n        }\n        // Check is dash start is beyond line stop\n        if( dash_start >= line_stop ) {\n            discard;\n        }\n\n        // Check if current dash start is beyond segment stop\n        if( discontinuous ) {\n            // Dash start is beyond segment, we discard\n            if( (dash_start > segment_stop) ) {\n                discard;\n                //gl_FragColor = vec4(1.0,0.0,0.0,.25); return;\n            }\n\n            // Dash stop is before segment, we discard\n            if( (dash_stop < segment_start) ) {\n                discard;  //gl_FragColor = vec4(0.0,1.0,0.0,.25); return;\n            }\n\n            // Special case for round caps (nicer with this)\n            if( dash_caps.x == 1.0 ) {\n                if( (u > _stop) && (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for round caps  (nicer with this)\n            if( dash_caps.y == 1.0 ) {\n                if( (u < _start) && (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.x != 1.0) && (dash_caps.x != 5.0) ) {\n                if( (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0) ) {\n                    float a = v_angles.x/2.0;\n                    float x = (segment_start-dx)*cos(a) - dy*sin(a);\n                    float y = (segment_start-dx)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the cap into square to avoid holes\n                    dash_caps.x = 4.0;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.y != 1.0) && (dash_caps.y != 5.0) ) {\n                if( (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0) ) {\n                    float a = v_angles.y/2.0;\n                    float x = (dx-segment_stop)*cos(a) - dy*sin(a);\n                    float y = (dx-segment_stop)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the caps into square to avoid holes\n                    dash_caps.y = 4.0;\n                }\n            }\n        }\n\n        // Line cap at start\n        if( (dx < line_start) && (dash_start < line_start) && (dash_stop > line_start) ) {\n            d = cap( int(linecaps.x), dx-line_start, dy, t, v_linewidth);\n        }\n        // Line cap at stop\n        else if( (dx > line_stop) && (dash_stop > line_stop) && (dash_start < line_stop) ) {\n            d = cap( int(linecaps.y), dx-line_stop, dy, t, v_linewidth);\n        }\n        // Dash cap left - dash_type = -1, 0 or 1, but there may be roundoff errors\n        else if( dash_type < -0.5 ) {\n            d = cap( int(dash_caps.y), abs(u-dash_center), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash cap right\n        else if( dash_type > 0.5 ) {\n            d = cap( int(dash_caps.x), abs(dash_center-u), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash body (plain)\n        else {// if( dash_type > -0.5 &&  dash_type < 0.5) {\n            d = abs(dy);\n        }\n\n        // Line join\n        if( (dx > line_start) && (dx < line_stop)) {\n            if( (dx <= segment_start) && (dash_start <= segment_start)\n                && (dash_stop >= segment_start) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.x;\n                float f = abs( (segment_start - dx)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( (dx > segment_stop) && (dash_start <= segment_stop)\n                     && (dash_stop >= segment_stop) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.y;\n                float f = abs((dx - segment_stop)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( dx < (segment_start - v_linewidth/2.)) {\n                discard;\n            }\n            else if( dx > (segment_stop + v_linewidth/2.)) {\n                discard;\n            }\n        }\n        else if( dx < (segment_start - v_linewidth/2.)) {\n            discard;\n        }\n        else if( dx > (segment_stop + v_linewidth/2.)) {\n            discard;\n        }\n    }\n\n    // Distance to border ------------------------------------------------------\n    d = d - t;\n    if( d < 0.0 ) {\n        gl_FragColor = color;\n    } else {\n        d /= u_antialias;\n        gl_FragColor = vec4(color.rgb, exp(-d*d)*color.a);\n    }\n}";LineGLGlyph.prototype.init=function(){var gl;gl=this.gl;this._scale_aspect=0;this.prog=new gloo2.Program(gl);this.prog.set_shaders(this.VERT,this.FRAG);this.index_buffer=new gloo2.IndexBuffer(gl);this.vbo_position=new gloo2.VertexBuffer(gl);this.vbo_tangents=new gloo2.VertexBuffer(gl);this.vbo_segment=new gloo2.VertexBuffer(gl);this.vbo_angles=new gloo2.VertexBuffer(gl);this.vbo_texcoord=new gloo2.VertexBuffer(gl);return this.dash_atlas=new DashAtlas(gl);};LineGLGlyph.prototype.draw=function(indices,mainGlyph,trans){var baked_offset,chunk,chunks,chunksize,i,l,mainGlGlyph,nvertices,offset,p,q,ref,ref1,ref2,results,scale_length,sx,sy,these_indices,uint16_index;mainGlGlyph=mainGlyph.glglyph;if(mainGlGlyph.data_changed){if(!(isFinite(trans.dx)&&isFinite(trans.dy))){return;}
mainGlGlyph._baked_offset=[trans.dx,trans.dy];mainGlGlyph._set_data();mainGlGlyph.data_changed=false;}
if(this.visuals_changed){this._set_visuals();this.visuals_changed=false;}
sx=trans.sx;sy=trans.sy;scale_length=Math.sqrt(sx*sx+sy*sy);sx/=scale_length;sy/=scale_length;if(Math.abs(this._scale_aspect-(sy/sx))>Math.abs(1e-3*this._scale_aspect)){mainGlGlyph._update_scale(sx,sy);this._scale_aspect=sy/sx;}
this.prog.set_attribute('a_position','vec2',mainGlGlyph.vbo_position);this.prog.set_attribute('a_tangents','vec4',mainGlGlyph.vbo_tangents);this.prog.set_attribute('a_segment','vec2',mainGlGlyph.vbo_segment);this.prog.set_attribute('a_angles','vec2',mainGlGlyph.vbo_angles);this.prog.set_attribute('a_texcoord','vec2',mainGlGlyph.vbo_texcoord);this.prog.set_uniform('u_length','float',[mainGlGlyph.cumsum]);this.prog.set_texture('u_dash_atlas',this.dash_atlas.tex);baked_offset=mainGlGlyph._baked_offset;this.prog.set_uniform('u_pixel_ratio','float',[trans.pixel_ratio]);this.prog.set_uniform('u_canvas_size','vec2',[trans.width,trans.height]);this.prog.set_uniform('u_offset','vec2',[trans.dx-baked_offset[0],trans.dy-baked_offset[1]]);this.prog.set_uniform('u_scale_aspect','vec2',[sx,sy]);this.prog.set_uniform('u_scale_length','float',[scale_length]);this.I_triangles=mainGlGlyph.I_triangles;if(this.I_triangles.length<65535){this.index_buffer.set_size(this.I_triangles.length*2);this.index_buffer.set_data(0,new Uint16Array(this.I_triangles));return this.prog.draw(this.gl.TRIANGLES,this.index_buffer);}
else{indices=this.I_triangles;nvertices=this.I_triangles.length;chunksize=64008;chunks=[];for(i=l=0,ref=Math.ceil(nvertices/chunksize);0<=ref?l<ref:l>ref;i=0<=ref?++l:--l){chunks.push([]);}
for(i=p=0,ref1=indices.length;0<=ref1?p<ref1:p>ref1;i=0<=ref1?++p:--p){uint16_index=indices[i]%chunksize;chunk=Math.floor(indices[i]/chunksize);chunks[chunk].push(uint16_index);}
results=[];for(chunk=q=0,ref2=chunks.length;0<=ref2?q<ref2:q>ref2;chunk=0<=ref2?++q:--q){these_indices=new Uint16Array(chunks[chunk]);offset=chunk*chunksize*4;if(these_indices.length===0){continue;}
this.prog.set_attribute('a_position','vec2',mainGlGlyph.vbo_position,0,offset*2);this.prog.set_attribute('a_tangents','vec4',mainGlGlyph.vbo_tangents,0,offset*4);this.prog.set_attribute('a_segment','vec2',mainGlGlyph.vbo_segment,0,offset*2);this.prog.set_attribute('a_angles','vec2',mainGlGlyph.vbo_angles,0,offset*2);this.prog.set_attribute('a_texcoord','vec2',mainGlGlyph.vbo_texcoord,0,offset*2);this.index_buffer.set_size(these_indices.length*2);this.index_buffer.set_data(0,these_indices);results.push(this.prog.draw(this.gl.TRIANGLES,this.index_buffer));}
return results;}};LineGLGlyph.prototype._set_data=function(){this._bake();this.vbo_position.set_size(this.V_position.length*4);this.vbo_position.set_data(0,this.V_position);this.vbo_tangents.set_size(this.V_tangents.length*4);this.vbo_tangents.set_data(0,this.V_tangents);this.vbo_angles.set_size(this.V_angles.length*4);this.vbo_angles.set_data(0,this.V_angles);this.vbo_texcoord.set_size(this.V_texcoord.length*4);return this.vbo_texcoord.set_data(0,this.V_texcoord);};LineGLGlyph.prototype._set_visuals=function(){var cap,color,dash_index,dash_pattern,dash_period,join,ref;color=color_1.color2rgba(this.glyph.visuals.line.line_color.value(),this.glyph.visuals.line.line_alpha.value());cap=this.CAPS[this.glyph.visuals.line.line_cap.value()];join=this.JOINS[this.glyph.visuals.line.line_join.value()];this.prog.set_uniform('u_color','vec4',color);this.prog.set_uniform('u_linewidth','float',[this.glyph.visuals.line.line_width.value()]);this.prog.set_uniform('u_antialias','float',[0.9]);this.prog.set_uniform('u_linecaps','vec2',[cap,cap]);this.prog.set_uniform('u_linejoin','float',[join]);this.prog.set_uniform('u_miter_limit','float',[10.0]);dash_pattern=this.glyph.visuals.line.line_dash.value();dash_index=0;dash_period=1;if(dash_pattern.length){ref=this.dash_atlas.get_atlas_data(dash_pattern),dash_index=ref[0],dash_period=ref[1];}
this.prog.set_uniform('u_dash_index','float',[dash_index]);this.prog.set_uniform('u_dash_phase','float',[this.glyph.visuals.line.line_dash_offset.value()]);this.prog.set_uniform('u_dash_period','float',[dash_period]);this.prog.set_uniform('u_dash_caps','vec2',[cap,cap]);return this.prog.set_uniform('u_closed','float',[0]);};LineGLGlyph.prototype._bake=function(){var A,I,T,V_angles,V_angles2,V_position,V_position2,V_tangents,V_tangents2,V_texcoord,V_texcoord2,Vp,Vt,_x,_y,i,i1,j,k,l,m,n,ni,o,p,q,r,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,results,s,t,u,w,y,z;n=this.nvertices;_x=new Float64Array(this.glyph._x);_y=new Float64Array(this.glyph._y);V_position=Vp=new Float32Array(n*2);V_angles=new Float32Array(n*2);V_tangents=Vt=new Float32Array(n*4);V_texcoord=new Float32Array(n*2);for(i=l=0,ref=n;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l){V_position[i*2+0]=_x[i]+this._baked_offset[0];V_position[i*2+1]=_y[i]+this._baked_offset[1];}
this.tangents=T=new Float32Array(n*2-2);for(i=p=0,ref1=n-1;0<=ref1?p<ref1:p>ref1;i=0<=ref1?++p:--p){T[i*2+0]=Vp[(i+1)*2+0]-Vp[i*2+0];T[i*2+1]=Vp[(i+1)*2+1]-Vp[i*2+1];}
for(i=q=0,ref2=n-1;0<=ref2?q<ref2:q>ref2;i=0<=ref2?++q:--q){V_tangents[(i+1)*4+0]=T[i*2+0];V_tangents[(i+1)*4+1]=T[i*2+1];V_tangents[i*4+2]=T[i*2+0];V_tangents[i*4+3]=T[i*2+1];}
V_tangents[0*4+0]=T[0];V_tangents[0*4+1]=T[1];V_tangents[(n-1)*4+2]=T[(n-2)*2+0];V_tangents[(n-1)*4+3]=T[(n-2)*2+1];A=new Float32Array(n);for(i=r=0,ref3=n;0<=ref3?r<ref3:r>ref3;i=0<=ref3?++r:--r){A[i]=Math.atan2(Vt[i*4+0]*Vt[i*4+3]-Vt[i*4+1]*Vt[i*4+2],Vt[i*4+0]*Vt[i*4+2]+Vt[i*4+1]*Vt[i*4+3]);}
for(i=s=0,ref4=n-1;0<=ref4?s<ref4:s>ref4;i=0<=ref4?++s:--s){V_angles[i*2+0]=A[i];V_angles[i*2+1]=A[i+1];}
m=4*n-4;this.V_position=V_position2=new Float32Array(m*2);this.V_angles=V_angles2=new Float32Array(m*2);this.V_tangents=V_tangents2=new Float32Array(m*4);this.V_texcoord=V_texcoord2=new Float32Array(m*2);o=2;for(i=t=0,ref5=n;0<=ref5?t<ref5:t>ref5;i=0<=ref5?++t:--t){for(j=u=0;u<4;j=++u){for(k=w=0;w<2;k=++w){V_position2[(i*4+j-o)*2+k]=V_position[i*2+k];V_angles2[(i*4+j)*2+k]=V_angles[i*2+k];}
for(k=y=0;y<4;k=++y){V_tangents2[(i*4+j-o)*4+k]=V_tangents[i*4+k];}}}
for(i=z=0,ref6=n;0<=ref6?z<=ref6:z>=ref6;i=0<=ref6?++z:--z){V_texcoord2[(i*4+0)*2+0]=-1;V_texcoord2[(i*4+1)*2+0]=-1;V_texcoord2[(i*4+2)*2+0]=+1;V_texcoord2[(i*4+3)*2+0]=+1;V_texcoord2[(i*4+0)*2+1]=-1;V_texcoord2[(i*4+1)*2+1]=+1;V_texcoord2[(i*4+2)*2+1]=-1;V_texcoord2[(i*4+3)*2+1]=+1;}
ni=(n-1)*6;this.I_triangles=I=new Uint32Array(ni);results=[];for(i=i1=0,ref7=n;0<=ref7?i1<ref7:i1>ref7;i=0<=ref7?++i1:--i1){I[i*6+0]=0+4*i;I[i*6+1]=1+4*i;I[i*6+2]=3+4*i;I[i*6+3]=2+4*i;I[i*6+4]=0+4*i;results.push(I[i*6+5]=3+4*i);}
return results;};LineGLGlyph.prototype._update_scale=function(sx,sy){var N,T,V_segment,V_segment2,cumsum,i,j,k,l,m,n,p,q,r,ref,ref1,ref2,s;n=this.nvertices;m=4*n-4;T=this.tangents;N=new Float32Array(n-1);V_segment=new Float32Array(n*2);this.V_segment=V_segment2=new Float32Array(m*2);for(i=l=0,ref=n-1;0<=ref?l<ref:l>ref;i=0<=ref?++l:--l){N[i]=Math.sqrt(Math.pow(T[i*2+0]*sx,2)+Math.pow(T[i*2+1]*sy,2));}
cumsum=0;for(i=p=0,ref1=n-1;0<=ref1?p<ref1:p>ref1;i=0<=ref1?++p:--p){cumsum+=N[i];V_segment[(i+1)*2+0]=cumsum;V_segment[i*2+1]=cumsum;}
for(i=q=0,ref2=n;0<=ref2?q<ref2:q>ref2;i=0<=ref2?++q:--q){for(j=r=0;r<4;j=++r){for(k=s=0;s<2;k=++s){V_segment2[(i*4+j)*2+k]=V_segment[i*2+k];}}}
this.cumsum=cumsum;this.vbo_segment.set_size(this.V_segment.length*4);return this.vbo_segment.set_data(0,this.V_segment);};return LineGLGlyph;})(base_1.BaseGLGlyph);},{"./base":"models/glyphs/webgl/base","core/util/color":undefined,"gloo2":"gloo2"}],"models/glyphs/webgl/main":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});require("./index");},{"./index":"models/glyphs/webgl/index"}],"models/glyphs/webgl/markers":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MarkerGLGlyph,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var gloo2=require("gloo2");var logging_1=require("core/logging");var base_1=require("./base");MarkerGLGlyph=(function(superClass){extend(MarkerGLGlyph,superClass);function MarkerGLGlyph(){return MarkerGLGlyph.__super__.constructor.apply(this,arguments);}
MarkerGLGlyph.prototype.VERT="precision mediump float;\nconst float SQRT_2 = 1.4142135623730951;\n//\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size;\nuniform vec2 u_offset;\nuniform vec2 u_scale;\nuniform float u_antialias;\n//\nattribute float a_x;\nattribute float a_y;\nattribute float a_size;\nattribute float a_angle;  // in radians\nattribute float a_linewidth;\nattribute vec4  a_fg_color;\nattribute vec4  a_bg_color;\n//\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying vec2  v_rotation;\n\nvoid main (void)\n{\n    v_size = a_size * u_pixel_ratio;\n    v_linewidth = a_linewidth * u_pixel_ratio;\n    v_fg_color = a_fg_color;\n    v_bg_color = a_bg_color;\n    v_rotation = vec2(cos(-a_angle), sin(-a_angle));\n    // Calculate position - the -0.5 is to correct for canvas origin\n    vec2 pos = (vec2(a_x, a_y) + u_offset) * u_scale; // in pixels\n    pos += 0.5;  // make up for Bokeh's offset\n    pos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(pos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n    gl_PointSize = SQRT_2 * v_size + 2.0 * (v_linewidth + 1.5*u_antialias);\n}";MarkerGLGlyph.prototype.FRAG="precision mediump float;\nconst float SQRT_2 = 1.4142135623730951;\nconst float PI = 3.14159265358979323846264;\n//\nuniform float u_antialias;\n//\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec2  v_rotation;\n\nMARKERCODE\n\nvec4 outline(float distance, float linewidth, float antialias, vec4 fg_color, vec4 bg_color)\n{\n    vec4 frag_color;\n    float t = linewidth/2.0 - antialias;\n    float signed_distance = distance;\n    float border_distance = abs(signed_distance) - t;\n    float alpha = border_distance/antialias;\n    alpha = exp(-alpha*alpha);\n\n    // If fg alpha is zero, it probably means no outline. To avoid a dark outline\n    // shining through due to aa, we set the fg color to the bg color. Avoid if (i.e. branching).\n    float select = float(bool(fg_color.a));\n    fg_color.rgb = select * fg_color.rgb + (1.0  - select) * bg_color.rgb;\n    // Similarly, if we want a transparent bg\n    select = float(bool(bg_color.a));\n    bg_color.rgb = select * bg_color.rgb + (1.0  - select) * fg_color.rgb;\n\n    if( border_distance < 0.0)\n        frag_color = fg_color;\n    else if( signed_distance < 0.0 ) {\n        frag_color = mix(bg_color, fg_color, sqrt(alpha));\n    } else {\n        if( abs(signed_distance) < (linewidth/2.0 + antialias) ) {\n            frag_color = vec4(fg_color.rgb, fg_color.a * alpha);\n        } else {\n            discard;\n        }\n    }\n    return frag_color;\n}\n\nvoid main()\n{\n    vec2 P = gl_PointCoord.xy - vec2(0.5, 0.5);\n    P = vec2(v_rotation.x*P.x - v_rotation.y*P.y,\n             v_rotation.y*P.x + v_rotation.x*P.y);\n    float point_size = SQRT_2*v_size  + 2.0 * (v_linewidth + 1.5*u_antialias);\n    float distance = marker(P*point_size, v_size);\n    gl_FragColor = outline(distance, v_linewidth, u_antialias, v_fg_color, v_bg_color);\n    //gl_FragColor.rgb *= gl_FragColor.a;  // pre-multiply alpha\n}";MarkerGLGlyph.prototype.MARKERCODE="<defined in subclasses>";MarkerGLGlyph.prototype.init=function(){var frag,gl;gl=this.gl;frag=this.FRAG.replace(/MARKERCODE/,this.MARKERCODE);this.last_trans={};this.prog=new gloo2.Program(gl);this.prog.set_shaders(this.VERT,frag);this.vbo_x=new gloo2.VertexBuffer(gl);this.prog.set_attribute('a_x','float',this.vbo_x);this.vbo_y=new gloo2.VertexBuffer(gl);this.prog.set_attribute('a_y','float',this.vbo_y);this.vbo_s=new gloo2.VertexBuffer(gl);this.prog.set_attribute('a_size','float',this.vbo_s);this.vbo_a=new gloo2.VertexBuffer(gl);this.prog.set_attribute('a_angle','float',this.vbo_a);this.vbo_linewidth=new gloo2.VertexBuffer(gl);this.vbo_fg_color=new gloo2.VertexBuffer(gl);this.vbo_bg_color=new gloo2.VertexBuffer(gl);return this.index_buffer=new gloo2.IndexBuffer(gl);};MarkerGLGlyph.prototype.draw=function(indices,mainGlyph,trans){var baked_offset,chunk,chunks,chunksize,i,j,k,l,mainGlGlyph,nvertices,offset,ref,ref1,ref2,results,s,these_indices,ua,uint16_index;mainGlGlyph=mainGlyph.glglyph;nvertices=mainGlGlyph.nvertices;if(mainGlGlyph.data_changed){if(!(isFinite(trans.dx)&&isFinite(trans.dy))){return;}
mainGlGlyph._baked_offset=[trans.dx,trans.dy];mainGlGlyph._set_data(nvertices);mainGlGlyph.data_changed=false;}
else if((this.glyph._radius!=null)&&(trans.sx!==this.last_trans.sx||trans.sy!==this.last_trans.sy)){this.last_trans=trans;this.vbo_s.set_data(0,new Float32Array((function(){var j,len,ref,results;ref=this.glyph.sradius;results=[];for(j=0,len=ref.length;j<len;j++){s=ref[j];results.push(s*2);}
return results;}).call(this)));}
if(this.visuals_changed){this._set_visuals(nvertices);this.visuals_changed=false;}
baked_offset=mainGlGlyph._baked_offset;this.prog.set_uniform('u_pixel_ratio','float',[trans.pixel_ratio]);this.prog.set_uniform('u_canvas_size','vec2',[trans.width,trans.height]);this.prog.set_uniform('u_offset','vec2',[trans.dx-baked_offset[0],trans.dy-baked_offset[1]]);this.prog.set_uniform('u_scale','vec2',[trans.sx,trans.sy]);this.prog.set_attribute('a_x','float',mainGlGlyph.vbo_x);this.prog.set_attribute('a_y','float',mainGlGlyph.vbo_y);this.prog.set_attribute('a_size','float',mainGlGlyph.vbo_s);this.prog.set_attribute('a_angle','float',mainGlGlyph.vbo_a);if(indices.length===0){}
else if(indices.length===nvertices){return this.prog.draw(this.gl.POINTS,[0,nvertices]);}
else if(nvertices<65535){ua=window.navigator.userAgent;if(ua.indexOf("MSIE ")+ua.indexOf("Trident/")+ua.indexOf("Edge/")>0){logging_1.logger.warn('WebGL warning: IE is known to produce 1px sprites whith selections.');}
this.index_buffer.set_size(indices.length*2);this.index_buffer.set_data(0,new Uint16Array(indices));return this.prog.draw(this.gl.POINTS,this.index_buffer);}
else{chunksize=64000;chunks=[];for(i=j=0,ref=Math.ceil(nvertices/chunksize);0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){chunks.push([]);}
for(i=k=0,ref1=indices.length;0<=ref1?k<ref1:k>ref1;i=0<=ref1?++k:--k){uint16_index=indices[i]%chunksize;chunk=Math.floor(indices[i]/chunksize);chunks[chunk].push(uint16_index);}
results=[];for(chunk=l=0,ref2=chunks.length;0<=ref2?l<ref2:l>ref2;chunk=0<=ref2?++l:--l){these_indices=new Uint16Array(chunks[chunk]);offset=chunk*chunksize*4;if(these_indices.length===0){continue;}
this.prog.set_attribute('a_x','float',mainGlGlyph.vbo_x,0,offset);this.prog.set_attribute('a_y','float',mainGlGlyph.vbo_y,0,offset);this.prog.set_attribute('a_size','float',mainGlGlyph.vbo_s,0,offset);this.prog.set_attribute('a_angle','float',mainGlGlyph.vbo_a,0,offset);if(this.vbo_linewidth.used){this.prog.set_attribute('a_linewidth','float',this.vbo_linewidth,0,offset);}
if(this.vbo_fg_color.used){this.prog.set_attribute('a_fg_color','vec4',this.vbo_fg_color,0,offset*4);}
if(this.vbo_bg_color.used){this.prog.set_attribute('a_bg_color','vec4',this.vbo_bg_color,0,offset*4);}
this.index_buffer.set_size(these_indices.length*2);this.index_buffer.set_data(0,these_indices);results.push(this.prog.draw(this.gl.POINTS,this.index_buffer));}
return results;}};MarkerGLGlyph.prototype._set_data=function(nvertices){var i,j,n,ref,s,xx,yy;n=nvertices*4;this.vbo_x.set_size(n);this.vbo_y.set_size(n);this.vbo_a.set_size(n);this.vbo_s.set_size(n);xx=new Float64Array(this.glyph._x);yy=new Float64Array(this.glyph._y);for(i=j=0,ref=nvertices;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){xx[i]+=this._baked_offset[0];yy[i]+=this._baked_offset[1];}
this.vbo_x.set_data(0,new Float32Array(xx));this.vbo_y.set_data(0,new Float32Array(yy));if(this.glyph._angle!=null){this.vbo_a.set_data(0,new Float32Array(this.glyph._angle));}
if(this.glyph._radius!=null){return this.vbo_s.set_data(0,new Float32Array((function(){var k,len,ref1,results;ref1=this.glyph.sradius;results=[];for(k=0,len=ref1.length;k<len;k++){s=ref1[k];results.push(s*2);}
return results;}).call(this)));}
else{return this.vbo_s.set_data(0,new Float32Array(this.glyph._size));}};MarkerGLGlyph.prototype._set_visuals=function(nvertices){base_1.attach_float(this.prog,this.vbo_linewidth,'a_linewidth',nvertices,this.glyph.visuals.line,'line_width');base_1.attach_color(this.prog,this.vbo_fg_color,'a_fg_color',nvertices,this.glyph.visuals.line,'line');base_1.attach_color(this.prog,this.vbo_bg_color,'a_bg_color',nvertices,this.glyph.visuals.fill,'fill');return this.prog.set_uniform('u_antialias','float',[0.8]);};return MarkerGLGlyph;})(base_1.BaseGLGlyph);exports.CircleGLGlyph=(function(superClass){extend(CircleGLGlyph,superClass);function CircleGLGlyph(){return CircleGLGlyph.__super__.constructor.apply(this,arguments);}
CircleGLGlyph.prototype.GLYPH='circle';CircleGLGlyph.prototype.MARKERCODE="// --- disc\nfloat marker(vec2 P, float size)\n{\n    return length(P) - size/2.0;\n}";return CircleGLGlyph;})(MarkerGLGlyph);exports.SquareGLGlyph=(function(superClass){extend(SquareGLGlyph,superClass);function SquareGLGlyph(){return SquareGLGlyph.__super__.constructor.apply(this,arguments);}
SquareGLGlyph.prototype.GLYPH='square';SquareGLGlyph.prototype.MARKERCODE="// --- square\nfloat marker(vec2 P, float size)\n{\n    return max(abs(P.x), abs(P.y)) - size/2.0;\n}";return SquareGLGlyph;})(MarkerGLGlyph);exports.AnnulusGLGlyph=(function(superClass){extend(AnnulusGLGlyph,superClass);function AnnulusGLGlyph(){return AnnulusGLGlyph.__super__.constructor.apply(this,arguments);}
AnnulusGLGlyph.prototype.GLYPH='annulus';AnnulusGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    float r1 = length(P) - size/2.0;\n    float r2 = length(P) - size/4.0;  // half width\n    return max(r1, -r2);\n}";return AnnulusGLGlyph;})(MarkerGLGlyph);exports.DiamondGLGlyph=(function(superClass){extend(DiamondGLGlyph,superClass);function DiamondGLGlyph(){return DiamondGLGlyph.__super__.constructor.apply(this,arguments);}
DiamondGLGlyph.prototype.GLYPH='diamond';DiamondGLGlyph.prototype.MARKERCODE="// --- diamond\nfloat marker(vec2 P, float size)\n{\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    return r1 / SQRT_2;\n}";return DiamondGLGlyph;})(MarkerGLGlyph);exports.TriangleGLGlyph=(function(superClass){extend(TriangleGLGlyph,superClass);function TriangleGLGlyph(){return TriangleGLGlyph.__super__.constructor.apply(this,arguments);}
TriangleGLGlyph.prototype.GLYPH='triangle';TriangleGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    P.y -= size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = P.y;\n    return max(r1 / SQRT_2, r2);  // Instersect diamond with rectangle\n}";return TriangleGLGlyph;})(MarkerGLGlyph);exports.InvertedTriangleGLGlyph=(function(superClass){extend(InvertedTriangleGLGlyph,superClass);function InvertedTriangleGLGlyph(){return InvertedTriangleGLGlyph.__super__.constructor.apply(this,arguments);}
InvertedTriangleGLGlyph.prototype.GLYPH='invertedtriangle';InvertedTriangleGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    P.y += size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = - P.y;\n    return max(r1 / SQRT_2, r2);  // Instersect diamond with rectangle\n}";return InvertedTriangleGLGlyph;})(MarkerGLGlyph);exports.CrossGLGlyph=(function(superClass){extend(CrossGLGlyph,superClass);function CrossGLGlyph(){return CrossGLGlyph.__super__.constructor.apply(this,arguments);}
CrossGLGlyph.prototype.GLYPH='cross';CrossGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    float square = max(abs(P.x), abs(P.y)) - size / 2.5;  // 2.5 is a tweak\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of \"width\" for aa\n    return max(square, cross);\n}";return CrossGLGlyph;})(MarkerGLGlyph);exports.CircleCrossGLGlyph=(function(superClass){extend(CircleCrossGLGlyph,superClass);function CircleCrossGLGlyph(){return CircleCrossGLGlyph.__super__.constructor.apply(this,arguments);}
CircleCrossGLGlyph.prototype.GLYPH='circlecross';CircleCrossGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}";return CircleCrossGLGlyph;})(MarkerGLGlyph);exports.SquareCrossGLGlyph=(function(superClass){extend(SquareCrossGLGlyph,superClass);function SquareCrossGLGlyph(){return SquareCrossGLGlyph.__super__.constructor.apply(this,arguments);}
SquareCrossGLGlyph.prototype.GLYPH='squarecross';SquareCrossGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}";return SquareCrossGLGlyph;})(MarkerGLGlyph);exports.DiamondCrossGLGlyph=(function(superClass){extend(DiamondCrossGLGlyph,superClass);function DiamondCrossGLGlyph(){return DiamondCrossGLGlyph.__super__.constructor.apply(this,arguments);}
DiamondCrossGLGlyph.prototype.GLYPH='diamondcross';DiamondCrossGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float diamond = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    diamond /= SQRT_2;\n    float c1 = max(diamond, s1);\n    float c2 = max(diamond, s2);\n    float c3 = max(diamond, s3);\n    float c4 = max(diamond, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}";return DiamondCrossGLGlyph;})(MarkerGLGlyph);exports.XGLGlyph=(function(superClass){extend(XGLGlyph,superClass);function XGLGlyph(){return XGLGlyph.__super__.constructor.apply(this,arguments);}
XGLGlyph.prototype.GLYPH='x';XGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    float circle = length(P) - size / 1.6;\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \"width\" for aa\n    return max(circle, X);\n}";return XGLGlyph;})(MarkerGLGlyph);exports.CircleXGLGlyph=(function(superClass){extend(CircleXGLGlyph,superClass);function CircleXGLGlyph(){return CircleXGLGlyph.__super__.constructor.apply(this,arguments);}
CircleXGLGlyph.prototype.GLYPH='circlex';CircleXGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    float almost = min(min(min(c1, c2), c3), c4);\n    // In this case, the X is also outside of the main shape\n    float Xmask = length(P) - size / 1.6;  // a circle\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \"width\" for aa\n    return min(max(X, Xmask), almost);\n}";return CircleXGLGlyph;})(MarkerGLGlyph);exports.SquareXGLGlyph=(function(superClass){extend(SquareXGLGlyph,superClass);function SquareXGLGlyph(){return SquareXGLGlyph.__super__.constructor.apply(this,arguments);}
SquareXGLGlyph.prototype.GLYPH='squarex';SquareXGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}";return SquareXGLGlyph;})(MarkerGLGlyph);exports.AsteriskGLGlyph=(function(superClass){extend(AsteriskGLGlyph,superClass);function AsteriskGLGlyph(){return AsteriskGLGlyph.__super__.constructor.apply(this,arguments);}
AsteriskGLGlyph.prototype.GLYPH='asterisk';AsteriskGLGlyph.prototype.MARKERCODE="float marker(vec2 P, float size)\n{\n    // Masks\n    float diamond = max(abs(SQRT_2 / 2.0 * (P.x - P.y)), abs(SQRT_2 / 2.0 * (P.x + P.y))) - size / (2.0 * SQRT_2);\n    float square = max(abs(P.x), abs(P.y)) - size / (2.0 * SQRT_2);\n    // Shapes\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of \"width\" for aa\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of \"width\" for aa\n    // Result is union of masked shapes\n    return min(max(X, diamond), max(cross, square));\n}";return AsteriskGLGlyph;})(MarkerGLGlyph);},{"./base":"models/glyphs/webgl/base","core/logging":undefined,"gloo2":"gloo2"}],"gloo2":[function(require,module,exports){(function(global){(function(root,factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof exports!=='undefined'){module.exports=factory();if(typeof window==='undefined'){root.gloo2=module.exports;}}else{root.gloo2=factory();}}(this,function(){var _pyfunc_add=function(a,b){if(Array.isArray(a)&&Array.isArray(b)){return a.concat(b);}return a+b;};var _pyfunc_all=function(x){for(var i=0;i<x.length;i++){if(!_pyfunc_truthy(x[i])){return false;}}return true;};var _pyfunc_contains=function contains(a,b){if(b==null){}else if(Array.isArray(b)){for(var i=0;i<b.length;i++){if(_pyfunc_equals(a,b[i]))
return true;}
return false;}else if(b.constructor===Object){for(var k in b){if(a==k)return true;}
return false;}else if(b.constructor==String){return b.indexOf(a)>=0;}var e=Error('Not a container: '+b);e.name='TypeError';throw e;};var _pyfunc_equals=function equals(a,b){if(a==null||b==null){}else if(Array.isArray(a)&&Array.isArray(b)){var i=0,iseq=a.length==b.length;while(iseq&&i<a.length){iseq=equals(a[i],b[i]);i+=1;}
return iseq;}else if(a.constructor===Object&&b.constructor===Object){var akeys=Object.keys(a),bkeys=Object.keys(b);akeys.sort();bkeys.sort();var i=0,k,iseq=equals(akeys,bkeys);while(iseq&&i<akeys.length){k=akeys[i];iseq=equals(a[k],b[k]);i+=1;}
return iseq;}return a==b;};var _pyfunc_instantiate=function(ob,args){if((typeof ob==="undefined")||(typeof window!=="undefined"&&window===ob)||(typeof global!=="undefined"&&global===ob))
{throw"Class constructor is called as a function.";}
for(var name in ob){if(Object[name]===undefined&&typeof ob[name]==='function'&&!ob[name].nobind){ob[name]=ob[name].bind(ob);}}
if(ob.__init__){ob.__init__.apply(ob,args);}};var _pyfunc_mult=function(a,b){if((typeof a==='number')+(typeof b==='number')===1){if(a.constructor===String)return _pymeth_repeat.call(a,b);if(b.constructor===String)return _pymeth_repeat.call(b,a);if(Array.isArray(b)){var t=a;a=b;b=t;}
if(Array.isArray(a)){var res=[];for(var i=0;i<b;i++)res=res.concat(a);return res;}}return a*b;};var _pyfunc_range=function(start,end,step){var i,res=[];var val=start;var n=(end-start)/step;for(i=0;i<n;i++){res.push(val);val+=step;}
return res;};var _pyfunc_truthy=function(v){if(v===null||typeof v!=="object"){return v;}
else if(v.length!==undefined){return v.length?v:false;}
else if(v.byteLength!==undefined){return v.byteLength?v:false;}
else if(v.constructor!==Object){return true;}
else{return Object.getOwnPropertyNames(v).length?v:false;}};var _pymeth_append=function(x){if(!Array.isArray(this))return this.append.apply(this,arguments);this.push(x);};var _pymeth_get=function(key,d){if(this.constructor!==Object)return this.get.apply(this,arguments);if(this[key]!==undefined){return this[key];}
else if(d!==undefined){return d;}
else{return null;}};var _pymeth_keys=function(){if(typeof this['keys']==='function')return this.keys.apply(this,arguments);return Object.keys(this);};var _pymeth_lstrip=function(chars){if(this.constructor!==String)return this.lstrip.apply(this,arguments);chars=(chars===undefined)?' \t\r\n':chars;for(var i=0;i<this.length;i++){if(chars.indexOf(this[i])<0)return this.slice(i);}return'';};var _pymeth_remove=function(x){if(!Array.isArray(this))return this.remove.apply(this,arguments);for(var i=0;i<this.length;i++){if(_pyfunc_equals(this[i],x)){this.splice(i,1);return;}}
var e=Error(x);e.name='ValueError';throw e;};var _pymeth_repeat=function(count){if(this.repeat)return this.repeat(count);if(count<1)return'';var result='',pattern=this.valueOf();while(count>1){if(count&1)result+=pattern;count>>=1,pattern+=pattern;}
return result+pattern;};var _pymeth_startswith=function(x){if(this.constructor!==String)return this.startswith.apply(this,arguments);return this.indexOf(x)==0;};var Buffer,GlooObject,IndexBuffer,Program,Texture2D,Texture3DLike,VertexBuffer,__version__,check_error,console;{console=window.console;}
__version__="0.3";check_error=function(gl,when){var e,err,err_3,errors,msg,stub1_seq,stub2_itr;when=(when===undefined)?"periodic check":when;errors=[];while(true){err=gl.getError();if((_pyfunc_equals(err,gl.NO_ERROR)||(_pyfunc_truthy(errors)&&_pyfunc_equals(err,errors[errors.length-1])))){break;}
_pymeth_append.call(errors,err);}
if(errors.length){msg="";stub1_seq=errors;if((typeof stub1_seq==="object")&&(!Array.isArray(stub1_seq))){stub1_seq=Object.keys(stub1_seq);}
for(stub2_itr=0;stub2_itr<stub1_seq.length;stub2_itr+=1){e=stub1_seq[stub2_itr];msg=_pyfunc_add(msg,e)}
err_3=new Error('RuntimeError:'+("OpenGL got errors ("+when+"): "+msg+""));err_3.name="RuntimeError";throw err_3;}
return null;};GlooObject=function(){_pyfunc_instantiate(this,arguments);}
GlooObject.prototype._base_class=Object;GlooObject.prototype._class_name="GlooObject";GlooObject.prototype.__init__=function(gl){this._gl=gl;this.handle=null;this._create();if(!(this.handle!==null)){throw"AssertionError: "+"this.handle !== null";}
return null;};GlooObject.prototype._create=function(){var err_2;err_2=new Error('NotImplementedError:'+"");err_2.name="NotImplementedError";throw err_2;return null;};Program=function(){_pyfunc_instantiate(this,arguments);}
Program.prototype=Object.create(GlooObject.prototype);Program.prototype._base_class=GlooObject.prototype;Program.prototype._class_name="Program";Program.prototype.UTYPEMAP={"float":"uniform1fv","vec2":"uniform2fv","vec3":"uniform3fv","vec4":"uniform4fv","int":"uniform1iv","ivec2":"uniform2iv","ivec3":"uniform3iv","ivec4":"uniform4iv","bool":"uniform1iv","bvec2":"uniform2iv","bvec3":"uniform3iv","bvec4":"uniform4iv","mat2":"uniformMatrix2fv","mat3":"uniformMatrix3fv","mat4":"uniformMatrix4fv","sampler1D":"uniform1i","sampler2D":"uniform1i","sampler3D":"uniform1i"};Program.prototype.ATYPEMAP={"float":"vertexAttrib1f","vec2":"vertexAttrib2f","vec3":"vertexAttrib3f","vec4":"vertexAttrib4f"};Program.prototype.ATYPEINFO={"float":[1,5126],"vec2":[2,5126],"vec3":[3,5126],"vec4":[4,5126]};Program.prototype._create=function(){this.handle=this._gl.createProgram();this.locations={};this._unset_variables=[];this._validated=false;this._samplers={};this._attributes={};this._known_invalid=[];return null;};Program.prototype.delete=function(){this._gl.deleteProgram(this.handle);return null;};Program.prototype.activate=function(){this._gl.useProgram(this.handle);return null;};Program.prototype.deactivate=function(){this._gl.useProgram(0);return null;};Program.prototype.set_shaders=function(vert,frag){var code,err_3,err_4,errors,frag_handle,gl,handle,i,status,stub3_,tmp,type_,vert_handle;gl=this._gl;this._linked=false;vert_handle=gl.createShader(gl.VERTEX_SHADER);frag_handle=gl.createShader(gl.FRAGMENT_SHADER);tmp=[[vert,vert_handle,"vertex"],[frag,frag_handle,"fragment"]];for(i=0;i<2;i+=1){stub3_=tmp[i];code=stub3_[0];handle=stub3_[1];type_=stub3_[2];gl.shaderSource(handle,code);gl.compileShader(handle);status=gl.getShaderParameter(handle,gl.COMPILE_STATUS);if((!_pyfunc_truthy(status))){errors=gl.getShaderInfoLog(handle);err_4=new Error('RuntimeError:'+(_pyfunc_add((("errors in "+type_)+" shader:\n"),errors)));err_4.name="RuntimeError";throw err_4;}}
gl.attachShader(this.handle,vert_handle);gl.attachShader(this.handle,frag_handle);gl.linkProgram(this.handle);if((!_pyfunc_truthy(gl.getProgramParameter(this.handle,gl.LINK_STATUS)))){err_3=new Error('RuntimeError:'+("Program link error:\n"+gl.getProgramInfoLog(this.handle)));err_3.name="RuntimeError";throw err_3;}
this._unset_variables=this._get_active_attributes_and_uniforms();gl.detachShader(this.handle,vert_handle);gl.detachShader(this.handle,frag_handle);gl.deleteShader(vert_handle);gl.deleteShader(frag_handle);this._known_invalid=[];this._linked=true;return null;};Program.prototype._get_active_attributes_and_uniforms=function(){var attributes,ca,container,count,cu,getActive,getLocation,gl,i,info,j,m,name,regex,stub4_,stub5_seq,stub6_itr,uniforms,x;gl=this._gl;this.locations={};regex=new window.RegExp("(\\w+)\\s*(\\[(\\d+)\\])\\s*");cu=gl.getProgramParameter(this.handle,gl.ACTIVE_UNIFORMS);ca=gl.getProgramParameter(this.handle,gl.ACTIVE_ATTRIBUTES);attributes=[];uniforms=[];stub5_seq=[[attributes,ca,gl.getActiveAttrib,gl.getAttribLocation],[uniforms,cu,gl.getActiveUniform,gl.getUniformLocation]];if((typeof stub5_seq==="object")&&(!Array.isArray(stub5_seq))){stub5_seq=Object.keys(stub5_seq);}
for(stub6_itr=0;stub6_itr<stub5_seq.length;stub6_itr+=1){x=stub5_seq[stub6_itr];stub4_=x;container=stub4_[0];count=stub4_[1];getActive=stub4_[2];getLocation=stub4_[3];for(i=0;i<count;i+=1){info=getActive.call(gl,this.handle,i);name=info.name;m=name.match(regex);if(_pyfunc_truthy(m)){name=m[1];for(j=0;j<info.size;j+=1){_pymeth_append.call(container,([""+name+"["+j+"]",info.type]));}}else{_pymeth_append.call(container,[name,info.type]);}
this.locations[name]=getLocation.call(gl,this.handle,name);}}
return _pyfunc_add(((function list_comprehenson(){var res=[];var v,iter0,i0;iter0=attributes;if((typeof iter0==="object")&&(!Array.isArray(iter0))){iter0=Object.keys(iter0);}for(i0=0;i0<iter0.length;i0++){v=iter0[i0];{res.push(v[0]);}}return res;}).apply(this)),((function list_comprehenson(){var res=[];var v,iter0,i0;iter0=uniforms;if((typeof iter0==="object")&&(!Array.isArray(iter0))){iter0=Object.keys(iter0);}for(i0=0;i0<iter0.length;i0++){v=iter0[i0];{res.push(v[0]);}}return res;}).apply(this)));};Program.prototype.set_texture=function(name,value){var err_3,handle,unit;if((!_pyfunc_truthy(this._linked))){err_3=new Error('RuntimeError:'+"Cannot set uniform when program has no code");err_3.name="RuntimeError";throw err_3;}
handle=_pymeth_get.call(this.locations,name,(-1));if(_pyfunc_truthy(handle<0)){if((!_pyfunc_contains(name,this._known_invalid))){_pymeth_append.call(this._known_invalid,name);console.log("Variable "+name+" is not an active texture");}
return null;}
if(_pyfunc_contains(name,this._unset_variables)){_pymeth_remove.call(this._unset_variables,name);}
this.activate();if(true){unit=_pymeth_keys.call(this._samplers).length;if(_pyfunc_contains(name,this._samplers)){unit=this._samplers[name][this._samplers[name].length-1];}
this._samplers[name]=[value._target,value.handle,unit];this._gl.uniform1i(handle,unit);}
return null;};Program.prototype.set_uniform=function(name,type_,value){var a_type,count,err_3,funcname,handle,j,name_;if((!_pyfunc_truthy(this._linked))){err_3=new Error('RuntimeError:'+"Cannot set uniform when program has no code");err_3.name="RuntimeError";throw err_3;}
handle=_pymeth_get.call(this.locations,name,(-1));if(_pyfunc_truthy(handle<0)){if((!_pyfunc_contains(name,this._known_invalid))){_pymeth_append.call(this._known_invalid,name);console.log("Variable "+name+" is not an active uniform");}
return null;}
if(_pyfunc_contains(name,this._unset_variables)){_pymeth_remove.call(this._unset_variables,name);}
count=1;if((!_pymeth_startswith.call(type_,"mat"))){a_type=_pymeth_get.call({"int":"float","bool":"float"},type_,_pymeth_lstrip.call(type_,"ib"));count=Math.floor(value.length/(this.ATYPEINFO[a_type][0]));}
if(_pyfunc_truthy(count>1)){for(j=0;j<count;j+=1){if((_pyfunc_contains((""+name+"["+j+"]"),this._unset_variables))){name_=""+name+"["+j+"]";if(_pyfunc_contains(name_,this._unset_variables)){_pymeth_remove.call(this._unset_variables,name_);}}}}
funcname=this.UTYPEMAP[type_];this.activate();if(_pymeth_startswith.call(type_,"mat")){this._gl[funcname](handle,false,value);}else{this._gl[funcname](handle,value);}
return null;};Program.prototype.set_attribute=function(name,type_,value,stride,offset){var args,err_3,funcname,gtype,handle,is_vbo,size,stub7_;stride=(stride===undefined)?0:stride;offset=(offset===undefined)?0:offset;if((!_pyfunc_truthy(this._linked))){err_3=new Error('RuntimeError:'+"Cannot set attribute when program has no code");err_3.name="RuntimeError";throw err_3;}
is_vbo=value instanceof VertexBuffer;handle=_pymeth_get.call(this.locations,name,(-1));if(_pyfunc_truthy(handle<0)){if((!_pyfunc_contains(name,this._known_invalid))){_pymeth_append.call(this._known_invalid,name);if((_pyfunc_truthy(is_vbo)&&_pyfunc_truthy(offset>0))){}else{console.log("Variable "+name+" is not an active attribute");}}
return null;}
if(_pyfunc_contains(name,this._unset_variables)){_pymeth_remove.call(this._unset_variables,name);}
this.activate();if((!_pyfunc_truthy(is_vbo))){funcname=this.ATYPEMAP[type_];this._attributes[name]=[0,handle,funcname,value];}else{stub7_=this.ATYPEINFO[type_];size=stub7_[0];gtype=stub7_[1];funcname="vertexAttribPointer";args=[size,gtype,this._gl.FALSE,stride,offset];this._attributes[name]=[value.handle,handle,funcname,args];}
return null;};Program.prototype._pre_draw=function(){var args,attr_handle,funcname,stub10_,stub11_seq,stub8_,stub9_seq,tex_handle,tex_target,unit,vbo_handle,x;this.activate();stub9_seq=this._samplers;for(x in stub9_seq){if(!stub9_seq.hasOwnProperty(x)){continue;}
x=stub9_seq[x];stub8_=x;tex_target=stub8_[0];tex_handle=stub8_[1];unit=stub8_[2];this._gl.activeTexture(_pyfunc_add(this._gl.TEXTURE0,unit));this._gl.bindTexture(tex_target,tex_handle);}
stub11_seq=this._attributes;for(x in stub11_seq){if(!stub11_seq.hasOwnProperty(x)){continue;}
x=stub11_seq[x];stub10_=x;vbo_handle=stub10_[0];attr_handle=stub10_[1];funcname=stub10_[2];args=stub10_[3];if(_pyfunc_truthy(vbo_handle)){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,vbo_handle);this._gl.enableVertexAttribArray(attr_handle);this._gl[funcname].apply(this._gl,[].concat([attr_handle],args));}else{this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);this._gl.disableVertexAttribArray(attr_handle);this._gl[funcname].apply(this._gl,[].concat([attr_handle],args));}}
if((!_pyfunc_truthy(this._validated))){this._validated=true;this._validate();}
return null;};Program.prototype._validate=function(){var err_3;if(this._unset_variables.length){console.log("Program has unset variables: "+this._unset_variables+"");}
this._gl.validateProgram(this.handle);if((!_pyfunc_truthy(this._gl.getProgramParameter(this.handle,this._gl.VALIDATE_STATUS)))){console.log(this._gl.getProgramInfoLog(this.handle));err_3=new Error('RuntimeError:'+"Program validation error");err_3.name="RuntimeError";throw err_3;}
return null;};Program.prototype.draw=function(mode,selection){var count,err_3,first,gtype,stub12_;if((!_pyfunc_truthy(this._linked))){err_3=new Error('RuntimeError:'+"Cannot draw program if code has not been set");err_3.name="RuntimeError";throw err_3;}
check_error(this._gl,"before draw");if(_pyfunc_truthy(selection instanceof IndexBuffer)){this._pre_draw();selection.activate();count=selection._buffer_size/2;gtype=this._gl.UNSIGNED_SHORT;this._gl.drawElements(mode,count,gtype,0);selection.deactivate();}else{stub12_=selection;first=stub12_[0];count=stub12_[1];if(_pyfunc_truthy(count)){this._pre_draw();this._gl.drawArrays(mode,first,count);}}
check_error(this._gl,"after draw");return null;};Buffer=function(){_pyfunc_instantiate(this,arguments);}
Buffer.prototype=Object.create(GlooObject.prototype);Buffer.prototype._base_class=GlooObject.prototype;Buffer.prototype._class_name="Buffer";Buffer.prototype._target=null;Buffer.prototype._usage=35048;Buffer.prototype._create=function(){this.handle=this._gl.createBuffer();this._buffer_size=0;return null;};Buffer.prototype.delete=function(){this._gl.deleteBuffer(this.handle);return null;};Buffer.prototype.activate=function(){this._gl.bindBuffer(this._target,this.handle);return null;};Buffer.prototype.deactivate=function(){this._gl.bindBuffer(this._target,null);return null;};Buffer.prototype.set_size=function(nbytes){if((!_pyfunc_equals(nbytes,this._buffer_size))){this.activate();this._gl.bufferData(this._target,nbytes,this._usage);this._buffer_size=nbytes;}
return null;};Buffer.prototype.set_data=function(offset,data){this.activate();this._gl.bufferSubData(this._target,offset,data);return null;};VertexBuffer=function(){_pyfunc_instantiate(this,arguments);}
VertexBuffer.prototype=Object.create(Buffer.prototype);VertexBuffer.prototype._base_class=Buffer.prototype;VertexBuffer.prototype._class_name="VertexBuffer";VertexBuffer.prototype._target=34962;IndexBuffer=function(){_pyfunc_instantiate(this,arguments);}
IndexBuffer.prototype=Object.create(Buffer.prototype);IndexBuffer.prototype._base_class=Buffer.prototype;IndexBuffer.prototype._class_name="IndexBuffer";IndexBuffer.prototype._target=34963;Texture2D=function(){_pyfunc_instantiate(this,arguments);}
Texture2D.prototype=Object.create(GlooObject.prototype);Texture2D.prototype._base_class=GlooObject.prototype;Texture2D.prototype._class_name="Texture2D";Texture2D.prototype._target=3553;Texture2D.prototype._types={"Int8Array":5120,"Uint8Array":5121,"Int16Array":5122,"Uint16Array":5123,"Int32Array":5124,"Uint32Array":5125,"Float32Array":5126};Texture2D.prototype._create=function(){this.handle=this._gl.createTexture();this._shape_format=null;return null;};Texture2D.prototype.delete=function(){this._gl.deleteTexture(this.handle);return null;};Texture2D.prototype.activate=function(){this._gl.bindTexture(this._target,this.handle);return null;};Texture2D.prototype.deactivate=function(){this._gl.bindTexture(this._target,0);return null;};Texture2D.prototype._get_alignment=function(width){var alignment,alignments,stub13_seq,stub14_itr;alignments=[4,8,2,1];stub13_seq=alignments;if((typeof stub13_seq==="object")&&(!Array.isArray(stub13_seq))){stub13_seq=Object.keys(stub13_seq);}
for(stub14_itr=0;stub14_itr<stub13_seq.length;stub14_itr+=1){alignment=stub13_seq[stub14_itr];if((_pyfunc_equals((width%alignment),0))){return alignment;}}
return null;};Texture2D.prototype.set_wrapping=function(wrap_s,wrap_t){this.activate();this._gl.texParameterf(this._target,this._gl.TEXTURE_WRAP_S,wrap_s);this._gl.texParameterf(this._target,this._gl.TEXTURE_WRAP_T,wrap_t);return null;};Texture2D.prototype.set_interpolation=function(min,mag){this.activate();this._gl.texParameterf(this._target,this._gl.TEXTURE_MIN_FILTER,min);this._gl.texParameterf(this._target,this._gl.TEXTURE_MAG_FILTER,mag);return null;};Texture2D.prototype.set_size=function(shape,format){var height,stub15_,width;stub15_=shape;height=stub15_[0];width=stub15_[1];if((!_pyfunc_equals([height,width,format],this._shape_format))){this._shape_format=[height,width,format];this.activate();this._gl.texImage2D(this._target,0,format,width,height,0,format,this._gl.UNSIGNED_BYTE,null);}
this.u_shape=[height,width];return null;};Texture2D.prototype.set_data=function(offset,shape,data){var _,alignment,err_3,format,gtype,height,stub16_,stub17_,width,x,y;if(_pyfunc_equals(shape.length,2)){shape=[shape[0],shape[1],1];}
this.activate();format=this._shape_format[2];stub16_=shape;height=stub16_[0];width=stub16_[1];_=stub16_[2];stub17_=offset;y=stub17_[0];x=stub17_[1];gtype=_pymeth_get.call(this._types,data.constructor.name,null);if((gtype===null)){err_3=new Error('ValueError:'+("Type "+data.constructor.name+" not allowed for texture"));err_3.name="ValueError";throw err_3;}
alignment=this._get_alignment(_pyfunc_mult(shape[shape.length-2],shape[shape.length-1]));if((!_pyfunc_equals(alignment,4))){this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,alignment);}
this._gl.texSubImage2D(this._target,0,x,y,width,height,format,gtype,data);if((!_pyfunc_equals(alignment,4))){this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,4);}
return null;};Texture3DLike=function(){_pyfunc_instantiate(this,arguments);}
Texture3DLike.prototype=Object.create(Texture2D.prototype);Texture3DLike.prototype._base_class=Texture2D.prototype;Texture3DLike.prototype._class_name="Texture3DLike";Texture3DLike.prototype.GLSL_SAMPLE_NEAREST="\n        vec4 sample3D(sampler2D tex, vec3 texcoord, vec3 shape, vec2 tiles) {\n            shape.xyz = shape.zyx;  // silly row-major convention\n            float nrows = tiles.y, ncols = tiles.x;\n            // Don't let adjacent frames be interpolated into this one\n            texcoord.x = min(texcoord.x * shape.x, shape.x - 0.5);\n            texcoord.x = max(0.5, texcoord.x) / shape.x;\n            texcoord.y = min(texcoord.y * shape.y, shape.y - 0.5);\n            texcoord.y = max(0.5, texcoord.y) / shape.y;\n\n            float zindex = floor(texcoord.z * shape.z);\n\n            // Do a lookup in the 2D texture\n            float u = (mod(zindex, ncols) + texcoord.x) / ncols;\n            float v = (floor(zindex / ncols) + texcoord.y) / nrows;\n\n            return texture2D(tex, vec2(u,v));\n        }\n    ";Texture3DLike.prototype.GLSL_SAMPLE_LINEAR="\n        vec4 sample3D(sampler2D tex, vec3 texcoord, vec3 shape, vec2 tiles) {\n            shape.xyz = shape.zyx;  // silly row-major convention\n            float nrows = tiles.y, ncols = tiles.x;\n            // Don't let adjacent frames be interpolated into this one\n            texcoord.x = min(texcoord.x * shape.x, shape.x - 0.5);\n            texcoord.x = max(0.5, texcoord.x) / shape.x;\n            texcoord.y = min(texcoord.y * shape.y, shape.y - 0.5);\n            texcoord.y = max(0.5, texcoord.y) / shape.y;\n\n            float z = texcoord.z * shape.z;\n            float zindex1 = floor(z);\n            float u1 = (mod(zindex1, ncols) + texcoord.x) / ncols;\n            float v1 = (floor(zindex1 / ncols) + texcoord.y) / nrows;\n\n            float zindex2 = zindex1 + 1.0;\n            float u2 = (mod(zindex2, ncols) + texcoord.x) / ncols;\n            float v2 = (floor(zindex2 / ncols) + texcoord.y) / nrows;\n\n            vec4 s1 = texture2D(tex, vec2(u1, v1));\n            vec4 s2 = texture2D(tex, vec2(u2, v2));\n\n            return s1 * (zindex2 - z) + s2 * (z - zindex1);\n        }\n    ";Texture3DLike.prototype._get_tile_info=function(shape){var err_3,max_size,ncols,nrows;max_size=this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE);nrows=Math.floor(max_size/shape[1]);nrows=Math.min(nrows,shape[0]);ncols=window.Math.ceil(shape[0]/nrows);if(_pyfunc_truthy(_pyfunc_mult(ncols,shape[2])>max_size)){err_3=new Error('RuntimeError:'+("Cannot fit 3D data with shape "+shape+" onto simulated 2D texture."));err_3.name="RuntimeError";throw err_3;}
return[nrows,ncols];};Texture3DLike.prototype.set_size=function(shape,format){var ncols,nrows,sim_shape,stub18_;stub18_=this._get_tile_info(shape);nrows=stub18_[0];ncols=stub18_[1];sim_shape=[_pyfunc_mult(shape[1],nrows),_pyfunc_mult(shape[2],ncols)];Texture3DLike.prototype._base_class.set_size.call(this,sim_shape,format);this.u_shape=[shape[0],shape[1],shape[2]];this.u_tiles=[ncols,nrows];return null;};Texture3DLike.prototype.set_data=function(offset,shape,data){var Type,col,elements_per_tile,err_3,ncols,nrows,row,sim_shape,stub19_,stub20_,tile,z,zeros;if(_pyfunc_equals(shape.length,3)){shape=[shape[0],shape[1],shape[2],1];}
if((!(_pyfunc_all(((function list_comprehenson(){var res=[];var i,iter0,i0;iter0=offset;if((typeof iter0==="object")&&(!Array.isArray(iter0))){iter0=Object.keys(iter0);}for(i0=0;i0<iter0.length;i0++){i=iter0[i0];{res.push(_pyfunc_equals(i,0));}}return res;}).apply(this)))))){err_3=new Error('ValueError:'+"Texture3DLike does not support nonzero offset (for now)");err_3.name="ValueError";throw err_3;}
stub19_=this._get_tile_info(shape);nrows=stub19_[0];ncols=stub19_[1];sim_shape=[_pyfunc_mult(shape[1],nrows),_pyfunc_mult(shape[2],ncols),shape[3]];if(_pyfunc_equals(ncols,1)){Texture3DLike.prototype._base_class.set_data.call(this,[0,0],sim_shape,data);}else{Type=data.constructor;zeros=new Type(_pyfunc_mult(_pyfunc_mult(sim_shape[0],sim_shape[1]),sim_shape[2]));Texture3DLike.prototype._base_class.set_data.call(this,[0,0],sim_shape,zeros);for(z=0;z<shape[0];z+=1){stub20_=[Math.floor(z/ncols),z%ncols];row=stub20_[0];col=stub20_[1];elements_per_tile=Math.floor(data.length/shape[0]);tile=data.slice(_pyfunc_mult(z,elements_per_tile),_pyfunc_mult((z+1),elements_per_tile));Texture3DLike.prototype._base_class.set_data.call(this,[_pyfunc_mult(row,shape[1]),_pyfunc_mult(col,shape[2])],shape.slice(1),tile);}}
return null;};return{"Buffer":Buffer,"GlooObject":GlooObject,"IndexBuffer":IndexBuffer,"Program":Program,"Texture2D":Texture2D,"Texture3DLike":Texture3DLike,"VertexBuffer":VertexBuffer,"check_error":check_error,"console":console};}));}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},["models/glyphs/webgl/main"])})()
(function(){var define=undefined;return(function outer(modules,cache,entry){if(Bokeh!=null){for(var name in modules){Bokeh.require.modules[name]=modules[name];}
for(var i=0;i<entry.length;i++){var plugin=Bokeh.require(entry[0]);Bokeh.Models.register_models(plugin.models);for(var name in plugin){if(name!=="models"){Bokeh[name]=plugin[name];}}}}else{throw new Error("Cannot find Bokeh. You have to load it prior to loading plugins.");}})
({"models/widgets/abstract_button":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var build_views_1=require("core/build_views");var widget_1=require("./widget");var button_template_1=require("./button_template");exports.AbstractButtonView=(function(superClass){extend(AbstractButtonView,superClass);function AbstractButtonView(){return AbstractButtonView.__super__.constructor.apply(this,arguments);}
AbstractButtonView.prototype.events={"click":"change_input"};AbstractButtonView.prototype.template=button_template_1.default;AbstractButtonView.prototype.initialize=function(options){AbstractButtonView.__super__.initialize.call(this,options);this.icon_views={};this.listenTo(this.model,'change',this.render);return this.render();};AbstractButtonView.prototype.render=function(){var $button,html,icon,key,ref,ref1,val;AbstractButtonView.__super__.render.call(this);icon=this.model.icon;if(icon!=null){build_views_1.build_views(this.icon_views,[icon]);ref=this.icon_views;for(key in ref){if(!hasProp.call(ref,key))
continue;val=ref[key];if((ref1=val.el.parentNode)!=null){ref1.removeChild(val.el);}}}
this.$el.empty();html=this.template(this.model.attributes);this.el.appendChild(html);$button=this.$el.find('button');if(icon!=null){$button.prepend("&nbsp;");$button.prepend(this.icon_views[icon.id].$el);}
$button.prop("disabled",this.model.disabled);return this;};AbstractButtonView.prototype.change_input=function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return AbstractButtonView;})(widget_1.WidgetView);exports.AbstractButton=(function(superClass){extend(AbstractButton,superClass);function AbstractButton(){return AbstractButton.__super__.constructor.apply(this,arguments);}
AbstractButton.prototype.type="AbstractButton";AbstractButton.prototype.default_view=exports.AbstractButtonView;AbstractButton.define({callback:[p.Instance],label:[p.String,"Button"],icon:[p.Instance],button_type:[p.String,"default"]});return AbstractButton;})(widget_1.Widget);},{"./button_template":"models/widgets/button_template","./widget":"models/widgets/widget","core/build_views":undefined,"core/properties":undefined}],"models/widgets/abstract_icon":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var widget_1=require("./widget");exports.AbstractIcon=(function(superClass){extend(AbstractIcon,superClass);function AbstractIcon(){return AbstractIcon.__super__.constructor.apply(this,arguments);}
AbstractIcon.prototype.type="AbstractIcon";return AbstractIcon;})(widget_1.Widget);},{"./widget":"models/widgets/widget"}],"models/widgets/autocomplete_input":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;require("jquery-ui/autocomplete");var text_input_1=require("./text_input");var p=require("core/properties");exports.AutocompleteInputView=(function(superClass){extend(AutocompleteInputView,superClass);function AutocompleteInputView(){return AutocompleteInputView.__super__.constructor.apply(this,arguments);}
AutocompleteInputView.prototype.render=function(){var $input;AutocompleteInputView.__super__.render.call(this);$input=this.$el.find("input");$input.autocomplete({source:this.model.completions});$input.autocomplete("widget").addClass("bk-autocomplete-input");this._prefix_ui();return this;};return AutocompleteInputView;})(text_input_1.TextInputView);exports.AutocompleteInput=(function(superClass){extend(AutocompleteInput,superClass);function AutocompleteInput(){return AutocompleteInput.__super__.constructor.apply(this,arguments);}
AutocompleteInput.prototype.type="AutocompleteInput";AutocompleteInput.prototype.default_view=exports.AutocompleteInputView;AutocompleteInput.define({completions:[p.Array,[]]});return AutocompleteInput;})(text_input_1.TextInput);},{"./text_input":"models/widgets/text_input","core/properties":undefined,"jquery-ui/autocomplete":"jquery-ui/autocomplete"}],"models/widgets/button":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var bokeh_events_1=require("core/bokeh_events");var abstract_button_1=require("./abstract_button");exports.ButtonView=(function(superClass){extend(ButtonView,superClass);function ButtonView(){return ButtonView.__super__.constructor.apply(this,arguments);}
ButtonView.prototype.change_input=function(){this.model.trigger_event(new bokeh_events_1.ButtonClick({}));this.model.clicks=this.model.clicks+1;return ButtonView.__super__.change_input.call(this);};return ButtonView;})(abstract_button_1.AbstractButtonView);exports.Button=(function(superClass){extend(Button,superClass);function Button(){return Button.__super__.constructor.apply(this,arguments);}
Button.prototype.type="Button";Button.prototype.default_view=exports.ButtonView;Button.define({clicks:[p.Number,0]});return Button;})(abstract_button_1.AbstractButton);bokeh_events_1.register_with_event(bokeh_events_1.ButtonClick,exports.Button);},{"./abstract_button":"models/widgets/abstract_button","core/bokeh_events":undefined,"core/properties":undefined}],"models/widgets/button_group_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(){return DOM.createElement("div",{class:"bk-bs-btn-group","data-bk-bs-toggle":"buttons"});};},{"core/dom":undefined}],"models/widgets/button_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){return(DOM.createElement("button",{type:"button",class:"bk-bs-btn bk-bs-btn-"+props.button_type},props.label));};},{"core/dom":undefined}],"models/widgets/cell_editors":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");require("jquery-ui/autocomplete");require("jquery-ui/spinner");var p=require("core/properties");var bokeh_view_1=require("core/bokeh_view");var model_1=require("../../model");var jqueryable_1=require("./jqueryable");exports.CellEditorView=(function(superClass){extend(CellEditorView,superClass);function CellEditorView(){return CellEditorView.__super__.constructor.apply(this,arguments);}
extend(CellEditorView.prototype,jqueryable_1.JQueryable);CellEditorView.prototype.className="bk-cell-editor";CellEditorView.prototype.input=null;CellEditorView.prototype.emptyValue=null;CellEditorView.prototype.defaultValue=null;CellEditorView.prototype.initialize=function(options){this.args=options;this.model=this.args.column.editor;CellEditorView.__super__.initialize.call(this,options);return this.render();};CellEditorView.prototype.render=function(){CellEditorView.__super__.render.call(this);this.$el.appendTo(this.args.container);this.$input=$(this.input);this.$el.append(this.$input);this.renderEditor();this.disableNavigation();this._prefix_ui();return this;};CellEditorView.prototype.renderEditor=function(){};CellEditorView.prototype.disableNavigation=function(){return this.$input.keydown((function(_this){return function(event){var stop;stop=function(){return event.stopImmediatePropagation();};switch(event.keyCode){case $.ui.keyCode.LEFT:return stop();case $.ui.keyCode.RIGHT:return stop();case $.ui.keyCode.UP:return stop();case $.ui.keyCode.DOWN:return stop();case $.ui.keyCode.PAGE_UP:return stop();case $.ui.keyCode.PAGE_DOWN:return stop();}};})(this));};CellEditorView.prototype.destroy=function(){return this.remove();};CellEditorView.prototype.focus=function(){return this.$input.focus();};CellEditorView.prototype.show=function(){};CellEditorView.prototype.hide=function(){};CellEditorView.prototype.position=function(){};CellEditorView.prototype.getValue=function(){return this.$input.val();};CellEditorView.prototype.setValue=function(val){return this.$input.val(val);};CellEditorView.prototype.serializeValue=function(){return this.getValue();};CellEditorView.prototype.isValueChanged=function(){return!(this.getValue()===""&&(this.defaultValue==null))&&(this.getValue()!==this.defaultValue);};CellEditorView.prototype.applyValue=function(item,state){return this.args.grid.getData().setField(item.index,this.args.column.field,state);};CellEditorView.prototype.loadValue=function(item){var value;value=item[this.args.column.field];this.defaultValue=value!=null?value:this.emptyValue;return this.setValue(this.defaultValue);};CellEditorView.prototype.validateValue=function(value){var result;if(this.args.column.validator){result=this.args.column.validator(value);if(!result.valid){return result;}}
return{valid:true,msg:null};};CellEditorView.prototype.validate=function(){return this.validateValue(this.getValue());};return CellEditorView;})(bokeh_view_1.BokehView);exports.CellEditor=(function(superClass){extend(CellEditor,superClass);function CellEditor(){return CellEditor.__super__.constructor.apply(this,arguments);}
CellEditor.prototype.type="CellEditor";CellEditor.prototype.default_view=exports.CellEditorView;return CellEditor;})(model_1.Model);exports.StringEditorView=(function(superClass){extend(StringEditorView,superClass);function StringEditorView(){return StringEditorView.__super__.constructor.apply(this,arguments);}
StringEditorView.prototype.emptyValue="";StringEditorView.prototype.input='<input type="text" />';StringEditorView.prototype.renderEditor=function(){var completions;completions=this.model.completions;if(completions.length!==0){this.$input.autocomplete({source:completions});this.$input.autocomplete("widget").addClass("bk-cell-editor-completion");}
return this.$input.focus().select();};StringEditorView.prototype.loadValue=function(item){StringEditorView.__super__.loadValue.call(this,item);this.$input[0].defaultValue=this.defaultValue;return this.$input.select();};return StringEditorView;})(exports.CellEditorView);exports.StringEditor=(function(superClass){extend(StringEditor,superClass);function StringEditor(){return StringEditor.__super__.constructor.apply(this,arguments);}
StringEditor.prototype.type='StringEditor';StringEditor.prototype.default_view=exports.StringEditorView;StringEditor.define({completions:[p.Array,[]]});return StringEditor;})(exports.CellEditor);exports.TextEditorView=(function(superClass){extend(TextEditorView,superClass);function TextEditorView(){return TextEditorView.__super__.constructor.apply(this,arguments);}
return TextEditorView;})(exports.CellEditorView);exports.TextEditor=(function(superClass){extend(TextEditor,superClass);function TextEditor(){return TextEditor.__super__.constructor.apply(this,arguments);}
TextEditor.prototype.type='TextEditor';TextEditor.prototype.default_view=exports.TextEditorView;return TextEditor;})(exports.CellEditor);exports.SelectEditorView=(function(superClass){extend(SelectEditorView,superClass);function SelectEditorView(){return SelectEditorView.__super__.constructor.apply(this,arguments);}
SelectEditorView.prototype.input='<select />';SelectEditorView.prototype.renderEditor=function(){var i,len,option,ref;ref=this.model.options;for(i=0,len=ref.length;i<len;i++){option=ref[i];this.$input.append($('<option>').attr({value:option}).text(option));}
return this.focus();};SelectEditorView.prototype.loadValue=function(item){SelectEditorView.__super__.loadValue.call(this,item);return this.$input.select();};return SelectEditorView;})(exports.CellEditorView);exports.SelectEditor=(function(superClass){extend(SelectEditor,superClass);function SelectEditor(){return SelectEditor.__super__.constructor.apply(this,arguments);}
SelectEditor.prototype.type='SelectEditor';SelectEditor.prototype.default_view=exports.SelectEditorView;SelectEditor.define({options:[p.Array,[]]});return SelectEditor;})(exports.CellEditor);exports.PercentEditorView=(function(superClass){extend(PercentEditorView,superClass);function PercentEditorView(){return PercentEditorView.__super__.constructor.apply(this,arguments);}
return PercentEditorView;})(exports.CellEditorView);exports.PercentEditor=(function(superClass){extend(PercentEditor,superClass);function PercentEditor(){return PercentEditor.__super__.constructor.apply(this,arguments);}
PercentEditor.prototype.type='PercentEditor';PercentEditor.prototype.default_view=exports.PercentEditorView;return PercentEditor;})(exports.CellEditor);exports.CheckboxEditorView=(function(superClass){extend(CheckboxEditorView,superClass);function CheckboxEditorView(){return CheckboxEditorView.__super__.constructor.apply(this,arguments);}
CheckboxEditorView.prototype.input='<input type="checkbox" value="true" />';CheckboxEditorView.prototype.renderEditor=function(){return this.focus();};CheckboxEditorView.prototype.loadValue=function(item){this.defaultValue=!!item[this.args.column.field];return this.$input.prop('checked',this.defaultValue);};CheckboxEditorView.prototype.serializeValue=function(){return this.$input.prop('checked');};return CheckboxEditorView;})(exports.CellEditorView);exports.CheckboxEditor=(function(superClass){extend(CheckboxEditor,superClass);function CheckboxEditor(){return CheckboxEditor.__super__.constructor.apply(this,arguments);}
CheckboxEditor.prototype.type='CheckboxEditor';CheckboxEditor.prototype.default_view=exports.CheckboxEditorView;return CheckboxEditor;})(exports.CellEditor);exports.IntEditorView=(function(superClass){extend(IntEditorView,superClass);function IntEditorView(){return IntEditorView.__super__.constructor.apply(this,arguments);}
IntEditorView.prototype.input='<input type="text" />';IntEditorView.prototype.renderEditor=function(){this.$input.spinner({step:this.model.step});return this.$input.focus().select();};IntEditorView.prototype.remove=function(){this.$input.spinner("destroy");return IntEditorView.__super__.remove.call(this);};IntEditorView.prototype.serializeValue=function(){return parseInt(this.getValue(),10)||0;};IntEditorView.prototype.loadValue=function(item){IntEditorView.__super__.loadValue.call(this,item);this.$input[0].defaultValue=this.defaultValue;return this.$input.select();};IntEditorView.prototype.validateValue=function(value){if(isNaN(value)){return{valid:false,msg:"Please enter a valid integer"};}
else{return IntEditorView.__super__.validateValue.call(this,value);}};return IntEditorView;})(exports.CellEditorView);exports.IntEditor=(function(superClass){extend(IntEditor,superClass);function IntEditor(){return IntEditor.__super__.constructor.apply(this,arguments);}
IntEditor.prototype.type='IntEditor';IntEditor.prototype.default_view=exports.IntEditorView;IntEditor.define({step:[p.Number,1]});return IntEditor;})(exports.CellEditor);exports.NumberEditorView=(function(superClass){extend(NumberEditorView,superClass);function NumberEditorView(){return NumberEditorView.__super__.constructor.apply(this,arguments);}
NumberEditorView.prototype.input='<input type="text" />';NumberEditorView.prototype.renderEditor=function(){this.$input.spinner({step:this.model.step});return this.$input.focus().select();};NumberEditorView.prototype.remove=function(){this.$input.spinner("destroy");return NumberEditorView.__super__.remove.call(this);};NumberEditorView.prototype.serializeValue=function(){return parseFloat(this.getValue())||0.0;};NumberEditorView.prototype.loadValue=function(item){NumberEditorView.__super__.loadValue.call(this,item);this.$input[0].defaultValue=this.defaultValue;return this.$input.select();};NumberEditorView.prototype.validateValue=function(value){if(isNaN(value)){return{valid:false,msg:"Please enter a valid number"};}
else{return NumberEditorView.__super__.validateValue.call(this,value);}};return NumberEditorView;})(exports.CellEditorView);exports.NumberEditor=(function(superClass){extend(NumberEditor,superClass);function NumberEditor(){return NumberEditor.__super__.constructor.apply(this,arguments);}
NumberEditor.prototype.type='NumberEditor';NumberEditor.prototype.default_view=exports.NumberEditorView;NumberEditor.define({step:[p.Number,0.01]});return NumberEditor;})(exports.CellEditor);exports.TimeEditorView=(function(superClass){extend(TimeEditorView,superClass);function TimeEditorView(){return TimeEditorView.__super__.constructor.apply(this,arguments);}
return TimeEditorView;})(exports.CellEditorView);exports.TimeEditor=(function(superClass){extend(TimeEditor,superClass);function TimeEditor(){return TimeEditor.__super__.constructor.apply(this,arguments);}
TimeEditor.prototype.type='TimeEditor';TimeEditor.prototype.default_view=exports.TimeEditorView;return TimeEditor;})(exports.CellEditor);exports.DateEditorView=(function(superClass){extend(DateEditorView,superClass);function DateEditorView(){return DateEditorView.__super__.constructor.apply(this,arguments);}
DateEditorView.prototype.emptyValue=new Date();DateEditorView.prototype.input='<input type="text" />';DateEditorView.prototype.renderEditor=function(){this.calendarOpen=false;this.$input.datepicker({showOn:"button",buttonImageOnly:true,beforeShow:(function(_this){return function(){return _this.calendarOpen=true;};})(this),onClose:(function(_this){return function(){return _this.calendarOpen=false;};})(this)});this.$input.siblings(".bk-ui-datepicker-trigger").css({"vertical-align":"middle"});this.$input.width(this.$input.width()-(14+2*4+4));return this.$input.focus().select();};DateEditorView.prototype.destroy=function(){$.datepicker.dpDiv.stop(true,true);this.$input.datepicker("hide");this.$input.datepicker("destroy");return DateEditorView.__super__.destroy.call(this);};DateEditorView.prototype.show=function(){if(this.calendarOpen){$.datepicker.dpDiv.stop(true,true).show();}
return DateEditorView.__super__.show.call(this);};DateEditorView.prototype.hide=function(){if(this.calendarOpen){$.datepicker.dpDiv.stop(true,true).hide();}
return DateEditorView.__super__.hide.call(this);};DateEditorView.prototype.position=function(position){if(this.calendarOpen){$.datepicker.dpDiv.css({top:position.top+30,left:position.left});}
return DateEditorView.__super__.position.call(this);};DateEditorView.prototype.getValue=function(){return this.$input.datepicker("getDate").getTime();};DateEditorView.prototype.setValue=function(val){return this.$input.datepicker("setDate",new Date(val));};return DateEditorView;})(exports.CellEditorView);exports.DateEditor=(function(superClass){extend(DateEditor,superClass);function DateEditor(){return DateEditor.__super__.constructor.apply(this,arguments);}
DateEditor.prototype.type='DateEditor';DateEditor.prototype.default_view=exports.DateEditorView;return DateEditor;})(exports.CellEditor);},{"../../model":"model","./jqueryable":"models/widgets/jqueryable","core/bokeh_view":undefined,"core/properties":undefined,"jquery":"jquery","jquery-ui/autocomplete":"jquery-ui/autocomplete","jquery-ui/spinner":"jquery-ui/spinner"}],"models/widgets/cell_formatters":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend1=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");var Numbro=require("numbro");var p=require("core/properties");var object_1=require("core/util/object");var types_1=require("core/util/types");var model_1=require("../../model");exports.CellFormatter=(function(superClass){extend1(CellFormatter,superClass);function CellFormatter(){return CellFormatter.__super__.constructor.apply(this,arguments);}
CellFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){if(value===null){return"";}
else{return(value+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}};return CellFormatter;})(model_1.Model);exports.StringFormatter=(function(superClass){extend1(StringFormatter,superClass);function StringFormatter(){return StringFormatter.__super__.constructor.apply(this,arguments);}
StringFormatter.prototype.type='StringFormatter';StringFormatter.define({font_style:[p.FontStyle,"normal"],text_align:[p.TextAlign,"left"],text_color:[p.Color]});StringFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){var font_style,text,text_align,text_color;text=StringFormatter.__super__.doFormat.call(this,row,cell,value,columnDef,dataContext);font_style=this.font_style;text_align=this.text_align;text_color=this.text_color;if((font_style!=null)||(text_align!=null)||(text_color!=null)){text=$("<span>"+text+"</span>");switch(font_style){case"bold":text=text.css("font-weight","bold");break;case"italic":text=text.css("font-style","italic");}
if(text_align!=null){text=text.css("text-align",text_align);}
if(text_color!=null){text=text.css("color",text_color);}
text=text.prop('outerHTML');}
return text;};return StringFormatter;})(exports.CellFormatter);exports.NumberFormatter=(function(superClass){extend1(NumberFormatter,superClass);function NumberFormatter(){return NumberFormatter.__super__.constructor.apply(this,arguments);}
NumberFormatter.prototype.type='NumberFormatter';NumberFormatter.define({format:[p.String,'0,0'],language:[p.String,'en'],rounding:[p.String,'round']});NumberFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){var format,language,rounding;format=this.format;language=this.language;rounding=(function(){switch(this.rounding){case"round":case"nearest":return Math.round;case"floor":case"rounddown":return Math.floor;case"ceil":case"roundup":return Math.ceil;}}).call(this);value=Numbro.format(value,format,language,rounding);return NumberFormatter.__super__.doFormat.call(this,row,cell,value,columnDef,dataContext);};return NumberFormatter;})(exports.StringFormatter);exports.BooleanFormatter=(function(superClass){extend1(BooleanFormatter,superClass);function BooleanFormatter(){return BooleanFormatter.__super__.constructor.apply(this,arguments);}
BooleanFormatter.prototype.type='BooleanFormatter';BooleanFormatter.define({icon:[p.String,'check']});BooleanFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){if(!!value){return $('<i>').addClass(this.icon).html();}
else{return"";}};return BooleanFormatter;})(exports.CellFormatter);exports.DateFormatter=(function(superClass){extend1(DateFormatter,superClass);function DateFormatter(){return DateFormatter.__super__.constructor.apply(this,arguments);}
DateFormatter.prototype.type='DateFormatter';DateFormatter.define({format:[p.String,'yy M d']});DateFormatter.prototype.getFormat=function(){var format,name;format=this.format;name=(function(){switch(format){case"ATOM":case"W3C":case"RFC-3339":case"ISO-8601":return"ISO-8601";case"COOKIE":return"COOKIE";case"RFC-850":return"RFC-850";case"RFC-1036":return"RFC-1036";case"RFC-1123":return"RFC-1123";case"RFC-2822":return"RFC-2822";case"RSS":case"RFC-822":return"RFC-822";case"TICKS":return"TICKS";case"TIMESTAMP":return"TIMESTAMP";default:return null;}})();if(name!=null){return $.datepicker[name];}
else{return format;}};DateFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){var date;value=types_1.isString(value)?parseInt(value,10):value;date=$.datepicker.formatDate(this.getFormat(),new Date(value));return DateFormatter.__super__.doFormat.call(this,row,cell,date,columnDef,dataContext);};return DateFormatter;})(exports.CellFormatter);exports.HTMLTemplateFormatter=(function(superClass){extend1(HTMLTemplateFormatter,superClass);function HTMLTemplateFormatter(){return HTMLTemplateFormatter.__super__.constructor.apply(this,arguments);}
HTMLTemplateFormatter.prototype.type='HTMLTemplateFormatter';HTMLTemplateFormatter.define({template:[p.String,'<%= value %>']});HTMLTemplateFormatter.prototype.doFormat=function(row,cell,value,columnDef,dataContext){var compiled_template,template;template=this.template;if(value===null){return"";}
else{dataContext=object_1.extend({},dataContext,{value:value});compiled_template=_.template(template);return compiled_template(dataContext);}};return HTMLTemplateFormatter;})(exports.CellFormatter);},{"../../model":"model","core/properties":undefined,"core/util/object":undefined,"core/util/types":undefined,"jquery":"jquery","numbro":"numbro"}],"models/widgets/checkbox_button_group":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var $=require("jquery");require("bootstrap/button");var widget_1=require("./widget");var p=require("core/properties");var button_group_template_1=require("./button_group_template");exports.CheckboxButtonGroupView=(function(superClass){extend(CheckboxButtonGroupView,superClass);function CheckboxButtonGroupView(){return CheckboxButtonGroupView.__super__.constructor.apply(this,arguments);}
CheckboxButtonGroupView.prototype.events={"change input":"change_input"};CheckboxButtonGroupView.prototype.template=button_group_template_1.default;CheckboxButtonGroupView.prototype.initialize=function(options){CheckboxButtonGroupView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};CheckboxButtonGroupView.prototype.render=function(){var $input,$label,active,html,i,j,label,len,ref;CheckboxButtonGroupView.__super__.render.call(this);this.$el.empty();html=this.template();this.el.appendChild(html);active=this.model.active;ref=this.model.labels;for(i=j=0,len=ref.length;j<len;i=++j){label=ref[i];$input=$('<input type="checkbox">').attr({value:""+i});if(indexOf.call(active,i)>=0){$input.prop("checked",true);}
$label=$('<label class="bk-bs-btn"></label>');$label.text(label).prepend($input);$label.addClass("bk-bs-btn-"+this.model.button_type);if(indexOf.call(active,i)>=0){$label.addClass("bk-bs-active");}
this.$el.find('.bk-bs-btn-group').append($label);}
return this;};CheckboxButtonGroupView.prototype.change_input=function(){var active,checkbox,i,ref;active=(function(){var j,len,ref,results;ref=this.$el.find("input");results=[];for(i=j=0,len=ref.length;j<len;i=++j){checkbox=ref[i];if(checkbox.checked){results.push(i);}}
return results;}).call(this);this.model.active=active;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return CheckboxButtonGroupView;})(widget_1.WidgetView);exports.CheckboxButtonGroup=(function(superClass){extend(CheckboxButtonGroup,superClass);function CheckboxButtonGroup(){return CheckboxButtonGroup.__super__.constructor.apply(this,arguments);}
CheckboxButtonGroup.prototype.type="CheckboxButtonGroup";CheckboxButtonGroup.prototype.default_view=exports.CheckboxButtonGroupView;CheckboxButtonGroup.define({active:[p.Array,[]],labels:[p.Array,[]],button_type:[p.String,"default"],callback:[p.Instance]});return CheckboxButtonGroup;})(widget_1.Widget);},{"./button_group_template":"models/widgets/button_group_template","./widget":"models/widgets/widget","bootstrap/button":"bootstrap/button","core/properties":undefined,"jquery":"jquery"}],"models/widgets/checkbox_group":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;};var $=require("jquery");var widget_1=require("./widget");var p=require("core/properties");exports.CheckboxGroupView=(function(superClass){extend(CheckboxGroupView,superClass);function CheckboxGroupView(){return CheckboxGroupView.__super__.constructor.apply(this,arguments);}
CheckboxGroupView.prototype.events={"change input":"change_input"};CheckboxGroupView.prototype.initialize=function(options){CheckboxGroupView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};CheckboxGroupView.prototype.render=function(){var $div,$input,$label,active,i,j,label,len,ref;CheckboxGroupView.__super__.render.call(this);this.$el.empty();active=this.model.active;ref=this.model.labels;for(i=j=0,len=ref.length;j<len;i=++j){label=ref[i];$input=$('<input type="checkbox">').attr({value:""+i});if(this.model.disabled){$input.prop("disabled",true);}
if(indexOf.call(active,i)>=0){$input.prop("checked",true);}
$label=$('<label></label>').text(label).prepend($input);if(this.model.inline){$label.addClass("bk-bs-checkbox-inline");this.$el.append($label);}
else{$div=$('<div class="bk-bs-checkbox"></div>').append($label);this.$el.append($div);}}
return this;};CheckboxGroupView.prototype.change_input=function(){var active,checkbox,i,ref;active=(function(){var j,len,ref,results;ref=this.$el.find("input");results=[];for(i=j=0,len=ref.length;j<len;i=++j){checkbox=ref[i];if(checkbox.checked){results.push(i);}}
return results;}).call(this);this.model.active=active;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return CheckboxGroupView;})(widget_1.WidgetView);exports.CheckboxGroup=(function(superClass){extend(CheckboxGroup,superClass);function CheckboxGroup(){return CheckboxGroup.__super__.constructor.apply(this,arguments);}
CheckboxGroup.prototype.type="CheckboxGroup";CheckboxGroup.prototype.default_view=exports.CheckboxGroupView;CheckboxGroup.define({active:[p.Array,[]],labels:[p.Array,[]],inline:[p.Bool,false],callback:[p.Instance]});return CheckboxGroup;})(widget_1.Widget);},{"./widget":"models/widgets/widget","core/properties":undefined,"jquery":"jquery"}],"models/widgets/data_table":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var wait_for_element,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)
return i;}return-1;},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");require("jquery-ui/sortable");var SlickGrid=require("slick_grid/slick.grid");var RowSelectionModel=require("slick_grid/plugins/slick.rowselectionmodel");var CheckboxSelectColumn=require("slick_grid/plugins/slick.checkboxselectcolumn");var hittest=require("core/hittest");var p=require("core/properties");var string_1=require("core/util/string");var array_1=require("core/util/array");var table_widget_1=require("./table_widget");var widget_1=require("./widget");wait_for_element=function(el,fn){var handler,interval;handler=(function(_this){return function(){if($.contains(document.documentElement,el)){clearInterval(interval);return fn();}};})(this);return interval=setInterval(handler,50);};exports.DataProvider=(function(){function DataProvider(source){var j,ref,results;this.source=source;this.data=this.source.data;this.fields=Object.keys(this.data);if(indexOf.call(this.fields,"index")<0){this.data["index"]=(function(){results=[];for(var j=0,ref=this.getLength();0<=ref?j<ref:j>ref;0<=ref?j++:j--){results.push(j);}
return results;}).apply(this);this.fields.push("index");}}
DataProvider.prototype.getLength=function(){return this.source.get_length();};DataProvider.prototype.getItem=function(offset){var field,item,j,len,ref;item={};ref=this.fields;for(j=0,len=ref.length;j<len;j++){field=ref[j];item[field]=this.data[field][offset];}
return item;};DataProvider.prototype._setItem=function(offset,item){var field,value;for(field in item){value=item[field];this.data[field][offset]=value;}};DataProvider.prototype.setItem=function(offset,item){this._setItem(offset,item);return this.updateSource();};DataProvider.prototype.getField=function(index,field){var offset;offset=this.data["index"].indexOf(index);return this.data[field][offset];};DataProvider.prototype._setField=function(index,field,value){var offset;offset=this.data["index"].indexOf(index);this.data[field][offset]=value;};DataProvider.prototype.setField=function(index,field,value){this._setField(index,field,value);return this.updateSource();};DataProvider.prototype.updateSource=function(){return this.source.trigger("change:data",this,this.source.attributes['data']);};DataProvider.prototype.getItemMetadata=function(index){return null;};DataProvider.prototype.getRecords=function(){var i;return(function(){var j,ref,results;results=[];for(i=j=0,ref=this.getLength();0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(this.getItem(i));}
return results;}).call(this);};DataProvider.prototype.sort=function(columns){var cols,column,i,j,len,record,records;cols=(function(){var j,len,results;results=[];for(j=0,len=columns.length;j<len;j++){column=columns[j];results.push([column.sortCol.field,column.sortAsc?1:-1]);}
return results;})();if(cols.length===0){cols=[["index",1]];}
records=this.getRecords();records.sort(function(record1,record2){var field,j,len,ref,result,sign,value1,value2;for(j=0,len=cols.length;j<len;j++){ref=cols[j],field=ref[0],sign=ref[1];value1=record1[field];value2=record2[field];result=value1===value2?0:value1>value2?sign:-sign;if(result!==0){return result;}}
return 0;});for(i=j=0,len=records.length;j<len;i=++j){record=records[i];this._setItem(i,record);}
return this.updateSource();};return DataProvider;})();exports.DataTableView=(function(superClass){extend(DataTableView,superClass);function DataTableView(){return DataTableView.__super__.constructor.apply(this,arguments);}
DataTableView.prototype.className="bk-data-table";DataTableView.prototype.initialize=function(options){DataTableView.__super__.initialize.call(this,options);wait_for_element(this.el,(function(_this){return function(){return _this.render();};})(this));this.listenTo(this.model,'change',(function(_this){return function(){return _this.render();};})(this));this.listenTo(this.model.source,'change:data',(function(_this){return function(){return _this.updateGrid();};})(this));this.listenTo(this.model.source,'stream',(function(_this){return function(){return _this.updateGrid();};})(this));this.listenTo(this.model.source,'patch',(function(_this){return function(){return _this.updateGrid();};})(this));return this.listenTo(this.model.source,'change:selected',(function(_this){return function(){return _this.updateSelection();};})(this));};DataTableView.prototype.updateGrid=function(){this.data.constructor(this.model.source);this.grid.invalidate();this.grid.render();this.model.source.data=this.model.source.data;return this.model.source.trigger('change');};DataTableView.prototype.updateSelection=function(){var cur_grid_range,indices,min_index,selected;selected=this.model.source.selected;indices=selected['1d'].indices;this.grid.setSelectedRows(indices);cur_grid_range=this.grid.getViewport();if(this.model.scroll_to_selection&&!array_1.any(indices,function(i){return(cur_grid_range.top<=i&&i<=cur_grid_range.bottom);})){min_index=Math.max(0,Math.min.apply(null,indices)-1);return this.grid.scrollRowToTop(min_index);}};DataTableView.prototype.newIndexColumn=function(){return{id:string_1.uniqueId(),name:"#",field:"index",width:40,behavior:"select",cannotTriggerInsert:true,resizable:false,selectable:false,sortable:true,cssClass:"bk-cell-index"};};DataTableView.prototype.render=function(){var checkboxSelector,column,columns,height,options,width;columns=(function(){var j,len,ref,results;ref=this.model.columns;results=[];for(j=0,len=ref.length;j<len;j++){column=ref[j];results.push(column.toColumn());}
return results;}).call(this);if(this.model.selectable==="checkbox"){checkboxSelector=new CheckboxSelectColumn({cssClass:"bk-cell-select"});columns.unshift(checkboxSelector.getColumnDefinition());}
if(this.model.row_headers&&(this.model.source.get_column("index")!=null)){columns.unshift(this.newIndexColumn());}
width=this.model.width;height=this.model.height;options={enableCellNavigation:this.model.selectable!==false,enableColumnReorder:true,forceFitColumns:this.model.fit_columns,autoHeight:height==="auto",multiColumnSort:this.model.sortable,editable:this.model.editable,autoEdit:false};if(width!=null){this.el.style.width=this.model.width+"px";}
else{this.el.style.width=this.model.default_width+"px";}
if((height!=null)&&height!=="auto"){this.el.style.height=this.model.height+"px";}
this.data=new exports.DataProvider(this.model.source);this.grid=new SlickGrid(this.el,this.data,columns,options);this.grid.onSort.subscribe((function(_this){return function(event,args){columns=args.sortCols;_this.data.sort(columns);_this.grid.invalidate();return _this.grid.render();};})(this));if(this.model.selectable!==false){this.grid.setSelectionModel(new RowSelectionModel({selectActiveRow:checkboxSelector==null}));if(checkboxSelector!=null){this.grid.registerPlugin(checkboxSelector);}
this.grid.onSelectedRowsChanged.subscribe((function(_this){return function(event,args){var selected;selected=hittest.create_hit_test_result();selected['1d'].indices=args.rows;return _this.model.source.selected=selected;};})(this));}
this._prefix_ui();return this;};return DataTableView;})(widget_1.WidgetView);exports.DataTable=(function(superClass){extend(DataTable,superClass);function DataTable(){return DataTable.__super__.constructor.apply(this,arguments);}
DataTable.prototype.type='DataTable';DataTable.prototype.default_view=exports.DataTableView;DataTable.define({columns:[p.Array,[]],fit_columns:[p.Bool,true],sortable:[p.Bool,true],editable:[p.Bool,false],selectable:[p.Bool,true],row_headers:[p.Bool,true],scroll_to_selection:[p.Bool,true]});DataTable.override({height:400});DataTable.internal({default_width:[p.Number,600]});return DataTable;})(table_widget_1.TableWidget);},{"./table_widget":"models/widgets/table_widget","./widget":"models/widgets/widget","core/hittest":undefined,"core/properties":undefined,"core/util/array":undefined,"core/util/string":undefined,"jquery":"jquery","jquery-ui/sortable":"jquery-ui/sortable","slick_grid/plugins/slick.checkboxselectcolumn":"slick_grid/plugins/slick.checkboxselectcolumn","slick_grid/plugins/slick.rowselectionmodel":"slick_grid/plugins/slick.rowselectionmodel","slick_grid/slick.grid":"slick_grid/slick.grid"}],"models/widgets/date_picker":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");require("jquery-ui/datepicker");var p=require("core/properties");var input_widget_1=require("./input_widget");exports.DatePickerView=(function(superClass){extend(DatePickerView,superClass);function DatePickerView(){this.onSelect=bind(this.onSelect,this);return DatePickerView.__super__.constructor.apply(this,arguments);}
DatePickerView.prototype.render=function(){DatePickerView.__super__.render.call(this);this.label=$('<label>').text(this.model.title);this.input=$('<input type="text">');this.datepicker=this.input.datepicker({defaultDate:new Date(this.model.value),minDate:this.model.min_date!=null?new Date(this.model.min_date):null,maxDate:this.model.max_date!=null?new Date(this.model.max_date):null,onSelect:this.onSelect});this.$el.append([this.label,this.input]);this._prefix_ui();return this;};DatePickerView.prototype.onSelect=function(dateText,ui){var d,ref;d=new Date(dateText);this.model.value=d.toString();return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return DatePickerView;})(input_widget_1.InputWidgetView);exports.DatePicker=(function(superClass){extend(DatePicker,superClass);function DatePicker(){return DatePicker.__super__.constructor.apply(this,arguments);}
DatePicker.prototype.type="DatePicker";DatePicker.prototype.default_view=exports.DatePickerView;DatePicker.define({value:[p.Any,Date.now()],min_date:[p.Any],max_date:[p.Any]});return DatePicker;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","core/properties":undefined,"jquery":"jquery","jquery-ui/datepicker":"jquery-ui/datepicker"}],"models/widgets/date_range_slider":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;require("jqrangeslider/jQDateRangeSlider");var p=require("core/properties");var types_1=require("core/util/types");var input_widget_1=require("./input_widget");exports.DateRangeSliderView=(function(superClass){extend(DateRangeSliderView,superClass);function DateRangeSliderView(){return DateRangeSliderView.__super__.constructor.apply(this,arguments);}
DateRangeSliderView.prototype.initialize=function(options){DateRangeSliderView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',(function(_this){return function(){return _this.render;};})(this));};DateRangeSliderView.prototype.render=function(){var bounds_max,bounds_min,range_max,range_min,ref,ref1,ref2,value_max,value_min;DateRangeSliderView.__super__.render.call(this);this.$el.empty();ref=this.model.value,value_min=ref[0],value_max=ref[1];ref1=this.model.range,range_min=ref1[0],range_max=ref1[1];ref2=this.model.bounds,bounds_min=ref2[0],bounds_max=ref2[1];this.$el.dateRangeSlider({defaultValues:{min:new Date(value_min),max:new Date(value_max)},bounds:{min:new Date(bounds_min),max:new Date(bounds_max)},range:{min:types_1.isObject(range_min)?range_min:false,max:types_1.isObject(range_max)?range_max:false},step:this.model.step||{},enabled:this.model.enabled,arrows:this.model.arrows,valueLabels:this.model.value_labels,wheelMode:this.model.wheel_mode});this.$el.on("userValuesChanged",(function(_this){return function(event,data){var ref3;_this.model.value=[data.values.min,data.values.max];return(ref3=_this.model.callback)!=null?ref3.execute(_this.model):void 0;};})(this));return this;};return DateRangeSliderView;})(input_widget_1.InputWidgetView);exports.DateRangeSlider=(function(superClass){extend(DateRangeSlider,superClass);function DateRangeSlider(){return DateRangeSlider.__super__.constructor.apply(this,arguments);}
DateRangeSlider.prototype.type="DateRangeSlider";DateRangeSlider.prototype.default_view=exports.DateRangeSliderView;DateRangeSlider.define({value:[p.Any],range:[p.Any],bounds:[p.Any],step:[p.Any,{}],enabled:[p.Bool,true],arrows:[p.Bool,true],value_labels:[p.String,"show"],wheel_mode:[p.Any]
});return DateRangeSlider;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","core/properties":undefined,"core/util/types":undefined,"jqrangeslider/jQDateRangeSlider":"jqrangeslider/jQDateRangeSlider"}],"models/widgets/div":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var markup_1=require("./markup");var dom_1=require("core/dom");var p=require("core/properties");exports.DivView=(function(superClass){extend(DivView,superClass);function DivView(){return DivView.__super__.constructor.apply(this,arguments);}
DivView.prototype.render=function(){var content;DivView.__super__.render.call(this);content=dom_1.div();if(this.model.render_as_text){content.textContent=this.model.text;}
else{content.innerHTML=this.model.text;}
this.$el.find('.bk-markup').append(content);return this;};return DivView;})(markup_1.MarkupView);exports.Div=(function(superClass){extend(Div,superClass);function Div(){return Div.__super__.constructor.apply(this,arguments);}
Div.prototype.type="Div";Div.prototype.default_view=exports.DivView;Div.define({render_as_text:[p.Bool,false]});return Div;})(markup_1.Markup);},{"./markup":"models/widgets/markup","core/dom":undefined,"core/properties":undefined}],"models/widgets/dropdown":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");require("bootstrap/dropdown");var p=require("core/properties");var abstract_button_1=require("./abstract_button");var dropdown_template_1=require("./dropdown_template");exports.DropdownView=(function(superClass){extend(DropdownView,superClass);function DropdownView(){return DropdownView.__super__.constructor.apply(this,arguments);}
DropdownView.prototype.template=dropdown_template_1.default;DropdownView.prototype.render=function(){var $a,$item,i,item,items,label,len,ref,that,value;DropdownView.__super__.render.call(this);items=[];ref=this.model.menu;for(i=0,len=ref.length;i<len;i++){item=ref[i];$item=item!=null?((label=item[0],value=item[1],item),$a=$("<a data-value='"+value+"'>"+label+"</a>"),that=this,$a.click(function(e){return that.set_value($(this).data('value'));}),$('<li></li>').append($a)):$('<li class="bk-bs-divider"></li>');items.push($item);}
this.$el.find('.bk-bs-dropdown-menu').append(items);this.$el.find('button').val(this.model.default_value);this.$el.find('button').dropdown();return this;};DropdownView.prototype.set_value=function(value){this.model.value=value;return this.$el.find('button').val(value);};return DropdownView;})(abstract_button_1.AbstractButtonView);exports.Dropdown=(function(superClass){extend(Dropdown,superClass);function Dropdown(){return Dropdown.__super__.constructor.apply(this,arguments);}
Dropdown.prototype.type="Dropdown";Dropdown.prototype.default_view=exports.DropdownView;Dropdown.define({value:[p.String],default_value:[p.String],menu:[p.Array,[]]});Dropdown.override({label:"Dropdown"});return Dropdown;})(abstract_button_1.AbstractButton);},{"./abstract_button":"models/widgets/abstract_button","./dropdown_template":"models/widgets/dropdown_template","bootstrap/dropdown":"bootstrap/dropdown","core/properties":undefined,"jquery":"jquery"}],"models/widgets/dropdown_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){var classes=["bk-bs-btn","bk-bs-btn-"+props.button_type,"bk-bs-dropdown-toggle","bk-bs-dropdown-btn"];return(DOM.createElement("fragment",null,DOM.createElement("button",{type:"button",class:classes,"data-bk-bs-toggle":"dropdown"},props.label," ",DOM.createElement("span",{class:"bk-bs-caret"})),DOM.createElement("ul",{class:"bk-bs-dropdown-menu"})));};},{"core/dom":undefined}],"models/widgets/index":[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}
Object.defineProperty(exports,"__esModule",{value:true});__export(require("./cell_editors"));__export(require("./cell_formatters"));var abstract_button_1=require("./abstract_button");exports.AbstractButton=abstract_button_1.AbstractButton;var abstract_icon_1=require("./abstract_icon");exports.AbstractIcon=abstract_icon_1.AbstractIcon;var autocomplete_input_1=require("./autocomplete_input");exports.AutocompleteInput=autocomplete_input_1.AutocompleteInput;var button_1=require("./button");exports.Button=button_1.Button;var checkbox_button_group_1=require("./checkbox_button_group");exports.CheckboxButtonGroup=checkbox_button_group_1.CheckboxButtonGroup;var checkbox_group_1=require("./checkbox_group");exports.CheckboxGroup=checkbox_group_1.CheckboxGroup;var data_table_1=require("./data_table");exports.DataTable=data_table_1.DataTable;var date_picker_1=require("./date_picker");exports.DatePicker=date_picker_1.DatePicker;var date_range_slider_1=require("./date_range_slider");exports.DateRangeSlider=date_range_slider_1.DateRangeSlider;var div_1=require("./div");exports.Div=div_1.Div;var dropdown_1=require("./dropdown");exports.Dropdown=dropdown_1.Dropdown;var input_widget_1=require("./input_widget");exports.InputWidget=input_widget_1.InputWidget;var markup_1=require("./markup");exports.Markup=markup_1.Markup;var multiselect_1=require("./multiselect");exports.MultiSelect=multiselect_1.MultiSelect;var panel_1=require("./panel");exports.Panel=panel_1.Panel;var paragraph_1=require("./paragraph");exports.Paragraph=paragraph_1.Paragraph;var pretext_1=require("./pretext");exports.PreText=pretext_1.PreText;var radio_button_group_1=require("./radio_button_group");exports.RadioButtonGroup=radio_button_group_1.RadioButtonGroup;var radio_group_1=require("./radio_group");exports.RadioGroup=radio_group_1.RadioGroup;var range_slider_1=require("./range_slider");exports.RangeSlider=range_slider_1.RangeSlider;var selectbox_1=require("./selectbox");exports.Select=selectbox_1.Select;var slider_1=require("./slider");exports.Slider=slider_1.Slider;var table_column_1=require("./table_column");exports.TableColumn=table_column_1.TableColumn;var table_widget_1=require("./table_widget");exports.TableWidget=table_widget_1.TableWidget;var tabs_1=require("./tabs");exports.Tabs=tabs_1.Tabs;var text_input_1=require("./text_input");exports.TextInput=text_input_1.TextInput;var toggle_1=require("./toggle");exports.Toggle=toggle_1.Toggle;var widget_1=require("./widget");exports.Widget=widget_1.Widget;},{"./abstract_button":"models/widgets/abstract_button","./abstract_icon":"models/widgets/abstract_icon","./autocomplete_input":"models/widgets/autocomplete_input","./button":"models/widgets/button","./cell_editors":"models/widgets/cell_editors","./cell_formatters":"models/widgets/cell_formatters","./checkbox_button_group":"models/widgets/checkbox_button_group","./checkbox_group":"models/widgets/checkbox_group","./data_table":"models/widgets/data_table","./date_picker":"models/widgets/date_picker","./date_range_slider":"models/widgets/date_range_slider","./div":"models/widgets/div","./dropdown":"models/widgets/dropdown","./input_widget":"models/widgets/input_widget","./markup":"models/widgets/markup","./multiselect":"models/widgets/multiselect","./panel":"models/widgets/panel","./paragraph":"models/widgets/paragraph","./pretext":"models/widgets/pretext","./radio_button_group":"models/widgets/radio_button_group","./radio_group":"models/widgets/radio_group","./range_slider":"models/widgets/range_slider","./selectbox":"models/widgets/selectbox","./slider":"models/widgets/slider","./table_column":"models/widgets/table_column","./table_widget":"models/widgets/table_widget","./tabs":"models/widgets/tabs","./text_input":"models/widgets/text_input","./toggle":"models/widgets/toggle","./widget":"models/widgets/widget"}],"models/widgets/input_widget":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var widget_1=require("./widget");var p=require("core/properties");exports.InputWidgetView=(function(superClass){extend(InputWidgetView,superClass);function InputWidgetView(){return InputWidgetView.__super__.constructor.apply(this,arguments);}
InputWidgetView.prototype.render=function(){InputWidgetView.__super__.render.call(this);return this.$el.find('input').prop("disabled",this.model.disabled);};InputWidgetView.prototype.change_input=function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return InputWidgetView;})(widget_1.WidgetView);exports.InputWidget=(function(superClass){extend(InputWidget,superClass);function InputWidget(){return InputWidget.__super__.constructor.apply(this,arguments);}
InputWidget.prototype.type="InputWidget";InputWidget.prototype.default_view=exports.InputWidgetView;InputWidget.define({callback:[p.Instance],title:[p.String,'']});return InputWidget;})(widget_1.Widget);},{"./widget":"models/widgets/widget","core/properties":undefined}],"models/widgets/jqueryable":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var delegateEventSplitter;var $=require("jquery");var types_1=require("core/util/types");delegateEventSplitter=/^(\S+)\s*(.*)$/;exports.JQueryable={_prefix_ui:function(){var classList,cls,el,i,j,len,len1,ref,ref1;ref=this.el.querySelectorAll("*[class*='ui-']");for(i=0,len=ref.length;i<len;i++){el=ref[i];classList=[];ref1=el.classList;for(j=0,len1=ref1.length;j<len1;j++){cls=ref1[j];classList.push(cls.indexOf("ui-")===0?"bk-"+cls:cls);}
el.className=classList.join(" ");}
return null;},_setElement:function(el){this.$el=el instanceof $?el:$(el);return this.el=this.$el[0];},setElement:function(element){this.undelegateEvents();this._setElement(element);this.delegateEvents();return this;},delegateEvents:function(events){var key,match,method;if(events==null){events=this.events;}
if(!events){return this;}
this.undelegateEvents();for(key in events){method=events[key];if(!types_1.isFunction(method)){method=this[method];}
if(method==null){continue;}
match=key.match(delegateEventSplitter);this.delegate(match[1],match[2],method.bind(this));}
return this;},delegate:function(eventName,selector,listener){this.$el.on(eventName+'.delegateEvents'+this.id,selector,listener);return this;},undelegateEvents:function(){if(this.$el){this.$el.off('.delegateEvents'+this.id);}
return this;},undelegate:function(eventName,selector,listener){this.$el.off(eventName+'.delegateEvents'+this.id,selector,listener);return this;}};},{"core/util/types":undefined,"jquery":"jquery"}],"models/widgets/main":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Widgets=require("./index");exports.models=Widgets;},{"./index":"models/widgets/index"}],"models/widgets/markup":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var widget_1=require("./widget");var markup_template_1=require("./markup_template");exports.MarkupView=(function(superClass){extend(MarkupView,superClass);function MarkupView(){return MarkupView.__super__.constructor.apply(this,arguments);}
MarkupView.prototype.template=markup_template_1.default;MarkupView.prototype.initialize=function(options){MarkupView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};MarkupView.prototype.render=function(){MarkupView.__super__.render.call(this);this.$el.empty();this.$el.html(this.template());if(this.model.height){this.$el.height(this.model.height);}
if(this.model.width){return this.$el.width(this.model.width);}};return MarkupView;})(widget_1.WidgetView);exports.Markup=(function(superClass){extend(Markup,superClass);function Markup(){return Markup.__super__.constructor.apply(this,arguments);}
Markup.prototype.type="Markup";Markup.prototype.initialize=function(options){return Markup.__super__.initialize.call(this,options);};Markup.define({text:[p.String,'']});return Markup;})(widget_1.Widget);},{"./markup_template":"models/widgets/markup_template","./widget":"models/widgets/widget","core/properties":undefined}],"models/widgets/markup_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(){return DOM.createElement("div",{class:"bk-markup"});};},{"core/dom":undefined}],"models/widgets/multiselect":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var input_widget_1=require("./input_widget");var multiselecttemplate_1=require("./multiselecttemplate");exports.MultiSelectView=(function(superClass){extend(MultiSelectView,superClass);function MultiSelectView(){this.render_selection=bind(this.render_selection,this);return MultiSelectView.__super__.constructor.apply(this,arguments);}
MultiSelectView.prototype.template=multiselecttemplate_1.default;MultiSelectView.prototype.events={"change select":"change_input"};MultiSelectView.prototype.initialize=function(options){MultiSelectView.__super__.initialize.call(this,options);this.render();this.listenTo(this.model,'change:value',this.render_selection);this.listenTo(this.model,'change:options',this.render);this.listenTo(this.model,'change:name',this.render);this.listenTo(this.model,'change:title',this.render);return this.listenTo(this.model,'change:size',this.render);};MultiSelectView.prototype.render=function(){var html;MultiSelectView.__super__.render.call(this);this.$el.empty();html=this.template(this.model.attributes);this.$el.html(html);this.render_selection();return this;};MultiSelectView.prototype.render_selection=function(){var i,len,ref,values,x;values={};ref=this.model.value;for(i=0,len=ref.length;i<len;i++){x=ref[i];values[x]=true;}
this.$el.find('option').each((function(_this){return function(el){el=_this.$el.find(el);if(values[el.attr('value')]){return el.attr('selected','selected');}};})(this));return this.$el.find('select').attr('size',this.model.size);};MultiSelectView.prototype.change_input=function(){var is_focused,value;is_focused=this.$el.find('select:focus').size();value=this.$el.find('select').val();if(value){this.model.value=value;}
else{this.model.value=[];}
MultiSelectView.__super__.change_input.call(this);if(is_focused){return this.$el.find('select').focus();}};return MultiSelectView;})(input_widget_1.InputWidgetView);exports.MultiSelect=(function(superClass){extend(MultiSelect,superClass);function MultiSelect(){return MultiSelect.__super__.constructor.apply(this,arguments);}
MultiSelect.prototype.type="MultiSelect";MultiSelect.prototype.default_view=exports.MultiSelectView;MultiSelect.define({value:[p.Array,[]],options:[p.Array,[]],size:[p.Number,4]});return MultiSelect;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","./multiselecttemplate":"models/widgets/multiselecttemplate","core/properties":undefined}],"models/widgets/multiselecttemplate":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");var types_1=require("core/util/types");exports.default=function(props){return(DOM.createElement("fragment",null,DOM.createElement("label",{for:props.id}," ",props.title," "),DOM.createElement("select",{multiple:true,class:"bk-widget-form-input",id:props.id,name:props.name},props.options.map(function(option){var value,label;if(types_1.isString(option)){value=label=option;}
else{value=option[0],label=option[1];}
var selected=props.value.indexOf(value)>-1;return DOM.createElement("option",{selected:selected,value:value},label);}))));};},{"core/dom":undefined,"core/util/types":undefined}],"models/widgets/panel":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var widget_1=require("./widget");var p=require("core/properties");exports.PanelView=(function(superClass){extend(PanelView,superClass);function PanelView(){return PanelView.__super__.constructor.apply(this,arguments);}
PanelView.prototype.render=function(){PanelView.__super__.render.call(this);this.$el.empty();return this;};return PanelView;})(widget_1.WidgetView);exports.Panel=(function(superClass){extend(Panel,superClass);function Panel(){return Panel.__super__.constructor.apply(this,arguments);}
Panel.prototype.type="Panel";Panel.prototype.default_view=exports.PanelView;Panel.define({title:[p.String,""],child:[p.Instance],closable:[p.Bool,false]});return Panel;})(widget_1.Widget);},{"./widget":"models/widgets/widget","core/properties":undefined}],"models/widgets/paragraph":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var markup_1=require("./markup");var dom_1=require("core/dom");exports.ParagraphView=(function(superClass){extend(ParagraphView,superClass);function ParagraphView(){return ParagraphView.__super__.constructor.apply(this,arguments);}
ParagraphView.prototype.render=function(){var content;ParagraphView.__super__.render.call(this);content=dom_1.p({style:{margin:0}},this.model.text);return this.$el.find('.bk-markup').append(content);};return ParagraphView;})(markup_1.MarkupView);exports.Paragraph=(function(superClass){extend(Paragraph,superClass);function Paragraph(){return Paragraph.__super__.constructor.apply(this,arguments);}
Paragraph.prototype.type="Paragraph";Paragraph.prototype.default_view=exports.ParagraphView;return Paragraph;})(markup_1.Markup);},{"./markup":"models/widgets/markup","core/dom":undefined}],"models/widgets/pretext":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var markup_1=require("./markup");var dom_1=require("core/dom");exports.PreTextView=(function(superClass){extend(PreTextView,superClass);function PreTextView(){return PreTextView.__super__.constructor.apply(this,arguments);}
PreTextView.prototype.render=function(){var content;PreTextView.__super__.render.call(this);content=dom_1.pre({style:{overflow:"auto"}},this.model.text);return this.$el.find('.bk-markup').append(content);};return PreTextView;})(markup_1.MarkupView);exports.PreText=(function(superClass){extend(PreText,superClass);function PreText(){return PreText.__super__.constructor.apply(this,arguments);}
PreText.prototype.type="PreText";PreText.prototype.default_view=exports.PreTextView;return PreText;})(markup_1.Markup);},{"./markup":"models/widgets/markup","core/dom":undefined}],"models/widgets/radio_button_group":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;require("bootstrap/button");var dom_1=require("core/dom");var p=require("core/properties");var string_1=require("core/util/string");var widget_1=require("./widget");var button_group_template_1=require("./button_group_template");exports.RadioButtonGroupView=(function(superClass){extend(RadioButtonGroupView,superClass);function RadioButtonGroupView(){return RadioButtonGroupView.__super__.constructor.apply(this,arguments);}
RadioButtonGroupView.prototype.events={"change input":"change_input"};RadioButtonGroupView.prototype.template=button_group_template_1.default;RadioButtonGroupView.prototype.initialize=function(options){RadioButtonGroupView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};RadioButtonGroupView.prototype.render=function(){var active,html,i,inputEl,j,labelEl,len,name,ref,text;RadioButtonGroupView.__super__.render.call(this);this.$el.empty();html=this.template();this.$el.append(html);name=string_1.uniqueId("RadioButtonGroup");active=this.model.active;ref=this.model.labels;for(i=j=0,len=ref.length;j<len;i=++j){text=ref[i];inputEl=dom_1.input({type:"radio",name:name,value:""+i,checked:i===active});labelEl=dom_1.label({"class":["bk-bs-btn","bk-bs-btn-"+this.model.button_type]},inputEl,text);if(i===active){labelEl.classList.add("bk-bs-active");}
this.$el.find('.bk-bs-btn-group').append(labelEl);}
return this;};RadioButtonGroupView.prototype.change_input=function(){var active,i,radio,ref;active=(function(){var j,len,ref,results;ref=this.$el.find("input");results=[];for(i=j=0,len=ref.length;j<len;i=++j){radio=ref[i];if(radio.checked){results.push(i);}}
return results;}).call(this);this.model.active=active[0];return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return RadioButtonGroupView;})(widget_1.WidgetView);exports.RadioButtonGroup=(function(superClass){extend(RadioButtonGroup,superClass);function RadioButtonGroup(){return RadioButtonGroup.__super__.constructor.apply(this,arguments);}
RadioButtonGroup.prototype.type="RadioButtonGroup";RadioButtonGroup.prototype.default_view=exports.RadioButtonGroupView;RadioButtonGroup.define({active:[p.Any,null],labels:[p.Array,[]],button_type:[p.String,"default"],callback:[p.Instance]});return RadioButtonGroup;})(widget_1.Widget);},{"./button_group_template":"models/widgets/button_group_template","./widget":"models/widgets/widget","bootstrap/button":"bootstrap/button","core/dom":undefined,"core/properties":undefined,"core/util/string":undefined}],"models/widgets/radio_group":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");var p=require("core/properties");var string_1=require("core/util/string");var widget_1=require("./widget");exports.RadioGroupView=(function(superClass){extend(RadioGroupView,superClass);function RadioGroupView(){return RadioGroupView.__super__.constructor.apply(this,arguments);}
RadioGroupView.prototype.events={"change input":"change_input"};RadioGroupView.prototype.initialize=function(options){RadioGroupView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};RadioGroupView.prototype.render=function(){var $div,$input,$label,active,i,j,label,len,name,ref;RadioGroupView.__super__.render.call(this);this.$el.empty();name=string_1.uniqueId("RadioGroup");active=this.model.active;ref=this.model.labels;for(i=j=0,len=ref.length;j<len;i=++j){label=ref[i];$input=$('<input type="radio">').attr({name:name,value:""+i});if(this.model.disabled){$input.prop("disabled",true);}
if(i===active){$input.prop("checked",true);}
$label=$('<label></label>').text(label).prepend($input);if(this.model.inline){$label.addClass("bk-bs-radio-inline");this.$el.append($label);}
else{$div=$('<div class="bk-bs-radio"></div>').append($label);this.$el.append($div);}}
return this;};RadioGroupView.prototype.change_input=function(){var active,i,radio,ref;active=(function(){var j,len,ref,results;ref=this.$el.find("input");results=[];for(i=j=0,len=ref.length;j<len;i=++j){radio=ref[i];if(radio.checked){results.push(i);}}
return results;}).call(this);this.model.active=active[0];return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};return RadioGroupView;})(widget_1.WidgetView);exports.RadioGroup=(function(superClass){extend(RadioGroup,superClass);function RadioGroup(){return RadioGroup.__super__.constructor.apply(this,arguments);}
RadioGroup.prototype.type="RadioGroup";RadioGroup.prototype.default_view=exports.RadioGroupView;RadioGroup.define({active:[p.Any,null],labels:[p.Array,[]],inline:[p.Bool,false],callback:[p.Instance]});return RadioGroup;})(widget_1.Widget);},{"./widget":"models/widgets/widget","core/properties":undefined,"core/util/string":undefined,"jquery":"jquery"}],"models/widgets/range_slider":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;require("jquery-ui/slider");var logging_1=require("core/logging");var p=require("core/properties");var callback_1=require("core/util/callback");var input_widget_1=require("./input_widget");var slidertemplate_1=require("./slidertemplate");exports.RangeSliderView=(function(superClass){extend(RangeSliderView,superClass);function RangeSliderView(){this.slide=bind(this.slide,this);this.slidestop=bind(this.slidestop,this);return RangeSliderView.__super__.constructor.apply(this,arguments);}
RangeSliderView.prototype.template=slidertemplate_1.default;RangeSliderView.prototype.initialize=function(options){var html;RangeSliderView.__super__.initialize.call(this,options);this.listenTo(this.model,'change',this.render);this.$el.empty();html=this.template(this.model.attributes);this.$el.html(html);this.callbackWrapper=null;if(this.model.callback_policy==='continuous'){this.callbackWrapper=function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};}
if(this.model.callback_policy==='throttle'&&this.model.callback){this.callbackWrapper=callback_1.throttle(function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;},this.model.callback_throttle);}
return this.render();};RangeSliderView.prototype.render=function(){var bk_handle,max,min,opts,step;RangeSliderView.__super__.render.call(this);max=this.model.end;min=this.model.start;step=this.model.step||((max-min)/50);logging_1.logger.debug("range-slider render: min, max, step = ("+min+", "+max+", "+step+")");opts={range:true,orientation:this.model.orientation,animate:"fast",values:this.model.range,min:min,max:max,step:step,stop:this.slidestop,slide:this.slide};this.$el.find('.slider').slider(opts);if(this.model.title!=null){this.$el.find("#"+this.model.id).val(this.$el.find('.slider').slider('values').join(' - '));}
this.$el.find('.bk-slider-parent').height(this.model.height);bk_handle=this.$el.find('.bk-ui-slider-handle');if(bk_handle.length===2){bk_handle[0].style.left=this.$el.find('.ui-slider-handle')[0].style.left;bk_handle[1].style.left=this.$el.find('.ui-slider-handle')[1].style.left;}
this._prefix_ui();return this;};RangeSliderView.prototype.slidestop=function(event,ui){var ref;if(this.model.callback_policy==='mouseup'||this.model.callback_policy==='throttle'){return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;}};RangeSliderView.prototype.slide=function(event,ui){var values,values_str;values=ui.values;values_str=values.join(' - ');logging_1.logger.debug("range-slide value = "+values_str);if(this.model.title!=null){this.$el.find("#"+this.model.id).val(values_str);}
this.model.range=values;if(this.callbackWrapper){return this.callbackWrapper();}};return RangeSliderView;})(input_widget_1.InputWidgetView);exports.RangeSlider=(function(superClass){extend(RangeSlider,superClass);function RangeSlider(){return RangeSlider.__super__.constructor.apply(this,arguments);}
RangeSlider.prototype.type="RangeSlider";RangeSlider.prototype.default_view=exports.RangeSliderView;RangeSlider.define({range:[p.Any,[0.1,0.9]],start:[p.Number,0],end:[p.Number,1],step:[p.Number,0.1],orientation:[p.Orientation,"horizontal"],callback_throttle:[p.Number,200],callback_policy:[p.String,"throttle"]});return RangeSlider;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","./slidertemplate":"models/widgets/slidertemplate","core/logging":undefined,"core/properties":undefined,"core/util/callback":undefined,"jquery-ui/slider":"jquery-ui/slider"}],"models/widgets/selectbox":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var logging_1=require("core/logging");var p=require("core/properties");var input_widget_1=require("./input_widget");var selecttemplate_1=require("./selecttemplate");exports.SelectView=(function(superClass){extend(SelectView,superClass);function SelectView(){return SelectView.__super__.constructor.apply(this,arguments);}
SelectView.prototype.template=selecttemplate_1.default;SelectView.prototype.events={"change select":"change_input"};SelectView.prototype.initialize=function(options){SelectView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};SelectView.prototype.render=function(){var html;SelectView.__super__.render.call(this);this.$el.empty();html=this.template(this.model.attributes);this.$el.html(html);return this;};SelectView.prototype.change_input=function(){var value;value=this.$el.find('select').val();logging_1.logger.debug("selectbox: value = "+value);this.model.value=value;return SelectView.__super__.change_input.call(this);};return SelectView;})(input_widget_1.InputWidgetView);exports.Select=(function(superClass){extend(Select,superClass);function Select(){return Select.__super__.constructor.apply(this,arguments);}
Select.prototype.type="Select";Select.prototype.default_view=exports.SelectView;Select.define({value:[p.String,''],options:[p.Any,[]]});return Select;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","./selecttemplate":"models/widgets/selecttemplate","core/logging":undefined,"core/properties":undefined}],"models/widgets/selecttemplate":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");var types_1=require("core/util/types");exports.default=function(props){return(DOM.createElement("fragment",null,DOM.createElement("label",{for:props.id}," ",props.title," "),DOM.createElement("select",{class:"bk-widget-form-input",id:props.id,name:props.name},props.options.map(function(option){var value,label;if(types_1.isString(option)){value=label=option;}
else{value=option[0],label=option[1];}
var selected=props.value==value;return DOM.createElement("option",{selected:selected,value:value},label);}))));};},{"core/dom":undefined,"core/util/types":undefined}],"models/widgets/slider":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;require("jquery-ui/slider");var logging_1=require("core/logging");var p=require("core/properties");var callback_1=require("core/util/callback");var input_widget_1=require("./input_widget");var slidertemplate_1=require("./slidertemplate");exports.SliderView=(function(superClass){extend(SliderView,superClass);function SliderView(){this.slide=bind(this.slide,this);this.slidestop=bind(this.slidestop,this);return SliderView.__super__.constructor.apply(this,arguments);}
SliderView.prototype.template=slidertemplate_1.default;SliderView.prototype.initialize=function(options){var html;SliderView.__super__.initialize.call(this,options);this.listenTo(this.model,'change',this.render);this.$el.empty();html=this.template(this.model.attributes);this.$el.html(html);this.callbackWrapper=null;if(this.model.callback_policy==='continuous'){this.callbackWrapper=function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;};}
if(this.model.callback_policy==='throttle'&&this.model.callback){this.callbackWrapper=callback_1.throttle(function(){var ref;return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;},this.model.callback_throttle);}
return this.render();};SliderView.prototype.render=function(){var max,min,opts,step;SliderView.__super__.render.call(this);max=this.model.end;min=this.model.start;step=this.model.step||((max-min)/50);logging_1.logger.debug("slider render: min, max, step = ("+min+", "+max+", "+step+")");opts={orientation:this.model.orientation,animate:"fast",value:this.model.value,min:min,max:max,step:step,stop:this.slidestop,slide:this.slide};this.$el.find('.slider').slider(opts);if(this.model.title!=null){this.$el.find("#"+this.model.id).val(this.$el.find('.slider').slider('value'));}
this.$el.find('.bk-slider-parent').height(this.model.height);this._prefix_ui();return this;};SliderView.prototype.slidestop=function(event,ui){var ref;if(this.model.callback_policy==='mouseup'||this.model.callback_policy==='throttle'){return(ref=this.model.callback)!=null?ref.execute(this.model):void 0;}};SliderView.prototype.slide=function(event,ui){var value;value=ui.value;logging_1.logger.debug("slide value = "+value);if(this.model.title!=null){this.$el.find("#"+this.model.id).val(ui.value);}
this.model.value=value;if(this.callbackWrapper){return this.callbackWrapper();}};return SliderView;})(input_widget_1.InputWidgetView);exports.Slider=(function(superClass){extend(Slider,superClass);function Slider(){return Slider.__super__.constructor.apply(this,arguments);}
Slider.prototype.type="Slider";Slider.prototype.default_view=exports.SliderView;Slider.define({value:[p.Number,0.5],start:[p.Number,0],end:[p.Number,1],step:[p.Number,0.1],orientation:[p.Orientation,"horizontal"],callback_throttle:[p.Number,200],callback_policy:[p.String,"throttle"]});return Slider;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","./slidertemplate":"models/widgets/slidertemplate","core/logging":undefined,"core/properties":undefined,"core/util/callback":undefined,"jquery-ui/slider":"jquery-ui/slider"}],"models/widgets/slidertemplate":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){var title,value;if(props.title!=null){if(props.title.length!=0){title=DOM.createElement("label",{for:props.id}," ",props.title,": ");}
value=DOM.createElement("input",{type:"text",id:props.id,readonly:true});}
return(DOM.createElement("div",{class:"bk-slider-parent"},title,value,DOM.createElement("div",{class:"bk-slider-"+props.orientation},DOM.createElement("div",{class:"slider",id:props.id}))));};},{"core/dom":undefined}],"models/widgets/table_column":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var cell_formatters_1=require("./cell_formatters");var cell_editors_1=require("./cell_editors");var p=require("core/properties");var string_1=require("core/util/string");var model_1=require("../../model");exports.TableColumn=(function(superClass){extend(TableColumn,superClass);function TableColumn(){return TableColumn.__super__.constructor.apply(this,arguments);}
TableColumn.prototype.type='TableColumn';TableColumn.prototype.default_view=null;TableColumn.define({field:[p.String],title:[p.String],width:[p.Number,300],formatter:[p.Instance,function(){return new cell_formatters_1.StringFormatter();}],editor:[p.Instance,function(){return new cell_editors_1.StringEditor();}],sortable:[p.Bool,true],default_sort:[p.String,"ascending"]});TableColumn.prototype.toColumn=function(){var ref;return{id:string_1.uniqueId(),field:this.field,name:this.title,width:this.width,formatter:(ref=this.formatter)!=null?ref.doFormat.bind(this.formatter):void 0,editor:this.editor,sortable:this.sortable,defaultSortAsc:this.default_sort==="ascending"};};return TableColumn;})(model_1.Model);},{"../../model":"model","./cell_editors":"models/widgets/cell_editors","./cell_formatters":"models/widgets/cell_formatters","core/properties":undefined,"core/util/string":undefined}],"models/widgets/table_widget":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var widget_1=require("./widget");var p=require("core/properties");exports.TableWidget=(function(superClass){extend(TableWidget,superClass);function TableWidget(){return TableWidget.__super__.constructor.apply(this,arguments);}
TableWidget.prototype.type="TableWidget";TableWidget.define({source:[p.Instance]});return TableWidget;})(widget_1.Widget);},{"./widget":"models/widgets/widget","core/properties":undefined}],"models/widgets/tabs":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var $=require("jquery");require("bootstrap/tab");var p=require("core/properties");var array_1=require("core/util/array");var tabs_template_1=require("./tabs_template");var widget_1=require("./widget");exports.TabsView=(function(superClass){extend(TabsView,superClass);function TabsView(){return TabsView.__super__.constructor.apply(this,arguments);}
TabsView.prototype.render=function(){var $panels,_key,active,child,children,html,i,len,panel,ref,ref1,ref2,ref3,tabs,that;TabsView.__super__.render.call(this);ref=this.child_views;for(_key in ref){if(!hasProp.call(ref,_key))
continue;child=ref[_key];if((ref1=child.el.parentNode)!=null){ref1.removeChild(child.el);}}
this.$el.empty();tabs=this.model.tabs;active=this.model.active;children=this.model.children;html=$(tabs_template_1.default({tabs:tabs,active_tab_id:tabs[active].id}));that=this;html.find(".bk-bs-nav a").click(function(event){var panelId,panelIdx,ref2;event.preventDefault();$(this).tab('show');panelId=$(this).attr('href').replace('#tab-','');tabs=that.model.tabs;panelIdx=array_1.findIndex(tabs,function(panel){return panel.id===panelId;});that.model.active=panelIdx;return(ref2=that.model.callback)!=null?ref2.execute(that.model):void 0;});$panels=html.find(".bk-bs-tab-pane");ref2=array_1.zip(children,$panels);for(i=0,len=ref2.length;i<len;i++){ref3=ref2[i],child=ref3[0],panel=ref3[1];$(panel).html(this.child_views[child.id].el);}
this.$el.append(html);return this;};return TabsView;})(widget_1.WidgetView);exports.Tabs=(function(superClass){extend(Tabs,superClass);function Tabs(){return Tabs.__super__.constructor.apply(this,arguments);}
Tabs.prototype.type="Tabs";Tabs.prototype.default_view=exports.TabsView;Tabs.define({tabs:[p.Array,[]],active:[p.Number,0],callback:[p.Instance]});Tabs.getters({children:function(){var i,len,ref,results,tab;ref=this.tabs;results=[];for(i=0,len=ref.length;i<len;i++){tab=ref[i];results.push(tab.child);}
return results;}});Tabs.prototype.get_layoutable_children=function(){return this.children;};Tabs.prototype.get_edit_variables=function(){var child,edit_variables,i,len,ref;edit_variables=Tabs.__super__.get_edit_variables.call(this);ref=this.get_layoutable_children();for(i=0,len=ref.length;i<len;i++){child=ref[i];edit_variables=edit_variables.concat(child.get_edit_variables());}
return edit_variables;};Tabs.prototype.get_constraints=function(){var child,constraints,i,len,ref;constraints=Tabs.__super__.get_constraints.call(this);ref=this.get_layoutable_children();for(i=0,len=ref.length;i<len;i++){child=ref[i];constraints=constraints.concat(child.get_constraints());}
return constraints;};return Tabs;})(widget_1.Widget);},{"./tabs_template":"models/widgets/tabs_template","./widget":"models/widgets/widget","bootstrap/tab":"bootstrap/tab","core/properties":undefined,"core/util/array":undefined,"jquery":"jquery"}],"models/widgets/tabs_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){var active=function(tab){return tab.id===props.active_tab_id?"bk-bs-active":null;};return(DOM.createElement("fragment",null,DOM.createElement("ul",{class:"bk-bs-nav bk-bs-nav-tabs"},props.tabs.map(function(tab){return DOM.createElement("li",{class:active(tab)},DOM.createElement("a",{href:"#tab-"+tab.id},tab.title));})),DOM.createElement("div",{class:"bk-bs-tab-content"},props.tabs.map(function(tab){return DOM.createElement("div",{class:["bk-bs-tab-pane",active(tab)],id:"tab-"+tab.id});}))));};},{"core/dom":undefined}],"models/widgets/text_input":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var logging_1=require("core/logging");var p=require("core/properties");var input_widget_1=require("./input_widget");var text_input_template_1=require("./text_input_template");exports.TextInputView=(function(superClass){extend(TextInputView,superClass);function TextInputView(){return TextInputView.__super__.constructor.apply(this,arguments);}
TextInputView.prototype.className="bk-widget-form-group";TextInputView.prototype.template=text_input_template_1.default;TextInputView.prototype.events={"change input":"change_input"};TextInputView.prototype.initialize=function(options){TextInputView.__super__.initialize.call(this,options);this.render();return this.listenTo(this.model,'change',this.render);};TextInputView.prototype.render=function(){TextInputView.__super__.render.call(this);this.$el.html(this.template(this.model.attributes));if(this.model.height){this.$el.find('input').height(this.model.height-35);}
return this;};TextInputView.prototype.change_input=function(){var value;value=this.$el.find('input').val();logging_1.logger.debug("widget/text_input: value = "+value);this.model.value=value;return TextInputView.__super__.change_input.call(this);};return TextInputView;})(input_widget_1.InputWidgetView);exports.TextInput=(function(superClass){extend(TextInput,superClass);function TextInput(){return TextInput.__super__.constructor.apply(this,arguments);}
TextInput.prototype.type="TextInput";TextInput.prototype.default_view=exports.TextInputView;TextInput.define({value:[p.String,""],placeholder:[p.String,""]});return TextInput;})(input_widget_1.InputWidget);},{"./input_widget":"models/widgets/input_widget","./text_input_template":"models/widgets/text_input_template","core/logging":undefined,"core/properties":undefined}],"models/widgets/text_input_template":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DOM=require("core/dom");exports.default=function(props){return(DOM.createElement("fragment",null,DOM.createElement("label",{for:props.id}," ",props.title," "),DOM.createElement("input",{class:"bk-widget-form-input",type:"text",id:props.id,name:props.name,value:props.value,placeholder:props.placeholder})));};},{"core/dom":undefined}],"models/widgets/toggle":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var p=require("core/properties");var abstract_button_1=require("./abstract_button");exports.ToggleView=(function(superClass){extend(ToggleView,superClass);function ToggleView(){return ToggleView.__super__.constructor.apply(this,arguments);}
ToggleView.prototype.render=function(){ToggleView.__super__.render.call(this);if(this.model.active){this.$el.find('button').addClass("bk-bs-active");}
else{this.$el.find('button').removeClass("bk-bs-active");}
return this;};ToggleView.prototype.change_input=function(){ToggleView.__super__.change_input.call(this);return this.model.active=!this.model.active;};return ToggleView;})(abstract_button_1.AbstractButtonView);exports.Toggle=(function(superClass){extend(Toggle,superClass);function Toggle(){return Toggle.__super__.constructor.apply(this,arguments);}
Toggle.prototype.type="Toggle";Toggle.prototype.default_view=exports.ToggleView;Toggle.define({active:[p.Bool,false]});Toggle.override({label:"Toggle"});return Toggle;})(abstract_button_1.AbstractButton);},{"./abstract_button":"models/widgets/abstract_button","core/properties":undefined}],"models/widgets/widget":[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))
child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;var layout_dom_1=require("../layouts/layout_dom");var jqueryable_1=require("./jqueryable");exports.WidgetView=(function(superClass){extend(WidgetView,superClass);function WidgetView(){return WidgetView.__super__.constructor.apply(this,arguments);}
extend(WidgetView.prototype,jqueryable_1.JQueryable);WidgetView.prototype.className="bk-widget";WidgetView.prototype.render=function(){if(this.model.height){this.$el.height(this.model.height);}
if(this.model.width){return this.$el.width(this.model.width);}};return WidgetView;})(layout_dom_1.LayoutDOMView);exports.Widget=(function(superClass){extend(Widget,superClass);function Widget(){return Widget.__super__.constructor.apply(this,arguments);}
Widget.prototype.type="Widget";Widget.prototype.default_view=exports.WidgetView;return Widget;})(layout_dom_1.LayoutDOM);},{"../layouts/layout_dom":"models/layouts/layout_dom","./jqueryable":"models/widgets/jqueryable"}],"jquery-mousewheel":[function(require,module,exports){/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));},{}],"jquery-ui/autocomplete":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./widget');require('./position');require('./menu');/*!
 * jQuery UI Autocomplete 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
(function($,undefined){$.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
var item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}else{this.liveRegion.text(item.value);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex){this.__response(content);}
this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading");}},this);},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+
" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
this.liveRegion.text(message);}});}(jQuery));},{"./core":"jquery-ui/core","./menu":"jquery-ui/menu","./position":"jquery-ui/position","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/button":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./widget');/*!
 * jQuery UI Button 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function($,undefined){var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus");},blur:function(){this.buttonElement.removeClass("ui-state-focus");}});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){that.refresh();});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}})
.bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" ui-state-active "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){this.element.prop("disabled",!!value);if(value){this.buttonElement.removeClass("ui-state-focus");}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});}(jQuery));},{"./core":"jquery-ui/core","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/core":[function(require,module,exports){var jQuery=require('jquery');/*!
 * jQuery UI Core 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};$.extend($.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),scrollParent:function(){var scrollParent;if(($.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.css(this,"position"))&&(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));}).eq(0);}
return(/fixed/).test(this.css("position"))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;}});})(jQuery);},{"jquery":"jquery"}],"jquery-ui/datepicker":[function(require,module,exports){var jQuery=require('jquery');require('./core');/*!
 * jQuery UI Datepicker 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.10.4"}});var PROP_NAME="datepicker",instActive;function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+
"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}
extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+
"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+
"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,PROP_NAME))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+
" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+
" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+
">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+
"</div><table class='ui-datepicker-calendar'><thead>"+
"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+
"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+
"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+
">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+
">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}});}
function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.10.4";})(jQuery);},{"./core":"jquery-ui/core","jquery":"jquery"}],"jquery-ui/menu":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./widget');require('./position');/*!
 * jQuery UI Menu 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function($,undefined){$.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0})
.bind("click"+this.eventNamespace,$.proxy(function(event){if(this.options.disabled){event.preventDefault();}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault();},"click .ui-state-disabled > a":function(event){event.preventDefault();},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}
switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text());});}
if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-\u2014\u2013\s]/.test(item.text())){item.addClass("ui-widget-content ui-menu-divider");}});menus.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active");},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.children(".ui-menu-item")[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item")
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.children(".ui-menu-item").first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);}});}(jQuery));},{"./core":"jquery-ui/core","./position":"jquery-ui/position","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/mouse":[function(require,module,exports){var jQuery=require('jquery');require('./widget');/*!
 * jQuery UI Mouse 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});$.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});})(jQuery);},{"./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/position":[function(require,module,exports){var jQuery=require('jquery');/*!
 * jQuery UI Position 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}
}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}
}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}
else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if((position.top+myOffset+atOffset+offset)>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))){position.top+=myOffset+atOffset+offset;}}
else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if((position.top+myOffset+atOffset+offset)>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();}(jQuery));},{"jquery":"jquery"}],"jquery-ui/slider":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./mouse');require('./widget');/*!
 * jQuery UI Slider 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+
" ui-slider-"+this.orientation+
" ui-widget"+
" ui-widget-content"+
" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+
" ui-widget-header ui-corner-all";}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max")
.css({"left":"","bottom":""});}
this.range.addClass(classes+
((options.range==="min"||options.range==="max")?" ui-slider-range-"+options.range:""));}else{if(this.range){this.range.remove();}
this.range=null;}},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements);this._on(elements,this._handleEvents);this._hoverable(elements);this._focusable(elements);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}
this.element.removeClass("ui-slider"+
" ui-slider-horizontal"+
" ui-slider-vertical"+
" ui-widget"+
" ui-widget-content"+
" ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._lastChangedValue=index;this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if($.isArray(this.options.values)){valsLength=this.options.values.length;}
$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;case"min":case"max":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.options.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},click:function(event){event.preventDefault();},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}}});}(jQuery));},{"./core":"jquery-ui/core","./mouse":"jquery-ui/mouse","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/sortable":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./mouse');require('./widget');/*!
 * jQuery UI Sortable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function($,undefined){function isOverAxis(x,reference,size){return(x>reference)&&(x<(reference+size));}
function isFloating(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));}
$.widget("ui.sortable",$.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==="x"||isFloating(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this.ready=true;},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}
return this;},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget().toggleClass("ui-sortable-disabled",!!value);}else{$.Widget.prototype._setOption.apply(this,arguments);}},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}
if(this.options.disabled||this.options.type==="static"){return false;}
this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}
if(!currentItem){return false;}
if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment){this._setContainment();}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}
if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}
this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}
this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}
if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}
if($.ui.ddmanager){$.ui.ddmanager.current=this;}
if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}
if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}
if(item.instance!==this.currentContainer){continue;}
if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}
if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}
if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);}
if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop);}
this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}
$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}
return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=(this.options.axis==="x")||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement){return false;}
return this.floating?(((horizontalDirection&&horizontalDirection==="right")||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}
for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}
return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}
return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}
for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
p=t.offset();item.left=p.left;item.top=p.top;}
if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}
return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tr"){that.currentItem.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(element);});}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}
if(!className){element.css("visibility","hidden");}
return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}
if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}
if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}
that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,floating,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}
if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}
innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer){return;}
if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";base=this.positionAbs[posProperty]+this.offset.click[posProperty];for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}
if(this.items[j].item[0]===this.currentItem[0]){continue;}
if(floating&&!isOverAxis(this.positionAbs.top+this.offset.click.top,this.items[j].top,this.items[j].height)){continue;}
cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)){nearBottom=true;cur+=this.items[j][sizeProperty];}
if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}
if(this.currentContainer===this.containers[innermostIndex]){return;}
itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}
if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}
if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}
if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}
if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}
if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}
function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}
for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}
if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}
if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}
if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}
this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return false;}
if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}
this.helper=null;if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return true;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});})(jQuery);},{"./core":"jquery-ui/core","./mouse":"jquery-ui/mouse","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/spinner":[function(require,module,exports){var jQuery=require('jquery');require('./core');require('./widget');require('./button');/*!
 * jQuery UI Spinner 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.button.js
 */
(function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}
$.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true);}
this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){if(!delta){return;}
if(!this.spinning&&!this._start(event)){return false;}
this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;});}}
event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}
if(this._start(event)===false){return false;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent()
.append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0){uiSpinner.height(uiSpinner.height());}
if(this.options.disabled){this.disable();}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}
return false;},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";},_buttonHtml:function(){return""+
"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+
"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+
"</a>"+
"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+
"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+
"</a>";},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}
if(!this.counter){this.counter=1;}
this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}
value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}
return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}
if(options.min!==null&&value<options.min){return options.min;}
return value;},_stop:function(event){if(!this.spinning){return;}
clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}
if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}
if(key==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down);}
this._super(key,value);if(key==="disabled"){if(value){this.element.prop("disabled",true);this.buttons.button("disable");}else{this.element.prop("disabled",false);this.buttons.button("enable");}}},_setOptions:modifier(function(options){this._super(options);this._value(this.element.val());}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}
return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}
return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}
value=this._format(parsed);}}
this.element.val(value);this._refresh();},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:modifier(function(steps){this._stepUp(steps);}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop();}},stepDown:modifier(function(steps){this._stepDown(steps);}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop();}},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}
modifier(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});}(jQuery));},{"./button":"jquery-ui/button","./core":"jquery-ui/core","./widget":"jquery-ui/widget","jquery":"jquery"}],"jquery-ui/widget":[function(require,module,exports){var jQuery=require('jquery');/*!
 * jQuery UI Widget 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);};$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+
"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{})._init();}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace)
.removeData(this.widgetName).removeData(this.widgetFullName)
.removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+
"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});})(jQuery);},{"jquery":"jquery"}],"jquery":[function(require,module,exports){/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}
return factory(w);};}else{factory(global);}
}(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var document=window.document;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var
version="2.2.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase();};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this);},get:function(num){return num!=null?(num<0?this[num+this.length]:this[num]):slice.call(this);},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(i===length){target=this;i--;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window;},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&(realStringObj-parseFloat(realStringObj)+1)>=0;},isPlainObject:function(obj){var key;if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype||{},"isPrototypeOf")){return false;}
for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},type:function(obj){if(obj==null){return obj+"";}
return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script);}else{indirect(code);}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}
return obj;},trim:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}
return ret;},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i);},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j];}
first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}
return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}
}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}
return concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}
jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false;}
return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1)in obj;}
var Sizzle=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}
return 0;},MAX_NEGATIVE=1<<31,hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i;}}
return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+
"*([*^$|!~]?=)"+whitespace+
"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+
"*\\]",pseudos=":("+identifier+")(?:\\(("+
"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+
"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+
".*"+
")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+
"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+
"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},unloadHandler=function(){setDocument();};try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}
target.length=j-1;}};}
function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}
if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}
context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){if((elem=context.getElementById(m))){if(elem.id===m){results.push(elem);return results;}}else{return results;}
}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}
}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}
if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector;}else if(context.nodeName.toLowerCase()!=="object"){if((nid=context.getAttribute("id"))){nid=nid.replace(rescape,"\\$&");}else{context.setAttribute("id",(nid=expando));}
groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";while(i--){groups[i]=nidselect+" "+toSelector(groups[i]);}
newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;}
if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id");}}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key+" "]=value);}
return cache;}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var div=document.createElement("div");try{return!!fn(div);}catch(e){return false;}finally{if(div.parentNode){div.parentNode.removeChild(div);}
div=null;}}
function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}
function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-
(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff;}
if(cur){while((cur=cur.nextSibling)){if(cur===b){return-1;}}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}
support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if((parent=document.defaultView)&&parent.top!==parent){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false);}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler);}}
support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className");});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[];}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};}
Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(document.querySelectorAll))){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+
"<select id='"+expando+"-\r\\' msallowcapture=''>"+
"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}
if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}
if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}
if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}
if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}
div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}
var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}
compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1;}
if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}
return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}
return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}
var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++])){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}
if(diff===false){while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}
if(node===elem){break;}}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push((tokens=[]));}
matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}
return selector;}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2]);}else{uniqueCache[dir]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true;}}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}
}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context===document||context||outermost;}
for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML;}
while((matcher=elementMatchers[j++])){if(matcher(elem,context||document,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,match ){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}
i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}
return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}
selector=selector.slice(tokens.shift().value.length);}
i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}
break;}}}}
(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1;});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}
if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}
if(!assert(function(div){return div.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}
return Sizzle;})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}
matched.push(elem);}}
return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}
return matched;};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/);var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}
if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not;});}
if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not);}
qualifier=jQuery.filter(qualifier,elements);}
return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>-1)!==not;});}
jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}
return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}
for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}
ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}
root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}
return this;}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}
}else if(!context||context.jquery){return(context||root).find(selector);}else{return this.constructor(context).find(selector);}
}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}
return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}
if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}
return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}
return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}
if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}
if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}
if(rparentsprev.test(name)){matched.reverse();}}
return this.pushStack(matched);};});var rnotwhite=(/\S+/g);function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var
firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}
if(!options.memory){memory=false;}
firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}
(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}
return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0;},empty:function(){if(list){list=[];}
return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return!list;},lock:function(){locked=queue=[];if(!memory){list=memory="";}
return this;},locked:function(){return!!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments);}});});fns=null;}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[i^1][2].disable,tuples[2][2].lock);}
deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(subordinate ){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values);}else if(!(--remaining)){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject);}else{--remaining;}}}
if(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}
return deferred.promise();}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this;};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready");}}});function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}
jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}}
return readyList.promise(obj);};jQuery.ready.promise();var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}
}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true;}
if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}
if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}
return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet;};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType);};function Data(){this.expando=jQuery.expando+Data.uid++;}
Data.uid=1;Data.prototype={register:function(owner,initial){var value=initial||{};if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,writable:true,configurable:true});}
return owner[this.expando];},cache:function(owner){if(!acceptData(owner)){return{};}
var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}
return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[data]=value;}else{for(prop in data){cache[prop]=data[prop];}}
return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][key];},access:function(owner,key,value){var stored;if(key===undefined||((key&&typeof key==="string")&&value===undefined)){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key));}
this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,name,camel,cache=owner[this.expando];if(cache===undefined){return;}
if(key===undefined){this.register(owner);}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase));}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel];}else{name=camel;name=name in cache?[name]:(name.match(rnotwhite)||[]);}}
i=name.length;while(i--){delete cache[name[i]];}}
if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
dataUser.set(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}
dataPriv.set(elem,"hasDataAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}
return access(this,function(value){var data,camelKey;if(elem&&value===undefined){data=dataUser.get(elem,key)||dataUser.get(elem,key.replace(rmultiDash,"-$&").toLowerCase());if(data!==undefined){return data;}
camelKey=jQuery.camelCase(key);data=dataUser.get(elem,camelKey);if(data!==undefined){return data;}
data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data;}
return;}
camelKey=jQuery.camelCase(key);this.each(function(){var data=dataUser.get(this,camelKey);dataUser.set(this,camelKey,value);if(key.indexOf("-")>-1&&data!==undefined){dataUser.set(this,key,value);}});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem);};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit);}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations);}
if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}
return adjusted;}
var rcheckableType=(/^(?:checkbox|radio)$/i);var rtagName=(/<([\w:-]+)/);var rscriptType=(/^$|\/(?:java|ecma)script/i);var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret;}
function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}
var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}
jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}
fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem);}
continue;}
contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}
if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}
return fragment;}
(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var
rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}
function returnFalse(){return false;}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}
function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){on(elem,type,selector,data,types[type],one);}
return elem;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return elem;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}
jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
if(!(events=elemData.events)){events=elemData.events={};}
if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}
types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}
types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;}
if(matches[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,handlers:matches});}}}}
if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});}
return handlerQueue;},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+
"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+
"screenX screenY toElement").split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+
(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-
(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+
(doc&&doc.scrollTop||body&&body.scrollTop||0)-
(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};}
copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false;}},_default:function(event){return jQuery.nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation();}
this.stopPropagation();}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var
rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem;}
function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1];}else{elem.removeAttribute("type");}
return elem;}
function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}
if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}
if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}
function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html());}
domManip(self,args,callback,ignored);});}
if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}
callback.call(collection[i],node,i);}
if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""));}}}}}}
return collection;}
function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}
if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"));}
node.parentNode.removeChild(node);}}
return elem;}
jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>");},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if((data=elem[dataPriv.expando])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
elem[dataPriv.expando]=undefined;}
if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}
},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}
return this.pushStack(ret);};});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display;}
function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach();}
elemdisplay[nodeName]=display;}
return display;}
var rmargin=(/^margin/);var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}
return view.getComputedStyle(elem);};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}
return ret;};var documentElement=document.documentElement;(function(){var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}
div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+
"padding:0;margin-top:1px;position:absolute";container.appendChild(div);function computeStyleTests(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+
"position:relative;display:block;"+
"margin:auto;border:1px;padding:1px;"+
"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container);}
jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal;},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return boxSizingReliableVal;},pixelMarginRight:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return pixelMarginRightVal;},reliableMarginLeft:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return reliableMarginLeftVal;},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+
"display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";documentElement.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv).marginRight);documentElement.removeChild(container);div.removeChild(marginDiv);return ret;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(computed){if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret!==undefined?ret+"":ret;}
function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return;}
return(this.get=hookFn).apply(this,arguments);}};}
var
rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name;}
var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}
function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles);}
if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}
if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}
return val;}
function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px";}
function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
values[index]=dataPriv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display="";}
if(elem.style.display===""&&isHidden(elem)){values[index]=dataPriv.access(elem,"olddisplay",defaultDisplay(elem.nodeName));}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){dataPriv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"));}}}
for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue;}
if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none";}}
return elements;}
jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}
if(value==null||value!==value){return;}
if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}
if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value;}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name,styles);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}
return val;}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);}):getWidthOrHeight(elem,name,extra);}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name);}
return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-
swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"]);}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}
return map;}
return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);},show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}
return this.each(function(){if(isHidden(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var
fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return(fxNow=jQuery.now());}
function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween;}}}
function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?dataPriv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block";}}
if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}
for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}
orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}else{display=undefined;}}
if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{});}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){jQuery(elem).show();}else{anim.done(function(){jQuery(elem).hide();});}
anim.done(function(){var prop;dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0;}}}
}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display;}}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}
var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}
stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result);}
return result;}}
jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnotwhite);}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show()
.end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}
return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}
for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}
for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}
delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start();}else{jQuery.timers.pop();}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}
if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
elem.setAttribute(name,value+"");return value;}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false;}
elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}
return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle;}
return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
return(elem[name]=value);}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}
return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});var rclass=/[\t\r\n\f]/g;function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}
jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}
if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}
finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}
if(!arguments.length){return this.attr("class","");}
if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ");}}
finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value);}
if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}
return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}
}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}
if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while((elem=this[i++])){if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ");}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true;}}
if(!optionSet){elem.selectedIndex=-1;}
return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1);}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}
if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}
data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}
if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}
for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}
if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}
i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}
return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}
dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}
var location=window.location;var nonce=jQuery.now();var rquery=(/\?/);jQuery.parseJSON=function(data){return JSON.parse(data+"");};jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null;}
try{xml=(new window.DOMParser()).parseFromString(data,"text/xml");}catch(e){xml=undefined;}
if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;};var
rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}
return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}
return target;}
function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}
if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}
prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}
break;}}}}
if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}
return{state:"success",data:response};}
jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match==null?null:match;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]];}}else{jqXHR.always(map[jqXHR.status]);}}
return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}
done(0,finalText);return this;}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR;}
fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=(s.url+=(rquery.test(cacheURL)?"&":"?")+s.data);delete s.data;}
if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++;}}
if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}
if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+
(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort();}
strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(state===2){return jqXHR;}
if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return;}
state=2;if(timeoutTimer){window.clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}
modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}
if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();}});jQuery.expr.filters.hidden=function(elem){return!jQuery.expr.filters.visible(elem);};jQuery.expr.filters.visible=function(elem){return elem.offsetWidth>0||elem.offsetHeight>0||elem.getClientRects().length>0;};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}
if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}
if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
for(i in headers){xhr.setRequestHeader(i,headers[i]);}
callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}
callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+
"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}
if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null;}
if(typeof context==="boolean"){keepScripts=context;context=false;}
context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}
parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}
return jQuery.merge([],parsed.childNodes);};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off));url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}
return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;}
jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}
curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return;}
docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box;}
box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft};},position:function(){if(!this[0]){return;}
var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset();}
parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true);}
return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}
return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method];}
if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);},size:function(){return this.length;}});jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}
var
_jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;};if(!noGlobal){window.jQuery=window.$=jQuery;}
return jQuery;}));},{}],"bootstrap/button":[function(require,module,exports){var $=require("jquery");'use strict';var Button=function(element,options){this.$element=$(element)
this.options=$.extend({},Button.DEFAULTS,options)
this.isLoading=false}
Button.DEFAULTS={loadingText:'loading...'}
Button.prototype.setState=function(state){var d='bk-bs-disabled'
var $el=this.$element
var val=$el.is('input')?'val':'html'
var data=$el.data()
state=state+'Text'
if(!data.resetText)$el.data('resetText',$el[val]())
$el[val](data[state]||this.options[state])
setTimeout($.proxy(function(){if(state=='loadingText'){this.isLoading=true
$el.addClass(d).attr(d,d)}else if(this.isLoading){this.isLoading=false
$el.removeClass(d).removeAttr(d)}},this),0)}
Button.prototype.toggle=function(){var changed=true
var $parent=this.$element.closest('[data-bk-bs-toggle="buttons"]')
if($parent.length){var $input=this.$element.find('input')
if($input.prop('type')=='radio'){if($input.prop('checked')&&this.$element.hasClass('bk-bs-active'))changed=false
else $parent.find('.bk-bs-active').removeClass('bk-bs-active')}
if(changed)$input.prop('checked',!this.$element.hasClass('bk-bs-active')).trigger('change')}
if(changed)this.$element.toggleClass('bk-bs-active')}
var old=$.fn.button
$.fn.button=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bk-bs.button')
var options=typeof option=='object'&&option
if(!data)$this.data('bk-bs.button',(data=new Button(this,options)))
if(option=='toggle')data.toggle()
else if(option)data.setState(option)})}
$.fn.button.Constructor=Button
$.fn.button.noConflict=function(){$.fn.button=old
return this}
$(document).on('click.bk-bs.button.data-api','[data-bk-bs-toggle^=button]',function(e){var $btn=$(e.target)
if(!$btn.hasClass('bk-bs-btn'))$btn=$btn.closest('.bk-bs-btn')
$btn.button('toggle')
e.preventDefault()})},{"jquery":"jquery"}],"bootstrap/dropdown":[function(require,module,exports){var $=require("jquery");'use strict';var backdrop='.bk-bs-dropdown-backdrop'
var toggle='[data-bk-bs-toggle=dropdown]'
var Dropdown=function(element){$(element).on('click.bk-bs.dropdown',this.toggle)}
Dropdown.prototype.toggle=function(e){var $this=$(this)
if($this.is('.bk-bs-disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('bk-bs-open')
clearMenus()
if(!isActive){if('ontouchstart'in document.documentElement&&!$parent.closest('.bk-bs-navbar-nav').length){$('<div class="bk-bs-dropdown-backdrop"/>').insertAfter($(this)).on('click',clearMenus)}
var relatedTarget={relatedTarget:this}
$parent.trigger(e=$.Event('show.bk-bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$parent.toggleClass('bk-bs-open').trigger('shown.bk-bs.dropdown',relatedTarget)
$this.focus()}
return false}
Dropdown.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode))return
var $this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.bk-bs-disabled, :disabled'))return
var $parent=getParent($this)
var isActive=$parent.hasClass('bk-bs-open')
if(!isActive||(isActive&&e.keyCode==27)){if(e.which==27)$parent.find(toggle).focus()
return $this.click()}
var desc=' li:not(.bk-bs-divider):visible a'
var $items=$parent.find('[role=menu]'+desc+', [role=listbox]'+desc)
if(!$items.length)return
var index=$items.index($items.filter(':focus'))
if(e.keyCode==38&&index>0)index--
if(e.keyCode==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).focus()}
function clearMenus(e){$(backdrop).remove()
$(toggle).each(function(){var $parent=getParent($(this))
var relatedTarget={relatedTarget:this}
if(!$parent.hasClass('bk-bs-open'))return
$parent.trigger(e=$.Event('hide.bk-bs.dropdown',relatedTarget))
if(e.isDefaultPrevented())return
$parent.removeClass('bk-bs-open').trigger('hidden.bk-bs.dropdown',relatedTarget)})}
function getParent($this){var selector=$this.attr('data-bk-bs-target')
if(!selector){selector=$this.attr('href')
selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
var $parent=selector&&$(selector)
return $parent&&$parent.length?$parent:$this.parent()}
var old=$.fn.dropdown
$.fn.dropdown=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bk-bs.dropdown')
if(!data)$this.data('bk-bs.dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.dropdown.Constructor=Dropdown
$.fn.dropdown.noConflict=function(){$.fn.dropdown=old
return this}
$(document).on('click.bk-bs.dropdown.data-api',clearMenus).on('click.bk-bs.dropdown.data-api','.bk-bs-dropdown form',function(e){e.stopPropagation()}).on('click.bk-bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bk-bs.dropdown.data-api',toggle+', [role=menu], [role=listbox]',Dropdown.prototype.keydown)},{"jquery":"jquery"}],"bootstrap/tab":[function(require,module,exports){var $=require("jquery");'use strict';var Tab=function(element){this.element=$(element)}
Tab.prototype.show=function(){var $this=this.element
var $ul=$this.closest('ul:not(.bk-bs-dropdown-menu)')
var selector=$this.data('bk-bs-target')
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if($this.parent('li').hasClass('bk-bs-active'))return
var previous=$ul.find('.bk-bs-active:last a')[0]
var e=$.Event('show.bk-bs.tab',{relatedTarget:previous})
$this.trigger(e)
if(e.isDefaultPrevented())return
var $target=$(selector)
this.activate($this.parent('li'),$ul)
this.activate($target,$target.parent(),function(){$this.trigger({type:'shown.bk-bs.tab',relatedTarget:previous})})}
Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .bk-bs-active')
var transition=callback&&$.support.transition&&$active.hasClass('bk-bs-fade')
function next(){$active.removeClass('bk-bs-active').find('> .bk-bs-dropdown-menu > .bk-bs-active').removeClass('bk-bs-active')
element.addClass('bk-bs-active')
if(transition){element[0].offsetWidth
element.addClass('bk-bs-in')}else{element.removeClass('bk-bs-fade')}
if(element.parent('.bk-bs-dropdown-menu')){element.closest('li.bk-bs-dropdown').addClass('bk-bs-active')}
callback&&callback()}
transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next()
$active.removeClass('bk-bs-in')}
var old=$.fn.tab
$.fn.tab=function(option){return this.each(function(){var $this=$(this)
var data=$this.data('bk-bs.tab')
if(!data)$this.data('bk-bs.tab',(data=new Tab(this)))
if(typeof option=='string')data[option]()})}
$.fn.tab.Constructor=Tab
$.fn.tab.noConflict=function(){$.fn.tab=old
return this}
$(document).on('click.bk-bs.tab.data-api','[data-bk-bs-toggle="tab"], [data-bk-bs-toggle="pill"]',function(e){e.preventDefault()
$(this).tab('show')})},{"jquery":"jquery"}],"jqrangeslider/jQDateRangeSlider":[function(require,module,exports){var $=require("jquery");require("./jQRangeSlider");"use strict";module.exports=$.widget("ui.dateRangeSlider",$.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){$.ui.rangeSlider.prototype._create.apply(this);this.element.addClass("bk-ui-dateRangeSlider");},destroy:function(){this.element.removeClass("bk-ui-dateRangeSlider");$.ui.rangeSlider.prototype.destroy.apply(this);},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()};},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales});},_setOption:function(key,value){if((key==="defaultValues"||key==="bounds")&&typeof value!=="undefined"&&value!==null&&this._isValidDate(value.min)&&this._isValidDate(value.max)){$.ui.rangeSlider.prototype._setOption.apply(this,[key,{min:value.min.valueOf(),max:value.max.valueOf()}]);}else{$.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments));}},_handleType:function(){return"dateRangeSliderHandle";},option:function(key){if(key==="bounds"||key==="defaultValues"){var result=$.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(result.min),max:new Date(result.max)};}
return $.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments));},_defaultFormatter:function(value){var month=value.getMonth()+1,day=value.getDate();return""+value.getFullYear()+"-"+(month<10?"0"+month:month)+"-"+(day<10?"0"+day:day);},_getFormatter:function(){var formatter=this.options.formatter;if(this.options.formatter===false||this.options.formatter===null){formatter=this._defaultFormatter;}
return(function(formatter){return function(value){return formatter(new Date(value));}}(formatter));},values:function(min,max){var values=null;if(this._isValidDate(min)&&this._isValidDate(max))
{values=$.ui.rangeSlider.prototype.values.apply(this,[min.valueOf(),max.valueOf()]);}else{values=$.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments));}
return{min:new Date(values.min),max:new Date(values.max)};},min:function(min){if(this._isValidDate(min)){return new Date($.ui.rangeSlider.prototype.min.apply(this,[min.valueOf()]));}
return new Date($.ui.rangeSlider.prototype.min.apply(this));},max:function(max){if(this._isValidDate(max)){return new Date($.ui.rangeSlider.prototype.max.apply(this,[max.valueOf()]));}
return new Date($.ui.rangeSlider.prototype.max.apply(this));},bounds:function(min,max){var result;if(this._isValidDate(min)&&this._isValidDate(max)){result=$.ui.rangeSlider.prototype.bounds.apply(this,[min.valueOf(),max.valueOf()]);}else{result=$.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments));}
return{min:new Date(result.min),max:new Date(result.max)};},_isValidDate:function(value){return typeof value!=="undefined"&&value instanceof Date;},_toArray:function(argsObject){return Array.prototype.slice.call(argsObject);}});},{"./jQRangeSlider":"jqrangeslider/jQRangeSlider","jquery":"jquery"}],"jqrangeslider/jQRangeSlider":[function(require,module,exports){var $=require("jquery");require("jquery-ui/core");require("jquery-ui/widget");require("jquery-ui/mouse");require("jquery-mousewheel");"use strict";module.exports=$.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:true,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:false,max:false},step:false,scales:false,enabled:true,symmetricPositionning:false},_values:null,_valuesChanged:false,_initialized:false,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:false,max:false},changed:{min:false,max:false},ruler:null,_create:function(){this._setDefaultValues();this.labels={left:null,right:null,leftDisplayed:true,rightDisplayed:true};this.arrows={left:null,right:null};this.changing={min:false,max:false};this.changed={min:false,max:false};this._createElements();this._bindResize();setTimeout($.proxy(this.resize,this),1);setTimeout($.proxy(this._initValues,this),1);},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max};},_bindResize:function(){var that=this;this._resizeProxy=function(e){that.resize(e);};$(window).resize(this._resizeProxy);},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(true)+this.container.width());this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(true)+this.innerBar.width());},_initValues:function(){this._initialized=true;this.values(this._values.min,this._values.max);},_setOption:function(key,value){this._setWheelOption(key,value);this._setArrowsOption(key,value);this._setLabelsOption(key,value);this._setLabelsDurations(key,value);this._setFormatterOption(key,value);this._setBoundsOption(key,value);this._setRangeOption(key,value);this._setStepOption(key,value);this._setScalesOption(key,value);this._setEnabledOption(key,value);this._setPositionningOption(key,value);},_validProperty:function(object,name,defaultValue){if(object===null||typeof object[name]==="undefined"){return defaultValue;}
return object[name];},_setStepOption:function(key,value){if(key==="step"){this.options.step=value;this._leftHandle("option","step",value);this._rightHandle("option","step",value);this._changed(true);}},_setScalesOption:function(key,value){if(key==="scales"){if(value===false||value===null){this.options.scales=false;this._destroyRuler();}else if(value instanceof Array){this.options.scales=value;this._updateRuler();}}},_setRangeOption:function(key,value){if(key==="range"){this._bar("option","range",value);this.options.range=this._bar("option","range");this._changed(true);}},_setBoundsOption:function(key,value){if(key==="bounds"&&typeof value.min!=="undefined"&&typeof value.max!=="undefined"){this.bounds(value.min,value.max);}},_setWheelOption:function(key,value){if(key==="wheelMode"||key==="wheelSpeed"){this._bar("option",key,value);this.options[key]=this._bar("option",key);}},_setLabelsOption:function(key,value){if(key==="valueLabels"){if(value!=="hide"&&value!=="show"&&value!=="change"){return;}
this.options.valueLabels=value;if(value!=="hide"){this._createLabels();this._leftLabel("update");this._rightLabel("update");}else{this._destroyLabels();}}},_setFormatterOption:function(key,value){if(key==="formatter"&&value!==null&&typeof value==="function"){if(this.options.valueLabels!=="hide"){this._leftLabel("option","formatter",value);this.options.formatter=this._rightLabel("option","formatter",value);}}},_setArrowsOption:function(key,value){if(key==="arrows"&&(value===true||value===false)&&value!==this.options.arrows){if(value===true){this.element.removeClass("bk-ui-rangeSlider-noArrow").addClass("bk-ui-rangeSlider-withArrows");this.arrows.left.css("display","block");this.arrows.right.css("display","block");this.options.arrows=true;}else if(value===false){this.element.addClass("bk-ui-rangeSlider-noArrow").removeClass("bk-ui-rangeSlider-withArrows");this.arrows.left.css("display","none");this.arrows.right.css("display","none");this.options.arrows=false;}
this._initWidth();}},_setLabelsDurations:function(key,value){if(key==="durationIn"||key==="durationOut"||key==="delayOut"){if(parseInt(value,10)!==value)return;if(this.labels.left!==null){this._leftLabel("option",key,value);}
if(this.labels.right!==null){this._rightLabel("option",key,value);}
this.options[key]=value;}},_setEnabledOption:function(key,value){if(key==="enabled"){this.toggle(value);}},_setPositionningOption:function(key,value){if(key==="symmetricPositionning"){this._rightHandle("option",key,value);this.options[key]=this._leftHandle("option",key,value);}},_createElements:function(){if(this.element.css("position")!=="absolute"){this.element.css("position","relative");}
this.element.addClass("bk-ui-rangeSlider");this.container=$("<div class='bk-ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element);this.innerBar=$("<div class='bk-ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0);this._createHandles();this._createBar();this.container.prepend(this.innerBar);this._createArrows();if(this.options.valueLabels!=="hide"){this._createLabels();}else{this._destroyLabels();}
this._updateRuler();if(!this.options.enabled)this._toggle(this.options.enabled);},_createHandle:function(options){return $("<div />")
[this._handleType()](options).bind("sliderDrag",$.proxy(this._changing,this)).bind("stop",$.proxy(this._changed,this));},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:true,bounds:this.options.bounds,value:this._values.min,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container);this.rightHandle=this._createHandle({isLeft:false,bounds:this.options.bounds,value:this._values.max,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container);},_createBar:function(){this.bar=$("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",$.proxy(this._changing,this)).bind("stop",$.proxy(this._changed,this));this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed});this.options.range=this._bar("option","range");this.options.wheelMode=this._bar("option","wheelMode");this.options.wheelSpeed=this._bar("option","wheelSpeed");},_createArrows:function(){this.arrows.left=this._createArrow("left");this.arrows.right=this._createArrow("right");if(!this.options.arrows){this.arrows.left.css("display","none");this.arrows.right.css("display","none");this.element.addClass("bk-ui-rangeSlider-noArrow");}else{this.element.addClass("bk-ui-rangeSlider-withArrows");}},_createArrow:function(whichOne){var arrow=$("<div class='bk-ui-rangeSlider-arrow' />").append("<div class='bk-ui-rangeSlider-arrow-inner' />").addClass("bk-ui-rangeSlider-"+whichOne+"Arrow").css("position","absolute").css(whichOne,0).appendTo(this.element),target;if(whichOne==="right"){target=$.proxy(this._scrollRightClick,this);}else{target=$.proxy(this._scrollLeftClick,this);}
arrow.bind("mousedown touchstart",target);return arrow;},_proxy:function(element,type,args){var array=Array.prototype.slice.call(args);if(element&&element[type]){return element[type].apply(element,array);}
return null;},_handleType:function(){return"rangeSliderHandle";},_barType:function(){return"rangeSliderBar";},_bar:function(){return this._proxy(this.bar,this._barType(),arguments);},_labelType:function(){return"rangeSliderLabel";},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments);},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments);},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments);},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments);},_getValue:function(position,handle){if(handle===this.rightHandle){position=position-handle.outerWidth();}
return position*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-handle.outerWidth(true))+this.options.bounds.min;},_trigger:function(eventName){var that=this;setTimeout(function(){that.element.trigger(eventName,{label:that.element,values:that.values()});},1);},_changing:function(){if(this._updateValues()){this._trigger("valuesChanging");this._valuesChanged=true;}},_deactivateLabels:function(){if(this.options.valueLabels==="change"){this._leftLabel("option","show","hide");this._rightLabel("option","show","hide");}},_reactivateLabels:function(){if(this.options.valueLabels==="change"){this._leftLabel("option","show","change");this._rightLabel("option","show","change");}},_changed:function(isAutomatic){if(isAutomatic===true){this._deactivateLabels();}
if(this._updateValues()||this._valuesChanged){this._trigger("valuesChanged");if(isAutomatic!==true){this._trigger("userValuesChanged");}
this._valuesChanged=false;}
if(isAutomatic===true){this._reactivateLabels();}},_updateValues:function(){var left=this._leftHandle("value"),right=this._rightHandle("value"),min=this._min(left,right),max=this._max(left,right),changing=(min!==this._values.min||max!==this._values.max);this._values.min=this._min(left,right);this._values.max=this._max(left,right);return changing;},_min:function(value1,value2){return Math.min(value1,value2);},_max:function(value1,value2){return Math.max(value1,value2);},_createLabel:function(label,handle){var params;if(label===null){params=this._getLabelConstructorParameters(label,handle);label=$("<div />").appendTo(this.element)
[this._labelType()](params);}else{params=this._getLabelRefreshParameters(label,handle);label[this._labelType()](params);}
return label;},_getLabelConstructorParameters:function(label,handle){return{handle:handle,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut};},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut};},_getFormatter:function(){if(this.options.formatter===false||this.options.formatter===null){return this._defaultFormatter;}
return this.options.formatter;},_defaultFormatter:function(value){return Math.round(value);},_destroyLabel:function(label){if(label!==null){label[this._labelType()]("destroy");label.remove();label=null;}
return label;},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle);this.labels.right=this._createLabel(this.labels.right,this.rightHandle);this._leftLabel("pair",this.labels.right);},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left);this.labels.right=this._destroyLabel(this.labels.right);},_stepRatio:function(){return this._leftHandle("stepRatio");},_scrollRightClick:function(e){if(!this.options.enabled)return false;e.preventDefault();this._bar("startScroll");this._bindStopScroll();this._continueScrolling("scrollRight",4*this._stepRatio(),1);},_continueScrolling:function(action,timeout,quantity,timesBeforeSpeedingUp){if(!this.options.enabled)return false;this._bar(action,quantity);timesBeforeSpeedingUp=timesBeforeSpeedingUp||5;timesBeforeSpeedingUp--;var that=this,minTimeout=16,maxQuantity=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){if(timesBeforeSpeedingUp===0){if(timeout>minTimeout){timeout=Math.max(minTimeout,timeout/1.5);}else{quantity=Math.min(maxQuantity,quantity*2);}
timesBeforeSpeedingUp=5;}
that._continueScrolling(action,timeout,quantity,timesBeforeSpeedingUp);},timeout);},_scrollLeftClick:function(e){if(!this.options.enabled)return false;e.preventDefault();this._bar("startScroll");this._bindStopScroll();this._continueScrolling("scrollLeft",4*this._stepRatio(),1);},_bindStopScroll:function(){var that=this;this._stopScrollHandle=function(e){e.preventDefault();that._stopScroll();};$(document).bind("mouseup touchend",this._stopScrollHandle);},_stopScroll:function(){$(document).unbind("mouseup touchend",this._stopScrollHandle);this._stopScrollHandle=null;this._bar("stopScroll");clearTimeout(this._scrollTimeout);},_createRuler:function(){this.ruler=$("<div class='bk-ui-rangeSlider-ruler' />").appendTo(this.innerBar);},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales});},_destroyRuler:function(){if(this.ruler!==null&&$.fn.ruler){this.ruler.ruler("destroy");this.ruler.remove();this.ruler=null;}},_updateRuler:function(){this._destroyRuler();if(this.options.scales===false||!$.fn.ruler){return;}
this._createRuler();this._setRulerParameters();},values:function(min,max){var val;if(typeof min!=="undefined"&&typeof max!=="undefined"){if(!this._initialized){this._values.min=min;this._values.max=max;return this._values;}
this._deactivateLabels();val=this._bar("values",min,max);this._changed(true);this._reactivateLabels();}else{val=this._bar("values",min,max);}
return val;},min:function(min){this._values.min=this.values(min,this._values.max).min;return this._values.min;},max:function(max){this._values.max=this.values(this._values.min,max).max;return this._values.max;},bounds:function(min,max){if(this._isValidValue(min)&&this._isValidValue(max)&&min<max){this._setBounds(min,max);this._updateRuler();this._changed(true);}
return this.options.bounds;},_isValidValue:function(value){return typeof value!=="undefined"&&parseFloat(value)===value;},_setBounds:function(min,max){this.options.bounds={min:min,max:max};this._leftHandle("option","bounds",this.options.bounds);this._rightHandle("option","bounds",this.options.bounds);this._bar("option","bounds",this.options.bounds);},zoomIn:function(quantity){this._bar("zoomIn",quantity)},zoomOut:function(quantity){this._bar("zoomOut",quantity);},scrollLeft:function(quantity){this._bar("startScroll");this._bar("scrollLeft",quantity);this._bar("stopScroll");},scrollRight:function(quantity){this._bar("startScroll");this._bar("scrollRight",quantity);this._bar("stopScroll");},resize:function(){this._initWidth();this._leftHandle("update");this._rightHandle("update");this._bar("update");},enable:function(){this.toggle(true);},disable:function(){this.toggle(false);},toggle:function(enabled){if(enabled===undefined)enabled=!this.options.enabled;if(this.options.enabled!==enabled){this._toggle(enabled);}},_toggle:function(enabled){this.options.enabled=enabled;this.element.toggleClass("bk-ui-rangeSlider-disabled",!enabled);var action=enabled?"enable":"disable";this._bar(action);this._leftHandle(action);this._rightHandle(action);this._leftLabel(action);this._rightLabel(action);},destroy:function(){this.element.removeClass("bk-ui-rangeSlider-withArrows bk-ui-rangeSlider-noArrow bk-ui-rangeSlider-disabled");this._destroyWidgets();this._destroyElements();this.element.removeClass("bk-ui-rangeSlider");this.options=null;$(window).unbind("resize",this._resizeProxy);this._resizeProxy=null;this._bindResize=null;$.Widget.prototype.destroy.apply(this,arguments);},_destroyWidget:function(name){this["_"+name]("destroy");this[name].remove();this[name]=null;},_destroyWidgets:function(){this._destroyWidget("bar");this._destroyWidget("leftHandle");this._destroyWidget("rightHandle");this._destroyRuler();this._destroyLabels();},_destroyElements:function(){this.container.remove();this.container=null;this.innerBar.remove();this.innerBar=null;this.arrows.left.remove();this.arrows.right.remove();this.arrows=null;}});},{"jquery":"jquery","jquery-mousewheel":"jquery-mousewheel","jquery-ui/core":"jquery-ui/core","jquery-ui/mouse":"jquery-ui/mouse","jquery-ui/widget":"jquery-ui/widget"}],"jquery_event_drag":[function(require,module,exports){/*!
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
var $=require("jquery");$.fn.drag=function(str,arg,opts){var type=typeof str=="string"?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;if(type.indexOf("drag")!==0)
type="drag"+type;opts=(str==fn?arg:opts)||{};return fn?this.bind(type,opts,fn):this.trigger(type);};var $event=$.event,$special=$event.special,drag=$special.drag={defaults:{which:1,distance:0,not:':input',handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(obj){var data=$.data(this,drag.datakey),opts=obj.data||{};data.related+=1;$.each(drag.defaults,function(key,def){if(opts[key]!==undefined)
data[key]=opts[key];});},remove:function(){$.data(this,drag.datakey).related-=1;},setup:function(){if($.data(this,drag.datakey))
return;var data=$.extend({related:0},drag.defaults);$.data(this,drag.datakey,data);$event.add(this,"touchstart mousedown",drag.init,data);if(this.attachEvent)
this.attachEvent("ondragstart",drag.dontstart);},teardown:function(){var data=$.data(this,drag.datakey)||{};if(data.related)
return;$.removeData(this,drag.datakey);$event.remove(this,"touchstart mousedown",drag.init);drag.textselect(true);if(this.detachEvent)
this.detachEvent("ondragstart",drag.dontstart);},init:function(event){if(drag.touched)
return;var dd=event.data,results;if(event.which!=0&&dd.which>0&&event.which!=dd.which)
return;if($(event.target).is(dd.not))
return;if(dd.handle&&!$(event.target).closest(dd.handle,event.currentTarget).length)
return;drag.touched=event.type=='touchstart'?this:null;dd.propagates=1;dd.mousedown=this;dd.interactions=[drag.interaction(this,dd)];dd.target=event.target;dd.pageX=event.pageX;dd.pageY=event.pageY;dd.dragging=null;results=drag.hijack(event,"draginit",dd);if(!dd.propagates)
return;results=drag.flatten(results);if(results&&results.length){dd.interactions=[];$.each(results,function(){dd.interactions.push(drag.interaction(this,dd));});}
dd.propagates=dd.interactions.length;if(dd.drop!==false&&$special.drop)
$special.drop.handler(event,dd);drag.textselect(false);if(drag.touched)
$event.add(drag.touched,"touchmove touchend",drag.handler,dd);else
$event.add(document,"mousemove mouseup",drag.handler,dd);if(!drag.touched||dd.live)
return false;},interaction:function(elem,dd){var offset=$(elem)[dd.relative?"position":"offset"]()||{top:0,left:0};return{drag:elem,callback:new drag.callback(),droppable:[],offset:offset};},handler:function(event){var dd=event.data;switch(event.type){case!dd.dragging&&'touchmove':event.preventDefault();case!dd.dragging&&'mousemove':if(Math.pow(event.pageX-dd.pageX,2)+Math.pow(event.pageY-dd.pageY,2)<Math.pow(dd.distance,2))
break;event.target=dd.target;drag.hijack(event,"dragstart",dd);if(dd.propagates)
dd.dragging=true;case'touchmove':event.preventDefault();case'mousemove':if(dd.dragging){drag.hijack(event,"drag",dd);if(dd.propagates){if(dd.drop!==false&&$special.drop)
$special.drop.handler(event,dd);break;}
event.type="mouseup";}
case'touchend':case'mouseup':default:if(drag.touched)
$event.remove(drag.touched,"touchmove touchend",drag.handler);else
$event.remove(document,"mousemove mouseup",drag.handler);if(dd.dragging){if(dd.drop!==false&&$special.drop)
$special.drop.handler(event,dd);drag.hijack(event,"dragend",dd);}
drag.textselect(true);if(dd.click===false&&dd.dragging)
$.data(dd.mousedown,"suppress.click",new Date().getTime()+5);dd.dragging=drag.touched=false;break;}},hijack:function(event,type,dd,x,elem){if(!dd)
return;var orig={event:event.originalEvent,type:event.type},mode=type.indexOf("drop")?"drag":"drop",result,i=x||0,ia,$elems,callback,len=!isNaN(x)?x:dd.interactions.length;event.type=type;event.originalEvent=null;dd.results=[];do if(ia=dd.interactions[i]){if(type!=="dragend"&&ia.cancelled)
continue;callback=drag.properties(event,dd,ia);ia.results=[];$(elem||ia[mode]||dd.droppable).each(function(p,subject){callback.target=subject;event.isPropagationStopped=function(){return false;};result=subject?$event.dispatch.call(subject,event,callback):null;if(result===false){if(mode=="drag"){ia.cancelled=true;dd.propagates-=1;}
if(type=="drop"){ia[mode][p]=null;}}
else if(type=="dropinit")
ia.droppable.push(drag.element(result)||subject);if(type=="dragstart")
ia.proxy=$(drag.element(result)||ia.drag)[0];ia.results.push(result);delete event.result;if(type!=="dropinit")
return result;});dd.results[i]=drag.flatten(ia.results);if(type=="dropinit")
ia.droppable=drag.flatten(ia.droppable);if(type=="dragstart"&&!ia.cancelled)
callback.update();}
while(++i<len)
event.type=orig.type;event.originalEvent=orig.event;return drag.flatten(dd.results);},properties:function(event,dd,ia){var obj=ia.callback;obj.drag=ia.drag;obj.proxy=ia.proxy||ia.drag;obj.startX=dd.pageX;obj.startY=dd.pageY;obj.deltaX=event.pageX-dd.pageX;obj.deltaY=event.pageY-dd.pageY;obj.originalX=ia.offset.left;obj.originalY=ia.offset.top;obj.offsetX=obj.originalX+obj.deltaX;obj.offsetY=obj.originalY+obj.deltaY;obj.drop=drag.flatten((ia.drop||[]).slice());obj.available=drag.flatten((ia.droppable||[]).slice());return obj;},element:function(arg){if(arg&&(arg.jquery||arg.nodeType==1))
return arg;},flatten:function(arr){return $.map(arr,function(member){return member&&member.jquery?$.makeArray(member):member&&member.length?drag.flatten(member):member;});},textselect:function(bool){$(document)[bool?"unbind":"bind"]("selectstart",drag.dontstart).css("MozUserSelect",bool?"":"none");document.unselectable=bool?"off":"on";},dontstart:function(){return false;},callback:function(){}};drag.callback.prototype={update:function(){if($special.drop&&this.available.length)
$.each(this.available,function(i){$special.drop.locate(this,i);});}};var $dispatch=$event.dispatch;$event.dispatch=function(event){if($.data(this,"suppress."+event.type)-new Date().getTime()>0){$.removeData(this,"suppress."+event.type);return;}
return $dispatch.apply(this,arguments);};var touchHooks=$event.fixHooks.touchstart=$event.fixHooks.touchmove=$event.fixHooks.touchend=$event.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(event,orig){if(orig){var touched=(orig.touches&&orig.touches[0])||(orig.changedTouches&&orig.changedTouches[0])||null;if(touched)
$.each(touchHooks.props,function(i,prop){event[prop]=touched[prop];});}
return event;}};$special.draginit=$special.dragstart=$special.dragend=drag;},{"jquery":"jquery"}],"jquery_event_drop":[function(require,module,exports){/*!
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
var $=require("jquery");var $1=require("jquery_event_drag");$.fn.drop=function(str,arg,opts){var type=typeof str=="string"?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;if(type.indexOf("drop")!==0)
type="drop"+type;opts=(str==fn?arg:opts)||{};return fn?this.bind(type,opts,fn):this.trigger(type);};$.drop=function(opts){opts=opts||{};drop.multi=opts.multi===true?Infinity:opts.multi===false?1:!isNaN(opts.multi)?opts.multi:drop.multi;drop.delay=opts.delay||drop.delay;drop.tolerance=$.isFunction(opts.tolerance)?opts.tolerance:opts.tolerance===null?null:drop.tolerance;drop.mode=opts.mode||drop.mode||'intersect';};var $event=$.event,$special=$event.special,drop=$.event.special.drop={multi:1,delay:20,mode:'overlap',targets:[],datakey:"dropdata",noBubble:true,add:function(obj){var data=$.data(this,drop.datakey);data.related+=1;},remove:function(){$.data(this,drop.datakey).related-=1;},setup:function(){if($.data(this,drop.datakey))
return;var data={related:0,active:[],anyactive:0,winner:0,location:{}};$.data(this,drop.datakey,data);drop.targets.push(this);},teardown:function(){var data=$.data(this,drop.datakey)||{};if(data.related)
return;$.removeData(this,drop.datakey);var element=this;drop.targets=$.grep(drop.targets,function(target){return(target!==element);});},handler:function(event,dd){var results,$targets;if(!dd)
return;switch(event.type){case'mousedown':case'touchstart':$targets=$(drop.targets);if(typeof dd.drop=="string")
$targets=$targets.filter(dd.drop);$targets.each(function(){var data=$.data(this,drop.datakey);data.active=[];data.anyactive=0;data.winner=0;});dd.droppable=$targets;$special.drag.hijack(event,"dropinit",dd);break;case'mousemove':case'touchmove':drop.event=event;if(!drop.timer)
drop.tolerate(dd);break;case'mouseup':case'touchend':drop.timer=clearTimeout(drop.timer);if(dd.propagates){$special.drag.hijack(event,"drop",dd);$special.drag.hijack(event,"dropend",dd);}
break;}},locate:function(elem,index){var data=$.data(elem,drop.datakey),$elem=$(elem),posi=$elem.offset()||{},height=$elem.outerHeight(),width=$elem.outerWidth(),location={elem:elem,width:width,height:height,top:posi.top,left:posi.left,right:posi.left+width,bottom:posi.top+height};if(data){data.location=location;data.index=index;data.elem=elem;}
return location;},contains:function(target,test){return((test[0]||test.left)>=target.left&&(test[0]||test.right)<=target.right&&(test[1]||test.top)>=target.top&&(test[1]||test.bottom)<=target.bottom);},modes:{'intersect':function(event,proxy,target){return this.contains(target,[event.pageX,event.pageY])?1e9:this.modes.overlap.apply(this,arguments);},'overlap':function(event,proxy,target){return Math.max(0,Math.min(target.bottom,proxy.bottom)-Math.max(target.top,proxy.top))*Math.max(0,Math.min(target.right,proxy.right)-Math.max(target.left,proxy.left));},'fit':function(event,proxy,target){return this.contains(target,proxy)?1:0;},'middle':function(event,proxy,target){return this.contains(target,[proxy.left+proxy.width*.5,proxy.top+proxy.height*.5])?1:0;}},sort:function(a,b){return(b.winner-a.winner)||(a.index-b.index);},tolerate:function(dd){var i,drp,drg,data,arr,len,elem,x=0,ia,end=dd.interactions.length,xy=[drop.event.pageX,drop.event.pageY],tolerance=drop.tolerance||drop.modes[drop.mode];do if(ia=dd.interactions[x]){if(!ia)
return;ia.drop=[];arr=[];len=ia.droppable.length;if(tolerance)
drg=drop.locate(ia.proxy);i=0;do if(elem=ia.droppable[i]){data=$.data(elem,drop.datakey);drp=data.location;if(!drp)continue;data.winner=tolerance?tolerance.call(drop,drop.event,drg,drp)
:drop.contains(drp,xy)?1:0;arr.push(data);}while(++i<len);arr.sort(drop.sort);i=0;do if(data=arr[i]){if(data.winner&&ia.drop.length<drop.multi){if(!data.active[x]&&!data.anyactive){if($special.drag.hijack(drop.event,"dropstart",dd,x,data.elem)[0]!==false){data.active[x]=1;data.anyactive+=1;}
else
data.winner=0;}
if(data.winner)
ia.drop.push(data.elem);}
else if(data.active[x]&&data.anyactive==1){$special.drag.hijack(drop.event,"dropend",dd,x,data.elem);data.active[x]=0;data.anyactive-=1;}}while(++i<len);}while(++x<end)
if(drop.last&&xy[0]==drop.last.pageX&&xy[1]==drop.last.pageY)
delete drop.timer;else
drop.timer=setTimeout(function(){drop.tolerate(dd);},drop.delay);drop.last=drop.event;}};$special.dropinit=$special.dropstart=$special.dropend=drop;},{"jquery":"jquery","jquery_event_drag":"jquery_event_drag"}],"slick_grid/plugins/slick.checkboxselectcolumn":[function(require,module,exports){var $=require("jquery");var Slick=require("../slick.core");function CheckboxSelectColumn(options){var _grid;var _self=this;var _handler=new Slick.EventHandler();var _selectedRowsLookup={};var _defaults={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30};var _options=$.extend(true,{},_defaults,options);function init(grid){_grid=grid;_handler.subscribe(_grid.onSelectedRowsChanged,handleSelectedRowsChanged).subscribe(_grid.onClick,handleClick).subscribe(_grid.onHeaderClick,handleHeaderClick).subscribe(_grid.onKeyDown,handleKeyDown);}
function destroy(){_handler.unsubscribeAll();}
function handleSelectedRowsChanged(e,args){var selectedRows=_grid.getSelectedRows();var lookup={},row,i;for(i=0;i<selectedRows.length;i++){row=selectedRows[i];lookup[row]=true;if(lookup[row]!==_selectedRowsLookup[row]){_grid.invalidateRow(row);delete _selectedRowsLookup[row];}}
for(i in _selectedRowsLookup){_grid.invalidateRow(i);}
_selectedRowsLookup=lookup;_grid.render();if(selectedRows.length&&selectedRows.length==_grid.getDataLength()){_grid.updateColumnHeader(_options.columnId,"<input type='checkbox' checked='checked'>",_options.toolTip);}else{_grid.updateColumnHeader(_options.columnId,"<input type='checkbox'>",_options.toolTip);}}
function handleKeyDown(e,args){if(e.which==32){if(_grid.getColumns()[args.cell].id===_options.columnId){if(!_grid.getEditorLock().isActive()||_grid.getEditorLock().commitCurrentEdit()){toggleRowSelection(args.row);}
e.preventDefault();e.stopImmediatePropagation();}}}
function handleClick(e,args){if(_grid.getColumns()[args.cell].id===_options.columnId&&$(e.target).is(":checkbox")){if(_grid.getEditorLock().isActive()&&!_grid.getEditorLock().commitCurrentEdit()){e.preventDefault();e.stopImmediatePropagation();return;}
toggleRowSelection(args.row);e.stopPropagation();e.stopImmediatePropagation();}}
function toggleRowSelection(row){if(_selectedRowsLookup[row]){_grid.setSelectedRows($.grep(_grid.getSelectedRows(),function(n){return n!=row}));}else{_grid.setSelectedRows(_grid.getSelectedRows().concat(row));}}
function handleHeaderClick(e,args){if(args.column.id==_options.columnId&&$(e.target).is(":checkbox")){if(_grid.getEditorLock().isActive()&&!_grid.getEditorLock().commitCurrentEdit()){e.preventDefault();e.stopImmediatePropagation();return;}
if($(e.target).is(":checked")){var rows=[];for(var i=0;i<_grid.getDataLength();i++){rows.push(i);}
_grid.setSelectedRows(rows);}else{_grid.setSelectedRows([]);}
e.stopPropagation();e.stopImmediatePropagation();}}
function getColumnDefinition(){return{id:_options.columnId,name:"<input type='checkbox'>",toolTip:_options.toolTip,field:"sel",width:_options.width,resizable:false,sortable:false,cssClass:_options.cssClass,formatter:checkboxSelectionFormatter};}
function checkboxSelectionFormatter(row,cell,value,columnDef,dataContext){if(dataContext){return _selectedRowsLookup[row]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>";}
return null;}
$.extend(this,{"init":init,"destroy":destroy,"getColumnDefinition":getColumnDefinition});}
module.exports=CheckboxSelectColumn;},{"../slick.core":"slick_grid/slick.core","jquery":"jquery"}],"slick_grid/plugins/slick.rowselectionmodel":[function(require,module,exports){var $=require("jquery");var Slick=require("../slick.core");function RowSelectionModel(options){var _grid;var _ranges=[];var _self=this;var _handler=new Slick.EventHandler();var _inHandler;var _options;var _defaults={selectActiveRow:true};function init(grid){_options=$.extend(true,{},_defaults,options);_grid=grid;_handler.subscribe(_grid.onActiveCellChanged,wrapHandler(handleActiveCellChange));_handler.subscribe(_grid.onKeyDown,wrapHandler(handleKeyDown));_handler.subscribe(_grid.onClick,wrapHandler(handleClick));}
function destroy(){_handler.unsubscribeAll();}
function wrapHandler(handler){return function(){if(!_inHandler){_inHandler=true;handler.apply(this,arguments);_inHandler=false;}};}
function rangesToRows(ranges){var rows=[];for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){rows.push(j);}}
return rows;}
function rowsToRanges(rows){var ranges=[];var lastCell=_grid.getColumns().length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));}
return ranges;}
function getRowsRange(from,to){var i,rows=[];for(i=from;i<=to;i++){rows.push(i);}
for(i=to;i<from;i++){rows.push(i);}
return rows;}
function getSelectedRows(){return rangesToRows(_ranges);}
function setSelectedRows(rows){setSelectedRanges(rowsToRanges(rows));}
function setSelectedRanges(ranges){_ranges=ranges;_self.onSelectedRangesChanged.notify(_ranges);}
function getSelectedRanges(){return _ranges;}
function handleActiveCellChange(e,data){if(_options.selectActiveRow&&data.row!=null){setSelectedRanges([new Slick.Range(data.row,0,data.row,_grid.getColumns().length-1)]);}}
function handleKeyDown(e){var activeRow=_grid.getActiveCell();if(activeRow&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which==38||e.which==40)){var selectedRows=getSelectedRows();selectedRows.sort(function(x,y){return x-y});if(!selectedRows.length){selectedRows=[activeRow.row];}
var top=selectedRows[0];var bottom=selectedRows[selectedRows.length-1];var active;if(e.which==40){active=activeRow.row<bottom||top==bottom?++bottom:++top;}else{active=activeRow.row<bottom?--bottom:--top;}
if(active>=0&&active<_grid.getDataLength()){_grid.scrollRowIntoView(active);_ranges=rowsToRanges(getRowsRange(top,bottom));setSelectedRanges(_ranges);}
e.preventDefault();e.stopPropagation();}}
function handleClick(e){var cell=_grid.getCellFromEvent(e);if(!cell||!_grid.canCellBeActive(cell.row,cell.cell)){return false;}
if(!_grid.getOptions().multiSelect||(!e.ctrlKey&&!e.shiftKey&&!e.metaKey)){return false;}
var selection=rangesToRows(_ranges);var idx=$.inArray(cell.row,selection);if(idx===-1&&(e.ctrlKey||e.metaKey)){selection.push(cell.row);_grid.setActiveCell(cell.row,cell.cell);}else if(idx!==-1&&(e.ctrlKey||e.metaKey)){selection=$.grep(selection,function(o,i){return(o!==cell.row);});_grid.setActiveCell(cell.row,cell.cell);}else if(selection.length&&e.shiftKey){var last=selection.pop();var from=Math.min(cell.row,last);var to=Math.max(cell.row,last);selection=[];for(var i=from;i<=to;i++){if(i!==last){selection.push(i);}}
selection.push(last);_grid.setActiveCell(cell.row,cell.cell);}
_ranges=rowsToRanges(selection);setSelectedRanges(_ranges);e.stopImmediatePropagation();return true;}
$.extend(this,{"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getSelectedRanges":getSelectedRanges,"setSelectedRanges":setSelectedRanges,"init":init,"destroy":destroy,"onSelectedRangesChanged":new Slick.Event()});}
module.exports=RowSelectionModel;},{"../slick.core":"slick_grid/slick.core","jquery":"jquery"}],"slick_grid/slick.core":[function(require,module,exports){var $=require("jquery");var Slick={Event:Event,EventData:EventData,EventHandler:EventHandler,Range:Range,NonDataRow:NonDataItem,Group:Group,GroupTotals:GroupTotals,EditorLock:EditorLock,GlobalEditorLock:new EditorLock()};function EventData(){var isPropagationStopped=false;var isImmediatePropagationStopped=false;this.stopPropagation=function(){isPropagationStopped=true;};this.isPropagationStopped=function(){return isPropagationStopped;};this.stopImmediatePropagation=function(){isImmediatePropagationStopped=true;};this.isImmediatePropagationStopped=function(){return isImmediatePropagationStopped;}}
function Event(){var handlers=[];this.subscribe=function(fn){handlers.push(fn);};this.unsubscribe=function(fn){for(var i=handlers.length-1;i>=0;i--){if(handlers[i]===fn){handlers.splice(i,1);}}};this.notify=function(args,e,scope){e=e||new EventData();scope=scope||this;var returnValue;for(var i=0;i<handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());i++){returnValue=handlers[i].call(scope,e,args);}
return returnValue;};}
function EventHandler(){var handlers=[];this.subscribe=function(event,handler){handlers.push({event:event,handler:handler});event.subscribe(handler);return this;};this.unsubscribe=function(event,handler){var i=handlers.length;while(i--){if(handlers[i].event===event&&handlers[i].handler===handler){handlers.splice(i,1);event.unsubscribe(handler);return;}}
return this;};this.unsubscribeAll=function(){var i=handlers.length;while(i--){handlers[i].event.unsubscribe(handlers[i].handler);}
handlers=[];return this;}}
function Range(fromRow,fromCell,toRow,toCell){if(toRow===undefined&&toCell===undefined){toRow=fromRow;toCell=fromCell;}
this.fromRow=Math.min(fromRow,toRow);this.fromCell=Math.min(fromCell,toCell);this.toRow=Math.max(fromRow,toRow);this.toCell=Math.max(fromCell,toCell);this.isSingleRow=function(){return this.fromRow==this.toRow;};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell;};this.contains=function(row,cell){return row>=this.fromRow&&row<=this.toRow&&cell>=this.fromCell&&cell<=this.toCell;};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")";}
else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")";}}}
function NonDataItem(){this.__nonDataRow=true;}
function Group(){this.__group=true;this.level=0;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null;this.rows=[];this.groups=null;this.groupingKey=null;}
Group.prototype=new NonDataItem();Group.prototype.equals=function(group){return this.value===group.value&&this.count===group.count&&this.collapsed===group.collapsed&&this.title===group.title;};function GroupTotals(){this.__groupTotals=true;this.group=null;this.initialized=false;}
GroupTotals.prototype=new NonDataItem();function EditorLock(){var activeEditController=null;this.isActive=function(editController){return(editController?activeEditController===editController:activeEditController!==null);};this.activate=function(editController){if(editController===activeEditController){return;}
if(activeEditController!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";}
if(!editController.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";}
if(!editController.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";}
activeEditController=editController;};this.deactivate=function(editController){if(activeEditController!==editController){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";}
activeEditController=null;};this.commitCurrentEdit=function(){return(activeEditController?activeEditController.commitCurrentEdit():true);};this.cancelCurrentEdit=function cancelCurrentEdit(){return(activeEditController?activeEditController.cancelCurrentEdit():true);};}
module.exports=Slick;},{"jquery":"jquery"}],"slick_grid/slick.grid":[function(require,module,exports){var $=require("jquery");var $1=require("jquery_event_drag");var $2=require("jquery_event_drop");var Slick=require("./slick.core");var scrollbarDimensions;var maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:false,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:50,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false,dataItemColumnValueExtractor:null,fullWidthRows:false,multiColumnSort:false,defaultFormatter:defaultFormatter,forceSyncScrolling:false,addNewRowCssClass:"new-row"};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null,defaultSortAsc:true,focusable:true,selectable:true};var th;var h;var ph;var n;var cj;var page=0;var offset=0;var vScrollDir=1;var initialized=false;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $focusSink,$focusSink2;var $headerScroller;var $headers;var $headerRow,$headerRowScroller,$headerRowSpacer;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var $boundAncestors;var stylesheet,columnCssRulesL,columnCssRulesR;var viewportH,viewportW;var canvasWidth;var viewportHasHScroll,viewportHasVScroll;var headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0;var absoluteColumnMinWidth;var tabbingDirection=1;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var lastRenderedScrollLeft=0;var prevScrollLeft=0;var scrollLeft=0;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumns=[];var columnPosLeft=[];var columnPosRight=[];var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;var rowNodeFromLastMouseWheelEvent;var zombieRowNodeFromLastMouseWheelEvent;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");}
maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);validateAndEnforceOptions();columnDefaults.width=options.defaultColumnWidth;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth){m.width=m.minWidth;}
if(m.maxWidth&&m.width>m.maxWidth){m.width=m.maxWidth;}}
if(options.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");}
editController={"commitCurrentEdit":commitCurrentEdit,"cancelCurrentEdit":cancelCurrentEdit};$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("bk-ui-widget");if(!/relative|absolute|fixed/.test($container.css("position"))){$container.css("position","relative");}
$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);$headerScroller=$("<div class='bk-slick-header bk-ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='bk-slick-header-columns' style='left:-1000px' />").appendTo($headerScroller);$headers.width(getHeadersWidth());$headerRowScroller=$("<div class='bk-slick-headerrow bk-ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='bk-slick-headerrow-columns' />").appendTo($headerRowScroller);$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller);$topPanelScroller=$("<div class='bk-slick-top-panel-scroller bk-ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='bk-slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide();}
if(!options.showHeaderRow){$headerRowScroller.hide();}
$viewport=$("<div class='bk-slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container);$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");$canvas=$("<div class='grid-canvas' />").appendTo($viewport);$focusSink2=$focusSink.clone().appendTo($container);if(!options.explicitInitialization){finishInitialization();}}
function finishInitialization(){if(!initialized){initialized=true;viewportW=parseFloat($.css($container[0],"width",true));measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea");});}
updateColumnCaches();createColumnHeaders();setupColumnSort();createCssRules();resizeCanvas();bindAncestorScrollEvents();$container.bind("resize.bk-slickgrid",resizeCanvas);$viewport
.bind("scroll",handleScroll);$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".bk-slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".bk-slick-header-column","mouseleave",handleHeaderMouseLeave);$headerRowScroller.bind("scroll",handleHeaderRowScroll);$focusSink.add($focusSink2).bind("keydown",handleKeyDown);$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".bk-slick-cell","mouseenter",handleMouseEnter).delegate(".bk-slick-cell","mouseleave",handleMouseLeave);if(navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)){$canvas.bind("mousewheel",handleMouseWheel);}}}
function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self);}
function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy();}
plugins.splice(i,1);break;}}}
function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy();}}
selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);}}
function getSelectionModel(){return selectionModel;}
function getCanvasNode(){return $canvas[0];}
function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim;}
function getHeadersWidth(){var headersWidth=0;for(var i=0,ii=columns.length;i<ii;i++){var width=columns[i].width;headersWidth+=width;}
headersWidth+=scrollbarDimensions.width;return Math.max(headersWidth,viewportW)+1000;}
function getCanvasWidth(){var availableWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;var rowWidth=0;var i=columns.length;while(i--){rowWidth+=columns[i].width;}
return options.fullWidthRows?Math.max(rowWidth,availableWidth):rowWidth;}
function updateCanvasWidth(forceColumnWidthsUpdate){var oldCanvasWidth=canvasWidth;canvasWidth=getCanvasWidth();if(canvasWidth!=oldCanvasWidth){$canvas.width(canvasWidth);$headerRow.width(canvasWidth);$headers.width(getHeadersWidth());viewportHasHScroll=(canvasWidth>viewportW-scrollbarDimensions.width);}
$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0));if(canvasWidth!=oldCanvasWidth||forceColumnWidthsUpdate){applyColumnWidths();}}
function disableSelection($target){if($target&&$target.jquery){$target.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});}}
function getMaxSupportedCssHeight(){var supportedHeight=1000000;var testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(true){var test=supportedHeight*2;div.css("height",test);if(test>testUpTo||div.height()!==test){break;}else{supportedHeight=test;}}
div.remove();return supportedHeight;}
function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body&&elem!=null){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight){var $elem=$(elem);if(!$boundAncestors){$boundAncestors=$elem;}else{$boundAncestors=$boundAncestors.add($elem);}
$elem.bind("scroll."+uid,handleActiveCellPositionChange);}}}
function unbindAncestorScrollEvents(){if(!$boundAncestors){return;}
$boundAncestors.unbind("scroll."+uid);$boundAncestors=null;}
function updateColumnHeader(columnId,title,toolTip){if(!initialized){return;}
var idx=getColumnIndex(columnId);if(idx==null){return;}
var columnDef=columns[idx];var $header=$headers.children().eq(idx);if($header){if(title!==undefined){columns[idx].name=title;}
if(toolTip!==undefined){columns[idx].toolTip=toolTip;}
trigger(self.onBeforeHeaderCellDestroy,{"node":$header[0],"column":columnDef});$header.attr("title",toolTip||"").children().eq(0).html(title);trigger(self.onHeaderCellRendered,{"node":$header[0],"column":columnDef});}}
function getHeaderRow(){return $headerRow[0];}
function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0];}
function createColumnHeaders(){function onMouseEnter(){$(this).addClass("bk-ui-state-hover");}
function onMouseLeave(){$(this).removeClass("bk-ui-state-hover");}
$headers.find(".bk-slick-header-column").each(function(){var columnDef=$(this).data("column");if(columnDef){trigger(self.onBeforeHeaderCellDestroy,{"node":this,"column":columnDef});}});$headers.empty();$headers.width(getHeadersWidth());$headerRow.find(".bk-slick-headerrow-column").each(function(){var columnDef=$(this).data("column");if(columnDef){trigger(self.onBeforeHeaderRowCellDestroy,{"node":this,"column":columnDef});}});$headerRow.empty();for(var i=0;i<columns.length;i++){var m=columns[i];var header=$("<div class='bk-ui-state-default bk-slick-header-column' />").html("<span class='bk-slick-column-name'>"+m.name+"</span>").width(m.width-headerColumnWidthDiff).attr("id",""+uid+m.id).attr("title",m.toolTip||"").data("column",m).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||m.sortable){header.on('mouseenter',onMouseEnter).on('mouseleave',onMouseLeave);}
if(m.sortable){header.addClass("bk-slick-header-sortable");header.append("<span class='bk-slick-sort-indicator' />");}
trigger(self.onHeaderCellRendered,{"node":header[0],"column":m});if(options.showHeaderRow){var headerRowCell=$("<div class='bk-ui-state-default bk-slick-headerrow-column l"+i+" r"+i+"'></div>").data("column",m).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{"node":headerRowCell[0],"column":m});}}
setSortColumns(sortColumns);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder();}}
function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("bk-slick-resizable-handle")){return;}
var $col=$(e.target).closest(".bk-slick-header-column");if(!$col.length){return;}
var column=$col.data("column");if(column.sortable){if(!getEditorLock().commitCurrentEdit()){return;}
var sortOpts=null;var i=0;for(;i<sortColumns.length;i++){if(sortColumns[i].columnId==column.id){sortOpts=sortColumns[i];sortOpts.sortAsc=!sortOpts.sortAsc;break;}}
if(e.metaKey&&options.multiColumnSort){if(sortOpts){sortColumns.splice(i,1);}}
else{if((!e.shiftKey&&!e.metaKey)||!options.multiColumnSort){sortColumns=[];}
if(!sortOpts){sortOpts={columnId:column.id,sortAsc:column.defaultSortAsc};sortColumns.push(sortOpts);}else if(sortColumns.length==0){sortColumns.push(sortOpts);}}
setSortColumns(sortColumns);if(!options.multiColumnSort){trigger(self.onSort,{multiColumnSort:false,sortCol:column,sortAsc:sortOpts.sortAsc},e);}else{trigger(self.onSort,{multiColumnSort:true,sortCols:$.map(sortColumns,function(col){return{sortCol:columns[getColumnIndex(col.columnId)],sortAsc:col.sortAsc};})},e);}}});}
function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"bk-slick-sortable-placeholder bk-ui-state-default bk-slick-header-column",start:function(e,ui){ui.placeholder.width(ui.helper.outerWidth()-headerColumnWidthDiff);$(ui.helper).addClass("bk-slick-header-column-active");},beforeStop:function(e,ui){$(ui.helper).removeClass("bk-slick-header-column-active");},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return;}
var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))]);}
setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize();}});}
function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable;columnElements=$headers.children();columnElements.find(".bk-slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i;}
lastResizable=i;}});if(firstResizable===undefined){return;}
columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return;}
$col=$(e);$("<div class='bk-slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false;}
pageX=e.pageX;$(this).parent().addClass("bk-slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth();});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth;}else{stretchLeewayOnRight=null;}}
shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}}
var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth;}else{stretchLeewayOnLeft=null;}}
shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}
if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000;}
if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000;}
if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000;}
if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000;}
maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;}else{c.width=c.previousWidth+x;x=0;}}}
if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}
if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;}else{c.width=c.previousWidth+x;x=0;}}}}}
applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths();}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("bk-slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows();}}
updateCanvasWidth(true);render();trigger(self.onColumnsResized,{});});});}
function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0;});return delta;}
function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='bk-ui-state-default bk-slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;if(el.css("box-sizing")!="border-box"&&el.css("-moz-box-sizing")!="border-box"&&el.css("-webkit-box-sizing")!="border-box"){$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0;});}
el.remove();var r=$("<div class='bk-slick-row' />").appendTo($canvas);el=$("<div class='bk-slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;if(el.css("box-sizing")!="border-box"&&el.css("-moz-box-sizing")!="border-box"&&el.css("-webkit-box-sizing")!="border-box"){$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0;});}
r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff);}
function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .bk-slick-header-column { left: 1000px; }","."+uid+" .bk-slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .bk-slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .bk-slick-cell { height:"+rowHeight+"px; }","."+uid+" .bk-slick-row { height:"+options.rowHeight+"px; }"];for(var i=0;i<columns.length;i++){rules.push("."+uid+" .l"+i+" { }");rules.push("."+uid+" .r"+i+" { }");}
if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ");}else{$style[0].appendChild(document.createTextNode(rules.join(" ")));}}
function getColumnCssRules(idx){if(!stylesheet){var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break;}}
if(!stylesheet){throw new Error("Cannot find stylesheet.");}
columnCssRulesL=[];columnCssRulesR=[];var cssRules=(stylesheet.cssRules||stylesheet.rules);var matches,columnIdx;for(var i=0;i<cssRules.length;i++){var selector=cssRules[i].selectorText;if(matches=/\.l\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesL[columnIdx]=cssRules[i];}else if(matches=/\.r\d+/.exec(selector)){columnIdx=parseInt(matches[0].substr(2,matches[0].length-2),10);columnCssRulesR[columnIdx]=cssRules[i];}}}
return{"left":columnCssRulesL[idx],"right":columnCssRulesR[idx]};}
function removeCssRules(){$style.remove();stylesheet=null;}
function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});var i=plugins.length;while(i--){unregisterPlugin(plugins[i]);}
if(options.enableColumnReorder){$headers.filter(":ui-sortable").sortable("destroy");}
unbindAncestorScrollEvents();$container.unbind(".bk-slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid);}
function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self);}
function getEditorLock(){return options.editorLock;}
function getEditController(){return editController;}
function getColumnIndex(id){return columnsById[id];}
function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,total=0,prevTotal,availWidth=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);total+=c.width;if(c.resizable){shrinkLeeway+=c.width-Math.max(c.minWidth,absoluteColumnMinWidth);}}
prevTotal=total;while(total>availWidth&&shrinkLeeway){var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];var width=widths[i];if(!c.resizable||width<=c.minWidth||width<=absoluteColumnMinWidth){continue;}
var absMinWidth=Math.max(c.minWidth,absoluteColumnMinWidth);var shrinkSize=Math.floor(shrinkProportion*(width-absMinWidth))||1;shrinkSize=Math.min(shrinkSize,width-absMinWidth);total-=shrinkSize;shrinkLeeway-=shrinkSize;widths[i]-=shrinkSize;}
if(prevTotal<=total){break;}
prevTotal=total;}
prevTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];var currentWidth=widths[i];var growSize;if(!c.resizable||c.maxWidth<=currentWidth){growSize=0;}else{growSize=Math.min(Math.floor(growProportion*currentWidth)-currentWidth,(c.maxWidth-currentWidth)||1000000)||1;}
total+=growSize;widths[i]+=growSize;}
if(prevTotal>=total){break;}
prevTotal=total;}
var reRender=false;for(i=0;i<columns.length;i++){if(columns[i].rerenderOnResize&&columns[i].width!=widths[i]){reRender=true;}
columns[i].width=widths[i];}
applyColumnHeaderWidths();updateCanvasWidth(true);if(reRender){invalidateAllRows();render();}}
function applyColumnHeaderWidths(){if(!initialized){return;}
var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff);}}
updateColumnCaches();}
function applyColumnWidths(){var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=getColumnCssRules(i);rule.left.style.left=x+"px";rule.right.style.right=(canvasWidth-x-w)+"px";x+=columns[i].width;}}
function setSortColumn(columnId,ascending){setSortColumns([{columnId:columnId,sortAsc:ascending}]);}
function setSortColumns(cols){sortColumns=cols;var headerColumnEls=$headers.children();headerColumnEls.removeClass("bk-slick-header-column-sorted").find(".bk-slick-sort-indicator").removeClass("bk-slick-sort-indicator-asc bk-slick-sort-indicator-desc");$.each(sortColumns,function(i,col){if(col.sortAsc==null){col.sortAsc=true;}
var columnIndex=getColumnIndex(col.columnId);if(columnIndex!=null){headerColumnEls.eq(columnIndex).addClass("bk-slick-header-column-sorted").find(".bk-slick-sort-indicator").addClass(col.sortAsc?"bk-slick-sort-indicator-asc":"bk-slick-sort-indicator-desc");}});}
function getSortColumns(){return sortColumns;}
function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j);hash[j]={};}
for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass;}}}}
setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e);}
function getColumns(){return columns;}
function updateColumnCaches(){columnPosLeft=[];columnPosRight=[];var x=0;for(var i=0,ii=columns.length;i<ii;i++){columnPosLeft[i]=x;columnPosRight[i]=x+columns[i].width;x+=columns[i].width;}}
function setColumns(columnDefinitions){columns=columnDefinitions;columnsById={};for(var i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;if(m.minWidth&&m.width<m.minWidth){m.width=m.minWidth;}
if(m.maxWidth&&m.width>m.maxWidth){m.width=m.maxWidth;}}
updateColumnCaches();if(initialized){invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeCanvas();applyColumnWidths();handleScroll();}}
function getOptions(){return options;}
function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return;}
makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength());}
options=$.extend(options,args);validateAndEnforceOptions();$viewport.css("overflow-y",options.autoHeight?"hidden":"auto");render();}
function validateAndEnforceOptions(){if(options.autoHeight){options.leaveSpaceForNewRows=false;}}
function setData(newData,scrollToTop){data=newData;invalidateAllRows();updateRowCount();if(scrollToTop){scrollTo(0);}}
function getData(){return data;}
function getDataLength(){if(data.getLength){return data.getLength();}else{return data.length;}}
function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0);}
function getDataItem(i){if(data.getItem){return data.getItem(i);}else{return data[i];}}
function getTopPanel(){return $topPanel[0];}
function setTopPanelVisibility(visible){if(options.showTopPanel!=visible){options.showTopPanel=visible;if(visible){$topPanelScroller.slideDown("fast",resizeCanvas);}else{$topPanelScroller.slideUp("fast",resizeCanvas);}}}
function setHeaderRowVisibility(visible){if(options.showHeaderRow!=visible){options.showHeaderRow=visible;if(visible){$headerRowScroller.slideDown("fast",resizeCanvas);}else{$headerRowScroller.slideUp("fast",resizeCanvas);}}}
function getContainerNode(){return $container.get(0);}
function getRowTop(row){return options.rowHeight*row-offset;}
function getRowFromPosition(y){return Math.floor((y+offset)/options.rowHeight);}
function scrollTo(y){y=Math.max(y,0);y=Math.min(y,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range);updateRowPositions();}
if(prevScrollTop!=newScrollTop){vScrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{});}}
function defaultFormatter(row,cell,value,columnDef,dataContext){if(value==null){return"";}else{return(value+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}}
function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);var formatter=(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||options.defaultFormatter;if(formatter.format!==undefined){var model=formatter;var format=function foo(row,cell,value,columnDef,dataContext){return model.format(row,cell,value,columnDef,dataContext);}
formatter=format}
return formatter;}
function getEditor(row,cell){var editor;var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){editor=columnMetadata[column.id].editor;}else if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){editor=columnMetadata[cell].editor;}else{editor=column.editor||(options.editorFactory&&options.editorFactory.getEditor(column));}
if(editor.default_view!==undefined){editor=editor.default_view;}
return editor;}
function getDataItemValueForColumn(item,columnDef){if(options.dataItemColumnValueExtractor){return options.dataItemColumnValueExtractor(item,columnDef);}
return item[columnDef.field];}
function appendRowHtml(stringArray,row,range,dataLength){var d=getDataItem(row);var dataLoading=row<dataLength&&!d;var rowCss="bk-slick-row"+
(dataLoading?" loading":"")+
(row===activeRow?" active":"")+
(row%2==1?" odd":" even");if(!d){rowCss+=" "+options.addNewRowCssClass;}
var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses;}
stringArray.push("<div class='bk-ui-widget-content "+rowCss+"' style='top:"+getRowTop(row)+"px'>");var colspan,m;for(var i=0,ii=columns.length;i<ii;i++){m=columns[i];colspan=1;if(metadata&&metadata.columns){var columnData=metadata.columns[m.id]||metadata.columns[i];colspan=(columnData&&columnData.colspan)||1;if(colspan==="*"){colspan=ii-i;}}
if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){if(columnPosLeft[i]>range.rightPx){break;}
appendCellHtml(stringArray,row,i,colspan,d);}
if(colspan>1){i+=(colspan-1);}}
stringArray.push("</div>");}
function appendCellHtml(stringArray,row,cell,colspan,item){var m=columns[cell];var cellCss="bk-slick-cell l"+cell+" r"+Math.min(columns.length-1,cell+colspan-1)+
(m.cssClass?" "+m.cssClass:"");if(row===activeRow&&cell===activeCell){cellCss+=(" active");}
for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id]);}}
stringArray.push("<div class='"+cellCss+"'>");if(item){var value=getDataItemValueForColumn(item,m);stringArray.push(getFormatter(row,m)(row,cell,value,m,item));}
stringArray.push("</div>");rowsCache[row].cellRenderQueue.push(cell);rowsCache[row].cellColSpans[cell]=colspan;}
function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i);}}}
function invalidate(){updateRowCount();invalidateAllRows();render();}
function invalidateAllRows(){if(currentEditor){makeActiveCellNormal();}
for(var row in rowsCache){removeRowFromCache(row);}}
function removeRowFromCache(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return;}
if(rowNodeFromLastMouseWheelEvent==cacheEntry.rowNode){cacheEntry.rowNode.style.display='none';zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent;}else{$canvas[0].removeChild(cacheEntry.rowNode);}
delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++;}
function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return;}
vScrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===rows[i]){makeActiveCellNormal();}
if(rowsCache[rows[i]]){removeRowFromCache(rows[i]);}}}
function invalidateRow(row){invalidateRows([row]);}
function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return;}
var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d);}else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,getDataItemValueForColumn(d,m),m,d):"";invalidatePostProcessingResults(row);}}
function updateRow(row){var cacheEntry=rowsCache[row];if(!cacheEntry){return;}
ensureCellNodesInRowsCache(row);var d=getDataItem(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){continue;}
columnIdx=columnIdx|0;var m=columns[columnIdx],node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(row===activeRow&&columnIdx===activeCell&&currentEditor){currentEditor.loadValue(d);}else if(d){node.innerHTML=getFormatter(row,m)(row,columnIdx,getDataItemValueForColumn(d,m),m,d);}else{node.innerHTML="";}}
invalidatePostProcessingResults(row);}
function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-
parseFloat($.css($container[0],"paddingTop",true))-
parseFloat($.css($container[0],"paddingBottom",true))-
parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-
(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-
(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0);}
function resizeCanvas(){if(!initialized){return;}
if(options.autoHeight){viewportH=options.rowHeight*getDataLengthIncludingAddNew();}else{viewportH=getViewportHeight();}
numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));if(!options.autoHeight){$viewport.height(viewportH);}
if(options.forceFitColumns){autosizeColumns();}
updateRowCount();handleScroll();lastRenderedScrollLeft=-1;render();}
function updateRowCount(){if(!initialized){return;}
var dataLengthIncludingAddNew=getDataLengthIncludingAddNew();var numberOfRows=dataLengthIncludingAddNew+
(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldViewportHasVScroll=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&(numberOfRows*options.rowHeight>viewportH);makeActiveCellNormal();var l=dataLengthIncludingAddNew-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i);}}
if(activeCellNode&&activeRow>l){resetActiveCell();}
var oldH=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0;}else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1);}
if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop;}
var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0;}else if(oldScrollTopInRange){scrollTo(scrollTop+offset);}else{scrollTo(th-viewportH);}
if(h!=oldH&&options.autoHeight){resizeCanvas();}
if(options.forceFitColumns&&oldViewportHasVScroll!=viewportHasVScroll){autosizeColumns();}
updateCanvasWidth(false);}
function getVisibleRange(viewportTop,viewportLeft){if(viewportTop==null){viewportTop=scrollTop;}
if(viewportLeft==null){viewportLeft=scrollLeft;}
return{top:getRowFromPosition(viewportTop),bottom:getRowFromPosition(viewportTop+viewportH)+1,leftPx:viewportLeft,rightPx:viewportLeft+viewportW};}
function getRenderedRange(viewportTop,viewportLeft){var range=getVisibleRange(viewportTop,viewportLeft);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(vScrollDir==-1){range.top-=buffer;range.bottom+=minBuffer;}else if(vScrollDir==1){range.top-=minBuffer;range.bottom+=buffer;}else{range.top-=minBuffer;range.bottom+=minBuffer;}
range.top=Math.max(0,range.top);range.bottom=Math.min(getDataLengthIncludingAddNew()-1,range.bottom);range.leftPx-=viewportW;range.rightPx+=viewportW;range.leftPx=Math.max(0,range.leftPx);range.rightPx=Math.min(canvasWidth,range.rightPx);return range;}
function ensureCellNodesInRowsCache(row){var cacheEntry=rowsCache[row];if(cacheEntry){if(cacheEntry.cellRenderQueue.length){var lastChild=cacheEntry.rowNode.lastChild;while(cacheEntry.cellRenderQueue.length){var columnIdx=cacheEntry.cellRenderQueue.pop();cacheEntry.cellNodesByColumnIdx[columnIdx]=lastChild;lastChild=lastChild.previousSibling;}}}}
function cleanUpCells(range,row){var totalCellsRemoved=0;var cacheEntry=rowsCache[row];var cellsToRemove=[];for(var i in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)){continue;}
i=i|0;var colspan=cacheEntry.cellColSpans[i];if(columnPosLeft[i]>range.rightPx||columnPosRight[Math.min(columns.length-1,i+colspan-1)]<range.leftPx){if(!(row==activeRow&&i==activeCell)){cellsToRemove.push(i);}}}
var cellToRemove;while((cellToRemove=cellsToRemove.pop())!=null){cacheEntry.rowNode.removeChild(cacheEntry.cellNodesByColumnIdx[cellToRemove]);delete cacheEntry.cellColSpans[cellToRemove];delete cacheEntry.cellNodesByColumnIdx[cellToRemove];if(postProcessedRows[row]){delete postProcessedRows[row][cellToRemove];}
totalCellsRemoved++;}}
function cleanUpAndRenderCells(range){var cacheEntry;var stringArray=[];var processedRows=[];var cellsAdded;var totalCellsAdded=0;var colspan;for(var row=range.top,btm=range.bottom;row<=btm;row++){cacheEntry=rowsCache[row];if(!cacheEntry){continue;}
ensureCellNodesInRowsCache(row);cleanUpCells(range,row);cellsAdded=0;var metadata=data.getItemMetadata&&data.getItemMetadata(row);metadata=metadata&&metadata.columns;var d=getDataItem(row);for(var i=0,ii=columns.length;i<ii;i++){if(columnPosLeft[i]>range.rightPx){break;}
if((colspan=cacheEntry.cellColSpans[i])!=null){i+=(colspan>1?colspan-1:0);continue;}
colspan=1;if(metadata){var columnData=metadata[columns[i].id]||metadata[i];colspan=(columnData&&columnData.colspan)||1;if(colspan==="*"){colspan=ii-i;}}
if(columnPosRight[Math.min(ii-1,i+colspan-1)]>range.leftPx){appendCellHtml(stringArray,row,i,colspan,d);cellsAdded++;}
i+=(colspan>1?colspan-1:0);}
if(cellsAdded){totalCellsAdded+=cellsAdded;processedRows.push(row);}}
if(!stringArray.length){return;}
var x=document.createElement("div");x.innerHTML=stringArray.join("");var processedRow;var node;while((processedRow=processedRows.pop())!=null){cacheEntry=rowsCache[processedRow];var columnIdx;while((columnIdx=cacheEntry.cellRenderQueue.pop())!=null){node=x.lastChild;cacheEntry.rowNode.appendChild(node);cacheEntry.cellNodesByColumnIdx[columnIdx]=node;}}}
function renderRows(range){var parentNode=$canvas[0],stringArray=[],rows=[],needToReselectCell=false,dataLength=getDataLength();for(var i=range.top,ii=range.bottom;i<=ii;i++){if(rowsCache[i]){continue;}
renderedRows++;rows.push(i);rowsCache[i]={"rowNode":null,"cellColSpans":[],"cellNodesByColumnIdx":[],"cellRenderQueue":[]};appendRowHtml(stringArray,i,range,dataLength);if(activeCellNode&&activeRow===i){needToReselectCell=true;}
counter_rows_rendered++;}
if(!rows.length){return;}
var x=document.createElement("div");x.innerHTML=stringArray.join("");for(var i=0,ii=rows.length;i<ii;i++){rowsCache[rows[i]].rowNode=parentNode.appendChild(x.firstChild);}
if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell);}}
function startPostProcessing(){if(!options.enableAsyncPostRender){return;}
clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);}
function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing();}
function updateRowPositions(){for(var row in rowsCache){rowsCache[row].rowNode.style.top=getRowTop(row)+"px";}}
function render(){if(!initialized){return;}
var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);if(lastRenderedScrollLeft!=scrollLeft){cleanUpAndRenderCells(rendered);}
renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;lastRenderedScrollLeft=scrollLeft;h_render=null;}
function handleHeaderRowScroll(){var scrollLeft=$headerRowScroller[0].scrollLeft;if(scrollLeft!=$viewport[0].scrollLeft){$viewport[0].scrollLeft=scrollLeft;}}
function handleScroll(){scrollTop=$viewport[0].scrollTop;scrollLeft=$viewport[0].scrollLeft;var vScrollDist=Math.abs(scrollTop-prevScrollTop);var hScrollDist=Math.abs(scrollLeft-prevScrollLeft);if(hScrollDist){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft;}
if(vScrollDist){vScrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(vScrollDist<viewportH){scrollTo(scrollTop+offset);}else{var oldOffset=offset;if(h==viewportH){page=0;}else{page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));}
offset=Math.round(page*cj);if(oldOffset!=offset){invalidateAllRows();}}}
if(hScrollDist||vScrollDist){if(h_render){clearTimeout(h_render);}
if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20){if(options.forceSyncScrolling||(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW)){render();}else{h_render=setTimeout(render,50);}
trigger(self.onViewportChanged,{});}}
trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop});}
function asyncPostProcessRows(){var dataLength=getDataLength();while(postProcessFromRow<=postProcessToRow){var row=(vScrollDir>=0)?postProcessFromRow++:postProcessToRow--;var cacheEntry=rowsCache[row];if(!cacheEntry||row>=dataLength){continue;}
if(!postProcessedRows[row]){postProcessedRows[row]={};}
ensureCellNodesInRowsCache(row);for(var columnIdx in cacheEntry.cellNodesByColumnIdx){if(!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)){continue;}
columnIdx=columnIdx|0;var m=columns[columnIdx];if(m.asyncPostRender&&!postProcessedRows[row][columnIdx]){var node=cacheEntry.cellNodesByColumnIdx[columnIdx];if(node){m.asyncPostRender(node,row,getDataItem(row),m);}
postProcessedRows[row][columnIdx]=true;}}
h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return;}}
function updateCellCssStylesOnRenderedRows(addedHash,removedHash){var node,columnId,addedRowHash,removedRowHash;for(var row in rowsCache){removedRowHash=removedHash&&removedHash[row];addedRowHash=addedHash&&addedHash[row];if(removedRowHash){for(columnId in removedRowHash){if(!addedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(removedRowHash[columnId]);}}}}
if(addedRowHash){for(columnId in addedRowHash){if(!removedRowHash||removedRowHash[columnId]!=addedRowHash[columnId]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(addedRowHash[columnId]);}}}}}}
function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists.";}
cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,null);trigger(self.onCellCssStylesChanged,{"key":key,"hash":hash});}
function removeCellCssStyles(key){if(!cellCssClasses[key]){return;}
updateCellCssStylesOnRenderedRows(null,cellCssClasses[key]);delete cellCssClasses[key];trigger(self.onCellCssStylesChanged,{"key":key,"hash":null});}
function setCellCssStyles(key,hash){var prevHash=cellCssClasses[key];cellCssClasses[key]=hash;updateCellCssStylesOnRenderedRows(hash,prevHash);trigger(self.onCellCssStylesChanged,{"key":key,"hash":hash});}
function getCellCssStyles(key){return cellCssClasses[key];}
function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));var toggleCellClass=function foo(times){if(!times){return;}
setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1);});},speed);}
toggleCellClass(4);}}
function handleMouseWheel(e){var rowNode=$(e.target).closest(".bk-slick-row")[0];if(rowNode!=rowNodeFromLastMouseWheelEvent){if(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=rowNode){$canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent);zombieRowNodeFromLastMouseWheelEvent=null;}
rowNodeFromLastMouseWheelEvent=rowNode;}}
function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false;}
var retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval;}
return false;}
function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false;}
var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval;}
return false;}
function handleDrag(e,dd){return trigger(self.onDrag,dd,e);}
function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e);}
function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return;}
cancelEditAndSetFocus();}else if(e.which==34){navigatePageDown();handled=true;}else if(e.which==33){navigatePageUp();handled=true;}else if(e.which==37){handled=navigateLeft();}else if(e.which==39){handled=navigateRight();}else if(e.which==38){handled=navigateUp();}else if(e.which==40){handled=navigateDown();}else if(e.which==9){handled=navigateNext();}else if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown();}else{commitEditAndSetFocus();}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable();}}}
handled=true;}}else if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){handled=navigatePrev();}}
if(handled){e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0;}
catch(error){}}}
function handleClick(e){if(!currentEditor){if(e.target!=document.activeElement||$(e.target).hasClass("bk-slick-cell")){setFocus();}}
var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;}
trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}
if((activeCell!=cell.cell||activeRow!=cell.row)&&canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell));}}}
function handleContextMenu(e){var $cell=$(e.target).closest(".bk-slick-cell",$canvas);if($cell.length===0){return;}
if(activeCellNode===$cell[0]&&currentEditor!==null){return;}
trigger(self.onContextMenu,{},e);}
function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;}
trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}
if(options.editable){gotoCell(cell.row,cell.cell,true);}}
function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{"column":$(this).data("column")},e);}
function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{"column":$(this).data("column")},e);}
function handleHeaderContextMenu(e){var $header=$(e.target).closest(".bk-slick-header-column",".bk-slick-header-columns");var column=$header&&$header.data("column");trigger(self.onHeaderContextMenu,{column:column},e);}
function handleHeaderClick(e){var $header=$(e.target).closest(".bk-slick-header-column",".bk-slick-header-columns");var column=$header&&$header.data("column");if(column){trigger(self.onHeaderClick,{column:column},e);}}
function handleMouseEnter(e){trigger(self.onMouseEnter,{},e);}
function handleMouseLeave(e){trigger(self.onMouseLeave,{},e);}
function cellExists(row,cell){return!(row<0||row>=getDataLength()||cell<0||cell>=columns.length);}
function getCellFromPoint(x,y){var row=getRowFromPosition(y);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++;}
if(cell<0){cell=0;}
return{row:row,cell:cell-1};}
function getCellFromNode(cellNode){var cls=/l\d+/.exec(cellNode.className);if(!cls){throw"getCellFromNode: cannot get cell - "+cellNode.className;}
return parseInt(cls[0].substr(1,cls[0].length-1),10);}
function getRowFromNode(rowNode){for(var row in rowsCache){if(rowsCache[row].rowNode===rowNode){return row|0;}}
return null;}
function getCellFromEvent(e){var $cell=$(e.target).closest(".bk-slick-cell",$canvas);if(!$cell.length){return null;}
var row=getRowFromNode($cell[0].parentNode);var cell=getCellFromNode($cell[0]);if(row==null||cell==null){return null;}else{return{"row":row,"cell":cell};}}
function getCellNodeBox(row,cell){if(!cellExists(row,cell)){return null;}
var y1=getRowTop(row);var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width;}
var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2};}
function resetActiveCell(){setActiveCellInternal(null,false);}
function setFocus(){if(tabbingDirection==-1){$focusSink[0].focus();}else{$focusSink2[0].focus();}}
function scrollCellIntoView(row,cell,doPaging){scrollRowIntoView(row,doPaging);var colspan=getColspan(row,cell);var left=columnPosLeft[cell],right=columnPosRight[cell+(colspan>1?colspan-1:0)],scrollRight=scrollLeft+viewportW;if(left<scrollLeft){$viewport.scrollLeft(left);handleScroll();render();}else if(right>scrollRight){$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth));handleScroll();render();}}
function setActiveCellInternal(newCell,opt_editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active");if(rowsCache[activeRow]){$(rowsCache[activeRow].rowNode).removeClass("active");}}
var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=getRowFromNode(activeCellNode.parentNode);activeCell=activePosX=getCellFromNode(activeCellNode);if(opt_editMode==null){opt_editMode=(activeRow==getDataLength())||options.autoEdit;}
$(activeCellNode).addClass("active");$(rowsCache[activeRow].rowNode).addClass("active");if(options.editable&&opt_editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable();},options.asyncEditorLoadDelay);}else{makeActiveCellEditable();}}}else{activeRow=activeCell=null;}
if(activeCellChanged){trigger(self.onActiveCellChanged,getActiveCell());}}
function clearTextSelection(){if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(e){}}else if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges();}}}
function isCellPotentiallyEditable(row,cell){var dataLength=getDataLength();if(row<dataLength&&!getDataItem(row)){return false;}
if(columns[cell].cannotTriggerInsert&&row>=dataLength){return false;}
if(!getEditor(row,cell)){return false;}
return true;}
function makeActiveCellNormal(){if(!currentEditor){return;}
trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){var d=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(d){var column=columns[activeCell];var formatter=getFormatter(activeRow,column);activeCellNode.innerHTML=formatter(activeRow,activeCell,getDataItemValueForColumn(d,column),column,d);invalidatePostProcessingResults(activeRow);}}
if(navigator.userAgent.toLowerCase().match(/msie/)){clearTextSelection();}
getEditorLock().deactivate(editController);}
function makeActiveCellEditable(editor){if(!activeCellNode){return;}
if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";}
clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return;}
var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return;}
getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML="";}
currentEditor=new(editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item){currentEditor.loadValue(item);}
serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position){handleActiveCellPositionChange();}}
function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown();}}}
function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus();}}
function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible"){box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight;}
if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible"){box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth;}
box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent;}
box.bottom=box.top+box.height;box.right=box.left+box.width;}
return box;}
function getActiveCellPosition(){return absBox(activeCellNode);}
function getGridPosition(){return absBox($container[0])}
function handleActiveCellPositionChange(){if(!activeCellNode){return;}
trigger(self.onActiveCellPositionChanged,{});if(currentEditor){var cellBox=getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible){currentEditor.hide();}else{currentEditor.show();}}
if(currentEditor.position){currentEditor.position(cellBox);}}}
function getCellEditor(){return currentEditor;}
function getActiveCell(){if(!activeCellNode){return null;}else{return{row:activeRow,cell:activeCell};}}
function getActiveCellNode(){return activeCellNode;}
function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render();}
else if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render();}}
function scrollRowToTop(row){scrollTo(row*options.rowHeight);render();}
function scrollPage(dir){var deltaRows=dir*numVisibleRows;scrollTo((getRowFromPosition(scrollTop)+deltaRows)*options.rowHeight);render();if(options.enableCellNavigation&&activeRow!=null){var row=activeRow+deltaRows;var dataLengthIncludingAddNew=getDataLengthIncludingAddNew();if(row>=dataLengthIncludingAddNew){row=dataLengthIncludingAddNew-1;}
if(row<0){row=0;}
var cell=0,prevCell=null;var prevActivePosX=activePosX;while(cell<=activePosX){if(canCellBeActive(row,cell)){prevCell=cell;}
cell+=getColspan(row,cell);}
if(prevCell!==null){setActiveCellInternal(getCellNode(row,prevCell));activePosX=prevActivePosX;}else{resetActiveCell();}}}
function navigatePageDown(){scrollPage(1);}
function navigatePageUp(){scrollPage(-1);}
function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1;}
var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell;}else{colspan=colspan||1;}
return colspan;}
function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell;}
cell+=getColspan(row,cell);}
return null;}
function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell;}
cell+=getColspan(row,cell);}
return lastFocusableCell;}
function gotoRight(row,cell,posX){if(cell>=columns.length){return null;}
do{cell+=getColspan(row,cell);}
while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{"row":row,"cell":cell,"posX":cell};}
return null;}
function gotoLeft(row,cell,posX){if(cell<=0){return null;}
var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null;}
var prev={"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null;}
if(pos.cell>=cell){return prev;}
prev=pos;}}
function gotoDown(row,cell,posX){var prevCell;var dataLengthIncludingAddNew=getDataLengthIncludingAddNew();while(true){if(++row>=dataLengthIncludingAddNew){return null;}
prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);}
if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}
function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null;}
prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);}
if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}
function gotoNext(row,cell,posX){if(row==null&&cell==null){row=cell=posX=0;if(canCellBeActive(row,cell)){return{"row":row,"cell":cell,"posX":cell};}}
var pos=gotoRight(row,cell,posX);if(pos){return pos;}
var firstFocusableCell=null;var dataLengthIncludingAddNew=getDataLengthIncludingAddNew();while(++row<dataLengthIncludingAddNew){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};}}
return null;}
function gotoPrev(row,cell,posX){if(row==null&&cell==null){row=getDataLengthIncludingAddNew()-1;cell=posX=columns.length-1;if(canCellBeActive(row,cell)){return{"row":row,"cell":cell,"posX":cell};}}
var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break;}
if(--row<0){return null;}
cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={"row":row,"cell":lastSelectableCell,"posX":lastSelectableCell};}}
return pos;}
function navigateRight(){return navigate("right");}
function navigateLeft(){return navigate("left");}
function navigateDown(){return navigate("down");}
function navigateUp(){return navigate("up");}
function navigateNext(){return navigate("next");}
function navigatePrev(){return navigate("prev");}
function navigate(dir){if(!options.enableCellNavigation){return false;}
if(!activeCellNode&&dir!="prev"&&dir!="next"){return false;}
if(!getEditorLock().commitCurrentEdit()){return true;}
setFocus();var tabbingDirections={"up":-1,"down":1,"left":-1,"right":1,"prev":-1,"next":1};tabbingDirection=tabbingDirections[dir];var stepFunctions={"up":gotoUp,"down":gotoDown,"left":gotoLeft,"right":gotoRight,"prev":gotoPrev,"next":gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollCellIntoView(pos.row,pos.cell,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell));activePosX=pos.posX;return true;}else{setActiveCellInternal(getCellNode(activeRow,activeCell));return false;}}
function getCellNode(row,cell){if(rowsCache[row]){ensureCellNodesInRowsCache(row);return rowsCache[row].cellNodesByColumnIdx[cell];}
return null;}
function setActiveCell(row,cell){if(!initialized){return;}
if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return;}
if(!options.enableCellNavigation){return;}
scrollCellIntoView(row,cell,false);setActiveCellInternal(getCellNode(row,cell),false);}
function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLengthIncludingAddNew()||row<0||cell>=columns.length||cell<0){return false;}
var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable;}
var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable;}
if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable;}
return columns[cell].focusable;}
function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false;}
var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable;}
var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable;}
return columns[cell].selectable;}
function gotoCell(row,cell,forceEdit){if(!initialized){return;}
if(!canCellBeActive(row,cell)){return;}
if(!getEditorLock().commitCurrentEdit()){return;}
scrollCellIntoView(row,cell,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus();}}
function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row);trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item});},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row);trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item});}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand);}else{editCommand.execute();makeActiveCellNormal();}}else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column});}
return!getEditorLock().isActive();}else{$(activeCellNode).removeClass("invalid");$(activeCellNode).width();$(activeCellNode).addClass("invalid");trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false;}}
makeActiveCellNormal();}
return true;}
function cancelCurrentEdit(){makeActiveCellNormal();return true;}
function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));}
return ranges;}
function getSelectedRows(){if(!selectionModel){throw"Selection model is not set";}
return selectedRows;}
function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set";}
selectionModel.setSelectedRanges(rowsToRanges(rows));}
this.debug=function(){var s="";s+=("\n"+"counter_rows_rendered:  "+counter_rows_rendered);s+=("\n"+"counter_rows_removed:  "+counter_rows_removed);s+=("\n"+"renderedRows:  "+renderedRows);s+=("\n"+"numVisibleRows:  "+numVisibleRows);s+=("\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight);s+=("\n"+"n(umber of pages):  "+n);s+=("\n"+"(current) page:  "+page);s+=("\n"+"page height (ph):  "+ph);s+=("\n"+"vScrollDir:  "+vScrollDir);alert(s);};this.eval=function(expr){return eval(expr);};$.extend(this,{"slickGridVersion":"2.1","onScroll":new Slick.Event(),"onSort":new Slick.Event(),"onHeaderMouseEnter":new Slick.Event(),"onHeaderMouseLeave":new Slick.Event(),"onHeaderContextMenu":new Slick.Event(),"onHeaderClick":new Slick.Event(),"onHeaderCellRendered":new Slick.Event(),"onBeforeHeaderCellDestroy":new Slick.Event(),"onHeaderRowCellRendered":new Slick.Event(),"onBeforeHeaderRowCellDestroy":new Slick.Event(),"onMouseEnter":new Slick.Event(),"onMouseLeave":new Slick.Event(),"onClick":new Slick.Event(),"onDblClick":new Slick.Event(),"onContextMenu":new Slick.Event(),"onKeyDown":new Slick.Event(),"onAddNewRow":new Slick.Event(),"onValidationError":new Slick.Event(),"onViewportChanged":new Slick.Event(),"onColumnsReordered":new Slick.Event(),"onColumnsResized":new Slick.Event(),"onCellChange":new Slick.Event(),"onBeforeEditCell":new Slick.Event(),"onBeforeCellEditorDestroy":new Slick.Event(),"onBeforeDestroy":new Slick.Event(),"onActiveCellChanged":new Slick.Event(),"onActiveCellPositionChanged":new Slick.Event(),"onDragInit":new Slick.Event(),"onDragStart":new Slick.Event(),"onDrag":new Slick.Event(),"onDragEnd":new Slick.Event(),"onSelectedRowsChanged":new Slick.Event(),"onCellCssStylesChanged":new Slick.Event(),"registerPlugin":registerPlugin,"unregisterPlugin":unregisterPlugin,"getColumns":getColumns,"setColumns":setColumns,"getColumnIndex":getColumnIndex,"updateColumnHeader":updateColumnHeader,"setSortColumn":setSortColumn,"setSortColumns":setSortColumns,"getSortColumns":getSortColumns,"autosizeColumns":autosizeColumns,"getOptions":getOptions,"setOptions":setOptions,"getData":getData,"getDataLength":getDataLength,"getDataItem":getDataItem,"setData":setData,"getSelectionModel":getSelectionModel,"setSelectionModel":setSelectionModel,"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getContainerNode":getContainerNode,"render":render,"invalidate":invalidate,"invalidateRow":invalidateRow,"invalidateRows":invalidateRows,"invalidateAllRows":invalidateAllRows,"updateCell":updateCell,"updateRow":updateRow,"getViewport":getVisibleRange,"getRenderedRange":getRenderedRange,"resizeCanvas":resizeCanvas,"updateRowCount":updateRowCount,"scrollRowIntoView":scrollRowIntoView,"scrollRowToTop":scrollRowToTop,"scrollCellIntoView":scrollCellIntoView,"getCanvasNode":getCanvasNode,"focus":setFocus,"getCellFromPoint":getCellFromPoint,"getCellFromEvent":getCellFromEvent,"getActiveCell":getActiveCell,"setActiveCell":setActiveCell,"getActiveCellNode":getActiveCellNode,"getActiveCellPosition":getActiveCellPosition,"resetActiveCell":resetActiveCell,"editActiveCell":makeActiveCellEditable,"getCellEditor":getCellEditor,"getCellNode":getCellNode,"getCellNodeBox":getCellNodeBox,"canCellBeSelected":canCellBeSelected,"canCellBeActive":canCellBeActive,"navigatePrev":navigatePrev,"navigateNext":navigateNext,"navigateUp":navigateUp,"navigateDown":navigateDown,"navigateLeft":navigateLeft,"navigateRight":navigateRight,"navigatePageUp":navigatePageUp,"navigatePageDown":navigatePageDown,"gotoCell":gotoCell,"getTopPanel":getTopPanel,"setTopPanelVisibility":setTopPanelVisibility,"setHeaderRowVisibility":setHeaderRowVisibility,"getHeaderRow":getHeaderRow,"getHeaderRowColumn":getHeaderRowColumn,"getGridPosition":getGridPosition,"flashCell":flashCell,"addCellCssStyles":addCellCssStyles,"setCellCssStyles":setCellCssStyles,"removeCellCssStyles":removeCellCssStyles,"getCellCssStyles":getCellCssStyles,"init":finishInitialization,"destroy":destroy,"getEditorLock":getEditorLock,"getEditController":getEditController});init();}
module.exports=SlickGrid;},{"./slick.core":"slick_grid/slick.core","jquery":"jquery","jquery_event_drag":"jquery_event_drag","jquery_event_drop":"jquery_event_drop"}]},{},["models/widgets/main"])})()/*! loglevel - v1.4.1 - https://github.com/pimterry/loglevel - (c) 2016 Tim Perry - licensed MIT */

(function(root,definition){"use strict";if(typeof define==='function'&&define.amd){define(definition);}else if(typeof module==='object'&&module.exports){module.exports=definition();}else{root.log=definition();}}(this,function(){"use strict";var noop=function(){};var undefinedType="undefined";function realMethod(methodName){if(typeof console===undefinedType){return false;}else if(console[methodName]!==undefined){return bindMethod(console,methodName);}else if(console.log!==undefined){return bindMethod(console,'log');}else{return noop;}}
function bindMethod(obj,methodName){var method=obj[methodName];if(typeof method.bind==='function'){return method.bind(obj);}else{try{return Function.prototype.bind.call(method,obj);}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments]);};}}}
function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){if(typeof console!==undefinedType){replaceLoggingMethods.call(this,level,loggerName);this[methodName].apply(this,arguments);}};}
function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=(i<level)?noop:this.methodFactory(methodName,level,loggerName);}}
function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments);}
var logMethods=["trace","debug","info","warn","error"];function Logger(name,defaultLevel,factory){var self=this;var currentLevel;var storageKey="loglevel";if(name){storageKey+=":"+name;}
function persistLevelIfPossible(levelNum){var levelName=(logMethods[levelNum]||'silent').toUpperCase();try{window.localStorage[storageKey]=levelName;return;}catch(ignore){}
try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";";}catch(ignore){}}
function getPersistedLevel(){var storedLevel;try{storedLevel=window.localStorage[storageKey];}catch(ignore){}
if(typeof storedLevel===undefinedType){try{var cookie=window.document.cookie;var location=cookie.indexOf(encodeURIComponent(storageKey)+"=");if(location){storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1];}}catch(ignore){}}
if(self.levels[storedLevel]===undefined){storedLevel=undefined;}
return storedLevel;}
self.levels={"TRACE":0,"DEBUG":1,"INFO":2,"WARN":3,"ERROR":4,"SILENT":5};self.methodFactory=factory||defaultMethodFactory;self.getLevel=function(){return currentLevel;};self.setLevel=function(level,persist){if(typeof level==="string"&&self.levels[level.toUpperCase()]!==undefined){level=self.levels[level.toUpperCase()];}
if(typeof level==="number"&&level>=0&&level<=self.levels.SILENT){currentLevel=level;if(persist!==false){persistLevelIfPossible(level);}
replaceLoggingMethods.call(self,level,name);if(typeof console===undefinedType&&level<self.levels.SILENT){return"No console available for logging";}}else{throw"log.setLevel() called with invalid level: "+level;}};self.setDefaultLevel=function(level){if(!getPersistedLevel()){self.setLevel(level,false);}};self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist);};self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist);};var initialLevel=getPersistedLevel();if(initialLevel==null){initialLevel=defaultLevel==null?"WARN":defaultLevel;}
self.setLevel(initialLevel,false);}
var defaultLogger=new Logger();var _loggersByName={};defaultLogger.getLogger=function getLogger(name){if(typeof name!=="string"||name===""){throw new TypeError("You must supply a name when creating a logger.");}
var logger=_loggersByName[name];if(!logger){logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory);}
return logger;};var _log=(typeof window!==undefinedType)?window.log:undefined;defaultLogger.noConflict=function(){if(typeof window!==undefinedType&&window.log===defaultLogger){window.log=_log;}
return defaultLogger;};return defaultLogger;}));